/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function e(n,t){for(var r=null==n?0:n.length;r--&&t(n[r],r,n)!==!1;);return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;
return!0}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!!(null==n?0:n.length)&&y(n,t,0)>-1}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);
return r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function p(n){return n.split("")}function _(n){return n.match(Bt)||[]}function v(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function g(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function y(n,t,r){return t===t?q(n,t,r):g(n,b,r)}function d(n,t,r,e){
for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function b(n){return n!==n}function w(n,t){var r=null==n?0:n.length;return r?k(n,t)/r:Sn}function m(n){return function(t){return null==t?Y:t[n]}}function x(n){return function(t){return null==n?Y:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function A(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function k(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==Y&&(r=r===Y?i:r+i);
}return r}function O(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function I(n,t){return c(t,function(t){return[t,n[t]]})}function R(n){return function(t){return n(t)}}function z(n,t){return c(t,function(t){return n[t]})}function E(n,t){return n.has(t)}function S(n,t){for(var r=-1,e=n.length;++r<e&&y(t,n[r],0)>-1;);return r}function W(n,t){for(var r=n.length;r--&&y(t,n[r],0)>-1;);return r}function L(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}function C(n){return"\\"+Gr[n]}function U(n,t){
return null==n?Y:n[t]}function B(n){return Dr.test(n)}function T(n){return Mr.test(n)}function $(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}function D(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function M(n,t){return function(r){return n(t(r))}}function F(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==un||(n[r]=un,i[u++]=r)}return i}function N(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function P(n){
var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function q(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function Z(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}function K(n){return B(n)?G(n):se(n)}function V(n){return B(n)?H(n):p(n)}function G(n){for(var t=Tr.lastIndex=0;Tr.test(n);)++t;return t}function H(n){return n.match(Tr)||[]}function J(n){return n.match($r)||[]}var Y,Q="4.17.20",X=200,nn="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",tn="Expected a function",rn="__lodash_hash_undefined__",en=500,un="__lodash_placeholder__",on=1,fn=2,cn=4,an=1,ln=2,sn=1,hn=2,pn=4,_n=8,vn=16,gn=32,yn=64,dn=128,bn=256,wn=512,mn=30,xn="...",jn=800,An=16,kn=1,On=2,In=3,Rn=1/0,zn=9007199254740991,En=1.7976931348623157e308,Sn=NaN,Wn=4294967295,Ln=Wn-1,Cn=Wn>>>1,Un=[["ary",dn],["bind",sn],["bindKey",hn],["curry",_n],["curryRight",vn],["flip",wn],["partial",gn],["partialRight",yn],["rearg",bn]],Bn="[object Arguments]",Tn="[object Array]",$n="[object AsyncFunction]",Dn="[object Boolean]",Mn="[object Date]",Fn="[object DOMException]",Nn="[object Error]",Pn="[object Function]",qn="[object GeneratorFunction]",Zn="[object Map]",Kn="[object Number]",Vn="[object Null]",Gn="[object Object]",Hn="[object Promise]",Jn="[object Proxy]",Yn="[object RegExp]",Qn="[object Set]",Xn="[object String]",nt="[object Symbol]",tt="[object Undefined]",rt="[object WeakMap]",et="[object WeakSet]",ut="[object ArrayBuffer]",it="[object DataView]",ot="[object Float32Array]",ft="[object Float64Array]",ct="[object Int8Array]",at="[object Int16Array]",lt="[object Int32Array]",st="[object Uint8Array]",ht="[object Uint8ClampedArray]",pt="[object Uint16Array]",_t="[object Uint32Array]",vt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,dt=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,wt=RegExp(dt.source),mt=RegExp(bt.source),xt=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/,It=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(Rt.source),Et=/^\s+|\s+$/g,St=/^\s+/,Wt=/\s+$/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ct=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tt=/\\(\\)?/g,$t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,Mt=/^[-+]0x[0-9a-f]+$/i,Ft=/^0b[01]+$/i,Nt=/^\[object .+?Constructor\]$/,Pt=/^0o[0-7]+$/i,qt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Vt=/['\n\r\u2028\u2029\\]/g,Gt="\\ud800-\\udfff",Ht="\\u0300-\\u036f",Jt="\\ufe20-\\ufe2f",Yt="\\u20d0-\\u20ff",Qt=Ht+Jt+Yt,Xt="\\u2700-\\u27bf",nr="a-z\\xdf-\\xf6\\xf8-\\xff",tr="\\xac\\xb1\\xd7\\xf7",rr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",er="\\u2000-\\u206f",ur=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ir="A-Z\\xc0-\\xd6\\xd8-\\xde",or="\\ufe0e\\ufe0f",fr=tr+rr+er+ur,cr="['\u2019]",ar="["+Gt+"]",lr="["+fr+"]",sr="["+Qt+"]",hr="\\d+",pr="["+Xt+"]",_r="["+nr+"]",vr="[^"+Gt+fr+hr+Xt+nr+ir+"]",gr="\\ud83c[\\udffb-\\udfff]",yr="(?:"+sr+"|"+gr+")",dr="[^"+Gt+"]",br="(?:\\ud83c[\\udde6-\\uddff]){2}",wr="[\\ud800-\\udbff][\\udc00-\\udfff]",mr="["+ir+"]",xr="\\u200d",jr="(?:"+_r+"|"+vr+")",Ar="(?:"+mr+"|"+vr+")",kr="(?:"+cr+"(?:d|ll|m|re|s|t|ve))?",Or="(?:"+cr+"(?:D|LL|M|RE|S|T|VE))?",Ir=yr+"?",Rr="["+or+"]?",zr="(?:"+xr+"(?:"+[dr,br,wr].join("|")+")"+Rr+Ir+")*",Er="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Sr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Wr=Rr+Ir+zr,Lr="(?:"+[pr,br,wr].join("|")+")"+Wr,Cr="(?:"+[dr+sr+"?",sr,br,wr,ar].join("|")+")",Ur=RegExp(cr,"g"),Br=RegExp(sr,"g"),Tr=RegExp(gr+"(?="+gr+")|"+Cr+Wr,"g"),$r=RegExp([mr+"?"+_r+"+"+kr+"(?="+[lr,mr,"$"].join("|")+")",Ar+"+"+Or+"(?="+[lr,mr+jr,"$"].join("|")+")",mr+"?"+jr+"+"+kr,mr+"+"+Or,Sr,Er,hr,Lr].join("|"),"g"),Dr=RegExp("["+xr+Gt+Qt+or+"]"),Mr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nr=-1,Pr={};
Pr[ot]=Pr[ft]=Pr[ct]=Pr[at]=Pr[lt]=Pr[st]=Pr[ht]=Pr[pt]=Pr[_t]=!0,Pr[Bn]=Pr[Tn]=Pr[ut]=Pr[Dn]=Pr[it]=Pr[Mn]=Pr[Nn]=Pr[Pn]=Pr[Zn]=Pr[Kn]=Pr[Gn]=Pr[Yn]=Pr[Qn]=Pr[Xn]=Pr[rt]=!1;var qr={};qr[Bn]=qr[Tn]=qr[ut]=qr[it]=qr[Dn]=qr[Mn]=qr[ot]=qr[ft]=qr[ct]=qr[at]=qr[lt]=qr[Zn]=qr[Kn]=qr[Gn]=qr[Yn]=qr[Qn]=qr[Xn]=qr[nt]=qr[st]=qr[ht]=qr[pt]=qr[_t]=!0,qr[Nn]=qr[Pn]=qr[rt]=!1;var Zr={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a",
"\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae",
"\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g",
"\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O",
"\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w",
"\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},Kr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hr=parseFloat,Jr=parseInt,Yr="object"==typeof global&&global&&global.Object===Object&&global,Qr="object"==typeof self&&self&&self.Object===Object&&self,Xr=Yr||Qr||Function("return this")(),ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,te=ne&&"object"==typeof module&&module&&!module.nodeType&&module,re=te&&te.exports===ne,ee=re&&Yr.process,ue=function(){
try{var n=te&&te.require&&te.require("util").types;return n?n:ee&&ee.binding&&ee.binding("util")}catch(n){}}(),ie=ue&&ue.isArrayBuffer,oe=ue&&ue.isDate,fe=ue&&ue.isMap,ce=ue&&ue.isRegExp,ae=ue&&ue.isSet,le=ue&&ue.isTypedArray,se=m("length"),he=x(Zr),pe=x(Kr),_e=x(Vr),ve=function p(x){function q(n){if(oc(n)&&!yh(n)&&!(n instanceof Bt)){if(n instanceof H)return n;if(yl.call(n,"__wrapped__"))return to(n)}return new H(n)}function G(){}function H(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,
this.__index__=0,this.__values__=Y}function Bt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wn,this.__views__=[]}function Gt(){var n=new Bt(this.__wrapped__);return n.__actions__=Uu(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Uu(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Uu(this.__views__),n}function Ht(){if(this.__filtered__){var n=new Bt(this);n.__dir__=-1,
n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Jt(){var n=this.__wrapped__.value(),t=this.__dir__,r=yh(n),e=t<0,u=r?n.length:0,i=Ai(0,u,this.__views__),o=i.start,f=i.end,c=f-o,a=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Vl(c,this.__takeCount__);if(!r||!e&&u==c&&p==c)return du(n,this.__actions__);var _=[];n:for(;c--&&h<p;){a+=t;for(var v=-1,g=n[a];++v<s;){var y=l[v],d=y.iteratee,b=y.type,w=d(g);if(b==On)g=w;else if(!w){if(b==kn)continue n;break n}}_[h++]=g}return _}function Yt(n){
var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Qt(){this.__data__=es?es(null):{},this.size=0}function Xt(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function nr(n){var t=this.__data__;if(es){var r=t[n];return r===rn?Y:r}return yl.call(t,n)?t[n]:Y}function tr(n){var t=this.__data__;return es?t[n]!==Y:yl.call(t,n)}function rr(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=es&&t===Y?rn:t,this}function er(n){
var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function ur(){this.__data__=[],this.size=0}function ir(n){var t=this.__data__,r=Er(t,n);return!(r<0)&&(r==t.length-1?t.pop():Sl.call(t,r,1),--this.size,!0)}function or(n){var t=this.__data__,r=Er(t,n);return r<0?Y:t[r][1]}function fr(n){return Er(this.__data__,n)>-1}function cr(n,t){var r=this.__data__,e=Er(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this}function ar(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){
var e=n[t];this.set(e[0],e[1])}}function lr(){this.size=0,this.__data__={hash:new Yt,map:new(Xl||er),string:new Yt}}function sr(n){var t=wi(this,n).delete(n);return this.size-=t?1:0,t}function hr(n){return wi(this,n).get(n)}function pr(n){return wi(this,n).has(n)}function _r(n,t){var r=wi(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this}function vr(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new ar;++t<r;)this.add(n[t])}function gr(n){return this.__data__.set(n,rn),this}function yr(n){
return this.__data__.has(n)}function dr(n){this.size=(this.__data__=new er(n)).size}function br(){this.__data__=new er,this.size=0}function wr(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}function mr(n){return this.__data__.get(n)}function xr(n){return this.__data__.has(n)}function jr(n,t){var r=this.__data__;if(r instanceof er){var e=r.__data__;if(!Xl||e.length<X-1)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new ar(e)}return r.set(n,t),this.size=r.size,this}function Ar(n,t){
var r=yh(n),e=!r&&gh(n),u=!r&&!e&&bh(n),i=!r&&!e&&!u&&Ah(n),o=r||e||u||i,f=o?O(n.length,ll):[],c=f.length;for(var a in n)!t&&!yl.call(n,a)||o&&("length"==a||u&&("offset"==a||"parent"==a)||i&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||Wi(a,c))||f.push(a);return f}function kr(n){var t=n.length;return t?n[Xe(0,t-1)]:Y}function Or(n,t){return Yi(Uu(n),$r(t,0,n.length))}function Ir(n){return Yi(Uu(n))}function Rr(n,t,r){(r===Y||Kf(n[t],r))&&(r!==Y||t in n)||Cr(n,t,r)}function zr(n,t,r){var e=n[t];
yl.call(n,t)&&Kf(e,r)&&(r!==Y||t in n)||Cr(n,t,r)}function Er(n,t){for(var r=n.length;r--;)if(Kf(n[r][0],t))return r;return-1}function Sr(n,t,r,e){return vs(n,function(n,u,i){t(e,n,r(n),i)}),e}function Wr(n,t){return n&&Bu(t,Fc(t),n)}function Lr(n,t){return n&&Bu(t,Nc(t),n)}function Cr(n,t,r){"__proto__"==t&&Ul?Ul(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Tr(n,t){for(var r=-1,e=t.length,u=el(e),i=null==n;++r<e;)u[r]=i?Y:$c(n,t[r]);return u}function $r(n,t,r){return n===n&&(r!==Y&&(n=n<=r?n:r),
t!==Y&&(n=n>=t?n:t)),n}function Dr(n,t,e,u,i,o){var f,c=t&on,a=t&fn,l=t&cn;if(e&&(f=i?e(n,u,i,o):e(n)),f!==Y)return f;if(!ic(n))return n;var s=yh(n);if(s){if(f=Ii(n),!c)return Uu(n,f)}else{var h=Is(n),p=h==Pn||h==qn;if(bh(n))return ku(n,c);if(h==Gn||h==Bn||p&&!i){if(f=a||p?{}:Ri(n),!c)return a?$u(n,Lr(f,n)):Tu(n,Wr(f,n))}else{if(!qr[h])return i?n:{};f=zi(n,h,c)}}o||(o=new dr);var _=o.get(n);if(_)return _;o.set(n,f),jh(n)?n.forEach(function(r){f.add(Dr(r,t,e,r,n,o))}):mh(n)&&n.forEach(function(r,u){
f.set(u,Dr(r,t,e,u,n,o))});var v=l?a?gi:vi:a?Nc:Fc,g=s?Y:v(n);return r(g||n,function(r,u){g&&(u=r,r=n[u]),zr(f,u,Dr(r,t,e,u,n,o))}),f}function Mr(n){var t=Fc(n);return function(r){return Zr(r,n,t)}}function Zr(n,t,r){var e=r.length;if(null==n)return!e;for(n=cl(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===Y&&!(u in n)||!i(o))return!1}return!0}function Kr(n,t,r){if("function"!=typeof n)throw new sl(tn);return Es(function(){n.apply(Y,r)},t)}function Vr(n,t,r,e){var u=-1,i=o,a=!0,l=n.length,s=[],h=t.length;
if(!l)return s;r&&(t=c(t,R(r))),e?(i=f,a=!1):t.length>=X&&(i=E,a=!1,t=new vr(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p);if(p=e||0!==p?p:0,a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function Gr(n,t){var r=!0;return vs(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Yr(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===Y?o===o&&!yc(o):r(o,f)))var f=o,c=i}return c}function Qr(n,t,r,e){var u=n.length;for(r=jc(r),r<0&&(r=-r>u?0:u+r),
e=e===Y||e>u?u:jc(e),e<0&&(e+=u),e=r>e?0:Ac(e);r<e;)n[r++]=t;return n}function ne(n,t){var r=[];return vs(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function te(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Si),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?te(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function ee(n,t){return n&&ys(n,t,Fc)}function ue(n,t){return n&&ds(n,t,Fc)}function se(n,t){return i(t,function(t){return rc(n[t])})}function ve(n,t){t=ju(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[Qi(t[r++])];
return r&&r==e?n:Y}function ye(n,t,r){var e=t(n);return yh(n)?e:a(e,r(n))}function de(n){return null==n?n===Y?tt:Vn:Cl&&Cl in cl(n)?ji(n):qi(n)}function be(n,t){return n>t}function we(n,t){return null!=n&&yl.call(n,t)}function me(n,t){return null!=n&&t in cl(n)}function xe(n,t,r){return n>=Vl(t,r)&&n<Kl(t,r)}function je(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=el(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,R(t))),s=Vl(p.length,s),l[a]=!r&&(t||u>=120&&p.length>=120)?new vr(a&&p):Y}p=n[0];
var _=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],y=t?t(g):g;if(g=r||0!==g?g:0,!(v?E(v,y):e(h,y,r))){for(a=i;--a;){var d=l[a];if(!(d?E(d,y):e(n[a],y,r)))continue n}v&&v.push(y),h.push(g)}}return h}function Ae(n,t,r,e){return ee(n,function(n,u,i){t(e,r(n),u,i)}),e}function ke(t,r,e){r=ju(r,t),t=Ki(t,r);var u=null==t?t:t[Qi(mo(r))];return null==u?Y:n(u,t,e)}function Oe(n){return oc(n)&&de(n)==Bn}function Ie(n){return oc(n)&&de(n)==ut}function Re(n){return oc(n)&&de(n)==Mn}function ze(n,t,r,e,u){
return n===t||(null==n||null==t||!oc(n)&&!oc(t)?n!==n&&t!==t:Ee(n,t,r,e,ze,u))}function Ee(n,t,r,e,u,i){var o=yh(n),f=yh(t),c=o?Tn:Is(n),a=f?Tn:Is(t);c=c==Bn?Gn:c,a=a==Bn?Gn:a;var l=c==Gn,s=a==Gn,h=c==a;if(h&&bh(n)){if(!bh(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new dr),o||Ah(n)?si(n,t,r,e,u,i):hi(n,t,c,r,e,u,i);if(!(r&an)){var p=l&&yl.call(n,"__wrapped__"),_=s&&yl.call(t,"__wrapped__");if(p||_){var v=p?n.value():n,g=_?t.value():t;return i||(i=new dr),u(v,g,r,e,i)}}return!!h&&(i||(i=new dr),pi(n,t,r,e,u,i));
}function Se(n){return oc(n)&&Is(n)==Zn}function We(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=cl(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){f=r[u];var c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===Y&&!(c in n))return!1}else{var s=new dr;if(e)var h=e(a,l,c,n,t,s);if(!(h===Y?ze(l,a,an|ln,e,s):h))return!1}}return!0}function Le(n){return!(!ic(n)||Ti(n))&&(rc(n)?jl:Nt).test(Xi(n))}function Ce(n){return oc(n)&&de(n)==Yn}function Ue(n){return oc(n)&&Is(n)==Qn;
}function Be(n){return oc(n)&&uc(n.length)&&!!Pr[de(n)]}function Te(n){return"function"==typeof n?n:null==n?Sa:"object"==typeof n?yh(n)?Pe(n[0],n[1]):Ne(n):Da(n)}function $e(n){if(!$i(n))return Zl(n);var t=[];for(var r in cl(n))yl.call(n,r)&&"constructor"!=r&&t.push(r);return t}function De(n){if(!ic(n))return Pi(n);var t=$i(n),r=[];for(var e in n)("constructor"!=e||!t&&yl.call(n,e))&&r.push(e);return r}function Me(n,t){return n<t}function Fe(n,t){var r=-1,e=Vf(n)?el(n.length):[];return vs(n,function(n,u,i){
e[++r]=t(n,u,i)}),e}function Ne(n){var t=mi(n);return 1==t.length&&t[0][2]?Mi(t[0][0],t[0][1]):function(r){return r===n||We(r,n,t)}}function Pe(n,t){return Ci(n)&&Di(t)?Mi(Qi(n),t):function(r){var e=$c(r,n);return e===Y&&e===t?Mc(r,n):ze(t,e,an|ln)}}function qe(n,t,r,e,u){n!==t&&ys(t,function(i,o){if(u||(u=new dr),ic(i))Ze(n,t,o,r,qe,e,u);else{var f=e?e(Gi(n,o),i,o+"",n,t,u):Y;f===Y&&(f=i),Rr(n,o,f)}},Nc)}function Ze(n,t,r,e,u,i,o){var f=Gi(n,r),c=Gi(t,r),a=o.get(c);if(a)return Rr(n,r,a),Y;var l=i?i(f,c,r+"",n,t,o):Y,s=l===Y;
if(s){var h=yh(c),p=!h&&bh(c),_=!h&&!p&&Ah(c);l=c,h||p||_?yh(f)?l=f:Gf(f)?l=Uu(f):p?(s=!1,l=ku(c,!0)):_?(s=!1,l=Eu(c,!0)):l=[]:_c(c)||gh(c)?(l=f,gh(f)?l=Oc(f):ic(f)&&!rc(f)||(l=Ri(c))):s=!1}s&&(o.set(c,l),u(l,c,e,i,o),o.delete(c)),Rr(n,r,l)}function Ke(n,t){var r=n.length;if(r)return t+=t<0?r:0,Wi(t,r)?n[t]:Y}function Ve(n,t,r){t=t.length?c(t,function(n){return yh(n)?function(t){return ve(t,1===n.length?n[0]:n)}:n}):[Sa];var e=-1;return t=c(t,R(bi())),A(Fe(n,function(n,r,u){return{criteria:c(t,function(t){
return t(n)}),index:++e,value:n}}),function(n,t){return Wu(n,t,r)})}function Ge(n,t){return He(n,t,function(t,r){return Mc(n,r)})}function He(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=ve(n,o);r(f,o)&&iu(i,ju(o,n),f)}return i}function Je(n){return function(t){return ve(t,n)}}function Ye(n,t,r,e){var u=e?d:y,i=-1,o=t.length,f=n;for(n===t&&(t=Uu(t)),r&&(f=c(n,R(r)));++i<o;)for(var a=0,l=t[i],s=r?r(l):l;(a=u(f,s,a,e))>-1;)f!==n&&Sl.call(f,a,1),Sl.call(n,a,1);return n}function Qe(n,t){for(var r=n?t.length:0,e=r-1;r--;){
var u=t[r];if(r==e||u!==i){var i=u;Wi(u)?Sl.call(n,u,1):vu(n,u)}}return n}function Xe(n,t){return n+Ml(Jl()*(t-n+1))}function nu(n,t,r,e){for(var u=-1,i=Kl(Dl((t-n)/(r||1)),0),o=el(i);i--;)o[e?i:++u]=n,n+=r;return o}function tu(n,t){var r="";if(!n||t<1||t>zn)return r;do t%2&&(r+=n),t=Ml(t/2),t&&(n+=n);while(t);return r}function ru(n,t){return Ss(Zi(n,t,Sa),n+"")}function eu(n){return kr(na(n))}function uu(n,t){var r=na(n);return Yi(r,$r(t,0,r.length))}function iu(n,t,r,e){if(!ic(n))return n;t=ju(t,n);
for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=Qi(t[u]),a=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return n;if(u!=o){var l=f[c];a=e?e(l,c,f):Y,a===Y&&(a=ic(l)?l:Wi(t[u+1])?[]:{})}zr(f,c,a),f=f[c]}return n}function ou(n){return Yi(na(n))}function fu(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=el(u);++e<u;)i[e]=n[e+t];return i}function cu(n,t){var r;return vs(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function au(n,t,r){
var e=0,u=null==n?e:n.length;if("number"==typeof t&&t===t&&u<=Cn){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!yc(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return lu(n,t,Sa,r)}function lu(n,t,r,e){var u=0,i=null==n?0:n.length;if(0===i)return 0;t=r(t);for(var o=t!==t,f=null===t,c=yc(t),a=t===Y;u<i;){var l=Ml((u+i)/2),s=r(n[l]),h=s!==Y,p=null===s,_=s===s,v=yc(s);if(o)var g=e||_;else g=a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):!p&&!v&&(e?s<=t:s<t);g?u=l+1:i=l}return Vl(i,Ln)}function su(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){
var o=n[r],f=t?t(o):o;if(!r||!Kf(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function hu(n){return"number"==typeof n?n:yc(n)?Sn:+n}function pu(n){if("string"==typeof n)return n;if(yh(n))return c(n,pu)+"";if(yc(n))return ps?ps.call(n):"";var t=n+"";return"0"==t&&1/n==-Rn?"-0":t}function _u(n,t,r){var e=-1,u=o,i=n.length,c=!0,a=[],l=a;if(r)c=!1,u=f;else if(i>=X){var s=t?null:js(n);if(s)return N(s);c=!1,u=E,l=new vr}else l=t?[]:a;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(h=r||0!==h?h:0,c&&p===p){for(var _=l.length;_--;)if(l[_]===p)continue n;
t&&l.push(p),a.push(h)}else u(l,p,r)||(l!==a&&l.push(p),a.push(h))}return a}function vu(n,t){return t=ju(t,n),n=Ki(n,t),null==n||delete n[Qi(mo(t))]}function gu(n,t,r,e){return iu(n,t,r(ve(n,t)),e)}function yu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?fu(n,e?0:i,e?i+1:u):fu(n,e?i+1:0,e?u:i)}function du(n,t){var r=n;return r instanceof Bt&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function bu(n,t,r){var e=n.length;if(e<2)return e?_u(n[0]):[];
for(var u=-1,i=el(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Vr(i[u]||o,n[f],t,r));return _u(te(i,1),t,r)}function wu(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){r(o,n[e],e<i?t[e]:Y)}return o}function mu(n){return Gf(n)?n:[]}function xu(n){return"function"==typeof n?n:Sa}function ju(n,t){return yh(n)?n:Ci(n,t)?[n]:Ws(Rc(n))}function Au(n,t,r){var e=n.length;return r=r===Y?e:r,!t&&r>=e?n:fu(n,t,r)}function ku(n,t){if(t)return n.slice();var r=n.length,e=Il?Il(r):new n.constructor(r);
return n.copy(e),e}function Ou(n){var t=new n.constructor(n.byteLength);return new Ol(t).set(new Ol(n)),t}function Iu(n,t){return new n.constructor(t?Ou(n.buffer):n.buffer,n.byteOffset,n.byteLength)}function Ru(n){var t=new n.constructor(n.source,Dt.exec(n));return t.lastIndex=n.lastIndex,t}function zu(n){return hs?cl(hs.call(n)):{}}function Eu(n,t){return new n.constructor(t?Ou(n.buffer):n.buffer,n.byteOffset,n.length)}function Su(n,t){if(n!==t){var r=n!==Y,e=null===n,u=n===n,i=yc(n),o=t!==Y,f=null===t,c=t===t,a=yc(t);
if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Wu(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var c=Su(u[e],i[e]);if(c){if(e>=f)return c;return c*("desc"==r[e]?-1:1)}}return n.index-t.index}function Lu(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Kl(i-o,0),l=el(c+a),s=!e;++f<c;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l;
}function Cu(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Kl(i-f,0),s=el(l+a),h=!e;++u<l;)s[u]=n[u];for(var p=u;++c<a;)s[p+c]=t[c];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function Uu(n,t){var r=-1,e=n.length;for(t||(t=el(e));++r<e;)t[r]=n[r];return t}function Bu(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):Y;c===Y&&(c=n[f]),u?Cr(r,f,c):zr(r,f,c)}return r}function Tu(n,t){return Bu(n,ks(n),t)}function $u(n,t){return Bu(n,Os(n),t);
}function Du(n,r){return function(e,u){var i=yh(e)?t:Sr,o=r?r():{};return i(e,n,bi(u,2),o)}}function Mu(n){return ru(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:Y,o=u>2?r[2]:Y;for(i=n.length>3&&"function"==typeof i?(u--,i):Y,o&&Li(r[0],r[1],o)&&(i=u<3?Y:i,u=1),t=cl(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Fu(n,t){return function(r,e){if(null==r)return r;if(!Vf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=cl(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function Nu(n){return function(t,r,e){
for(var u=-1,i=cl(t),o=e(t),f=o.length;f--;){var c=o[n?f:++u];if(r(i[c],c,i)===!1)break}return t}}function Pu(n,t,r){function e(){return(this&&this!==Xr&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=t&sn,i=Ku(n);return e}function qu(n){return function(t){t=Rc(t);var r=B(t)?V(t):Y,e=r?r[0]:t.charAt(0),u=r?Au(r,1).join(""):t.slice(1);return e[n]()+u}}function Zu(n){return function(t){return l(Oa(oa(t).replace(Ur,"")),n,"")}}function Ku(n){return function(){var t=arguments;switch(t.length){
case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=_s(n.prototype),e=n.apply(r,t);return ic(e)?e:r}}function Vu(t,r,e){function u(){for(var o=arguments.length,f=el(o),c=o,a=di(u);c--;)f[c]=arguments[c];var l=o<3&&f[0]!==a&&f[o-1]!==a?[]:F(f,a);
return o-=l.length,o<e?ui(t,r,Ju,u.placeholder,Y,f,l,Y,Y,e-o):n(this&&this!==Xr&&this instanceof u?i:t,this,f)}var i=Ku(t);return u}function Gu(n){return function(t,r,e){var u=cl(t);if(!Vf(t)){var i=bi(r,3);t=Fc(t),r=function(n){return i(u[n],n,u)}}var o=n(t,r,e);return o>-1?u[i?t[o]:o]:Y}}function Hu(n){return _i(function(t){var r=t.length,e=r,u=H.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if("function"!=typeof i)throw new sl(tn);if(u&&!o&&"wrapper"==yi(i))var o=new H([],!0)}for(e=o?e:r;++e<r;){
i=t[e];var f=yi(i),c="wrapper"==f?As(i):Y;o=c&&Bi(c[0])&&c[1]==(dn|_n|gn|bn)&&!c[4].length&&1==c[9]?o[yi(c[0])].apply(o,c[3]):1==i.length&&Bi(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&yh(e))return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function Ju(n,t,r,e,u,i,o,f,c,a){function l(){for(var y=arguments.length,d=el(y),b=y;b--;)d[b]=arguments[b];if(_)var w=di(l),m=L(d,w);if(e&&(d=Lu(d,e,u,_)),i&&(d=Cu(d,i,o,_)),
y-=m,_&&y<a){return ui(n,t,Ju,l.placeholder,r,d,F(d,w),f,c,a-y)}var x=h?r:this,j=p?x[n]:n;return y=d.length,f?d=Vi(d,f):v&&y>1&&d.reverse(),s&&c<y&&(d.length=c),this&&this!==Xr&&this instanceof l&&(j=g||Ku(j)),j.apply(x,d)}var s=t&dn,h=t&sn,p=t&hn,_=t&(_n|vn),v=t&wn,g=p?Y:Ku(n);return l}function Yu(n,t){return function(r,e){return Ae(r,n,t(e),{})}}function Qu(n,t){return function(r,e){var u;if(r===Y&&e===Y)return t;if(r!==Y&&(u=r),e!==Y){if(u===Y)return e;"string"==typeof r||"string"==typeof e?(r=pu(r),
e=pu(e)):(r=hu(r),e=hu(e)),u=n(r,e)}return u}}function Xu(t){return _i(function(r){return r=c(r,R(bi())),ru(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ni(n,t){t=t===Y?" ":pu(t);var r=t.length;if(r<2)return r?tu(t,n):t;var e=tu(t,Dl(n/K(t)));return B(t)?Au(V(e),0,n).join(""):e.slice(0,n)}function ti(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=el(l+c),h=this&&this!==Xr&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];
return n(h,o?e:this,s)}var o=r&sn,f=Ku(t);return i}function ri(n){return function(t,r,e){return e&&"number"!=typeof e&&Li(t,r,e)&&(r=e=Y),t=xc(t),r===Y?(r=t,t=0):r=xc(r),e=e===Y?t<r?1:-1:xc(e),nu(t,r,e,n)}}function ei(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=kc(t),r=kc(r)),n(t,r)}}function ui(n,t,r,e,u,i,o,f,c,a){var l=t&_n,s=l?o:Y,h=l?Y:o,p=l?i:Y,_=l?Y:i;t|=l?gn:yn,t&=~(l?yn:gn),t&pn||(t&=~(sn|hn));var v=[n,t,u,p,s,_,h,f,c,a],g=r.apply(Y,v);return Bi(n)&&zs(g,v),g.placeholder=e,
Hi(g,n,t)}function ii(n){var t=fl[n];return function(n,r){if(n=kc(n),r=null==r?0:Vl(jc(r),292),r&&Pl(n)){var e=(Rc(n)+"e").split("e");return e=(Rc(t(e[0]+"e"+(+e[1]+r)))+"e").split("e"),+(e[0]+"e"+(+e[1]-r))}return t(n)}}function oi(n){return function(t){var r=Is(t);return r==Zn?D(t):r==Qn?P(t):I(t,n(t))}}function fi(n,t,r,e,u,i,o,f){var c=t&hn;if(!c&&"function"!=typeof n)throw new sl(tn);var a=e?e.length:0;if(a||(t&=~(gn|yn),e=u=Y),o=o===Y?o:Kl(jc(o),0),f=f===Y?f:jc(f),a-=u?u.length:0,t&yn){var l=e,s=u;
e=u=Y}var h=c?Y:As(n),p=[n,t,r,e,u,l,s,i,o,f];if(h&&Ni(p,h),n=p[0],t=p[1],r=p[2],e=p[3],u=p[4],f=p[9]=p[9]===Y?c?0:n.length:Kl(p[9]-a,0),!f&&t&(_n|vn)&&(t&=~(_n|vn)),t&&t!=sn)_=t==_n||t==vn?Vu(n,t,f):t!=gn&&t!=(sn|gn)||u.length?Ju.apply(Y,p):ti(n,t,r,e);else var _=Pu(n,t,r);return Hi((h?bs:zs)(_,p),n,t)}function ci(n,t,r,e){return n===Y||Kf(n,_l[r])&&!yl.call(e,r)?t:n}function ai(n,t,r,e,u,i){return ic(n)&&ic(t)&&(i.set(t,n),qe(n,t,Y,ai,i),i.delete(t)),n}function li(n){return _c(n)?Y:n}function si(n,t,r,e,u,i){
var o=r&an,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;var a=i.get(n),l=i.get(t);if(a&&l)return a==t&&l==n;var s=-1,p=!0,_=r&ln?new vr:Y;for(i.set(n,t),i.set(t,n);++s<f;){var v=n[s],g=t[s];if(e)var y=o?e(g,v,s,t,n,i):e(v,g,s,n,t,i);if(y!==Y){if(y)continue;p=!1;break}if(_){if(!h(t,function(n,t){if(!E(_,t)&&(v===n||u(v,n,r,e,i)))return _.push(t)})){p=!1;break}}else if(v!==g&&!u(v,g,r,e,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function hi(n,t,r,e,u,i,o){switch(r){case it:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;
n=n.buffer,t=t.buffer;case ut:return!(n.byteLength!=t.byteLength||!i(new Ol(n),new Ol(t)));case Dn:case Mn:case Kn:return Kf(+n,+t);case Nn:return n.name==t.name&&n.message==t.message;case Yn:case Xn:return n==t+"";case Zn:var f=D;case Qn:var c=e&an;if(f||(f=N),n.size!=t.size&&!c)return!1;var a=o.get(n);if(a)return a==t;e|=ln,o.set(n,t);var l=si(f(n),f(t),e,u,i,o);return o.delete(n),l;case nt:if(hs)return hs.call(n)==hs.call(t)}return!1}function pi(n,t,r,e,u,i){var o=r&an,f=vi(n),c=f.length;if(c!=vi(t).length&&!o)return!1;
for(var a=c;a--;){var l=f[a];if(!(o?l in t:yl.call(t,l)))return!1}var s=i.get(n),h=i.get(t);if(s&&h)return s==t&&h==n;var p=!0;i.set(n,t),i.set(t,n);for(var _=o;++a<c;){l=f[a];var v=n[l],g=t[l];if(e)var y=o?e(g,v,l,t,n,i):e(v,g,l,n,t,i);if(!(y===Y?v===g||u(v,g,r,e,i):y)){p=!1;break}_||(_="constructor"==l)}if(p&&!_){var d=n.constructor,b=t.constructor;d!=b&&"constructor"in n&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(n),
i.delete(t),p}function _i(n){return Ss(Zi(n,Y,ho),n+"")}function vi(n){return ye(n,Fc,ks)}function gi(n){return ye(n,Nc,Os)}function yi(n){for(var t=n.name+"",r=is[t],e=yl.call(is,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function di(n){return(yl.call(q,"placeholder")?q:n).placeholder}function bi(){var n=q.iteratee||Wa;return n=n===Wa?Te:n,arguments.length?n(arguments[0],arguments[1]):n}function wi(n,t){var r=n.__data__;return Ui(t)?r["string"==typeof t?"string":"hash"]:r.map;
}function mi(n){for(var t=Fc(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Di(u)]}return t}function xi(n,t){var r=U(n,t);return Le(r)?r:Y}function ji(n){var t=yl.call(n,Cl),r=n[Cl];try{n[Cl]=Y;var e=!0}catch(n){}var u=wl.call(n);return e&&(t?n[Cl]=r:delete n[Cl]),u}function Ai(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=Vl(t,n+o);break;case"takeRight":n=Kl(n,t-o)}}return{start:n,end:t}}function ki(n){var t=n.match(Ct);
return t?t[1].split(Ut):[]}function Oi(n,t,r){t=ju(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=Qi(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&uc(u)&&Wi(o,u)&&(yh(n)||gh(n)))}function Ii(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&yl.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ri(n){return"function"!=typeof n.constructor||$i(n)?{}:_s(Rl(n))}function zi(n,t,r){var e=n.constructor;switch(t){case ut:return Ou(n);
case Dn:case Mn:return new e(+n);case it:return Iu(n,r);case ot:case ft:case ct:case at:case lt:case st:case ht:case pt:case _t:return Eu(n,r);case Zn:return new e;case Kn:case Xn:return new e(n);case Yn:return Ru(n);case Qn:return new e;case nt:return zu(n)}}function Ei(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?"& ":"")+t[e],t=t.join(r>2?", ":" "),n.replace(Lt,"{\n/* [wrapped with "+t+"] */\n")}function Si(n){return yh(n)||gh(n)||!!(Wl&&n&&n[Wl])}function Wi(n,t){var r=typeof n;
return t=null==t?zn:t,!!t&&("number"==r||"symbol"!=r&&qt.test(n))&&n>-1&&n%1==0&&n<t}function Li(n,t,r){if(!ic(r))return!1;var e=typeof t;return!!("number"==e?Vf(r)&&Wi(t,r.length):"string"==e&&t in r)&&Kf(r[t],n)}function Ci(n,t){if(yh(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!yc(n))||(Ot.test(n)||!kt.test(n)||null!=t&&n in cl(t))}function Ui(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}function Bi(n){
var t=yi(n),r=q[t];if("function"!=typeof r||!(t in Bt.prototype))return!1;if(n===r)return!0;var e=As(r);return!!e&&n===e[0]}function Ti(n){return!!bl&&bl in n}function $i(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||_l)}function Di(n){return n===n&&!ic(n)}function Mi(n,t){return function(r){return null!=r&&(r[n]===t&&(t!==Y||n in cl(r)))}}function Fi(n){var t=Wf(n,function(n){return r.size===en&&r.clear(),n}),r=t.cache;return t}function Ni(n,t){var r=n[1],e=t[1],u=r|e,i=u<(sn|hn|dn),o=e==dn&&r==_n||e==dn&&r==bn&&n[7].length<=t[8]||e==(dn|bn)&&t[7].length<=t[8]&&r==_n;
if(!i&&!o)return n;e&sn&&(n[2]=t[2],u|=r&sn?0:pn);var f=t[3];if(f){var c=n[3];n[3]=c?Lu(c,f,t[4]):f,n[4]=c?F(n[3],un):t[4]}return f=t[5],f&&(c=n[5],n[5]=c?Cu(c,f,t[6]):f,n[6]=c?F(n[5],un):t[6]),f=t[7],f&&(n[7]=f),e&dn&&(n[8]=null==n[8]?t[8]:Vl(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Pi(n){var t=[];if(null!=n)for(var r in cl(n))t.push(r);return t}function qi(n){return wl.call(n)}function Zi(t,r,e){return r=Kl(r===Y?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Kl(u.length-r,0),f=el(o);++i<o;)f[i]=u[r+i];
i=-1;for(var c=el(r+1);++i<r;)c[i]=u[i];return c[r]=e(f),n(t,this,c)}}function Ki(n,t){return t.length<2?n:ve(n,fu(t,0,-1))}function Vi(n,t){for(var r=n.length,e=Vl(t.length,r),u=Uu(n);e--;){var i=t[e];n[e]=Wi(i,r)?u[i]:Y}return n}function Gi(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}function Hi(n,t,r){var e=t+"";return Ss(n,Ei(e,no(ki(e),r)))}function Ji(n){var t=0,r=0;return function(){var e=Gl(),u=An-(e-r);if(r=e,u>0){if(++t>=jn)return arguments[0]}else t=0;
return n.apply(Y,arguments)}}function Yi(n,t){var r=-1,e=n.length,u=e-1;for(t=t===Y?e:t;++r<t;){var i=Xe(r,u),o=n[i];n[i]=n[r],n[r]=o}return n.length=t,n}function Qi(n){if("string"==typeof n||yc(n))return n;var t=n+"";return"0"==t&&1/n==-Rn?"-0":t}function Xi(n){if(null!=n){try{return gl.call(n)}catch(n){}try{return n+""}catch(n){}}return""}function no(n,t){return r(Un,function(r){var e="_."+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function to(n){if(n instanceof Bt)return n.clone();var t=new H(n.__wrapped__,n.__chain__);
return t.__actions__=Uu(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function ro(n,t,r){t=(r?Li(n,t,r):t===Y)?1:Kl(jc(t),0);var e=null==n?0:n.length;if(!e||t<1)return[];for(var u=0,i=0,o=el(Dl(e/t));u<e;)o[i++]=fu(n,u,u+=t);return o}function eo(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u}function uo(){var n=arguments.length;if(!n)return[];for(var t=el(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return a(yh(r)?Uu(r):[r],te(t,1));
}function io(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===Y?1:jc(t),fu(n,t<0?0:t,e)):[]}function oo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===Y?1:jc(t),t=e-t,fu(n,0,t<0?0:t)):[]}function fo(n,t){return n&&n.length?yu(n,bi(t,3),!0,!0):[]}function co(n,t){return n&&n.length?yu(n,bi(t,3),!0):[]}function ao(n,t,r,e){var u=null==n?0:n.length;return u?(r&&"number"!=typeof r&&Li(n,t,r)&&(r=0,e=u),Qr(n,t,r,e)):[]}function lo(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:jc(r);
return u<0&&(u=Kl(e+u,0)),g(n,bi(t,3),u)}function so(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==Y&&(u=jc(r),u=r<0?Kl(e+u,0):Vl(u,e-1)),g(n,bi(t,3),u,!0)}function ho(n){return(null==n?0:n.length)?te(n,1):[]}function po(n){return(null==n?0:n.length)?te(n,Rn):[]}function _o(n,t){return(null==n?0:n.length)?(t=t===Y?1:jc(t),te(n,t)):[]}function vo(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e}function go(n){return n&&n.length?n[0]:Y}function yo(n,t,r){
var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:jc(r);return u<0&&(u=Kl(e+u,0)),y(n,t,u)}function bo(n){return(null==n?0:n.length)?fu(n,0,-1):[]}function wo(n,t){return null==n?"":ql.call(n,t)}function mo(n){var t=null==n?0:n.length;return t?n[t-1]:Y}function xo(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;return r!==Y&&(u=jc(r),u=u<0?Kl(e+u,0):Vl(u,e-1)),t===t?Z(n,t,u):g(n,b,u,!0)}function jo(n,t){return n&&n.length?Ke(n,jc(t)):Y}function Ao(n,t){return n&&n.length&&t&&t.length?Ye(n,t):n;
}function ko(n,t,r){return n&&n.length&&t&&t.length?Ye(n,t,bi(r,2)):n}function Oo(n,t,r){return n&&n.length&&t&&t.length?Ye(n,t,Y,r):n}function Io(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=bi(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return Qe(n,u),r}function Ro(n){return null==n?n:Yl.call(n)}function zo(n,t,r){var e=null==n?0:n.length;return e?(r&&"number"!=typeof r&&Li(n,t,r)?(t=0,r=e):(t=null==t?0:jc(t),r=r===Y?e:jc(r)),fu(n,t,r)):[]}function Eo(n,t){
return au(n,t)}function So(n,t,r){return lu(n,t,bi(r,2))}function Wo(n,t){var r=null==n?0:n.length;if(r){var e=au(n,t);if(e<r&&Kf(n[e],t))return e}return-1}function Lo(n,t){return au(n,t,!0)}function Co(n,t,r){return lu(n,t,bi(r,2),!0)}function Uo(n,t){if(null==n?0:n.length){var r=au(n,t,!0)-1;if(Kf(n[r],t))return r}return-1}function Bo(n){return n&&n.length?su(n):[]}function To(n,t){return n&&n.length?su(n,bi(t,2)):[]}function $o(n){var t=null==n?0:n.length;return t?fu(n,1,t):[]}function Do(n,t,r){
return n&&n.length?(t=r||t===Y?1:jc(t),fu(n,0,t<0?0:t)):[]}function Mo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===Y?1:jc(t),t=e-t,fu(n,t<0?0:t,e)):[]}function Fo(n,t){return n&&n.length?yu(n,bi(t,3),!1,!0):[]}function No(n,t){return n&&n.length?yu(n,bi(t,3)):[]}function Po(n){return n&&n.length?_u(n):[]}function qo(n,t){return n&&n.length?_u(n,bi(t,2)):[]}function Zo(n,t){return t="function"==typeof t?t:Y,n&&n.length?_u(n,Y,t):[]}function Ko(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){
if(Gf(n))return t=Kl(n.length,t),!0}),O(t,function(t){return c(n,m(t))})}function Vo(t,r){if(!t||!t.length)return[];var e=Ko(t);return null==r?e:c(e,function(t){return n(r,Y,t)})}function Go(n,t){return wu(n||[],t||[],zr)}function Ho(n,t){return wu(n||[],t||[],iu)}function Jo(n){var t=q(n);return t.__chain__=!0,t}function Yo(n,t){return t(n),n}function Qo(n,t){return t(n)}function Xo(){return Jo(this)}function nf(){return new H(this.value(),this.__chain__)}function tf(){this.__values__===Y&&(this.__values__=mc(this.value()));
var n=this.__index__>=this.__values__.length;return{done:n,value:n?Y:this.__values__[this.__index__++]}}function rf(){return this}function ef(n){for(var t,r=this;r instanceof G;){var e=to(r);e.__index__=0,e.__values__=Y,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function uf(){var n=this.__wrapped__;if(n instanceof Bt){var t=n;return this.__actions__.length&&(t=new Bt(this)),t=t.reverse(),t.__actions__.push({func:Qo,args:[Ro],thisArg:Y}),new H(t,this.__chain__)}return this.thru(Ro);
}function of(){return du(this.__wrapped__,this.__actions__)}function ff(n,t,r){var e=yh(n)?u:Gr;return r&&Li(n,t,r)&&(t=Y),e(n,bi(t,3))}function cf(n,t){return(yh(n)?i:ne)(n,bi(t,3))}function af(n,t){return te(vf(n,t),1)}function lf(n,t){return te(vf(n,t),Rn)}function sf(n,t,r){return r=r===Y?1:jc(r),te(vf(n,t),r)}function hf(n,t){return(yh(n)?r:vs)(n,bi(t,3))}function pf(n,t){return(yh(n)?e:gs)(n,bi(t,3))}function _f(n,t,r,e){n=Vf(n)?n:na(n),r=r&&!e?jc(r):0;var u=n.length;return r<0&&(r=Kl(u+r,0)),
gc(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&y(n,t,r)>-1}function vf(n,t){return(yh(n)?c:Fe)(n,bi(t,3))}function gf(n,t,r,e){return null==n?[]:(yh(t)||(t=null==t?[]:[t]),r=e?Y:r,yh(r)||(r=null==r?[]:[r]),Ve(n,t,r))}function yf(n,t,r){var e=yh(n)?l:j,u=arguments.length<3;return e(n,bi(t,4),r,u,vs)}function df(n,t,r){var e=yh(n)?s:j,u=arguments.length<3;return e(n,bi(t,4),r,u,gs)}function bf(n,t){return(yh(n)?i:ne)(n,Lf(bi(t,3)))}function wf(n){return(yh(n)?kr:eu)(n)}function mf(n,t,r){return t=(r?Li(n,t,r):t===Y)?1:jc(t),
(yh(n)?Or:uu)(n,t)}function xf(n){return(yh(n)?Ir:ou)(n)}function jf(n){if(null==n)return 0;if(Vf(n))return gc(n)?K(n):n.length;var t=Is(n);return t==Zn||t==Qn?n.size:$e(n).length}function Af(n,t,r){var e=yh(n)?h:cu;return r&&Li(n,t,r)&&(t=Y),e(n,bi(t,3))}function kf(n,t){if("function"!=typeof t)throw new sl(tn);return n=jc(n),function(){if(--n<1)return t.apply(this,arguments)}}function Of(n,t,r){return t=r?Y:t,t=n&&null==t?n.length:t,fi(n,dn,Y,Y,Y,Y,t)}function If(n,t){var r;if("function"!=typeof t)throw new sl(tn);
return n=jc(n),function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=Y),r}}function Rf(n,t,r){t=r?Y:t;var e=fi(n,_n,Y,Y,Y,Y,Y,t);return e.placeholder=Rf.placeholder,e}function zf(n,t,r){t=r?Y:t;var e=fi(n,vn,Y,Y,Y,Y,Y,t);return e.placeholder=zf.placeholder,e}function Ef(n,t,r){function e(t){var r=h,e=p;return h=p=Y,d=t,v=n.apply(e,r)}function u(n){return d=n,g=Es(f,t),b?e(n):v}function i(n){var r=n-y,e=n-d,u=t-r;return w?Vl(u,_-e):u}function o(n){var r=n-y,e=n-d;return y===Y||r>=t||r<0||w&&e>=_;
}function f(){var n=ih();return o(n)?c(n):(g=Es(f,i(n)),Y)}function c(n){return g=Y,m&&h?e(n):(h=p=Y,v)}function a(){g!==Y&&xs(g),d=0,h=y=p=g=Y}function l(){return g===Y?v:c(ih())}function s(){var n=ih(),r=o(n);if(h=arguments,p=this,y=n,r){if(g===Y)return u(y);if(w)return xs(g),g=Es(f,t),e(y)}return g===Y&&(g=Es(f,t)),v}var h,p,_,v,g,y,d=0,b=!1,w=!1,m=!0;if("function"!=typeof n)throw new sl(tn);return t=kc(t)||0,ic(r)&&(b=!!r.leading,w="maxWait"in r,_=w?Kl(kc(r.maxWait)||0,t):_,m="trailing"in r?!!r.trailing:m),
s.cancel=a,s.flush=l,s}function Sf(n){return fi(n,wn)}function Wf(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new sl(tn);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(Wf.Cache||ar),r}function Lf(n){if("function"!=typeof n)throw new sl(tn);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:
return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function Cf(n){return If(2,n)}function Uf(n,t){if("function"!=typeof n)throw new sl(tn);return t=t===Y?t:jc(t),ru(n,t)}function Bf(t,r){if("function"!=typeof t)throw new sl(tn);return r=null==r?0:Kl(jc(r),0),ru(function(e){var u=e[r],i=Au(e,0,r);return u&&a(i,u),n(t,this,i)})}function Tf(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new sl(tn);return ic(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),
Ef(n,t,{leading:e,maxWait:t,trailing:u})}function $f(n){return Of(n,1)}function Df(n,t){return sh(xu(t),n)}function Mf(){if(!arguments.length)return[];var n=arguments[0];return yh(n)?n:[n]}function Ff(n){return Dr(n,cn)}function Nf(n,t){return t="function"==typeof t?t:Y,Dr(n,cn,t)}function Pf(n){return Dr(n,on|cn)}function qf(n,t){return t="function"==typeof t?t:Y,Dr(n,on|cn,t)}function Zf(n,t){return null==t||Zr(n,t,Fc(t))}function Kf(n,t){return n===t||n!==n&&t!==t}function Vf(n){return null!=n&&uc(n.length)&&!rc(n);
}function Gf(n){return oc(n)&&Vf(n)}function Hf(n){return n===!0||n===!1||oc(n)&&de(n)==Dn}function Jf(n){return oc(n)&&1===n.nodeType&&!_c(n)}function Yf(n){if(null==n)return!0;if(Vf(n)&&(yh(n)||"string"==typeof n||"function"==typeof n.splice||bh(n)||Ah(n)||gh(n)))return!n.length;var t=Is(n);if(t==Zn||t==Qn)return!n.size;if($i(n))return!$e(n).length;for(var r in n)if(yl.call(n,r))return!1;return!0}function Qf(n,t){return ze(n,t)}function Xf(n,t,r){r="function"==typeof r?r:Y;var e=r?r(n,t):Y;return e===Y?ze(n,t,Y,r):!!e;
}function nc(n){if(!oc(n))return!1;var t=de(n);return t==Nn||t==Fn||"string"==typeof n.message&&"string"==typeof n.name&&!_c(n)}function tc(n){return"number"==typeof n&&Pl(n)}function rc(n){if(!ic(n))return!1;var t=de(n);return t==Pn||t==qn||t==$n||t==Jn}function ec(n){return"number"==typeof n&&n==jc(n)}function uc(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=zn}function ic(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function oc(n){return null!=n&&"object"==typeof n}function fc(n,t){
return n===t||We(n,t,mi(t))}function cc(n,t,r){return r="function"==typeof r?r:Y,We(n,t,mi(t),r)}function ac(n){return pc(n)&&n!=+n}function lc(n){if(Rs(n))throw new il(nn);return Le(n)}function sc(n){return null===n}function hc(n){return null==n}function pc(n){return"number"==typeof n||oc(n)&&de(n)==Kn}function _c(n){if(!oc(n)||de(n)!=Gn)return!1;var t=Rl(n);if(null===t)return!0;var r=yl.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&gl.call(r)==ml}function vc(n){
return ec(n)&&n>=-zn&&n<=zn}function gc(n){return"string"==typeof n||!yh(n)&&oc(n)&&de(n)==Xn}function yc(n){return"symbol"==typeof n||oc(n)&&de(n)==nt}function dc(n){return n===Y}function bc(n){return oc(n)&&Is(n)==rt}function wc(n){return oc(n)&&de(n)==et}function mc(n){if(!n)return[];if(Vf(n))return gc(n)?V(n):Uu(n);if(Ll&&n[Ll])return $(n[Ll]());var t=Is(n);return(t==Zn?D:t==Qn?N:na)(n)}function xc(n){if(!n)return 0===n?n:0;if(n=kc(n),n===Rn||n===-Rn){return(n<0?-1:1)*En}return n===n?n:0}function jc(n){
var t=xc(n),r=t%1;return t===t?r?t-r:t:0}function Ac(n){return n?$r(jc(n),0,Wn):0}function kc(n){if("number"==typeof n)return n;if(yc(n))return Sn;if(ic(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=ic(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(Et,"");var r=Ft.test(n);return r||Pt.test(n)?Jr(n.slice(2),r?2:8):Mt.test(n)?Sn:+n}function Oc(n){return Bu(n,Nc(n))}function Ic(n){return n?$r(jc(n),-zn,zn):0===n?n:0}function Rc(n){return null==n?"":pu(n)}function zc(n,t){var r=_s(n);
return null==t?r:Wr(r,t)}function Ec(n,t){return v(n,bi(t,3),ee)}function Sc(n,t){return v(n,bi(t,3),ue)}function Wc(n,t){return null==n?n:ys(n,bi(t,3),Nc)}function Lc(n,t){return null==n?n:ds(n,bi(t,3),Nc)}function Cc(n,t){return n&&ee(n,bi(t,3))}function Uc(n,t){return n&&ue(n,bi(t,3))}function Bc(n){return null==n?[]:se(n,Fc(n))}function Tc(n){return null==n?[]:se(n,Nc(n))}function $c(n,t,r){var e=null==n?Y:ve(n,t);return e===Y?r:e}function Dc(n,t){return null!=n&&Oi(n,t,we)}function Mc(n,t){return null!=n&&Oi(n,t,me);
}function Fc(n){return Vf(n)?Ar(n):$e(n)}function Nc(n){return Vf(n)?Ar(n,!0):De(n)}function Pc(n,t){var r={};return t=bi(t,3),ee(n,function(n,e,u){Cr(r,t(n,e,u),n)}),r}function qc(n,t){var r={};return t=bi(t,3),ee(n,function(n,e,u){Cr(r,e,t(n,e,u))}),r}function Zc(n,t){return Kc(n,Lf(bi(t)))}function Kc(n,t){if(null==n)return{};var r=c(gi(n),function(n){return[n]});return t=bi(t),He(n,r,function(n,r){return t(n,r[0])})}function Vc(n,t,r){t=ju(t,n);var e=-1,u=t.length;for(u||(u=1,n=Y);++e<u;){var i=null==n?Y:n[Qi(t[e])];
i===Y&&(e=u,i=r),n=rc(i)?i.call(n):i}return n}function Gc(n,t,r){return null==n?n:iu(n,t,r)}function Hc(n,t,r,e){return e="function"==typeof e?e:Y,null==n?n:iu(n,t,r,e)}function Jc(n,t,e){var u=yh(n),i=u||bh(n)||Ah(n);if(t=bi(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:ic(n)&&rc(o)?_s(Rl(n)):{}}return(i?r:ee)(n,function(n,r,u){return t(e,n,r,u)}),e}function Yc(n,t){return null==n||vu(n,t)}function Qc(n,t,r){return null==n?n:gu(n,t,xu(r))}function Xc(n,t,r,e){return e="function"==typeof e?e:Y,
null==n?n:gu(n,t,xu(r),e)}function na(n){return null==n?[]:z(n,Fc(n))}function ta(n){return null==n?[]:z(n,Nc(n))}function ra(n,t,r){return r===Y&&(r=t,t=Y),r!==Y&&(r=kc(r),r=r===r?r:0),t!==Y&&(t=kc(t),t=t===t?t:0),$r(kc(n),t,r)}function ea(n,t,r){return t=xc(t),r===Y?(r=t,t=0):r=xc(r),n=kc(n),xe(n,t,r)}function ua(n,t,r){if(r&&"boolean"!=typeof r&&Li(n,t,r)&&(t=r=Y),r===Y&&("boolean"==typeof t?(r=t,t=Y):"boolean"==typeof n&&(r=n,n=Y)),n===Y&&t===Y?(n=0,t=1):(n=xc(n),t===Y?(t=n,n=0):t=xc(t)),n>t){
var e=n;n=t,t=e}if(r||n%1||t%1){var u=Jl();return Vl(n+u*(t-n+Hr("1e-"+((u+"").length-1))),t)}return Xe(n,t)}function ia(n){return Jh(Rc(n).toLowerCase())}function oa(n){return n=Rc(n),n&&n.replace(Zt,he).replace(Br,"")}function fa(n,t,r){n=Rc(n),t=pu(t);var e=n.length;r=r===Y?e:$r(jc(r),0,e);var u=r;return r-=t.length,r>=0&&n.slice(r,u)==t}function ca(n){return n=Rc(n),n&&mt.test(n)?n.replace(bt,pe):n}function aa(n){return n=Rc(n),n&&zt.test(n)?n.replace(Rt,"\\$&"):n}function la(n,t,r){n=Rc(n),t=jc(t);
var e=t?K(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return ni(Ml(u),r)+n+ni(Dl(u),r)}function sa(n,t,r){n=Rc(n),t=jc(t);var e=t?K(n):0;return t&&e<t?n+ni(t-e,r):n}function ha(n,t,r){n=Rc(n),t=jc(t);var e=t?K(n):0;return t&&e<t?ni(t-e,r)+n:n}function pa(n,t,r){return r||null==t?t=0:t&&(t=+t),Hl(Rc(n).replace(St,""),t||0)}function _a(n,t,r){return t=(r?Li(n,t,r):t===Y)?1:jc(t),tu(Rc(n),t)}function va(){var n=arguments,t=Rc(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function ga(n,t,r){return r&&"number"!=typeof r&&Li(n,t,r)&&(t=r=Y),
(r=r===Y?Wn:r>>>0)?(n=Rc(n),n&&("string"==typeof t||null!=t&&!xh(t))&&(t=pu(t),!t&&B(n))?Au(V(n),0,r):n.split(t,r)):[]}function ya(n,t,r){return n=Rc(n),r=null==r?0:$r(jc(r),0,n.length),t=pu(t),n.slice(r,r+t.length)==t}function da(n,t,r){var e=q.templateSettings;r&&Li(n,t,r)&&(t=Y),n=Rc(n),t=zh({},t,e,ci);var u,i,o=zh({},t.imports,e.imports,ci),f=Fc(o),c=z(o,f),a=0,l=t.interpolate||Kt,s="__p += '",h=al((t.escape||Kt).source+"|"+l.source+"|"+(l===At?$t:Kt).source+"|"+(t.evaluate||Kt).source+"|$","g"),p="//# sourceURL="+(yl.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Nr+"]")+"\n";
n.replace(h,function(t,r,e,o,f,c){return e||(e=o),s+=n.slice(a,c).replace(Vt,C),r&&(u=!0,s+="' +\n__e("+r+") +\n'"),f&&(i=!0,s+="';\n"+f+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),a=c+t.length,t}),s+="';\n";var _=yl.call(t,"variable")&&t.variable;_||(s="with (obj) {\n"+s+"\n}\n"),s=(i?s.replace(vt,""):s).replace(gt,"$1").replace(yt,"$1;"),s="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";
var v=Yh(function(){return ol(f,p+"return "+s).apply(Y,c)});if(v.source=s,nc(v))throw v;return v}function ba(n){return Rc(n).toLowerCase()}function wa(n){return Rc(n).toUpperCase()}function ma(n,t,r){if(n=Rc(n),n&&(r||t===Y))return n.replace(Et,"");if(!n||!(t=pu(t)))return n;var e=V(n),u=V(t);return Au(e,S(e,u),W(e,u)+1).join("")}function xa(n,t,r){if(n=Rc(n),n&&(r||t===Y))return n.replace(Wt,"");if(!n||!(t=pu(t)))return n;var e=V(n);return Au(e,0,W(e,V(t))+1).join("")}function ja(n,t,r){if(n=Rc(n),
n&&(r||t===Y))return n.replace(St,"");if(!n||!(t=pu(t)))return n;var e=V(n);return Au(e,S(e,V(t))).join("")}function Aa(n,t){var r=mn,e=xn;if(ic(t)){var u="separator"in t?t.separator:u;r="length"in t?jc(t.length):r,e="omission"in t?pu(t.omission):e}n=Rc(n);var i=n.length;if(B(n)){var o=V(n);i=o.length}if(r>=i)return n;var f=r-K(e);if(f<1)return e;var c=o?Au(o,0,f).join(""):n.slice(0,f);if(u===Y)return c+e;if(o&&(f+=c.length-f),xh(u)){if(n.slice(f).search(u)){var a,l=c;for(u.global||(u=al(u.source,Rc(Dt.exec(u))+"g")),
u.lastIndex=0;a=u.exec(l);)var s=a.index;c=c.slice(0,s===Y?f:s)}}else if(n.indexOf(pu(u),f)!=f){var h=c.lastIndexOf(u);h>-1&&(c=c.slice(0,h))}return c+e}function ka(n){return n=Rc(n),n&&wt.test(n)?n.replace(dt,_e):n}function Oa(n,t,r){return n=Rc(n),t=r?Y:t,t===Y?T(n)?J(n):_(n):n.match(t)||[]}function Ia(t){var r=null==t?0:t.length,e=bi();return t=r?c(t,function(n){if("function"!=typeof n[1])throw new sl(tn);return[e(n[0]),n[1]]}):[],ru(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e);
}})}function Ra(n){return Mr(Dr(n,on))}function za(n){return function(){return n}}function Ea(n,t){return null==n||n!==n?t:n}function Sa(n){return n}function Wa(n){return Te("function"==typeof n?n:Dr(n,on))}function La(n){return Ne(Dr(n,on))}function Ca(n,t){return Pe(n,Dr(t,on))}function Ua(n,t,e){var u=Fc(t),i=se(t,u);null!=e||ic(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=se(t,Fc(t)));var o=!(ic(e)&&"chain"in e&&!e.chain),f=rc(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){
var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Uu(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function Ba(){return Xr._===this&&(Xr._=xl),this}function Ta(){}function $a(n){return n=jc(n),ru(function(t){return Ke(t,n)})}function Da(n){return Ci(n)?m(Qi(n)):Je(n)}function Ma(n){return function(t){return null==n?Y:ve(n,t)}}function Fa(){return[]}function Na(){return!1}function Pa(){return{};
}function qa(){return""}function Za(){return!0}function Ka(n,t){if(n=jc(n),n<1||n>zn)return[];var r=Wn,e=Vl(n,Wn);t=bi(t),n-=Wn;for(var u=O(e,t);++r<n;)t(r);return u}function Va(n){return yh(n)?c(n,Qi):yc(n)?[n]:Uu(Ws(Rc(n)))}function Ga(n){var t=++dl;return Rc(n)+t}function Ha(n){return n&&n.length?Yr(n,Sa,be):Y}function Ja(n,t){return n&&n.length?Yr(n,bi(t,2),be):Y}function Ya(n){return w(n,Sa)}function Qa(n,t){return w(n,bi(t,2))}function Xa(n){return n&&n.length?Yr(n,Sa,Me):Y}function nl(n,t){
return n&&n.length?Yr(n,bi(t,2),Me):Y}function tl(n){return n&&n.length?k(n,Sa):0}function rl(n,t){return n&&n.length?k(n,bi(t,2)):0}x=null==x?Xr:ge.defaults(Xr.Object(),x,ge.pick(Xr,Fr));var el=x.Array,ul=x.Date,il=x.Error,ol=x.Function,fl=x.Math,cl=x.Object,al=x.RegExp,ll=x.String,sl=x.TypeError,hl=el.prototype,pl=ol.prototype,_l=cl.prototype,vl=x["__core-js_shared__"],gl=pl.toString,yl=_l.hasOwnProperty,dl=0,bl=function(){var n=/[^.]+$/.exec(vl&&vl.keys&&vl.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:"";
}(),wl=_l.toString,ml=gl.call(cl),xl=Xr._,jl=al("^"+gl.call(yl).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Al=re?x.Buffer:Y,kl=x.Symbol,Ol=x.Uint8Array,Il=Al?Al.allocUnsafe:Y,Rl=M(cl.getPrototypeOf,cl),zl=cl.create,El=_l.propertyIsEnumerable,Sl=hl.splice,Wl=kl?kl.isConcatSpreadable:Y,Ll=kl?kl.iterator:Y,Cl=kl?kl.toStringTag:Y,Ul=function(){try{var n=xi(cl,"defineProperty");return n({},"",{}),n}catch(n){}}(),Bl=x.clearTimeout!==Xr.clearTimeout&&x.clearTimeout,Tl=ul&&ul.now!==Xr.Date.now&&ul.now,$l=x.setTimeout!==Xr.setTimeout&&x.setTimeout,Dl=fl.ceil,Ml=fl.floor,Fl=cl.getOwnPropertySymbols,Nl=Al?Al.isBuffer:Y,Pl=x.isFinite,ql=hl.join,Zl=M(cl.keys,cl),Kl=fl.max,Vl=fl.min,Gl=ul.now,Hl=x.parseInt,Jl=fl.random,Yl=hl.reverse,Ql=xi(x,"DataView"),Xl=xi(x,"Map"),ns=xi(x,"Promise"),ts=xi(x,"Set"),rs=xi(x,"WeakMap"),es=xi(cl,"create"),us=rs&&new rs,is={},os=Xi(Ql),fs=Xi(Xl),cs=Xi(ns),as=Xi(ts),ls=Xi(rs),ss=kl?kl.prototype:Y,hs=ss?ss.valueOf:Y,ps=ss?ss.toString:Y,_s=function(){
function n(){}return function(t){if(!ic(t))return{};if(zl)return zl(t);n.prototype=t;var r=new n;return n.prototype=Y,r}}();q.templateSettings={escape:xt,evaluate:jt,interpolate:At,variable:"",imports:{_:q}},q.prototype=G.prototype,q.prototype.constructor=q,H.prototype=_s(G.prototype),H.prototype.constructor=H,Bt.prototype=_s(G.prototype),Bt.prototype.constructor=Bt,Yt.prototype.clear=Qt,Yt.prototype.delete=Xt,Yt.prototype.get=nr,Yt.prototype.has=tr,Yt.prototype.set=rr,er.prototype.clear=ur,er.prototype.delete=ir,
er.prototype.get=or,er.prototype.has=fr,er.prototype.set=cr,ar.prototype.clear=lr,ar.prototype.delete=sr,ar.prototype.get=hr,ar.prototype.has=pr,ar.prototype.set=_r,vr.prototype.add=vr.prototype.push=gr,vr.prototype.has=yr,dr.prototype.clear=br,dr.prototype.delete=wr,dr.prototype.get=mr,dr.prototype.has=xr,dr.prototype.set=jr;var vs=Fu(ee),gs=Fu(ue,!0),ys=Nu(),ds=Nu(!0),bs=us?function(n,t){return us.set(n,t),n}:Sa,ws=Ul?function(n,t){return Ul(n,"toString",{configurable:!0,enumerable:!1,value:za(t),
writable:!0})}:Sa,ms=ru,xs=Bl||function(n){return Xr.clearTimeout(n)},js=ts&&1/N(new ts([,-0]))[1]==Rn?function(n){return new ts(n)}:Ta,As=us?function(n){return us.get(n)}:Ta,ks=Fl?function(n){return null==n?[]:(n=cl(n),i(Fl(n),function(t){return El.call(n,t)}))}:Fa,Os=Fl?function(n){for(var t=[];n;)a(t,ks(n)),n=Rl(n);return t}:Fa,Is=de;(Ql&&Is(new Ql(new ArrayBuffer(1)))!=it||Xl&&Is(new Xl)!=Zn||ns&&Is(ns.resolve())!=Hn||ts&&Is(new ts)!=Qn||rs&&Is(new rs)!=rt)&&(Is=function(n){var t=de(n),r=t==Gn?n.constructor:Y,e=r?Xi(r):"";
if(e)switch(e){case os:return it;case fs:return Zn;case cs:return Hn;case as:return Qn;case ls:return rt}return t});var Rs=vl?rc:Na,zs=Ji(bs),Es=$l||function(n,t){return Xr.setTimeout(n,t)},Ss=Ji(ws),Ws=Fi(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(It,function(n,r,e,u){t.push(e?u.replace(Tt,"$1"):r||n)}),t}),Ls=ru(function(n,t){return Gf(n)?Vr(n,te(t,1,Gf,!0)):[]}),Cs=ru(function(n,t){var r=mo(t);return Gf(r)&&(r=Y),Gf(n)?Vr(n,te(t,1,Gf,!0),bi(r,2)):[]}),Us=ru(function(n,t){
var r=mo(t);return Gf(r)&&(r=Y),Gf(n)?Vr(n,te(t,1,Gf,!0),Y,r):[]}),Bs=ru(function(n){var t=c(n,mu);return t.length&&t[0]===n[0]?je(t):[]}),Ts=ru(function(n){var t=mo(n),r=c(n,mu);return t===mo(r)?t=Y:r.pop(),r.length&&r[0]===n[0]?je(r,bi(t,2)):[]}),$s=ru(function(n){var t=mo(n),r=c(n,mu);return t="function"==typeof t?t:Y,t&&r.pop(),r.length&&r[0]===n[0]?je(r,Y,t):[]}),Ds=ru(Ao),Ms=_i(function(n,t){var r=null==n?0:n.length,e=Tr(n,t);return Qe(n,c(t,function(n){return Wi(n,r)?+n:n}).sort(Su)),e}),Fs=ru(function(n){
return _u(te(n,1,Gf,!0))}),Ns=ru(function(n){var t=mo(n);return Gf(t)&&(t=Y),_u(te(n,1,Gf,!0),bi(t,2))}),Ps=ru(function(n){var t=mo(n);return t="function"==typeof t?t:Y,_u(te(n,1,Gf,!0),Y,t)}),qs=ru(function(n,t){return Gf(n)?Vr(n,t):[]}),Zs=ru(function(n){return bu(i(n,Gf))}),Ks=ru(function(n){var t=mo(n);return Gf(t)&&(t=Y),bu(i(n,Gf),bi(t,2))}),Vs=ru(function(n){var t=mo(n);return t="function"==typeof t?t:Y,bu(i(n,Gf),Y,t)}),Gs=ru(Ko),Hs=ru(function(n){var t=n.length,r=t>1?n[t-1]:Y;return r="function"==typeof r?(n.pop(),
r):Y,Vo(n,r)}),Js=_i(function(n){var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return Tr(t,n)};return!(t>1||this.__actions__.length)&&e instanceof Bt&&Wi(r)?(e=e.slice(r,+r+(t?1:0)),e.__actions__.push({func:Qo,args:[u],thisArg:Y}),new H(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(Y),n})):this.thru(u)}),Ys=Du(function(n,t,r){yl.call(n,r)?++n[r]:Cr(n,r,1)}),Qs=Gu(lo),Xs=Gu(so),nh=Du(function(n,t,r){yl.call(n,r)?n[r].push(t):Cr(n,r,[t])}),th=ru(function(t,r,e){var u=-1,i="function"==typeof r,o=Vf(t)?el(t.length):[];
return vs(t,function(t){o[++u]=i?n(r,t,e):ke(t,r,e)}),o}),rh=Du(function(n,t,r){Cr(n,r,t)}),eh=Du(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),uh=ru(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Li(n,t[0],t[1])?t=[]:r>2&&Li(t[0],t[1],t[2])&&(t=[t[0]]),Ve(n,te(t,1),[])}),ih=Tl||function(){return Xr.Date.now()},oh=ru(function(n,t,r){var e=sn;if(r.length){var u=F(r,di(oh));e|=gn}return fi(n,e,t,r,u)}),fh=ru(function(n,t,r){var e=sn|hn;if(r.length){var u=F(r,di(fh));e|=gn;
}return fi(t,e,n,r,u)}),ch=ru(function(n,t){return Kr(n,1,t)}),ah=ru(function(n,t,r){return Kr(n,kc(t)||0,r)});Wf.Cache=ar;var lh=ms(function(t,r){r=1==r.length&&yh(r[0])?c(r[0],R(bi())):c(te(r,1),R(bi()));var e=r.length;return ru(function(u){for(var i=-1,o=Vl(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);return n(t,this,u)})}),sh=ru(function(n,t){return fi(n,gn,Y,t,F(t,di(sh)))}),hh=ru(function(n,t){return fi(n,yn,Y,t,F(t,di(hh)))}),ph=_i(function(n,t){return fi(n,bn,Y,Y,Y,t)}),_h=ei(be),vh=ei(function(n,t){
return n>=t}),gh=Oe(function(){return arguments}())?Oe:function(n){return oc(n)&&yl.call(n,"callee")&&!El.call(n,"callee")},yh=el.isArray,dh=ie?R(ie):Ie,bh=Nl||Na,wh=oe?R(oe):Re,mh=fe?R(fe):Se,xh=ce?R(ce):Ce,jh=ae?R(ae):Ue,Ah=le?R(le):Be,kh=ei(Me),Oh=ei(function(n,t){return n<=t}),Ih=Mu(function(n,t){if($i(t)||Vf(t))return Bu(t,Fc(t),n),Y;for(var r in t)yl.call(t,r)&&zr(n,r,t[r])}),Rh=Mu(function(n,t){Bu(t,Nc(t),n)}),zh=Mu(function(n,t,r,e){Bu(t,Nc(t),n,e)}),Eh=Mu(function(n,t,r,e){Bu(t,Fc(t),n,e);
}),Sh=_i(Tr),Wh=ru(function(n,t){n=cl(n);var r=-1,e=t.length,u=e>2?t[2]:Y;for(u&&Li(t[0],t[1],u)&&(e=1);++r<e;)for(var i=t[r],o=Nc(i),f=-1,c=o.length;++f<c;){var a=o[f],l=n[a];(l===Y||Kf(l,_l[a])&&!yl.call(n,a))&&(n[a]=i[a])}return n}),Lh=ru(function(t){return t.push(Y,ai),n($h,Y,t)}),Ch=Yu(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=wl.call(t)),n[t]=r},za(Sa)),Uh=Yu(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=wl.call(t)),yl.call(n,t)?n[t].push(r):n[t]=[r]},bi),Bh=ru(ke),Th=Mu(function(n,t,r){
qe(n,t,r)}),$h=Mu(function(n,t,r,e){qe(n,t,r,e)}),Dh=_i(function(n,t){var r={};if(null==n)return r;var e=!1;t=c(t,function(t){return t=ju(t,n),e||(e=t.length>1),t}),Bu(n,gi(n),r),e&&(r=Dr(r,on|fn|cn,li));for(var u=t.length;u--;)vu(r,t[u]);return r}),Mh=_i(function(n,t){return null==n?{}:Ge(n,t)}),Fh=oi(Fc),Nh=oi(Nc),Ph=Zu(function(n,t,r){return t=t.toLowerCase(),n+(r?ia(t):t)}),qh=Zu(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Zh=Zu(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Kh=qu("toLowerCase"),Vh=Zu(function(n,t,r){
return n+(r?"_":"")+t.toLowerCase()}),Gh=Zu(function(n,t,r){return n+(r?" ":"")+Jh(t)}),Hh=Zu(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Jh=qu("toUpperCase"),Yh=ru(function(t,r){try{return n(t,Y,r)}catch(n){return nc(n)?n:new il(n)}}),Qh=_i(function(n,t){return r(t,function(t){t=Qi(t),Cr(n,t,oh(n[t],n))}),n}),Xh=Hu(),np=Hu(!0),tp=ru(function(n,t){return function(r){return ke(r,n,t)}}),rp=ru(function(n,t){return function(r){return ke(n,r,t)}}),ep=Xu(c),up=Xu(u),ip=Xu(h),op=ri(),fp=ri(!0),cp=Qu(function(n,t){
return n+t},0),ap=ii("ceil"),lp=Qu(function(n,t){return n/t},1),sp=ii("floor"),hp=Qu(function(n,t){return n*t},1),pp=ii("round"),_p=Qu(function(n,t){return n-t},0);return q.after=kf,q.ary=Of,q.assign=Ih,q.assignIn=Rh,q.assignInWith=zh,q.assignWith=Eh,q.at=Sh,q.before=If,q.bind=oh,q.bindAll=Qh,q.bindKey=fh,q.castArray=Mf,q.chain=Jo,q.chunk=ro,q.compact=eo,q.concat=uo,q.cond=Ia,q.conforms=Ra,q.constant=za,q.countBy=Ys,q.create=zc,q.curry=Rf,q.curryRight=zf,q.debounce=Ef,q.defaults=Wh,q.defaultsDeep=Lh,
q.defer=ch,q.delay=ah,q.difference=Ls,q.differenceBy=Cs,q.differenceWith=Us,q.drop=io,q.dropRight=oo,q.dropRightWhile=fo,q.dropWhile=co,q.fill=ao,q.filter=cf,q.flatMap=af,q.flatMapDeep=lf,q.flatMapDepth=sf,q.flatten=ho,q.flattenDeep=po,q.flattenDepth=_o,q.flip=Sf,q.flow=Xh,q.flowRight=np,q.fromPairs=vo,q.functions=Bc,q.functionsIn=Tc,q.groupBy=nh,q.initial=bo,q.intersection=Bs,q.intersectionBy=Ts,q.intersectionWith=$s,q.invert=Ch,q.invertBy=Uh,q.invokeMap=th,q.iteratee=Wa,q.keyBy=rh,q.keys=Fc,q.keysIn=Nc,
q.map=vf,q.mapKeys=Pc,q.mapValues=qc,q.matches=La,q.matchesProperty=Ca,q.memoize=Wf,q.merge=Th,q.mergeWith=$h,q.method=tp,q.methodOf=rp,q.mixin=Ua,q.negate=Lf,q.nthArg=$a,q.omit=Dh,q.omitBy=Zc,q.once=Cf,q.orderBy=gf,q.over=ep,q.overArgs=lh,q.overEvery=up,q.overSome=ip,q.partial=sh,q.partialRight=hh,q.partition=eh,q.pick=Mh,q.pickBy=Kc,q.property=Da,q.propertyOf=Ma,q.pull=Ds,q.pullAll=Ao,q.pullAllBy=ko,q.pullAllWith=Oo,q.pullAt=Ms,q.range=op,q.rangeRight=fp,q.rearg=ph,q.reject=bf,q.remove=Io,q.rest=Uf,
q.reverse=Ro,q.sampleSize=mf,q.set=Gc,q.setWith=Hc,q.shuffle=xf,q.slice=zo,q.sortBy=uh,q.sortedUniq=Bo,q.sortedUniqBy=To,q.split=ga,q.spread=Bf,q.tail=$o,q.take=Do,q.takeRight=Mo,q.takeRightWhile=Fo,q.takeWhile=No,q.tap=Yo,q.throttle=Tf,q.thru=Qo,q.toArray=mc,q.toPairs=Fh,q.toPairsIn=Nh,q.toPath=Va,q.toPlainObject=Oc,q.transform=Jc,q.unary=$f,q.union=Fs,q.unionBy=Ns,q.unionWith=Ps,q.uniq=Po,q.uniqBy=qo,q.uniqWith=Zo,q.unset=Yc,q.unzip=Ko,q.unzipWith=Vo,q.update=Qc,q.updateWith=Xc,q.values=na,q.valuesIn=ta,
q.without=qs,q.words=Oa,q.wrap=Df,q.xor=Zs,q.xorBy=Ks,q.xorWith=Vs,q.zip=Gs,q.zipObject=Go,q.zipObjectDeep=Ho,q.zipWith=Hs,q.entries=Fh,q.entriesIn=Nh,q.extend=Rh,q.extendWith=zh,Ua(q,q),q.add=cp,q.attempt=Yh,q.camelCase=Ph,q.capitalize=ia,q.ceil=ap,q.clamp=ra,q.clone=Ff,q.cloneDeep=Pf,q.cloneDeepWith=qf,q.cloneWith=Nf,q.conformsTo=Zf,q.deburr=oa,q.defaultTo=Ea,q.divide=lp,q.endsWith=fa,q.eq=Kf,q.escape=ca,q.escapeRegExp=aa,q.every=ff,q.find=Qs,q.findIndex=lo,q.findKey=Ec,q.findLast=Xs,q.findLastIndex=so,
q.findLastKey=Sc,q.floor=sp,q.forEach=hf,q.forEachRight=pf,q.forIn=Wc,q.forInRight=Lc,q.forOwn=Cc,q.forOwnRight=Uc,q.get=$c,q.gt=_h,q.gte=vh,q.has=Dc,q.hasIn=Mc,q.head=go,q.identity=Sa,q.includes=_f,q.indexOf=yo,q.inRange=ea,q.invoke=Bh,q.isArguments=gh,q.isArray=yh,q.isArrayBuffer=dh,q.isArrayLike=Vf,q.isArrayLikeObject=Gf,q.isBoolean=Hf,q.isBuffer=bh,q.isDate=wh,q.isElement=Jf,q.isEmpty=Yf,q.isEqual=Qf,q.isEqualWith=Xf,q.isError=nc,q.isFinite=tc,q.isFunction=rc,q.isInteger=ec,q.isLength=uc,q.isMap=mh,
q.isMatch=fc,q.isMatchWith=cc,q.isNaN=ac,q.isNative=lc,q.isNil=hc,q.isNull=sc,q.isNumber=pc,q.isObject=ic,q.isObjectLike=oc,q.isPlainObject=_c,q.isRegExp=xh,q.isSafeInteger=vc,q.isSet=jh,q.isString=gc,q.isSymbol=yc,q.isTypedArray=Ah,q.isUndefined=dc,q.isWeakMap=bc,q.isWeakSet=wc,q.join=wo,q.kebabCase=qh,q.last=mo,q.lastIndexOf=xo,q.lowerCase=Zh,q.lowerFirst=Kh,q.lt=kh,q.lte=Oh,q.max=Ha,q.maxBy=Ja,q.mean=Ya,q.meanBy=Qa,q.min=Xa,q.minBy=nl,q.stubArray=Fa,q.stubFalse=Na,q.stubObject=Pa,q.stubString=qa,
q.stubTrue=Za,q.multiply=hp,q.nth=jo,q.noConflict=Ba,q.noop=Ta,q.now=ih,q.pad=la,q.padEnd=sa,q.padStart=ha,q.parseInt=pa,q.random=ua,q.reduce=yf,q.reduceRight=df,q.repeat=_a,q.replace=va,q.result=Vc,q.round=pp,q.runInContext=p,q.sample=wf,q.size=jf,q.snakeCase=Vh,q.some=Af,q.sortedIndex=Eo,q.sortedIndexBy=So,q.sortedIndexOf=Wo,q.sortedLastIndex=Lo,q.sortedLastIndexBy=Co,q.sortedLastIndexOf=Uo,q.startCase=Gh,q.startsWith=ya,q.subtract=_p,q.sum=tl,q.sumBy=rl,q.template=da,q.times=Ka,q.toFinite=xc,q.toInteger=jc,
q.toLength=Ac,q.toLower=ba,q.toNumber=kc,q.toSafeInteger=Ic,q.toString=Rc,q.toUpper=wa,q.trim=ma,q.trimEnd=xa,q.trimStart=ja,q.truncate=Aa,q.unescape=ka,q.uniqueId=Ga,q.upperCase=Hh,q.upperFirst=Jh,q.each=hf,q.eachRight=pf,q.first=go,Ua(q,function(){var n={};return ee(q,function(t,r){yl.call(q.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),q.VERSION=Q,r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){q[n].placeholder=q}),r(["drop","take"],function(n,t){Bt.prototype[n]=function(r){
r=r===Y?1:Kl(jc(r),0);var e=this.__filtered__&&!t?new Bt(this):this.clone();return e.__filtered__?e.__takeCount__=Vl(r,e.__takeCount__):e.__views__.push({size:Vl(r,Wn),type:n+(e.__dir__<0?"Right":"")}),e},Bt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),r(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r==kn||r==In;Bt.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:bi(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r(["head","last"],function(n,t){
var r="take"+(t?"Right":"");Bt.prototype[n]=function(){return this[r](1).value()[0]}}),r(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");Bt.prototype[n]=function(){return this.__filtered__?new Bt(this):this[r](1)}}),Bt.prototype.compact=function(){return this.filter(Sa)},Bt.prototype.find=function(n){return this.filter(n).head()},Bt.prototype.findLast=function(n){return this.reverse().find(n)},Bt.prototype.invokeMap=ru(function(n,t){return"function"==typeof n?new Bt(this):this.map(function(r){
return ke(r,n,t)})}),Bt.prototype.reject=function(n){return this.filter(Lf(bi(n)))},Bt.prototype.slice=function(n,t){n=jc(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Bt(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==Y&&(t=jc(t),r=t<0?r.dropRight(-t):r.take(t-n)),r)},Bt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Bt.prototype.toArray=function(){return this.take(Wn)},ee(Bt.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=q[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);
u&&(q.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof Bt,c=o[0],l=f||yh(t),s=function(n){var t=u.apply(q,a([n],o));return e&&h?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(f=l=!1);var h=this.__chain__,p=!!this.__actions__.length,_=i&&!h,v=f&&!p;if(!i&&l){t=v?t:new Bt(this);var g=n.apply(t,o);return g.__actions__.push({func:Qo,args:[s],thisArg:Y}),new H(g,h)}return _&&v?n.apply(this,o):(g=this.thru(s),_?e?g.value()[0]:g.value():g)})}),r(["pop","push","shift","sort","splice","unshift"],function(n){
var t=hl[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);q.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(yh(u)?u:[],n)}return this[r](function(r){return t.apply(yh(r)?r:[],n)})}}),ee(Bt.prototype,function(n,t){var r=q[t];if(r){var e=r.name+"";yl.call(is,e)||(is[e]=[]),is[e].push({name:t,func:r})}}),is[Ju(Y,hn).name]=[{name:"wrapper",func:Y}],Bt.prototype.clone=Gt,Bt.prototype.reverse=Ht,Bt.prototype.value=Jt,q.prototype.at=Js,
q.prototype.chain=Xo,q.prototype.commit=nf,q.prototype.next=tf,q.prototype.plant=ef,q.prototype.reverse=uf,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=of,q.prototype.first=q.prototype.head,Ll&&(q.prototype[Ll]=rf),q},ge=ve();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Xr._=ge,define(function(){return ge})):te?((te.exports=ge)._=ge,ne._=ge):Xr._=ge}).call(this);
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.decomp=e()}}(function(){return function e(f,o,n){function d(t,l){if(!o[t]){if(!f[t]){var u="function"==typeof require&&require;if(!l&&u)return u(t,!0);if(i)return i(t,!0);throw new Error("Cannot find module '"+t+"'")}var p=o[t]={exports:{}};f[t][0].call(p.exports,function(e){var o=f[t][1][e];return d(o?o:e)},p,p.exports,e,f,o,n)}return o[t].exports}for(var i="function"==typeof require&&require,t=0;t<n.length;t++)d(n[t]);return d}({1:[function(e,f,o){function n(e,f,o){o=o||0;var n,d,i,t,l,u,p,s=[0,0];return n=e[1][1]-e[0][1],d=e[0][0]-e[1][0],i=n*e[0][0]+d*e[0][1],t=f[1][1]-f[0][1],l=f[0][0]-f[1][0],u=t*f[0][0]+l*f[0][1],p=n*l-t*d,D(p,0,o)||(s[0]=(l*i-d*u)/p,s[1]=(n*u-t*i)/p),s}function d(e,f,o,n){var d=f[0]-e[0],i=f[1]-e[1],t=n[0]-o[0],l=n[1]-o[1];if(t*i-l*d===0)return!1;var u=(d*(o[1]-e[1])+i*(e[0]-o[0]))/(t*i-l*d),p=(t*(e[1]-o[1])+l*(o[0]-e[0]))/(l*d-t*i);return u>=0&&1>=u&&p>=0&&1>=p}function i(e,f,o){return(f[0]-e[0])*(o[1]-e[1])-(o[0]-e[0])*(f[1]-e[1])}function t(e,f,o){return i(e,f,o)>0}function l(e,f,o){return i(e,f,o)>=0}function u(e,f,o){return i(e,f,o)<0}function p(e,f,o){return i(e,f,o)<=0}function s(e,f,o,n){if(n){var d=F,t=G;d[0]=f[0]-e[0],d[1]=f[1]-e[1],t[0]=o[0]-f[0],t[1]=o[1]-f[1];var l=d[0]*t[0]+d[1]*t[1],u=Math.sqrt(d[0]*d[0]+d[1]*d[1]),p=Math.sqrt(t[0]*t[0]+t[1]*t[1]),s=Math.acos(l/(u*p));return n>s}return 0===i(e,f,o)}function c(e,f){var o=f[0]-e[0],n=f[1]-e[1];return o*o+n*n}function y(e,f){var o=e.length;return e[0>f?f%o+o:f%o]}function a(e){e.length=0}function m(e,f,o,n){for(var d=o;n>d;d++)e.push(f[d])}function r(e){for(var f=0,o=e,n=1;n<e.length;++n)(o[n][1]<o[f][1]||o[n][1]===o[f][1]&&o[n][0]>o[f][0])&&(f=n);return t(y(e,f-1),y(e,f),y(e,f+1))?!1:(w(e),!0)}function w(e){for(var f=[],o=e.length,n=0;n!==o;n++)f.push(e.pop());for(var n=0;n!==o;n++)e[n]=f[n]}function b(e,f){return u(y(e,f-1),y(e,f),y(e,f+1))}function g(e,f,o){var d,i,t=H,u=I;if(l(y(e,f+1),y(e,f),y(e,o))&&p(y(e,f-1),y(e,f),y(e,o)))return!1;i=c(y(e,f),y(e,o));for(var s=0;s!==e.length;++s)if((s+1)%e.length!==f&&s!==f&&l(y(e,f),y(e,o),y(e,s+1))&&p(y(e,f),y(e,o),y(e,s))&&(t[0]=y(e,f),t[1]=y(e,o),u[0]=y(e,s),u[1]=y(e,s+1),d=n(t,u),c(y(e,f),d)<i))return!1;return!0}function x(e,f,o){for(var n=0;n!==e.length;++n)if(n!==f&&n!==o&&(n+1)%e.length!==f&&(n+1)%e.length!==o&&d(y(e,f),y(e,o),y(e,n),y(e,n+1)))return!1;return!0}function j(e,f,o,n){var d=n||[];if(a(d),o>f)for(var i=f;o>=i;i++)d.push(e[i]);else{for(var i=0;o>=i;i++)d.push(e[i]);for(var i=f;i<e.length;i++)d.push(e[i])}return d}function v(e){for(var f=[],o=[],n=[],d=[],i=Number.MAX_VALUE,t=0;t<e.length;++t)if(b(e,t))for(var l=0;l<e.length;++l)if(g(e,t,l)){o=v(j(e,t,l,d)),n=v(j(e,l,t,d));for(var u=0;u<n.length;u++)o.push(n[u]);o.length<i&&(f=o,i=o.length,f.push([y(e,t),y(e,l)]))}return f}function h(e){var f=v(e);return f.length>0?k(e,f):[e]}function k(e,f){if(0===f.length)return[e];if(f instanceof Array&&f.length&&f[0]instanceof Array&&2===f[0].length&&f[0][0]instanceof Array){for(var o=[e],n=0;n<f.length;n++)for(var d=f[n],i=0;i<o.length;i++){var t=o[i],l=k(t,d);if(l){o.splice(i,1),o.push(l[0],l[1]);break}}return o}var d=f,n=e.indexOf(d[0]),i=e.indexOf(d[1]);return-1!==n&&-1!==i?[j(e,n,i),j(e,i,n)]:!1}function q(e){var f,o=e;for(f=0;f<o.length-1;f++)for(var n=0;f-1>n;n++)if(d(o[f],o[f+1],o[n],o[n+1]))return!1;for(f=1;f<o.length-2;f++)if(d(o[0],o[o.length-1],o[f],o[f+1]))return!1;return!0}function z(e,f,o,n,d){d=d||0;var i=f[1]-e[1],t=e[0]-f[0],l=i*e[0]+t*e[1],u=n[1]-o[1],p=o[0]-n[0],s=u*o[0]+p*o[1],c=i*p-u*t;return D(c,0,d)?[0,0]:[(p*l-t*s)/c,(i*s-u*l)/c]}function A(e,f,o,n,d,i,s){i=i||100,s=s||0,d=d||25,f="undefined"!=typeof f?f:[],o=o||[],n=n||[];var a=[0,0],r=[0,0],w=[0,0],g=0,j=0,v=0,h=0,k=0,q=0,B=0,C=[],D=[],E=e,F=e;if(F.length<3)return f;if(s++,s>i)return console.warn("quickDecomp: max level ("+i+") reached."),f;for(var G=0;G<e.length;++G)if(b(E,G)){o.push(E[G]),g=j=Number.MAX_VALUE;for(var H=0;H<e.length;++H)t(y(E,G-1),y(E,G),y(E,H))&&p(y(E,G-1),y(E,G),y(E,H-1))&&(w=z(y(E,G-1),y(E,G),y(E,H),y(E,H-1)),u(y(E,G+1),y(E,G),w)&&(v=c(E[G],w),j>v&&(j=v,r=w,q=H))),t(y(E,G+1),y(E,G),y(E,H+1))&&p(y(E,G+1),y(E,G),y(E,H))&&(w=z(y(E,G+1),y(E,G),y(E,H),y(E,H+1)),t(y(E,G-1),y(E,G),w)&&(v=c(E[G],w),g>v&&(g=v,a=w,k=H)));if(q===(k+1)%e.length)w[0]=(r[0]+a[0])/2,w[1]=(r[1]+a[1])/2,n.push(w),k>G?(m(C,E,G,k+1),C.push(w),D.push(w),0!==q&&m(D,E,q,E.length),m(D,E,0,G+1)):(0!==G&&m(C,E,G,E.length),m(C,E,0,k+1),C.push(w),D.push(w),m(D,E,q,G+1));else{if(q>k&&(k+=e.length),h=Number.MAX_VALUE,q>k)return f;for(var H=q;k>=H;++H)l(y(E,G-1),y(E,G),y(E,H))&&p(y(E,G+1),y(E,G),y(E,H))&&(v=c(y(E,G),y(E,H)),h>v&&x(E,G,H)&&(h=v,B=H%e.length));B>G?(m(C,E,G,B+1),0!==B&&m(D,E,B,F.length),m(D,E,0,G+1)):(0!==G&&m(C,E,G,F.length),m(C,E,0,B+1),m(D,E,B,G+1))}return C.length<D.length?(A(C,f,o,n,d,i,s),A(D,f,o,n,d,i,s)):(A(D,f,o,n,d,i,s),A(C,f,o,n,d,i,s)),f}return f.push(e),f}function B(e,f){for(var o=0,n=e.length-1;e.length>3&&n>=0;--n)s(y(e,n-1),y(e,n),y(e,n+1),f)&&(e.splice(n%e.length,1),o++);return o}function C(e,f){for(var o=e.length-1;o>=1;--o)for(var n=e[o],d=o-1;d>=0;--d)E(n,e[d],f)&&e.splice(o,1)}function D(e,f,o){return o=o||0,Math.abs(e-f)<=o}function E(e,f,o){return D(e[0],f[0],o)&&D(e[1],f[1],o)}f.exports={decomp:h,quickDecomp:A,isSimple:q,removeCollinearPoints:B,removeDuplicatePoints:C,makeCCW:r};var F=[],G=[],H=[],I=[]},{}]},{},[1])(1)});
/*!
 * matter-js 0.16.0 by @liabru 2021-01-17
 * http://brm.io/matter-js/
 * License MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("poly-decomp")):"function"==typeof define&&define.amd?define("Matter",["poly-decomp"],t):"object"==typeof exports?exports.Matter=t(require("poly-decomp")):e.Matter=t(e.decomp)}(this,(function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=24)}([function(e,t){var n={};e.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(e,t){var i,o;"boolean"==typeof t?(i=2,o=t):(i=1,o=!0);for(var r=i;r<arguments.length;r++){var s=arguments[r];if(s)for(var a in s)o&&s[a]&&s[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=s[a]:(e[a]=e[a]||{},n.extend(e[a],o,s[a])):e[a]=s[a]}return e},n.clone=function(e,t){return n.extend({},t,e)},n.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},n.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),i=0;i<n.length;i++)t.push(e[n[i]]);return t}for(var o in e)t.push(e[o]);return t},n.get=function(e,t,n,i){t=t.split(".").slice(n,i);for(var o=0;o<t.length;o+=1)e=e[t[o]];return e},n.set=function(e,t,i,o,r){var s=t.split(".").slice(o,r);return n.get(e,t,0,-1)[s[s.length-1]]=i,i},n.shuffle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(n.random()*(t+1)),o=e[t];e[t]=e[i],e[i]=o}return e},n.choose=function(e){return e[Math.floor(n.random()*e.length)]},n.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isFunction=function(e){return"function"==typeof e},n.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},n.isString=function(e){return"[object String]"===toString.call(e)},n.clamp=function(e,t,n){return e<t?t:e>n?n:e},n.sign=function(e){return e<0?-1:1},n.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(t,n){return n=void 0!==n?n:1,(t=void 0!==t?t:0)+e()*(n-t)};var e=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.map=function(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n},n.topologicalSort=function(e){var t=[],i=[],o=[];for(var r in e)i[r]||o[r]||n._topologicalSort(r,i,o,e,t);return t},n._topologicalSort=function(e,t,i,o,r){var s=o[e]||[];i[e]=!0;for(var a=0;a<s.length;a+=1){var l=s[a];i[l]||(t[l]||n._topologicalSort(l,t,i,o,r))}i[e]=!1,t[e]=!0,r.push(e)},n.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var n=arguments[t];n._chained?e.push.apply(e,n._chained):e.push(n)}var i=function(){for(var t,n=new Array(arguments.length),i=0,o=arguments.length;i<o;i++)n[i]=arguments[i];for(i=0;i<e.length;i+=1){var r=e[i].apply(t,n);void 0!==r&&(t=r)}return t};return i._chained=e,i},n.chainPathBefore=function(e,t,i){return n.set(e,t,n.chain(i,n.get(e,t)))},n.chainPathAfter=function(e,t,i){return n.set(e,t,n.chain(n.get(e,t),i))}}()},function(e,t){var n={};e.exports=n,n.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&n.update(t,e),t},n.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<t.length;i++){var o=t[i];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},n.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},n.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},n.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},n.shift=function(e,t){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+i}},function(e,t){var n={};e.exports=n,n.create=function(e,t){return{x:e||0,y:t||0}},n.clone=function(e){return{x:e.x,y:e.y}},n.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},n.rotate=function(e,t,n){var i=Math.cos(t),o=Math.sin(t);n||(n={});var r=e.x*i-e.y*o;return n.y=e.x*o+e.y*i,n.x=r,n},n.rotateAbout=function(e,t,n,i){var o=Math.cos(t),r=Math.sin(t);i||(i={});var s=n.x+((e.x-n.x)*o-(e.y-n.y)*r);return i.y=n.y+((e.x-n.x)*r+(e.y-n.y)*o),i.x=s,i},n.normalise=function(e){var t=n.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.cross=function(e,t){return e.x*t.y-e.y*t.x},n.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},n.add=function(e,t,n){return n||(n={}),n.x=e.x+t.x,n.y=e.y+t.y,n},n.sub=function(e,t,n){return n||(n={}),n.x=e.x-t.x,n.y=e.y-t.y,n},n.mult=function(e,t){return{x:e.x*t,y:e.y*t}},n.div=function(e,t){return{x:e.x/t,y:e.y/t}},n.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},n.neg=function(e){return{x:-e.x,y:-e.y}},n.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(e,t,n){var i={};e.exports=i;var o=n(2),r=n(0);i.create=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i],r={x:o.x,y:o.y,index:i,body:t,isInternal:!1};n.push(r)}return n},i.fromPath=function(e,t){var n=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(e,t,i){n.push({x:parseFloat(t),y:parseFloat(i)})})),i.create(n,t)},i.centre=function(e){for(var t,n,r,s=i.area(e,!0),a={x:0,y:0},l=0;l<e.length;l++)r=(l+1)%e.length,t=o.cross(e[l],e[r]),n=o.mult(o.add(e[l],e[r]),t),a=o.add(a,n);return o.div(a,6*s)},i.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return o.div(t,e.length)},i.area=function(e,t){for(var n=0,i=e.length-1,o=0;o<e.length;o++)n+=(e[i].x-e[o].x)*(e[i].y+e[o].y),i=o;return t?n/2:Math.abs(n)/2},i.inertia=function(e,t){for(var n,i,r=0,s=0,a=e,l=0;l<a.length;l++)i=(l+1)%a.length,r+=(n=Math.abs(o.cross(a[i],a[l])))*(o.dot(a[i],a[i])+o.dot(a[i],a[l])+o.dot(a[l],a[l])),s+=n;return t/6*(r/s)},i.translate=function(e,t,n){var i;if(n)for(i=0;i<e.length;i++)e[i].x+=t.x*n,e[i].y+=t.y*n;else for(i=0;i<e.length;i++)e[i].x+=t.x,e[i].y+=t.y;return e},i.rotate=function(e,t,n){if(0!==t){for(var i=Math.cos(t),o=Math.sin(t),r=0;r<e.length;r++){var s=e[r],a=s.x-n.x,l=s.y-n.y;s.x=n.x+(a*i-l*o),s.y=n.y+(a*o+l*i)}return e}},i.contains=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=e[(n+1)%e.length];if((t.x-i.x)*(o.y-i.y)+(t.y-i.y)*(i.x-o.x)>0)return!1}return!0},i.scale=function(e,t,n,r){if(1===t&&1===n)return e;var s,a;r=r||i.centre(e);for(var l=0;l<e.length;l++)s=e[l],a=o.sub(s,r),e[l].x=r.x+a.x*t,e[l].y=r.y+a.y*n;return e},i.chamfer=function(e,t,n,i,s){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,i=i||2,s=s||14;for(var a=[],l=0;l<e.length;l++){var c=e[l-1>=0?l-1:e.length-1],d=e[l],u=e[(l+1)%e.length],p=t[l<t.length?l:t.length-1];if(0!==p){var f=o.normalise({x:d.y-c.y,y:c.x-d.x}),v=o.normalise({x:u.y-d.y,y:d.x-u.x}),m=Math.sqrt(2*Math.pow(p,2)),y=o.mult(r.clone(f),p),g=o.normalise(o.mult(o.add(f,v),.5)),x=o.sub(d,o.mult(g,m)),h=n;-1===n&&(h=1.75*Math.pow(p,.32)),(h=r.clamp(h,i,s))%2==1&&(h+=1);for(var b=Math.acos(o.dot(f,v))/h,w=0;w<h;w++)a.push(o.add(o.rotate(y,b*w),x))}else a.push(d)}return a},i.clockwiseSort=function(e){var t=i.mean(e);return e.sort((function(e,n){return o.angle(t,e)-o.angle(t,n)})),e},i.isConvex=function(e){var t,n,i,o,r=0,s=e.length;if(s<3)return null;for(t=0;t<s;t++)if(i=(t+2)%s,o=(e[n=(t+1)%s].x-e[t].x)*(e[i].y-e[n].y),(o-=(e[n].y-e[t].y)*(e[i].x-e[n].x))<0?r|=1:o>0&&(r|=2),3===r)return!1;return 0!==r||null},i.hull=function(e){var t,n,i=[],r=[];for((e=e.slice(0)).sort((function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y})),n=0;n<e.length;n+=1){for(t=e[n];r.length>=2&&o.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}for(n=e.length-1;n>=0;n-=1){for(t=e[n];i.length>=2&&o.cross3(i[i.length-2],i[i.length-1],t)<=0;)i.pop();i.push(t)}return i.pop(),r.pop(),i.concat(r)}},function(e,t,n){var i={};e.exports=i;var o=n(0);i.on=function(e,t,n){for(var i,o=t.split(" "),r=0;r<o.length;r++)i=o[r],e.events=e.events||{},e.events[i]=e.events[i]||[],e.events[i].push(n);return n},i.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=o.keys(e.events).join(" "));for(var i=t.split(" "),r=0;r<i.length;r++){var s=e.events[i[r]],a=[];if(n&&s)for(var l=0;l<s.length;l++)s[l]!==n&&a.push(s[l]);e.events[i[r]]=a}}else e.events={}},i.trigger=function(e,t,n){var i,r,s,a,l=e.events;if(l&&o.keys(l).length>0){n||(n={}),i=t.split(" ");for(var c=0;c<i.length;c++)if(s=l[r=i[c]]){(a=o.clone(n,!1)).name=r,a.source=e;for(var d=0;d<s.length;d++)s[d].apply(e,[a])}}}},function(e,t,n){var i={};e.exports=i;var o=n(4),r=n(0),s=n(1),a=n(6);i.create=function(e){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},i.setModified=function(e,t,n,o){if(e.isModified=t,n&&e.parent&&i.setModified(e.parent,t,n,o),o)for(var r=0;r<e.composites.length;r++){var s=e.composites[r];i.setModified(s,t,n,o)}},i.add=function(e,t){var n=[].concat(t);o.trigger(e,"beforeAdd",{object:t});for(var s=0;s<n.length;s++){var a=n[s];switch(a.type){case"body":if(a.parent!==a){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(e,a);break;case"constraint":i.addConstraint(e,a);break;case"composite":i.addComposite(e,a);break;case"mouseConstraint":i.addConstraint(e,a.constraint)}}return o.trigger(e,"afterAdd",{object:t}),e},i.remove=function(e,t,n){var r=[].concat(t);o.trigger(e,"beforeRemove",{object:t});for(var s=0;s<r.length;s++){var a=r[s];switch(a.type){case"body":i.removeBody(e,a,n);break;case"constraint":i.removeConstraint(e,a,n);break;case"composite":i.removeComposite(e,a,n);break;case"mouseConstraint":i.removeConstraint(e,a.constraint)}}return o.trigger(e,"afterRemove",{object:t}),e},i.addComposite=function(e,t){return e.composites.push(t),t.parent=e,i.setModified(e,!0,!0,!1),e},i.removeComposite=function(e,t,n){var o=r.indexOf(e.composites,t);if(-1!==o&&(i.removeCompositeAt(e,o),i.setModified(e,!0,!0,!1)),n)for(var s=0;s<e.composites.length;s++)i.removeComposite(e.composites[s],t,!0);return e},i.removeCompositeAt=function(e,t){return e.composites.splice(t,1),i.setModified(e,!0,!0,!1),e},i.addBody=function(e,t){return e.bodies.push(t),i.setModified(e,!0,!0,!1),e},i.removeBody=function(e,t,n){var o=r.indexOf(e.bodies,t);if(-1!==o&&(i.removeBodyAt(e,o),i.setModified(e,!0,!0,!1)),n)for(var s=0;s<e.composites.length;s++)i.removeBody(e.composites[s],t,!0);return e},i.removeBodyAt=function(e,t){return e.bodies.splice(t,1),i.setModified(e,!0,!0,!1),e},i.addConstraint=function(e,t){return e.constraints.push(t),i.setModified(e,!0,!0,!1),e},i.removeConstraint=function(e,t,n){var o=r.indexOf(e.constraints,t);if(-1!==o&&i.removeConstraintAt(e,o),n)for(var s=0;s<e.composites.length;s++)i.removeConstraint(e.composites[s],t,!0);return e},i.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),i.setModified(e,!0,!0,!1),e},i.clear=function(e,t,n){if(n)for(var o=0;o<e.composites.length;o++)i.clear(e.composites[o],t,!0);return t?e.bodies=e.bodies.filter((function(e){return e.isStatic})):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,i.setModified(e,!0,!0,!1),e},i.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(i.allBodies(e.composites[n]));return t},i.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(i.allConstraints(e.composites[n]));return t},i.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(i.allComposites(e.composites[n]));return t},i.get=function(e,t,n){var o,r;switch(n){case"body":o=i.allBodies(e);break;case"constraint":o=i.allConstraints(e);break;case"composite":o=i.allComposites(e).concat(e)}return o?0===(r=o.filter((function(e){return e.id.toString()===t.toString()}))).length?null:r[0]:null},i.move=function(e,t,n){return i.remove(e,t),i.add(n,t),e},i.rebase=function(e){for(var t=i.allBodies(e).concat(i.allConstraints(e)).concat(i.allComposites(e)),n=0;n<t.length;n++)t[n].id=r.nextId();return i.setModified(e,!0,!0,!1),e},i.translate=function(e,t,n){for(var o=n?i.allBodies(e):e.bodies,r=0;r<o.length;r++)a.translate(o[r],t);return i.setModified(e,!0,!0,!1),e},i.rotate=function(e,t,n,o){for(var r=Math.cos(t),s=Math.sin(t),l=o?i.allBodies(e):e.bodies,c=0;c<l.length;c++){var d=l[c],u=d.position.x-n.x,p=d.position.y-n.y;a.setPosition(d,{x:n.x+(u*r-p*s),y:n.y+(u*s+p*r)}),a.rotate(d,t)}return i.setModified(e,!0,!0,!1),e},i.scale=function(e,t,n,o,r){for(var s=r?i.allBodies(e):e.bodies,l=0;l<s.length;l++){var c=s[l],d=c.position.x-o.x,u=c.position.y-o.y;a.setPosition(c,{x:o.x+d*t,y:o.y+u*n}),a.scale(c,t,n)}return i.setModified(e,!0,!0,!1),e},i.bounds=function(e){for(var t=i.allBodies(e),n=[],o=0;o<t.length;o+=1){var r=t[o];n.push(r.bounds.min,r.bounds.max)}return s.create(n)}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2),s=n(7),a=(n(10),n(0)),l=n(1),c=n(15);!function(){i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i.create=function(t){var n={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},i=a.extend(n,t);return e(i,t),i},i.nextGroup=function(e){return e?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var e=function(e,t){t=t||{},i.set(e,{bounds:e.bounds||l.create(e.vertices),positionPrev:e.positionPrev||r.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),o.rotate(e.vertices,e.angle,e.position),c.rotate(e.axes,e.angle),l.update(e.bounds,e.vertices,e.velocity),i.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#14151f":a.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),s=e.isStatic?"#555":"#ccc",d=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||s,e.render.lineWidth=e.render.lineWidth||d,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};i.set=function(e,t,n){var o;for(o in"string"==typeof t&&(o=t,(t={})[o]=n),t)if(Object.prototype.hasOwnProperty.call(t,o))switch(n=t[o],o){case"isStatic":i.setStatic(e,n);break;case"isSleeping":s.set(e,n);break;case"mass":i.setMass(e,n);break;case"density":i.setDensity(e,n);break;case"inertia":i.setInertia(e,n);break;case"vertices":i.setVertices(e,n);break;case"position":i.setPosition(e,n);break;case"angle":i.setAngle(e,n);break;case"velocity":i.setVelocity(e,n);break;case"angularVelocity":i.setAngularVelocity(e,n);break;case"parts":i.setParts(e,n);break;case"centre":i.setCentre(e,n);break;default:e[o]=n}},i.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var i=e.parts[n];i.isStatic=t,t?(i._original={restitution:i.restitution,friction:i.friction,mass:i.mass,inertia:i.inertia,density:i.density,inverseMass:i.inverseMass,inverseInertia:i.inverseInertia},i.restitution=0,i.friction=1,i.mass=i.inertia=i.density=1/0,i.inverseMass=i.inverseInertia=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.angularVelocity=0,i.speed=0,i.angularSpeed=0,i.motion=0):i._original&&(i.restitution=i._original.restitution,i.friction=i._original.friction,i.mass=i._original.mass,i.inertia=i._original.inertia,i.density=i._original.density,i.inverseMass=i._original.inverseMass,i.inverseInertia=i._original.inverseInertia,i._original=null)}},i.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=n*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},i.setDensity=function(e,t){i.setMass(e,t*e.area),e.density=t},i.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},i.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=o.create(t,e),e.axes=c.fromVertices(e.vertices),e.area=o.area(e.vertices),i.setMass(e,e.density*e.area);var n=o.centre(e.vertices);o.translate(e.vertices,n,-1),i.setInertia(e,i._inertiaScale*o.inertia(e.vertices,e.mass)),o.translate(e.vertices,e.position),l.update(e.bounds,e.vertices,e.velocity)},i.setParts=function(e,t,n){var r;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<t.length;r++){var s=t[r];s!==e&&(s.parent=e,e.parts.push(s))}if(1!==e.parts.length){if(n=void 0===n||n){var a=[];for(r=0;r<t.length;r++)a=a.concat(t[r].vertices);o.clockwiseSort(a);var l=o.hull(a),c=o.centre(l);i.setVertices(e,l),o.translate(e.vertices,c)}var d=i._totalProperties(e);e.area=d.area,e.parent=e,e.position.x=d.centre.x,e.position.y=d.centre.y,e.positionPrev.x=d.centre.x,e.positionPrev.y=d.centre.y,i.setMass(e,d.mass),i.setInertia(e,d.inertia),i.setPosition(e,d.centre)}},i.setCentre=function(e,t,n){n?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},i.setPosition=function(e,t){var n=r.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var i=0;i<e.parts.length;i++){var s=e.parts[i];s.position.x+=n.x,s.position.y+=n.y,o.translate(s.vertices,n),l.update(s.bounds,s.vertices,e.velocity)}},i.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var i=0;i<e.parts.length;i++){var s=e.parts[i];s.angle+=n,o.rotate(s.vertices,n,e.position),c.rotate(s.axes,n),l.update(s.bounds,s.vertices,e.velocity),i>0&&r.rotateAbout(s.position,n,e.position,s.position)}},i.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=r.magnitude(e.velocity)},i.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},i.translate=function(e,t){i.setPosition(e,r.add(e.position,t))},i.rotate=function(e,t,n){if(n){var o=Math.cos(t),r=Math.sin(t),s=e.position.x-n.x,a=e.position.y-n.y;i.setPosition(e,{x:n.x+(s*o-a*r),y:n.y+(s*r+a*o)}),i.setAngle(e,e.angle+t)}else i.setAngle(e,e.angle+t)},i.scale=function(e,t,n,r){var s=0,a=0;r=r||e.position;for(var d=0;d<e.parts.length;d++){var u=e.parts[d];o.scale(u.vertices,t,n,r),u.axes=c.fromVertices(u.vertices),u.area=o.area(u.vertices),i.setMass(u,e.density*u.area),o.translate(u.vertices,{x:-u.position.x,y:-u.position.y}),i.setInertia(u,i._inertiaScale*o.inertia(u.vertices,u.mass)),o.translate(u.vertices,{x:u.position.x,y:u.position.y}),d>0&&(s+=u.area,a+=u.inertia),u.position.x=r.x+(u.position.x-r.x)*t,u.position.y=r.y+(u.position.y-r.y)*n,l.update(u.bounds,u.vertices,e.velocity)}e.parts.length>1&&(e.area=s,e.isStatic||(i.setMass(e,e.density*s),i.setInertia(e,a))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},i.update=function(e,t,n,i){var s=Math.pow(t*n*e.timeScale,2),a=1-e.frictionAir*n*e.timeScale,d=e.position.x-e.positionPrev.x,u=e.position.y-e.positionPrev.y;e.velocity.x=d*a*i+e.force.x/e.mass*s,e.velocity.y=u*a*i+e.force.y/e.mass*s,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*a*i+e.torque/e.inertia*s,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=r.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var p=0;p<e.parts.length;p++){var f=e.parts[p];o.translate(f.vertices,e.velocity),p>0&&(f.position.x+=e.velocity.x,f.position.y+=e.velocity.y),0!==e.angularVelocity&&(o.rotate(f.vertices,e.angularVelocity,e.position),c.rotate(f.axes,e.angularVelocity),p>0&&r.rotateAbout(f.position,e.angularVelocity,e.position,f.position)),l.update(f.bounds,f.vertices,e.velocity)}},i.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var i=t.x-e.position.x,o=t.y-e.position.y;e.torque+=i*n.y-o*n.x},i._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var i=e.parts[n],o=i.mass!==1/0?i.mass:1;t.mass+=o,t.area+=i.area,t.inertia+=i.inertia,t.centre=r.add(t.centre,r.mult(i.position,o))}return t.centre=r.div(t.centre,t.mass),t}}()},function(e,t,n){var i={};e.exports=i;var o=n(4);i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(e,t){for(var n=t*t*t,o=0;o<e.length;o++){var r=e[o],s=r.speed*r.speed+r.angularSpeed*r.angularSpeed;if(0===r.force.x&&0===r.force.y){var a=Math.min(r.motion,s),l=Math.max(r.motion,s);r.motion=i._minBias*a+(1-i._minBias)*l,r.sleepThreshold>0&&r.motion<i._motionSleepThreshold*n?(r.sleepCounter+=1,r.sleepCounter>=r.sleepThreshold&&i.set(r,!0)):r.sleepCounter>0&&(r.sleepCounter-=1)}else i.set(r,!1)}},i.afterCollisions=function(e,t){for(var n=t*t*t,o=0;o<e.length;o++){var r=e[o];if(r.isActive){var s=r.collision,a=s.bodyA.parent,l=s.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:l,d=c===a?l:a;!c.isStatic&&d.motion>i._motionWakeThreshold*n&&i.set(c,!1)}}}},i.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||o.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&o.trigger(e,"sleepEnd"))}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2),s=n(7),a=n(1),l=n(15),c=n(0);i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,i=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,o=r.magnitude(r.sub(n,i));t.length=void 0!==t.length?t.length:o,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var s={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(s.type="pin",s.anchors=!1):t.stiffness<.9&&(s.type="spring"),t.render=c.extend(s,t.render),t},i.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],i=n.constraintImpulse;n.isStatic||0===i.x&&0===i.y&&0===i.angle||(n.position.x+=i.x,n.position.y+=i.y,n.angle+=i.angle)}},i.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var o=e[n],r=!o.bodyA||o.bodyA&&o.bodyA.isStatic,s=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(r||s)&&i.solve(e[n],t)}for(n=0;n<e.length;n+=1)r=!(o=e[n]).bodyA||o.bodyA&&o.bodyA.isStatic,s=!o.bodyB||o.bodyB&&o.bodyB.isStatic,r||s||i.solve(e[n],t)},i.solve=function(e,t){var n=e.bodyA,o=e.bodyB,s=e.pointA,a=e.pointB;if(n||o){n&&!n.isStatic&&(r.rotate(s,n.angle-e.angleA,s),e.angleA=n.angle),o&&!o.isStatic&&(r.rotate(a,o.angle-e.angleB,a),e.angleB=o.angle);var l=s,c=a;if(n&&(l=r.add(n.position,s)),o&&(c=r.add(o.position,a)),l&&c){var d=r.sub(l,c),u=r.magnitude(d);u<i._minLength&&(u=i._minLength);var p,f,v,m,y,g=(u-e.length)/u,x=e.stiffness<1?e.stiffness*t:e.stiffness,h=r.mult(d,g*x),b=(n?n.inverseMass:0)+(o?o.inverseMass:0),w=b+((n?n.inverseInertia:0)+(o?o.inverseInertia:0));if(e.damping){var S=r.create();v=r.div(d,u),y=r.sub(o&&r.sub(o.position,o.positionPrev)||S,n&&r.sub(n.position,n.positionPrev)||S),m=r.dot(v,y)}n&&!n.isStatic&&(f=n.inverseMass/b,n.constraintImpulse.x-=h.x*f,n.constraintImpulse.y-=h.y*f,n.position.x-=h.x*f,n.position.y-=h.y*f,e.damping&&(n.positionPrev.x-=e.damping*v.x*m*f,n.positionPrev.y-=e.damping*v.y*m*f),p=r.cross(s,h)/w*i._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=p,n.angle-=p),o&&!o.isStatic&&(f=o.inverseMass/b,o.constraintImpulse.x+=h.x*f,o.constraintImpulse.y+=h.y*f,o.position.x+=h.x*f,o.position.y+=h.y*f,e.damping&&(o.positionPrev.x+=e.damping*v.x*m*f,o.positionPrev.y+=e.damping*v.y*m*f),p=r.cross(a,h)/w*i._torqueDampen*o.inverseInertia*(1-e.angularStiffness),o.constraintImpulse.angle+=p,o.angle+=p)}}},i.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],c=n.constraintImpulse;if(!(n.isStatic||0===c.x&&0===c.y&&0===c.angle)){s.set(n,!1);for(var d=0;d<n.parts.length;d++){var u=n.parts[d];o.translate(u.vertices,c),d>0&&(u.position.x+=c.x,u.position.y+=c.y),0!==c.angle&&(o.rotate(u.vertices,c.angle,n.position),l.rotate(u.axes,c.angle),d>0&&r.rotateAbout(u.position,c.angle,n.position,u.position)),a.update(u.bounds,u.vertices,n.velocity)}c.angle*=i._warming,c.x*=i._warming,c.y*=i._warming}}},i.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+e.pointA.x,y:(e.bodyA?e.bodyA.position.y:0)+e.pointA.y}},i.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+e.pointB.x,y:(e.bodyB?e.bodyB.position.y:0)+e.pointB.y}}},function(e,t,n){var i={};e.exports=i;var o=n(18);i.create=function(e,t){var n=e.bodyA,o=e.bodyB,r=e.parentA,s=e.parentB,a={id:i.id(n,o),bodyA:n,bodyB:o,contacts:{},activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||o.isSensor,timeCreated:t,timeUpdated:t,inverseMass:r.inverseMass+s.inverseMass,friction:Math.min(r.friction,s.friction),frictionStatic:Math.max(r.frictionStatic,s.frictionStatic),restitution:Math.max(r.restitution,s.restitution),slop:Math.max(r.slop,s.slop)};return i.update(a,e,t),a},i.update=function(e,t,n){var r=e.contacts,s=t.supports,a=e.activeContacts,l=t.parentA,c=t.parentB;if(e.collision=t,e.inverseMass=l.inverseMass+c.inverseMass,e.friction=Math.min(l.friction,c.friction),e.frictionStatic=Math.max(l.frictionStatic,c.frictionStatic),e.restitution=Math.max(l.restitution,c.restitution),e.slop=Math.max(l.slop,c.slop),a.length=0,t.collided){for(var d=0;d<s.length;d++){var u=s[d],p=o.id(u),f=r[p];f?a.push(f):a.push(r[p]=o.create(u))}e.separation=t.depth,i.setActive(e,!0,n)}else!0===e.isActive&&i.setActive(e,!1,n)},i.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},i.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},function(e,t,n){var i={};e.exports=i;var o=n(0),r=n(5),s=n(1),a=n(4),l=n(11),c=n(2),d=n(14);!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(o.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i.create=function(e){var t={controller:i,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},r=o.extend(t,e);return r.canvas&&(r.canvas.width=r.options.width||r.canvas.width,r.canvas.height=r.options.height||r.canvas.height),r.mouse=e.mouse,r.engine=e.engine,r.canvas=r.canvas||n(r.options.width,r.options.height),r.context=r.canvas.getContext("2d"),r.textures={},r.bounds=r.bounds||{min:{x:0,y:0},max:{x:r.canvas.width,y:r.canvas.height}},1!==r.options.pixelRatio&&i.setPixelRatio(r,r.options.pixelRatio),o.isElement(r.element)?r.element.appendChild(r.canvas):r.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),r},i.run=function(t){!function n(o){t.frameRequestId=e(n),i.world(t)}()},i.stop=function(e){t(e.frameRequestId)},i.setPixelRatio=function(e,t){var n=e.options,i=e.canvas;"auto"===t&&(t=u(i)),n.pixelRatio=t,i.setAttribute("data-pixel-ratio",t),i.width=n.width*t,i.height=n.height*t,i.style.width=n.width+"px",i.style.height=n.height+"px"},i.lookAt=function(e,t,n,i){i=void 0===i||i,t=o.isArray(t)?t:[t],n=n||{x:0,y:0};for(var r={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},s=0;s<t.length;s+=1){var a=t[s],l=a.bounds?a.bounds.min:a.min||a.position||a,c=a.bounds?a.bounds.max:a.max||a.position||a;l&&c&&(l.x<r.min.x&&(r.min.x=l.x),c.x>r.max.x&&(r.max.x=c.x),l.y<r.min.y&&(r.min.y=l.y),c.y>r.max.y&&(r.max.y=c.y))}var u=r.max.x-r.min.x+2*n.x,p=r.max.y-r.min.y+2*n.y,f=e.canvas.height,v=e.canvas.width/f,m=u/p,y=1,g=1;m>v?g=m/v:y=v/m,e.options.hasBounds=!0,e.bounds.min.x=r.min.x,e.bounds.max.x=r.min.x+u*y,e.bounds.min.y=r.min.y,e.bounds.max.y=r.min.y+p*g,i&&(e.bounds.min.x+=.5*u-u*y*.5,e.bounds.max.x+=.5*u-u*y*.5,e.bounds.min.y+=.5*p-p*g*.5,e.bounds.max.y+=.5*p-p*g*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(d.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),d.setOffset(e.mouse,e.bounds.min))},i.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,i=t/e.options.width,o=n/e.options.height;e.context.setTransform(e.options.pixelRatio/i,0,0,e.options.pixelRatio/o,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},i.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},i.world=function(e){var t,n=e.engine,o=n.world,u=e.canvas,p=e.context,v=e.options,m=r.allBodies(o),y=r.allConstraints(o),g=v.wireframes?v.wireframeBackground:v.background,x=[],h=[],b={timestamp:n.timing.timestamp};if(a.trigger(e,"beforeRender",b),e.currentBackground!==g&&f(e,g),p.globalCompositeOperation="source-in",p.fillStyle="transparent",p.fillRect(0,0,u.width,u.height),p.globalCompositeOperation="source-over",v.hasBounds){for(t=0;t<m.length;t++){var w=m[t];s.overlaps(w.bounds,e.bounds)&&x.push(w)}for(t=0;t<y.length;t++){var S=y[t],A=S.bodyA,P=S.bodyB,C=S.pointA,M=S.pointB;A&&(C=c.add(A.position,S.pointA)),P&&(M=c.add(P.position,S.pointB)),C&&M&&((s.contains(e.bounds,C)||s.contains(e.bounds,M))&&h.push(S))}i.startViewTransform(e),e.mouse&&(d.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),d.setOffset(e.mouse,e.bounds.min))}else h=y,x=m,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!v.wireframes||n.enableSleeping&&v.showSleeping?i.bodies(e,x,p):(v.showConvexHulls&&i.bodyConvexHulls(e,x,p),i.bodyWireframes(e,x,p)),v.showBounds&&i.bodyBounds(e,x,p),(v.showAxes||v.showAngleIndicator)&&i.bodyAxes(e,x,p),v.showPositions&&i.bodyPositions(e,x,p),v.showVelocity&&i.bodyVelocity(e,x,p),v.showIds&&i.bodyIds(e,x,p),v.showSeparations&&i.separations(e,n.pairs.list,p),v.showCollisions&&i.collisions(e,n.pairs.list,p),v.showVertexNumbers&&i.vertexNumbers(e,x,p),v.showMousePosition&&i.mousePosition(e,e.mouse,p),i.constraints(h,p),v.showBroadphase&&n.broadphase.controller===l&&i.grid(e,n.broadphase,p),v.showDebug&&i.debug(e,p),v.hasBounds&&i.endViewTransform(e),a.trigger(e,"afterRender",b)},i.debug=function(e,t){var n=t,i=e.engine,o=i.world,s=i.metrics,a=e.options,c=r.allBodies(o);if(i.timing.timestamp-(e.debugTimestamp||0)>=500){var d="";s.timing&&(d+="fps: "+Math.round(s.timing.fps)+"    "),s.extended&&(s.timing&&(d+="delta: "+s.timing.delta.toFixed(3)+"    ",d+="correction: "+s.timing.correction.toFixed(3)+"    "),d+="bodies: "+c.length+"    ",i.broadphase.controller===l&&(d+="buckets: "+s.buckets+"    "),d+="\n",d+="collisions: "+s.collisions+"    ",d+="pairs: "+i.pairs.list.length+"    ",d+="broad: "+s.broadEff+"    ",d+="mid: "+s.midEff+"    ",d+="narrow: "+s.narrowEff+"    "),e.debugString=d,e.debugTimestamp=i.timing.timestamp}if(e.debugString){n.font="12px Arial",a.wireframes?n.fillStyle="rgba(255,255,255,0.5)":n.fillStyle="rgba(0,0,0,0.5)";for(var u=e.debugString.split("\n"),p=0;p<u.length;p++)n.fillText(u[p],50,50+18*p)}},i.constraints=function(e,t){for(var n=t,i=0;i<e.length;i++){var r=e[i];if(r.render.visible&&r.pointA&&r.pointB){var s,a,l=r.bodyA,d=r.bodyB;if(s=l?c.add(l.position,r.pointA):r.pointA,"pin"===r.render.type)n.beginPath(),n.arc(s.x,s.y,3,0,2*Math.PI),n.closePath();else{if(a=d?c.add(d.position,r.pointB):r.pointB,n.beginPath(),n.moveTo(s.x,s.y),"spring"===r.render.type)for(var u,p=c.sub(a,s),f=c.perp(c.normalise(p)),v=Math.ceil(o.clamp(r.length/5,12,20)),m=1;m<v;m+=1)u=m%2==0?1:-1,n.lineTo(s.x+p.x*(m/v)+f.x*u*4,s.y+p.y*(m/v)+f.y*u*4);n.lineTo(a.x,a.y)}r.render.lineWidth&&(n.lineWidth=r.render.lineWidth,n.strokeStyle=r.render.strokeStyle,n.stroke()),r.render.anchors&&(n.fillStyle=r.render.strokeStyle,n.beginPath(),n.arc(s.x,s.y,3,0,2*Math.PI),n.arc(a.x,a.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},i.bodyShadows=function(e,t,n){for(var i=n,o=(e.engine,0);o<t.length;o++){var r=t[o];if(r.render.visible){if(r.circleRadius)i.beginPath(),i.arc(r.position.x,r.position.y,r.circleRadius,0,2*Math.PI),i.closePath();else{i.beginPath(),i.moveTo(r.vertices[0].x,r.vertices[0].y);for(var s=1;s<r.vertices.length;s++)i.lineTo(r.vertices[s].x,r.vertices[s].y);i.closePath()}var a=r.position.x-.5*e.options.width,l=r.position.y-.2*e.options.height,c=Math.abs(a)+Math.abs(l);i.shadowColor="rgba(0,0,0,0.15)",i.shadowOffsetX=.05*a,i.shadowOffsetY=.05*l,i.shadowBlur=1+12*Math.min(1,c/1e3),i.fill(),i.shadowColor=null,i.shadowOffsetX=null,i.shadowOffsetY=null,i.shadowBlur=null}}},i.bodies=function(e,t,n){var i,o,r,s,a=n,l=(e.engine,e.options),c=l.showInternalEdges||!l.wireframes;for(r=0;r<t.length;r++)if((i=t[r]).render.visible)for(s=i.parts.length>1?1:0;s<i.parts.length;s++)if((o=i.parts[s]).render.visible){if(l.showSleeping&&i.isSleeping?a.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(a.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!l.wireframes){var d=o.render.sprite,u=p(e,d.texture);a.translate(o.position.x,o.position.y),a.rotate(o.angle),a.drawImage(u,u.width*-d.xOffset*d.xScale,u.height*-d.yOffset*d.yScale,u.width*d.xScale,u.height*d.yScale),a.rotate(-o.angle),a.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)a.beginPath(),a.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(o.vertices[0].x,o.vertices[0].y);for(var f=1;f<o.vertices.length;f++)!o.vertices[f-1].isInternal||c?a.lineTo(o.vertices[f].x,o.vertices[f].y):a.moveTo(o.vertices[f].x,o.vertices[f].y),o.vertices[f].isInternal&&!c&&a.moveTo(o.vertices[(f+1)%o.vertices.length].x,o.vertices[(f+1)%o.vertices.length].y);a.lineTo(o.vertices[0].x,o.vertices[0].y),a.closePath()}l.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=o.render.fillStyle,o.render.lineWidth&&(a.lineWidth=o.render.lineWidth,a.strokeStyle=o.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},i.bodyWireframes=function(e,t,n){var i,o,r,s,a,l=n,c=e.options.showInternalEdges;for(l.beginPath(),r=0;r<t.length;r++)if((i=t[r]).render.visible)for(a=i.parts.length>1?1:0;a<i.parts.length;a++){for(o=i.parts[a],l.moveTo(o.vertices[0].x,o.vertices[0].y),s=1;s<o.vertices.length;s++)!o.vertices[s-1].isInternal||c?l.lineTo(o.vertices[s].x,o.vertices[s].y):l.moveTo(o.vertices[s].x,o.vertices[s].y),o.vertices[s].isInternal&&!c&&l.moveTo(o.vertices[(s+1)%o.vertices.length].x,o.vertices[(s+1)%o.vertices.length].y);l.lineTo(o.vertices[0].x,o.vertices[0].y)}l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()},i.bodyConvexHulls=function(e,t,n){var i,o,r,s=n;for(s.beginPath(),o=0;o<t.length;o++)if((i=t[o]).render.visible&&1!==i.parts.length){for(s.moveTo(i.vertices[0].x,i.vertices[0].y),r=1;r<i.vertices.length;r++)s.lineTo(i.vertices[r].x,i.vertices[r].y);s.lineTo(i.vertices[0].x,i.vertices[0].y)}s.lineWidth=1,s.strokeStyle="rgba(255,255,255,0.2)",s.stroke()},i.vertexNumbers=function(e,t,n){var i,o,r,s=n;for(i=0;i<t.length;i++){var a=t[i].parts;for(r=a.length>1?1:0;r<a.length;r++){var l=a[r];for(o=0;o<l.vertices.length;o++)s.fillStyle="rgba(255,255,255,0.2)",s.fillText(i+"_"+o,l.position.x+.8*(l.vertices[o].x-l.position.x),l.position.y+.8*(l.vertices[o].y-l.position.y))}}},i.mousePosition=function(e,t,n){var i=n;i.fillStyle="rgba(255,255,255,0.8)",i.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},i.bodyBounds=function(e,t,n){var i=n,o=(e.engine,e.options);i.beginPath();for(var r=0;r<t.length;r++){if(t[r].render.visible)for(var s=t[r].parts,a=s.length>1?1:0;a<s.length;a++){var l=s[a];i.rect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}}o.wireframes?i.strokeStyle="rgba(255,255,255,0.08)":i.strokeStyle="rgba(0,0,0,0.1)",i.lineWidth=1,i.stroke()},i.bodyAxes=function(e,t,n){var i,o,r,s,a=n,l=(e.engine,e.options);for(a.beginPath(),o=0;o<t.length;o++){var c=t[o],d=c.parts;if(c.render.visible)if(l.showAxes)for(r=d.length>1?1:0;r<d.length;r++)for(i=d[r],s=0;s<i.axes.length;s++){var u=i.axes[s];a.moveTo(i.position.x,i.position.y),a.lineTo(i.position.x+20*u.x,i.position.y+20*u.y)}else for(r=d.length>1?1:0;r<d.length;r++)for(i=d[r],s=0;s<i.axes.length;s++)a.moveTo(i.position.x,i.position.y),a.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2)}l.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},i.bodyPositions=function(e,t,n){var i,o,r,s,a=n,l=(e.engine,e.options);for(a.beginPath(),r=0;r<t.length;r++)if((i=t[r]).render.visible)for(s=0;s<i.parts.length;s++)o=i.parts[s],a.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),a.closePath();for(l.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),r=0;r<t.length;r++)(i=t[r]).render.visible&&(a.arc(i.positionPrev.x,i.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},i.bodyVelocity=function(e,t,n){var i=n;i.beginPath();for(var o=0;o<t.length;o++){var r=t[o];r.render.visible&&(i.moveTo(r.position.x,r.position.y),i.lineTo(r.position.x+2*(r.position.x-r.positionPrev.x),r.position.y+2*(r.position.y-r.positionPrev.y)))}i.lineWidth=3,i.strokeStyle="cornflowerblue",i.stroke()},i.bodyIds=function(e,t,n){var i,o,r=n;for(i=0;i<t.length;i++)if(t[i].render.visible){var s=t[i].parts;for(o=s.length>1?1:0;o<s.length;o++){var a=s[o];r.font="12px Arial",r.fillStyle="rgba(255,255,255,0.5)",r.fillText(a.id,a.position.x+10,a.position.y-10)}}},i.collisions=function(e,t,n){var i,o,r,s,a=n,l=e.options;for(a.beginPath(),r=0;r<t.length;r++)if((i=t[r]).isActive)for(o=i.collision,s=0;s<i.activeContacts.length;s++){var c=i.activeContacts[s].vertex;a.rect(c.x-1.5,c.y-1.5,3.5,3.5)}for(l.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),r=0;r<t.length;r++)if((i=t[r]).isActive&&(o=i.collision,i.activeContacts.length>0)){var d=i.activeContacts[0].vertex.x,u=i.activeContacts[0].vertex.y;2===i.activeContacts.length&&(d=(i.activeContacts[0].vertex.x+i.activeContacts[1].vertex.x)/2,u=(i.activeContacts[0].vertex.y+i.activeContacts[1].vertex.y)/2),o.bodyB===o.supports[0].body||!0===o.bodyA.isStatic?a.moveTo(d-8*o.normal.x,u-8*o.normal.y):a.moveTo(d+8*o.normal.x,u+8*o.normal.y),a.lineTo(d,u)}l.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},i.separations=function(e,t,n){var i,o,r,s,a,l=n,c=e.options;for(l.beginPath(),a=0;a<t.length;a++)if((i=t[a]).isActive){r=(o=i.collision).bodyA;var d=1;(s=o.bodyB).isStatic||r.isStatic||(d=.5),s.isStatic&&(d=0),l.moveTo(s.position.x,s.position.y),l.lineTo(s.position.x-o.penetration.x*d,s.position.y-o.penetration.y*d),d=1,s.isStatic||r.isStatic||(d=.5),r.isStatic&&(d=0),l.moveTo(r.position.x,r.position.y),l.lineTo(r.position.x+o.penetration.x*d,r.position.y+o.penetration.y*d)}c.wireframes?l.strokeStyle="rgba(255,165,0,0.5)":l.strokeStyle="orange",l.stroke()},i.grid=function(e,t,n){var i=n;e.options.wireframes?i.strokeStyle="rgba(255,180,0,0.1)":i.strokeStyle="rgba(255,180,0,0.5)",i.beginPath();for(var r=o.keys(t.buckets),s=0;s<r.length;s++){var a=r[s];if(!(t.buckets[a].length<2)){var l=a.split(/C|R/);i.rect(.5+parseInt(l[1],10)*t.bucketWidth,.5+parseInt(l[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}i.lineWidth=1,i.stroke()},i.inspector=function(e,t){e.engine;var n,i=e.selected,o=e.render,r=o.options;if(r.hasBounds){var s=o.bounds.max.x-o.bounds.min.x,a=o.bounds.max.y-o.bounds.min.y,l=s/o.options.width,c=a/o.options.height;t.scale(1/l,1/c),t.translate(-o.bounds.min.x,-o.bounds.min.y)}for(var d=0;d<i.length;d++){var u=i[d].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),u.type){case"body":n=u.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var p=u.pointA;u.bodyA&&(p=u.pointB),t.beginPath(),t.arc(p.x,p.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),r.hasBounds&&t.setTransform(1,0,0,1,0,0)};var n=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},u=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},p=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},f=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},function(e,t,n){var i={};e.exports=i;var o=n(9),r=n(12),s=n(0);i.create=function(e){var t={controller:i,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(t,e)},i.update=function(e,t,n,o){var r,s,a,l,c,d=n.world,u=e.buckets,p=!1,f=n.metrics;for(f.broadphaseTests=0,r=0;r<t.length;r++){var v=t[r];if((!v.isSleeping||o)&&!(v.bounds.max.x<d.bounds.min.x||v.bounds.min.x>d.bounds.max.x||v.bounds.max.y<d.bounds.min.y||v.bounds.min.y>d.bounds.max.y)){var m=i._getRegion(e,v);if(!v.region||m.id!==v.region.id||o){f.broadphaseTests+=1,v.region&&!o||(v.region=m);var y=i._regionUnion(m,v.region);for(s=y.startCol;s<=y.endCol;s++)for(a=y.startRow;a<=y.endRow;a++){l=u[c=i._getBucketId(s,a)];var g=s>=m.startCol&&s<=m.endCol&&a>=m.startRow&&a<=m.endRow,x=s>=v.region.startCol&&s<=v.region.endCol&&a>=v.region.startRow&&a<=v.region.endRow;!g&&x&&x&&l&&i._bucketRemoveBody(e,l,v),(v.region===m||g&&!x||o)&&(l||(l=i._createBucket(u,c)),i._bucketAddBody(e,l,v))}v.region=m,p=!0}}}p&&(e.pairsList=i._createActivePairsList(e))},i.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},i._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),o=Math.max(e.endCol,t.endCol),r=Math.min(e.startRow,t.startRow),s=Math.max(e.endRow,t.endRow);return i._createRegion(n,o,r,s)},i._getRegion=function(e,t){var n=t.bounds,o=Math.floor(n.min.x/e.bucketWidth),r=Math.floor(n.max.x/e.bucketWidth),s=Math.floor(n.min.y/e.bucketHeight),a=Math.floor(n.max.y/e.bucketHeight);return i._createRegion(o,r,s,a)},i._createRegion=function(e,t,n,i){return{id:e+","+t+","+n+","+i,startCol:e,endCol:t,startRow:n,endRow:i}},i._getBucketId=function(e,t){return"C"+e+"R"+t},i._createBucket=function(e,t){return e[t]=[]},i._bucketAddBody=function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];if(!(n.id===r.id||n.isStatic&&r.isStatic)){var s=o.id(n,r),a=e.pairs[s];a?a[2]+=1:e.pairs[s]=[n,r,1]}}t.push(n)},i._bucketRemoveBody=function(e,t,n){t.splice(s.indexOf(t,n),1);for(var i=0;i<t.length;i++){var r=t[i],a=o.id(n,r),l=e.pairs[a];l&&(l[2]-=1)}},i._createActivePairsList=function(e){var t,n,i=[];t=s.keys(e.pairs);for(var o=0;o<t.length;o++)(n=e.pairs[t[o]])[2]>0?i.push(n):delete e.pairs[t[o]];return i}},function(e,t,n){var i={};e.exports=i;var o=n(13),r=n(9),s=n(1);i.collisions=function(e,t){for(var n=[],a=t.pairs.table,l=t.metrics,c=0;c<e.length;c++){var d=e[c][0],u=e[c][1];if((!d.isStatic&&!d.isSleeping||!u.isStatic&&!u.isSleeping)&&i.canCollide(d.collisionFilter,u.collisionFilter)&&(l.midphaseTests+=1,s.overlaps(d.bounds,u.bounds)))for(var p=d.parts.length>1?1:0;p<d.parts.length;p++)for(var f=d.parts[p],v=u.parts.length>1?1:0;v<u.parts.length;v++){var m=u.parts[v];if(f===d&&m===u||s.overlaps(f.bounds,m.bounds)){var y,g=a[r.id(f,m)];y=g&&g.isActive?g.collision:null;var x=o.collides(f,m,y);l.narrowphaseTests+=1,x.reused&&(l.narrowReuseCount+=1),x.collided&&(n.push(x),l.narrowDetections+=1)}}}return n},i.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2);i.collides=function(e,t,n){var s,a,l,c,d=!1;if(n){var u=e.parent,p=t.parent,f=u.speed*u.speed+u.angularSpeed*u.angularSpeed+p.speed*p.speed+p.angularSpeed*p.angularSpeed;d=n&&n.collided&&f<.2,c=n}else c={collided:!1,bodyA:e,bodyB:t};if(n&&d){var v=c.axisBody,m=v===e?t:e,y=[v.axes[n.axisNumber]];if(l=i._overlapAxes(v.vertices,m.vertices,y),c.reused=!0,l.overlap<=0)return c.collided=!1,c}else{if((s=i._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;if((a=i._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;s.overlap<a.overlap?(l=s,c.axisBody=e):(l=a,c.axisBody=t),c.axisNumber=l.axisNumber}c.bodyA=e.id<t.id?e:t,c.bodyB=e.id<t.id?t:e,c.collided=!0,c.depth=l.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,e=c.bodyA,t=c.bodyB,r.dot(l.axis,r.sub(t.position,e.position))<0?c.normal={x:l.axis.x,y:l.axis.y}:c.normal={x:-l.axis.x,y:-l.axis.y},c.tangent=r.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var g=i._findSupports(e,t,c.normal),x=[];if(o.contains(e.vertices,g[0])&&x.push(g[0]),o.contains(e.vertices,g[1])&&x.push(g[1]),x.length<2){var h=i._findSupports(t,e,r.neg(c.normal));o.contains(t.vertices,h[0])&&x.push(h[0]),x.length<2&&o.contains(t.vertices,h[1])&&x.push(h[1])}return x.length<1&&(x=[g[0]]),c.supports=x,c},i._overlapAxes=function(e,t,n){for(var o,s,a=r._temp[0],l=r._temp[1],c={overlap:Number.MAX_VALUE},d=0;d<n.length;d++){if(s=n[d],i._projectToAxis(a,e,s),i._projectToAxis(l,t,s),(o=Math.min(a.max-l.min,l.max-a.min))<=0)return c.overlap=o,c;o<c.overlap&&(c.overlap=o,c.axis=s,c.axisNumber=d)}return c},i._projectToAxis=function(e,t,n){for(var i=r.dot(t[0],n),o=i,s=1;s<t.length;s+=1){var a=r.dot(t[s],n);a>o?o=a:a<i&&(i=a)}e.min=i,e.max=o},i._findSupports=function(e,t,n){for(var i,o,s,a,l=Number.MAX_VALUE,c=r._temp[0],d=t.vertices,u=e.position,p=0;p<d.length;p++)o=d[p],c.x=o.x-u.x,c.y=o.y-u.y,(i=-r.dot(n,c))<l&&(l=i,s=o);return o=d[s.index-1>=0?s.index-1:d.length-1],c.x=o.x-u.x,c.y=o.y-u.y,l=-r.dot(n,c),a=o,o=d[(s.index+1)%d.length],c.x=o.x-u.x,c.y=o.y-u.y,(i=-r.dot(n,c))<l&&(a=o),[s,a]}},function(e,t,n){var i={};e.exports=i;var o=n(0);i.create=function(e){var t={};return e||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=parseInt(t.element.getAttribute("data-pixel-ratio"),10)||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var n=i._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var n=i._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var n=i._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},i.setElement(t,t.element),t},i.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},i.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},i.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},i.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},i._getRelativeMousePosition=function(e,t,n){var i,o,r=t.getBoundingClientRect(),s=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:s.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:s.scrollTop,c=e.changedTouches;return c?(i=c[0].pageX-r.left-a,o=c[0].pageY-r.top-l):(i=e.pageX-r.left-a,o=e.pageY-r.top-l),{x:i/(t.clientWidth/(t.width||t.clientWidth)*n),y:o/(t.clientHeight/(t.height||t.clientHeight)*n)}}},function(e,t,n){var i={};e.exports=i;var o=n(2),r=n(0);i.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var i=(n+1)%e.length,s=o.normalise({x:e[i].y-e[n].y,y:e[n].x-e[i].x}),a=0===s.y?1/0:s.x/s.y;t[a=a.toFixed(3).toString()]=s}return r.values(t)},i.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),i=Math.sin(t),o=0;o<e.length;o++){var r,s=e[o];r=s.x*n-s.y*i,s.y=s.x*i+s.y*n,s.x=r}}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(0),s=n(6),a=n(1),l=n(2);i.rectangle=function(e,t,n,i,a){a=a||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:o.fromPath("L 0 0 L "+n+" 0 L "+n+" "+i+" L 0 "+i)};if(a.chamfer){var c=a.chamfer;l.vertices=o.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return s.create(r.extend({},l,a))},i.trapezoid=function(e,t,n,i,a,l){l=l||{};var c,d=n*(a*=.5),u=d+(1-2*a)*n,p=u+d;c=a<.5?"L 0 0 L "+d+" "+-i+" L "+u+" "+-i+" L "+p+" 0":"L 0 0 L "+u+" "+-i+" L "+p+" 0";var f={label:"Trapezoid Body",position:{x:e,y:t},vertices:o.fromPath(c)};if(l.chamfer){var v=l.chamfer;f.vertices=o.chamfer(f.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete l.chamfer}return s.create(r.extend({},f,l))},i.circle=function(e,t,n,o,s){o=o||{};var a={label:"Circle Body",circleRadius:n};s=s||25;var l=Math.ceil(Math.max(10,Math.min(s,n)));return l%2==1&&(l+=1),i.polygon(e,t,l,n,r.extend({},a,o))},i.polygon=function(e,t,n,a,l){if(l=l||{},n<3)return i.circle(e,t,a,l);for(var c=2*Math.PI/n,d="",u=.5*c,p=0;p<n;p+=1){var f=u+p*c,v=Math.cos(f)*a,m=Math.sin(f)*a;d+="L "+v.toFixed(3)+" "+m.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:e,y:t},vertices:o.fromPath(d)};if(l.chamfer){var g=l.chamfer;y.vertices=o.chamfer(y.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete l.chamfer}return s.create(r.extend({},y,l))},i.fromVertices=function(e,t,i,c,d,u,p,f){var v,m,y,g,x,h,b,w,S,A=n(27);for(c=c||{},m=[],d=void 0!==d&&d,u=void 0!==u?u:.01,p=void 0!==p?p:10,f=void 0!==f?f:.01,A||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(i[0])||(i=[i]),w=0;w<i.length;w+=1)if(g=i[w],(y=o.isConvex(g))||!A)g=y?o.clockwiseSort(g):o.hull(g),m.push({position:{x:e,y:t},vertices:g});else{var P=g.map((function(e){return[e.x,e.y]}));A.makeCCW(P),!1!==u&&A.removeCollinearPoints(P,u),!1!==f&&A.removeDuplicatePoints&&A.removeDuplicatePoints(P,f);var C=A.quickDecomp(P);for(x=0;x<C.length;x++){var M=C[x].map((function(e){return{x:e[0],y:e[1]}}));p>0&&o.area(M)<p||m.push({position:o.centre(M),vertices:M})}}for(x=0;x<m.length;x++)m[x]=s.create(r.extend(m[x],c));if(d)for(x=0;x<m.length;x++){var k=m[x];for(h=x+1;h<m.length;h++){var B=m[h];if(a.overlaps(k.bounds,B.bounds)){var I=k.vertices,_=B.vertices;for(b=0;b<k.vertices.length;b++)for(S=0;S<B.vertices.length;S++){var T=l.magnitudeSquared(l.sub(I[(b+1)%I.length],_[S])),R=l.magnitudeSquared(l.sub(I[b],_[(S+1)%_.length]));T<5&&R<5&&(I[b].isInternal=!0,_[S].isInternal=!0)}}}}return m.length>1?(v=s.create(r.extend({parts:m.slice(0)},c)),s.setPosition(v,{x:e,y:t}),v):m[0]}},function(e,t,n){var i={};e.exports=i;var o=n(0);i._registry={},i.register=function(e){if(i.isPlugin(e)||o.warn("Plugin.register:",i.toString(e),"does not implement all required fields."),e.name in i._registry){var t=i._registry[e.name],n=i.versionParse(e.version).number,r=i.versionParse(t.version).number;n>r?(o.warn("Plugin.register:",i.toString(t),"was upgraded to",i.toString(e)),i._registry[e.name]=e):n<r?o.warn("Plugin.register:",i.toString(t),"can not be downgraded to",i.toString(e)):e!==t&&o.warn("Plugin.register:",i.toString(e),"is already registered to different plugin object")}else i._registry[e.name]=e;return e},i.resolve=function(e){return i._registry[i.dependencyParse(e).name]},i.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},i.isPlugin=function(e){return e&&e.name&&e.version&&e.install},i.isUsed=function(e,t){return e.used.indexOf(t)>-1},i.isFor=function(e,t){var n=e.for&&i.dependencyParse(e.for);return!e.for||t.name===n.name&&i.versionSatisfies(t.version,n.range)},i.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n=i.dependencies(e),r=o.topologicalSort(n),s=[],a=0;a<r.length;a+=1)if(r[a]!==e.name){var l=i.resolve(r[a]);l?i.isUsed(e,l.name)||(i.isFor(l,e)||(o.warn("Plugin.use:",i.toString(l),"is for",l.for,"but installed on",i.toString(e)+"."),l._warned=!0),l.install?l.install(e):(o.warn("Plugin.use:",i.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(s.push(" "+i.toString(l)),delete l._warned):s.push(" "+i.toString(l)),e.used.push(l.name)):s.push(" "+r[a])}s.length>0&&o.info(s.join("  "))}else o.warn("Plugin.use:",i.toString(e),"does not specify any dependencies to install.")},i.dependencies=function(e,t){var n=i.dependencyParse(e),r=n.name;if(!(r in(t=t||{}))){e=i.resolve(e)||e,t[r]=o.map(e.uses||[],(function(t){i.isPlugin(t)&&i.register(t);var r=i.dependencyParse(t),s=i.resolve(t);return s&&!i.versionSatisfies(s.version,r.range)?(o.warn("Plugin.dependencies:",i.toString(s),"does not satisfy",i.toString(r),"used by",i.toString(n)+"."),s._warned=!0,e._warned=!0):s||(o.warn("Plugin.dependencies:",i.toString(t),"used by",i.toString(n),"could not be resolved."),e._warned=!0),r.name}));for(var s=0;s<t[r].length;s+=1)i.dependencies(t[r][s],t);return t}},i.dependencyParse=function(e){return o.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||o.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},i.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-]+)?$/;t.test(e)||o.warn("Plugin.versionParse:",e,"is not a valid version or range.");var n=t.exec(e),i=Number(n[4]),r=Number(n[5]),s=Number(n[6]);return{isRange:Boolean(n[1]||n[2]),version:n[3],range:e,operator:n[1]||n[2]||"",major:i,minor:r,patch:s,parts:[i,r,s],prerelease:n[7],number:1e8*i+1e4*r+s}},i.versionSatisfies=function(e,t){t=t||"*";var n=i.versionParse(t),o=i.versionParse(e);if(n.isRange){if("*"===n.operator||"*"===e)return!0;if(">"===n.operator)return o.number>n.number;if(">="===n.operator)return o.number>=n.number;if("~"===n.operator)return o.major===n.major&&o.minor===n.minor&&o.patch>=n.patch;if("^"===n.operator)return n.major>0?o.major===n.major&&o.number>=n.number:n.minor>0?o.minor===n.minor&&o.patch>=n.patch:o.patch===n.patch}return e===t||"*"===e}},function(e,t){var n={};e.exports=n,n.create=function(e){return{id:n.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},n.id=function(e){return e.body.id+"_"+e.index}},function(e,t,n){var i={};e.exports=i;var o=n(5),r=(n(8),n(0));i.create=function(e){var t=o.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return r.extend(t,n,e)}},function(e,t,n){var i={};e.exports=i;var o=n(9),r=n(0);i._pairMaxIdleLife=1e3,i.create=function(e){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},i.update=function(e,t,n){var i,r,s,a,l=e.list,c=e.table,d=e.collisionStart,u=e.collisionEnd,p=e.collisionActive;for(d.length=0,u.length=0,p.length=0,a=0;a<l.length;a++)l[a].confirmedActive=!1;for(a=0;a<t.length;a++)(i=t[a]).collided&&((s=c[r=o.id(i.bodyA,i.bodyB)])?(s.isActive?p.push(s):d.push(s),o.update(s,i,n),s.confirmedActive=!0):(s=o.create(i,n),c[r]=s,d.push(s),l.push(s)));for(a=0;a<l.length;a++)(s=l[a]).isActive&&!s.confirmedActive&&(o.setActive(s,!1,n),u.push(s))},i.removeOld=function(e,t){var n,o,r,s,a=e.list,l=e.table,c=[];for(s=0;s<a.length;s++)(o=(n=a[s]).collision).bodyA.isSleeping||o.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>i._pairMaxIdleLife&&c.push(s);for(s=0;s<c.length;s++)delete l[(n=a[r=c[s]-s]).id],a.splice(r,1)},i.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2),s=n(0),a=n(1);i._restingThresh=4,i._restingThreshTangent=6,i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i.preSolvePosition=function(e){var t,n,i;for(t=0;t<e.length;t++)(n=e[t]).isActive&&(i=n.activeContacts.length,n.collision.parentA.totalContacts+=i,n.collision.parentB.totalContacts+=i)},i.solvePosition=function(e,t){var n,o,s,a,l,c,d,u,p,f=r._temp[0],v=r._temp[1],m=r._temp[2],y=r._temp[3];for(n=0;n<e.length;n++)(o=e[n]).isActive&&!o.isSensor&&(a=(s=o.collision).parentA,l=s.parentB,c=s.normal,d=r.sub(r.add(l.positionImpulse,l.position,f),r.add(a.positionImpulse,r.sub(l.position,s.penetration,v),m),y),o.separation=r.dot(c,d));for(n=0;n<e.length;n++)(o=e[n]).isActive&&!o.isSensor&&(a=(s=o.collision).parentA,l=s.parentB,c=s.normal,p=(o.separation-o.slop)*t,(a.isStatic||l.isStatic)&&(p*=2),a.isStatic||a.isSleeping||(u=i._positionDampen/a.totalContacts,a.positionImpulse.x+=c.x*p*u,a.positionImpulse.y+=c.y*p*u),l.isStatic||l.isSleeping||(u=i._positionDampen/l.totalContacts,l.positionImpulse.x-=c.x*p*u,l.positionImpulse.y-=c.y*p*u))},i.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var s=0;s<n.parts.length;s++){var l=n.parts[s];o.translate(l.vertices,n.positionImpulse),a.update(l.bounds,l.vertices,n.velocity),l.position.x+=n.positionImpulse.x,l.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,r.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=i._positionWarming,n.positionImpulse.y*=i._positionWarming)}}},i.preSolveVelocity=function(e){var t,n,i,o,s,a,l,c,d,u,p,f,v,m,y=r._temp[0],g=r._temp[1];for(t=0;t<e.length;t++)if((i=e[t]).isActive&&!i.isSensor)for(o=i.activeContacts,a=(s=i.collision).parentA,l=s.parentB,c=s.normal,d=s.tangent,n=0;n<o.length;n++)p=(u=o[n]).vertex,f=u.normalImpulse,v=u.tangentImpulse,0===f&&0===v||(y.x=c.x*f+d.x*v,y.y=c.y*f+d.y*v,a.isStatic||a.isSleeping||(m=r.sub(p,a.position,g),a.positionPrev.x+=y.x*a.inverseMass,a.positionPrev.y+=y.y*a.inverseMass,a.anglePrev+=r.cross(m,y)*a.inverseInertia),l.isStatic||l.isSleeping||(m=r.sub(p,l.position,g),l.positionPrev.x-=y.x*l.inverseMass,l.positionPrev.y-=y.y*l.inverseMass,l.anglePrev-=r.cross(m,y)*l.inverseInertia))},i.solveVelocity=function(e,t){for(var n=t*t,o=r._temp[0],a=r._temp[1],l=r._temp[2],c=r._temp[3],d=r._temp[4],u=r._temp[5],p=0;p<e.length;p++){var f=e[p];if(f.isActive&&!f.isSensor){var v=f.collision,m=v.parentA,y=v.parentB,g=v.normal,x=v.tangent,h=f.activeContacts,b=1/h.length;m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,y.velocity.x=y.position.x-y.positionPrev.x,y.velocity.y=y.position.y-y.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,y.angularVelocity=y.angle-y.anglePrev;for(var w=0;w<h.length;w++){var S=h[w],A=S.vertex,P=r.sub(A,m.position,a),C=r.sub(A,y.position,l),M=r.add(m.velocity,r.mult(r.perp(P),m.angularVelocity),c),k=r.add(y.velocity,r.mult(r.perp(C),y.angularVelocity),d),B=r.sub(M,k,u),I=r.dot(g,B),_=r.dot(x,B),T=Math.abs(_),R=s.sign(_),L=(1+f.restitution)*I,O=s.clamp(f.separation+I,0,1)*i._frictionNormalMultiplier,V=_,E=1/0;T>f.friction*f.frictionStatic*O*n&&(E=T,V=s.clamp(f.friction*R*n,-E,E));var F=r.cross(P,g),W=r.cross(C,g),q=b/(m.inverseMass+y.inverseMass+m.inverseInertia*F*F+y.inverseInertia*W*W);if(L*=q,V*=q,I<0&&I*I>i._restingThresh*n)S.normalImpulse=0;else{var j=S.normalImpulse;S.normalImpulse=Math.min(S.normalImpulse+L,0),L=S.normalImpulse-j}if(_*_>i._restingThreshTangent*n)S.tangentImpulse=0;else{var D=S.tangentImpulse;S.tangentImpulse=s.clamp(S.tangentImpulse+V,-E,E),V=S.tangentImpulse-D}o.x=g.x*L+x.x*V,o.y=g.y*L+x.y*V,m.isStatic||m.isSleeping||(m.positionPrev.x+=o.x*m.inverseMass,m.positionPrev.y+=o.y*m.inverseMass,m.anglePrev+=r.cross(P,o)*m.inverseInertia),y.isStatic||y.isSleeping||(y.positionPrev.x-=o.x*y.inverseMass,y.positionPrev.y-=o.y*y.inverseMass,y.anglePrev-=r.cross(C,o)*y.inverseInertia)}}}}},function(e,t,n){var i={};e.exports=i;var o=n(19),r=n(7),s=n(21),a=n(10),l=n(20),c=n(23),d=n(11),u=n(4),p=n(5),f=n(8),v=n(0),m=n(6);i.create=function(e,t){t=(t=v.isElement(e)?t:e)||{},((e=v.isElement(e)?e:null)||t.render)&&v.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:d}},i=v.extend(n,t);if(e||i.render){var r={element:e,controller:a};i.render=v.extend(r,i.render)}return i.render&&i.render.controller&&(i.render=i.render.controller.create(i.render)),i.render&&(i.render.engine=i),i.world=t.world||o.create(i.world),i.pairs=l.create(),i.broadphase=i.broadphase.controller.create(i.broadphase),i.metrics=i.metrics||{extended:!1},i.metrics=c.create(i.metrics),i},i.update=function(e,t,n){t=t||1e3/60,n=n||1;var o,a=e.world,d=e.timing,v=e.broadphase,m=[];d.timestamp+=t*d.timeScale;var y={timestamp:d.timestamp};u.trigger(e,"beforeUpdate",y);var g=p.allBodies(a),x=p.allConstraints(a);for(c.reset(e.metrics),e.enableSleeping&&r.update(g,d.timeScale),i._bodiesApplyGravity(g,a.gravity),i._bodiesUpdate(g,t,d.timeScale,n,a.bounds),f.preSolveAll(g),o=0;o<e.constraintIterations;o++)f.solveAll(x,d.timeScale);f.postSolveAll(g),v.controller?(a.isModified&&v.controller.clear(v),v.controller.update(v,g,e,a.isModified),m=v.pairsList):m=g,a.isModified&&p.setModified(a,!1,!1,!0);var h=v.detector(m,e),b=e.pairs,w=d.timestamp;for(l.update(b,h,w),l.removeOld(b,w),e.enableSleeping&&r.afterCollisions(b.list,d.timeScale),b.collisionStart.length>0&&u.trigger(e,"collisionStart",{pairs:b.collisionStart}),s.preSolvePosition(b.list),o=0;o<e.positionIterations;o++)s.solvePosition(b.list,d.timeScale);for(s.postSolvePosition(g),f.preSolveAll(g),o=0;o<e.constraintIterations;o++)f.solveAll(x,d.timeScale);for(f.postSolveAll(g),s.preSolveVelocity(b.list),o=0;o<e.velocityIterations;o++)s.solveVelocity(b.list,d.timeScale);return b.collisionActive.length>0&&u.trigger(e,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&u.trigger(e,"collisionEnd",{pairs:b.collisionEnd}),c.update(e.metrics,e),i._bodiesClearForces(g),u.trigger(e,"afterUpdate",y),e},i.merge=function(e,t){if(v.extend(e,t),t.world){e.world=t.world,i.clear(e);for(var n=p.allBodies(e.world),o=0;o<n.length;o++){var s=n[o];r.set(s,!1),s.id=v.nextId()}}},i.clear=function(e){var t=e.world;l.clear(e.pairs);var n=e.broadphase;if(n.controller){var i=p.allBodies(t);n.controller.clear(n),n.controller.update(n,i,e,!0)}},i._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},i._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var i=0;i<e.length;i++){var o=e[i];o.isStatic||o.isSleeping||(o.force.y+=o.mass*t.y*n,o.force.x+=o.mass*t.x*n)}},i._bodiesUpdate=function(e,t,n,i,o){for(var r=0;r<e.length;r++){var s=e[r];s.isStatic||s.isSleeping||m.update(s,t,n,i)}}},function(e,t,n){var i={};e.exports=i;var o=n(5),r=n(0);i.create=function(e){return r.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,e)},i.reset=function(e){e.extended&&(e.narrowDetections=0,e.narrowphaseTests=0,e.narrowReuse=0,e.narrowReuseCount=0,e.midphaseTests=0,e.broadphaseTests=0,e.narrowEff=0,e.midEff=0,e.broadEff=0,e.collisions=0,e.buckets=0,e.pairs=0,e.bodies=0)},i.update=function(e,t){if(e.extended){var n=t.world,i=o.allBodies(n);e.collisions=e.narrowDetections,e.pairs=t.pairs.list.length,e.bodies=i.length,e.midEff=(e.narrowDetections/(e.midphaseTests||1)).toFixed(2),e.narrowEff=(e.narrowDetections/(e.narrowphaseTests||1)).toFixed(2),e.broadEff=(1-e.broadphaseTests/(i.length||1)).toFixed(2),e.narrowReuse=(e.narrowReuseCount/(e.narrowphaseTests||1)).toFixed(2)}}},function(e,t,n){var i=e.exports=n(25);i.Body=n(6),i.Composite=n(5),i.World=n(19),i.Contact=n(18),i.Detector=n(12),i.Grid=n(11),i.Pairs=n(20),i.Pair=n(9),i.Query=n(26),i.Resolver=n(21),i.SAT=n(13),i.Constraint=n(8),i.MouseConstraint=n(28),i.Common=n(0),i.Engine=n(22),i.Events=n(4),i.Mouse=n(14),i.Runner=n(29),i.Sleeping=n(7),i.Plugin=n(17),i.Metrics=n(23),i.Bodies=n(16),i.Composites=n(30),i.Axes=n(15),i.Bounds=n(1),i.Svg=n(31),i.Vector=n(2),i.Vertices=n(3),i.Render=n(10),i.RenderPixi=n(32),i.World.add=i.Composite.add,i.World.remove=i.Composite.remove,i.World.addComposite=i.Composite.addComposite,i.World.addBody=i.Composite.addBody,i.World.addConstraint=i.Composite.addConstraint,i.World.clear=i.Composite.clear,i.Engine.run=i.Runner.run},function(e,t,n){var i={};e.exports=i;var o=n(17),r=n(0);i.name="matter-js",i.version="0.16.0",i.uses=[],i.used=[],i.use=function(){o.use(i,Array.prototype.slice.call(arguments))},i.before=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathBefore(i,e,t)},i.after=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathAfter(i,e,t)}},function(e,t,n){var i={};e.exports=i;var o=n(2),r=n(13),s=n(1),a=n(16),l=n(3);i.collides=function(e,t){for(var n=[],i=0;i<t.length;i++){var o=t[i];if(s.overlaps(o.bounds,e.bounds))for(var a=1===o.parts.length?0:1;a<o.parts.length;a++){var l=o.parts[a];if(s.overlaps(l.bounds,e.bounds)){var c=r.collides(l,e);if(c.collided){n.push(c);break}}}}return n},i.ray=function(e,t,n,r){r=r||1e-100;for(var s=o.angle(t,n),l=o.magnitude(o.sub(t,n)),c=.5*(n.x+t.x),d=.5*(n.y+t.y),u=a.rectangle(c,d,l,r,{angle:s}),p=i.collides(u,e),f=0;f<p.length;f+=1){var v=p[f];v.body=v.bodyB=v.bodyA}return p},i.region=function(e,t,n){for(var i=[],o=0;o<e.length;o++){var r=e[o],a=s.overlaps(r.bounds,t);(a&&!n||!a&&n)&&i.push(r)}return i},i.point=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];if(s.contains(o.bounds,t))for(var r=1===o.parts.length?0:1;r<o.parts.length;r++){var a=o.parts[r];if(s.contains(a.bounds,t)&&l.contains(a.vertices,t)){n.push(o);break}}}return n}},function(t,n){t.exports=e},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(7),s=n(14),a=n(4),l=n(12),c=n(8),d=n(5),u=n(0),p=n(1);i.create=function(e,t){var n=(e?e.mouse:null)||(t?t.mouse:null);n||(e&&e.render&&e.render.canvas?n=s.create(e.render.canvas):t&&t.element?n=s.create(t.element):(n=s.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var o={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:c.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},r=u.extend(o,t);return a.on(e,"beforeUpdate",(function(){var t=d.allBodies(e.world);i.update(r,t),i._triggerEvents(r)})),r},i.update=function(e,t){var n=e.mouse,i=e.constraint,s=e.body;if(0===n.button){if(i.bodyB)r.set(i.bodyB,!1),i.pointA=n.position;else for(var c=0;c<t.length;c++)if(s=t[c],p.contains(s.bounds,n.position)&&l.canCollide(s.collisionFilter,e.collisionFilter))for(var d=s.parts.length>1?1:0;d<s.parts.length;d++){var u=s.parts[d];if(o.contains(u.vertices,n.position)){i.pointA=n.position,i.bodyB=e.body=s,i.pointB={x:n.position.x-s.position.x,y:n.position.y-s.position.y},i.angleB=s.angle,r.set(s,!1),a.trigger(e,"startdrag",{mouse:n,body:s});break}}}else i.bodyB=e.body=null,i.pointB=null,s&&a.trigger(e,"enddrag",{mouse:n,body:s})},i._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&a.trigger(e,"mousemove",{mouse:t}),n.mousedown&&a.trigger(e,"mousedown",{mouse:t}),n.mouseup&&a.trigger(e,"mouseup",{mouse:t}),s.clearSourceEvents(t)}},function(e,t,n){var i={};e.exports=i;var o=n(4),r=n(22),s=n(0);!function(){var e,t,n;("undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e)||(e=function(e){n=setTimeout((function(){e(s.now())}),1e3/60)},t=function(){clearTimeout(n)});i.create=function(e){var t=s.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},i.run=function(t,n){return void 0!==t.positionIterations&&(n=t,t=i.create()),function o(r){t.frameRequestId=e(o),r&&t.enabled&&i.tick(t,n,r)}(),t},i.tick=function(e,t,n){var i,s=t.timing,a=1,l={timestamp:s.timestamp};o.trigger(e,"beforeTick",l),o.trigger(t,"beforeTick",l),e.isFixed?i=e.delta:(i=n-e.timePrev||e.delta,e.timePrev=n,e.deltaHistory.push(i),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),a=(i=(i=(i=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:i)>e.deltaMax?e.deltaMax:i)/e.delta,e.delta=i),0!==e.timeScalePrev&&(a*=s.timeScale/e.timeScalePrev),0===s.timeScale&&(a=0),e.timeScalePrev=s.timeScale,e.correction=a,e.frameCounter+=1,n-e.counterTimestamp>=1e3&&(e.fps=e.frameCounter*((n-e.counterTimestamp)/1e3),e.counterTimestamp=n,e.frameCounter=0),o.trigger(e,"tick",l),o.trigger(t,"tick",l),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),o.trigger(e,"beforeUpdate",l),r.update(t,i,a),o.trigger(e,"afterUpdate",l),t.render&&t.render.controller&&(o.trigger(e,"beforeRender",l),o.trigger(t,"beforeRender",l),t.render.controller.world(t.render),o.trigger(e,"afterRender",l),o.trigger(t,"afterRender",l)),o.trigger(e,"afterTick",l),o.trigger(t,"afterTick",l)},i.stop=function(e){t(e.frameRequestId)},i.start=function(e,t){i.run(e,t)}}()},function(e,t,n){var i={};e.exports=i;var o=n(5),r=n(8),s=n(0),a=n(6),l=n(16);i.stack=function(e,t,n,i,r,s,l){for(var c,d=o.create({label:"Stack"}),u=e,p=t,f=0,v=0;v<i;v++){for(var m=0,y=0;y<n;y++){var g=l(u,p,y,v,c,f);if(g){var x=g.bounds.max.y-g.bounds.min.y,h=g.bounds.max.x-g.bounds.min.x;x>m&&(m=x),a.translate(g,{x:.5*h,y:.5*x}),u=g.bounds.max.x+r,o.addBody(d,g),c=g,f+=1}else u+=r}p+=m+s,u=e}return d},i.chain=function(e,t,n,i,a,l){for(var c=e.bodies,d=1;d<c.length;d++){var u=c[d-1],p=c[d],f=u.bounds.max.y-u.bounds.min.y,v=u.bounds.max.x-u.bounds.min.x,m=p.bounds.max.y-p.bounds.min.y,y={bodyA:u,pointA:{x:v*t,y:f*n},bodyB:p,pointB:{x:(p.bounds.max.x-p.bounds.min.x)*i,y:m*a}},g=s.extend(y,l);o.addConstraint(e,r.create(g))}return e.label+=" Chain",e},i.mesh=function(e,t,n,i,a){var l,c,d,u,p,f=e.bodies;for(l=0;l<n;l++){for(c=1;c<t;c++)d=f[c-1+l*t],u=f[c+l*t],o.addConstraint(e,r.create(s.extend({bodyA:d,bodyB:u},a)));if(l>0)for(c=0;c<t;c++)d=f[c+(l-1)*t],u=f[c+l*t],o.addConstraint(e,r.create(s.extend({bodyA:d,bodyB:u},a))),i&&c>0&&(p=f[c-1+(l-1)*t],o.addConstraint(e,r.create(s.extend({bodyA:p,bodyB:u},a)))),i&&c<t-1&&(p=f[c+1+(l-1)*t],o.addConstraint(e,r.create(s.extend({bodyA:p,bodyB:u},a))))}return e.label+=" Mesh",e},i.pyramid=function(e,t,n,o,r,s,l){return i.stack(e,t,n,o,r,s,(function(t,i,s,c,d,u){var p=Math.min(o,Math.ceil(n/2)),f=d?d.bounds.max.x-d.bounds.min.x:0;if(!(c>p||s<(c=p-c)||s>n-1-c))return 1===u&&a.translate(d,{x:(s+(n%2==1?1:-1))*f,y:0}),l(e+(d?s*f:0)+s*r,i,s,c,d,u)}))},i.newtonsCradle=function(e,t,n,i,s){for(var a=o.create({label:"Newtons Cradle"}),c=0;c<n;c++){var d=l.circle(e+c*(1.9*i),t+s,i,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),u=r.create({pointA:{x:e+c*(1.9*i),y:t},bodyB:d});o.addBody(a,d),o.addConstraint(a,u)}return a},i.car=function(e,t,n,i,s){var c=a.nextGroup(!0),d=.5*-n+20,u=.5*n-20,p=o.create({label:"Car"}),f=l.rectangle(e,t,n,i,{collisionFilter:{group:c},chamfer:{radius:.5*i},density:2e-4}),v=l.circle(e+d,t+0,s,{collisionFilter:{group:c},friction:.8}),m=l.circle(e+u,t+0,s,{collisionFilter:{group:c},friction:.8}),y=r.create({bodyB:f,pointB:{x:d,y:0},bodyA:v,stiffness:1,length:0}),g=r.create({bodyB:f,pointB:{x:u,y:0},bodyA:m,stiffness:1,length:0});return o.addBody(p,f),o.addBody(p,v),o.addBody(p,m),o.addConstraint(p,y),o.addConstraint(p,g),p},i.softBody=function(e,t,n,o,r,a,c,d,u,p){u=s.extend({inertia:1/0},u),p=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var f=i.stack(e,t,n,o,r,a,(function(e,t){return l.circle(e,t,d,u)}));return i.mesh(f,n,o,c,p),f.label="Soft Body",f}},function(e,t,n){var i={};e.exports=i;n(1);var o=n(0);i.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,r,s,a,l,c,d,u,p,f,v,m=[],y=0,g=0,x=0;t=t||15;var h=function(e,t,n){var i=n%2==1&&n>1;if(!p||e!=p.x||t!=p.y){p&&i?(f=p.x,v=p.y):(f=0,v=0);var o={x:f+e,y:v+t};!i&&p||(p=o),m.push(o),g=f+e,x=v+t}},b=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":g=e.x,x=e.y;break;case"H":g=e.x;break;case"V":x=e.y}h(g,x,e.pathSegType)}};for(i._svgPathToAbsolute(e),s=e.getTotalLength(),c=[],n=0;n<e.pathSegList.numberOfItems;n+=1)c.push(e.pathSegList.getItem(n));for(d=c.concat();y<s;){if((l=c[e.getPathSegAtLength(y)])!=u){for(;d.length&&d[0]!=l;)b(d.shift());u=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=e.getPointAtLength(y),h(a.x,a.y,0)}y+=t}for(n=0,r=d.length;n<r;++n)b(d[n]);return m},i._svgPathToAbsolute=function(e){for(var t,n,i,o,r,s,a=e.pathSegList,l=0,c=0,d=a.numberOfItems,u=0;u<d;++u){var p=a.getItem(u),f=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in p&&(l=p.x),"y"in p&&(c=p.y);else switch("x1"in p&&(i=l+p.x1),"x2"in p&&(r=l+p.x2),"y1"in p&&(o=c+p.y1),"y2"in p&&(s=c+p.y2),"x"in p&&(l+=p.x),"y"in p&&(c+=p.y),f){case"m":a.replaceItem(e.createSVGPathSegMovetoAbs(l,c),u);break;case"l":a.replaceItem(e.createSVGPathSegLinetoAbs(l,c),u);break;case"h":a.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),u);break;case"v":a.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),u);break;case"c":a.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,i,o,r,s),u);break;case"s":a.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,r,s),u);break;case"q":a.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,i,o),u);break;case"t":a.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),u);break;case"a":a.replaceItem(e.createSVGPathSegArcAbs(l,c,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),u);break;case"z":case"Z":l=t,c=n}"M"!=f&&"m"!=f||(t=l,n=c)}}},function(e,t,n){var i={};e.exports=i;var o=n(1),r=n(5),s=n(0),a=n(4),l=n(2);!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(s.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i.create=function(e){s.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:i,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},n=s.extend(t,e),o=!n.options.wireframes&&"transparent"===n.options.background;return n.pixiOptions=n.pixiOptions||{view:n.canvas,transparent:o,antialias:!0,backgroundColor:e.background},n.mouse=e.mouse,n.engine=e.engine,n.renderer=n.renderer||new PIXI.WebGLRenderer(n.options.width,n.options.height,n.pixiOptions),n.container=n.container||new PIXI.Container,n.spriteContainer=n.spriteContainer||new PIXI.Container,n.canvas=n.canvas||n.renderer.view,n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.options.width,y:n.options.height}},a.on(n.engine,"beforeUpdate",(function(){i.clear(n)})),n.textures={},n.sprites={},n.primitives={},n.container.addChild(n.spriteContainer),s.isElement(n.element)?n.element.appendChild(n.canvas):s.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),n.canvas.oncontextmenu=function(){return!1},n.canvas.onselectstart=function(){return!1},n},i.run=function(t){!function n(o){t.frameRequestId=e(n),i.world(t)}()},i.stop=function(e){t(e.frameRequestId)},i.clear=function(e){for(var t=e.container,n=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;n.children[0];)n.removeChild(n.children[0]);var i=e.sprites["bg-0"];e.textures={},e.sprites={},e.primitives={},e.sprites["bg-0"]=i,i&&t.addChildAt(i,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},i.setBackground=function(e,t){if(e.currentBackground!==t){var n=t.indexOf&&-1!==t.indexOf("#"),i=e.sprites["bg-0"];if(n){var o=s.colorToNumber(t);e.renderer.backgroundColor=o,i&&e.container.removeChild(i)}else if(!i){var r=d(e,t);(i=e.sprites["bg-0"]=new PIXI.Sprite(r)).position.x=0,i.position.y=0,e.container.addChildAt(i,0)}e.currentBackground=t}},i.world=function(e){var t,n=e.engine.world,s=e.renderer,a=e.container,c=e.options,d=r.allBodies(n),u=r.allConstraints(n),p=[];c.wireframes?i.setBackground(e,c.wireframeBackground):i.setBackground(e,c.background);var f=e.bounds.max.x-e.bounds.min.x,v=e.bounds.max.y-e.bounds.min.y,m=f/e.options.width,y=v/e.options.height;if(c.hasBounds){for(t=0;t<d.length;t++){var g=d[t];g.render.sprite.visible=o.overlaps(g.bounds,e.bounds)}for(t=0;t<u.length;t++){var x=u[t],h=x.bodyA,b=x.bodyB,w=x.pointA,S=x.pointB;h&&(w=l.add(h.position,x.pointA)),b&&(S=l.add(b.position,x.pointB)),w&&S&&((o.contains(e.bounds,w)||o.contains(e.bounds,S))&&p.push(x))}a.scale.set(1/m,1/y),a.position.set(-e.bounds.min.x*(1/m),-e.bounds.min.y*(1/y))}else p=u;for(t=0;t<d.length;t++)i.body(e,d[t]);for(t=0;t<p.length;t++)i.constraint(e,p[t]);s.render(a)},i.constraint=function(e,t){e.engine;var n=t.bodyA,i=t.bodyB,o=t.pointA,r=t.pointB,a=e.container,l=t.render,c="c-"+t.id,d=e.primitives[c];d||(d=e.primitives[c]=new PIXI.Graphics),l.visible&&t.pointA&&t.pointB?(-1===s.indexOf(a.children,d)&&a.addChild(d),d.clear(),d.beginFill(0,0),d.lineStyle(l.lineWidth,s.colorToNumber(l.strokeStyle),1),n?d.moveTo(n.position.x+o.x,n.position.y+o.y):d.moveTo(o.x,o.y),i?d.lineTo(i.position.x+r.x,i.position.y+r.y):d.lineTo(r.x,r.y),d.endFill()):d.clear()},i.body=function(e,t){e.engine;var i=t.render;if(i.visible)if(i.sprite&&i.sprite.texture){var o="b-"+t.id,r=e.sprites[o],a=e.spriteContainer;r||(r=e.sprites[o]=n(e,t)),-1===s.indexOf(a.children,r)&&a.addChild(r),r.position.x=t.position.x,r.position.y=t.position.y,r.rotation=t.angle,r.scale.x=i.sprite.xScale||1,r.scale.y=i.sprite.yScale||1}else{var l="b-"+t.id,d=e.primitives[l],u=e.container;d||((d=e.primitives[l]=c(e,t)).initialAngle=t.angle),-1===s.indexOf(u.children,d)&&u.addChild(d),d.position.x=t.position.x,d.position.y=t.position.y,d.rotation=t.angle-d.initialAngle}};var n=function(e,t){var n=t.render.sprite.texture,i=d(e,n),o=new PIXI.Sprite(i);return o.anchor.x=t.render.sprite.xOffset,o.anchor.y=t.render.sprite.yOffset,o},c=function(e,t){var n,i=t.render,o=e.options,r=new PIXI.Graphics,a=s.colorToNumber(i.fillStyle),l=s.colorToNumber(i.strokeStyle),c=s.colorToNumber(i.strokeStyle),d=s.colorToNumber("#bbb"),u=s.colorToNumber("#CD5C5C");r.clear();for(var p=t.parts.length>1?1:0;p<t.parts.length;p++){n=t.parts[p],o.wireframes?(r.beginFill(0,0),r.lineStyle(1,d,1)):(r.beginFill(a,1),r.lineStyle(i.lineWidth,l,1)),r.moveTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y);for(var f=1;f<n.vertices.length;f++)r.lineTo(n.vertices[f].x-t.position.x,n.vertices[f].y-t.position.y);r.lineTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y),r.endFill(),(o.showAngleIndicator||o.showAxes)&&(r.beginFill(0,0),o.wireframes?r.lineStyle(1,u,1):r.lineStyle(1,c),r.moveTo(n.position.x-t.position.x,n.position.y-t.position.y),r.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2-t.position.x,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2-t.position.y),r.endFill())}return r},d=function(e,t){var n=e.textures[t];return n||(n=e.textures[t]=PIXI.Texture.fromImage(t)),n}}()}])}));
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

module.exports = _arrayLikeToArray;
},{}],2:[function(require,module,exports){
var arrayLikeToArray = require("./arrayLikeToArray");

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return arrayLikeToArray(arr);
}

module.exports = _arrayWithoutHoles;
},{"./arrayLikeToArray":1}],3:[function(require,module,exports){
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

module.exports = _assertThisInitialized;
},{}],4:[function(require,module,exports){
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

module.exports = _asyncToGenerator;
},{}],5:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck;
},{}],6:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf");

var isNativeReflectConstruct = require("./isNativeReflectConstruct");

function _construct(Parent, args, Class) {
  if (isNativeReflectConstruct()) {
    module.exports = _construct = Reflect.construct;
  } else {
    module.exports = _construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) setPrototypeOf(instance, Class.prototype);
      return instance;
    };
  }

  return _construct.apply(null, arguments);
}

module.exports = _construct;
},{"./isNativeReflectConstruct":15,"./setPrototypeOf":19}],7:[function(require,module,exports){
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

module.exports = _createClass;
},{}],8:[function(require,module,exports){
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

module.exports = _defineProperty;
},{}],9:[function(require,module,exports){
var superPropBase = require("./superPropBase");

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    module.exports = _get = Reflect.get;
  } else {
    module.exports = _get = function _get(target, property, receiver) {
      var base = superPropBase(target, property);
      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };
  }

  return _get(target, property, receiver || target);
}

module.exports = _get;
},{"./superPropBase":20}],10:[function(require,module,exports){
function _getPrototypeOf(o) {
  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

module.exports = _getPrototypeOf;
},{}],11:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) setPrototypeOf(subClass, superClass);
}

module.exports = _inherits;
},{"./setPrototypeOf":19}],12:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;
},{}],13:[function(require,module,exports){
var _typeof = require("@babel/runtime/helpers/typeof");

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {
    return {
      "default": obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj["default"] = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

module.exports = _interopRequireWildcard;
},{"@babel/runtime/helpers/typeof":22}],14:[function(require,module,exports){
function _isNativeFunction(fn) {
  return Function.toString.call(fn).indexOf("[native code]") !== -1;
}

module.exports = _isNativeFunction;
},{}],15:[function(require,module,exports){
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

module.exports = _isNativeReflectConstruct;
},{}],16:[function(require,module,exports){
function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

module.exports = _iterableToArray;
},{}],17:[function(require,module,exports){
function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

module.exports = _nonIterableSpread;
},{}],18:[function(require,module,exports){
var _typeof = require("@babel/runtime/helpers/typeof");

var assertThisInitialized = require("./assertThisInitialized");

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return assertThisInitialized(self);
}

module.exports = _possibleConstructorReturn;
},{"./assertThisInitialized":3,"@babel/runtime/helpers/typeof":22}],19:[function(require,module,exports){
function _setPrototypeOf(o, p) {
  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

module.exports = _setPrototypeOf;
},{}],20:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf");

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

module.exports = _superPropBase;
},{"./getPrototypeOf":10}],21:[function(require,module,exports){
var arrayWithoutHoles = require("./arrayWithoutHoles");

var iterableToArray = require("./iterableToArray");

var unsupportedIterableToArray = require("./unsupportedIterableToArray");

var nonIterableSpread = require("./nonIterableSpread");

function _toConsumableArray(arr) {
  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();
}

module.exports = _toConsumableArray;
},{"./arrayWithoutHoles":2,"./iterableToArray":16,"./nonIterableSpread":17,"./unsupportedIterableToArray":23}],22:[function(require,module,exports){
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    module.exports = _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    module.exports = _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

module.exports = _typeof;
},{}],23:[function(require,module,exports){
var arrayLikeToArray = require("./arrayLikeToArray");

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);
}

module.exports = _unsupportedIterableToArray;
},{"./arrayLikeToArray":1}],24:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf");

var setPrototypeOf = require("./setPrototypeOf");

var isNativeFunction = require("./isNativeFunction");

var construct = require("./construct");

function _wrapNativeSuper(Class) {
  var _cache = typeof Map === "function" ? new Map() : undefined;

  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {
    if (Class === null || !isNativeFunction(Class)) return Class;

    if (typeof Class !== "function") {
      throw new TypeError("Super expression must either be null or a function");
    }

    if (typeof _cache !== "undefined") {
      if (_cache.has(Class)) return _cache.get(Class);

      _cache.set(Class, Wrapper);
    }

    function Wrapper() {
      return construct(Class, arguments, getPrototypeOf(this).constructor);
    }

    Wrapper.prototype = Object.create(Class.prototype, {
      constructor: {
        value: Wrapper,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    return setPrototypeOf(Wrapper, Class);
  };

  return _wrapNativeSuper(Class);
}

module.exports = _wrapNativeSuper;
},{"./construct":6,"./getPrototypeOf":10,"./isNativeFunction":14,"./setPrototypeOf":19}],25:[function(require,module,exports){
/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
  typeof module === "object" ? module.exports : {}
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}

},{}],26:[function(require,module,exports){
module.exports = require("regenerator-runtime");

},{"regenerator-runtime":25}],27:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _Timeline = _interopRequireDefault(require("./Timeline.js"));

var Animation = /*#__PURE__*/function () {
  /**
   * @type {number}
   */

  /**
   * @type {string}
   */

  /**
   * @type {KeyFrame[]}
   */

  /**
   * @type {number}
   */

  /**
   * @type {boolean}
   */

  /**
   * @type {Timeline[]}
   */

  /**
   * @type {number}
   */

  /**
   * @type {number}
   */

  /**
   * @type {number}
   */

  /**
   * @param {number} id
   * @param {string} name
   */
  function Animation(id, name) {
    (0, _classCallCheck2["default"])(this, Animation);
    (0, _defineProperty2["default"])(this, "id", void 0);
    (0, _defineProperty2["default"])(this, "name", void 0);
    (0, _defineProperty2["default"])(this, "frames", void 0);
    (0, _defineProperty2["default"])(this, "samples", void 0);
    (0, _defineProperty2["default"])(this, "playing", void 0);
    (0, _defineProperty2["default"])(this, "timeline", void 0);
    (0, _defineProperty2["default"])(this, "time", void 0);
    (0, _defineProperty2["default"])(this, "loopTimes", void 0);
    (0, _defineProperty2["default"])(this, "lengthSecond", void 0);
    this.id = id;
    this.name = name;
    this.frames = [];
    this.timeline = [];
    this.samples = 10;
    this.playing = false;
    this.time = 0;
    this.loopTimes = 0;
    this.lengthSecond = 1;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(Animation, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {KeyFrame[]} frames
     */

  }, {
    key: "setFrames",
    value: function setFrames(frames) {
      this.frames = frames;
      this.updateTimeline();
    }
    /**
     * @return {KeyFrame[]}
     */

  }, {
    key: "getFrames",
    value: function getFrames() {
      return this.frames;
    }
    /**
     * @param {number|string} samples
     */

  }, {
    key: "setSamples",
    value: function setSamples(samples) {
      this.samples = parseInt(samples);
      this.updateTimeline();
    }
    /**
     * @return {number}
     */

  }, {
    key: "getSamples",
    value: function getSamples() {
      return this.samples;
    }
    /**
     * @param {number|string} loopTimes
     */

  }, {
    key: "setLoopTimes",
    value: function setLoopTimes(loopTimes) {
      this.loopTimes = parseInt(loopTimes);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getLoopTimes",
    value: function getLoopTimes() {
      return this.loopTimes;
    }
    /**
     * @param {boolean} playing
     */

  }, {
    key: "setPlaying",
    value: function setPlaying(playing) {
      this.playing = playing;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isPlaying",
    value: function isPlaying() {
      return this.playing;
    }
    /**
     * @param {number} time
     * @return {KeyFrame}
     */

  }, {
    key: "getAt",
    value: function getAt(time) {
      var frame = this.tryGetAt(time);

      if (!frame) {
        throw new _ClientError["default"]("No keyframe found at ".concat(time));
      }

      return frame;
    }
    /**
     * @param {KeyFrame} frame
     */

  }, {
    key: "addFrame",
    value: function addFrame(frame) {
      var timeline = this.timeline[frame.getTime()];

      if (timeline) {
        if (!timeline.getFrame()) {
          timeline.setFrame(frame);
          this.frames.push(frame);
          this.updateTimeline();
        } else {
          throw new _ClientError["default"]("Cannot add frame at \"".concat(frame.getTime(), "\": Frame already exist"));
        }
      } else {
        throw new _ClientError["default"]("Cannot add frame at \"".concat(frame.getTime(), "\": Out of range"));
      }
    }
    /**
     * @param {KeyFrame} frame
     */

  }, {
    key: "deleteFrame",
    value: function deleteFrame(frame) {
      var timeline = this.timeline[frame.getTime()];
      var frameIndex = this.frames.findIndex(function (pFrame) {
        return pFrame === frame;
      });

      if (timeline) {
        if (timeline.getFrame()) {
          timeline.setFrame(null);
          this.frames.splice(frameIndex, 1);
          this.updateTimeline();
        } else {
          throw new _ClientError["default"]("Cannot delete frame at \"".concat(frame.getTime(), "\": No frame exist"));
        }
      } else {
        throw new _ClientError["default"]("Cannot delete frame at \"".concat(frame.getTime(), "\": Out of range"));
      }
    }
    /**
     * @param {number} time
     * @return {KeyFrame}
     */

  }, {
    key: "tryGetAt",
    value: function tryGetAt(time) {
      return this.frames.find(function (frame) {
        return frame.getTime() === time;
      });
    }
    /**
     * @return {Timeline}
     */

  }, {
    key: "getSelectedTimeline",
    value: function getSelectedTimeline() {
      return this.timeline.find(function (pTimeline) {
        return pTimeline.isSelected();
      });
    }
    /**
     * @return {number}
     */

  }, {
    key: "getSelectedTime",
    value: function getSelectedTime() {
      var _this = this;

      return this.timeline.findIndex(function (pTimeline) {
        return pTimeline === _this.getSelectedTimeline();
      });
    }
  }, {
    key: "updateTimeline",
    value: function updateTimeline() {
      var _this2 = this;

      var times = (0, _toConsumableArray2["default"])(Array(Math.ceil(this.getSamples() * this.getLengthSecond())).keys());
      this.timeline = times.map(function (time) {
        return new _Timeline["default"](_this2.tryGetAt(time));
      });
    }
    /**
     * @param {number} frameTime
     */

  }, {
    key: "selectTimeline",
    value: function selectTimeline(frameTime) {
      this.timeline.forEach(function (pTimeline) {
        var frame = pTimeline.getFrame();

        if (frame && frame.getTime() === frameTime) {
          pTimeline.select();
        } else {
          pTimeline.unselect();
        }
      });
    }
    /**
     * @return {Timeline[]}
     */

  }, {
    key: "getTimeline",
    value: function getTimeline() {
      return this.timeline;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getTime",
    value: function getTime() {
      return this.time;
    }
    /**
     * @param {number} time
     */

  }, {
    key: "setTime",
    value: function setTime(time) {
      this.time = time;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getFrameTime",
    value: function getFrameTime() {
      return this.getFrameTimeAt(this.time);
    }
    /**
     * @param {number} time
     * @return {number}
     */

  }, {
    key: "getFrameTimeAt",
    value: function getFrameTimeAt(time) {
      return Math.floor(time);
    }
    /**
     * @param {number} lengthSecond
     */

  }, {
    key: "setLengthSecond",
    value: function setLengthSecond(lengthSecond) {
      this.lengthSecond = lengthSecond;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getLengthSecond",
    value: function getLengthSecond() {
      return this.lengthSecond;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getNextTimeFrame",
    value: function getNextTimeFrame() {
      return this.getNextTimeFrameAt(this.getTime());
    }
    /**
     * @param {number} time
     * @return {number}
     */

  }, {
    key: "getNextTimeFrameAt",
    value: function getNextTimeFrameAt(time) {
      var newTime = time + 1;
      return newTime % this.getFrames().length;
    }
  }, {
    key: "goToNextTimeFrame",
    value: function goToNextTimeFrame() {
      this.setTime(this.getNextTimeFrame());
    }
    /**
     * @param {number} deltaTime
     * @param {number} time
     * @return {{time: number, loopTimes: number, frame: KeyFrame}}
     */

  }, {
    key: "playAt",
    value: function playAt(deltaTime, time) {
      var expectedFrameTime = this.getLengthSecond() / this.getSamples();
      var newTime = time + deltaTime / expectedFrameTime;
      var timeFrame = newTime % this.getFrames().length;
      var loopTimes = Math.floor(newTime / this.getFrames().length);
      return {
        time: timeFrame || 0,
        loopTimes: loopTimes,
        frame: this.tryGetAt(this.getFrameTimeAt(time))
      };
    }
    /**
     * @param {number} deltaTime
     * @return {KeyFrame}
     */

  }, {
    key: "play",
    value: function play(deltaTime) {
      var playInfo = this.playAt(deltaTime, this.getTime());
      this.loopTimes += playInfo.loopTimes;
      this.setTime(playInfo.time);
      this.selectTimeline(this.getFrameTime());
      return playInfo.frame;
    }
  }]);
  return Animation;
}();

exports["default"] = Animation;

},{"../exception/type/ClientError.js":80,"./Timeline.js":29,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/toConsumableArray":21}],28:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var KeyFrame = /*#__PURE__*/function () {
  /**
   * @type {number}
   */

  /**
   * @type {number}
   */

  /**
   * @type {number}
   */
  function KeyFrame() {
    (0, _classCallCheck2["default"])(this, KeyFrame);
    (0, _defineProperty2["default"])(this, "id", void 0);
    (0, _defineProperty2["default"])(this, "assetId", void 0);
    (0, _defineProperty2["default"])(this, "time", void 0);
    this.id = _Maths["default"].generateId();
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(KeyFrame, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {number} assetId
     */

  }, {
    key: "setAssetId",
    value: function setAssetId(assetId) {
      this.assetId = assetId;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getAssetId",
    value: function getAssetId() {
      return this.assetId;
    }
    /**
     * @param {number} time
     */

  }, {
    key: "setTime",
    value: function setTime(time) {
      this.time = time;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getTime",
    value: function getTime() {
      return this.time;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return '';
    }
  }]);
  return KeyFrame;
}();

exports["default"] = KeyFrame;

},{"../utils/Maths.js":363,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],29:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var Timeline = /*#__PURE__*/function () {
  /**
   * @type {number}
   */

  /**
   * @type {KeyFrame}
   */

  /**
   * @type {boolean}
   */

  /**
   * @param {KeyFrame} frame
   */
  function Timeline(frame) {
    (0, _classCallCheck2["default"])(this, Timeline);
    (0, _defineProperty2["default"])(this, "id", void 0);
    (0, _defineProperty2["default"])(this, "frame", void 0);
    (0, _defineProperty2["default"])(this, "selected", void 0);
    this.id = _Maths["default"].generateId();
    this.frame = frame;
    this.selected = false;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(Timeline, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {KeyFrame} frame
     */

  }, {
    key: "setFrame",
    value: function setFrame(frame) {
      this.frame = frame;
    }
    /**
     * @return {KeyFrame}
     */

  }, {
    key: "getFrame",
    value: function getFrame() {
      return this.frame;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isSelected",
    value: function isSelected() {
      return this.selected;
    }
    /**
     * @param {boolean} selected
     */

  }, {
    key: "setSelected",
    value: function setSelected(selected) {
      this.selected = selected;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return '';
    }
  }, {
    key: "unselect",
    value: function unselect() {
      this.setSelected(false);
    }
  }, {
    key: "select",
    value: function select() {
      this.setSelected(true);
    }
  }]);
  return Timeline;
}();

exports["default"] = Timeline;

},{"../utils/Maths.js":363,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],30:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var _AssetData2 = _interopRequireDefault(require("../project/data/AssetData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {Asset}
 */
var Asset = /*#__PURE__*/function (_AssetData) {
  (0, _inherits2["default"])(Asset, _AssetData);

  var _super = _createSuper(Asset);

  /**
   * @param {Folder} folder
   * @param {Object} props
   */
  function Asset(folder) {
    var _this;

    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    (0, _classCallCheck2["default"])(this, Asset);
    _this = _super.call(this);
    _this.id = _Maths["default"].generateId();
    _this.name = props.name || 'Asset';
    _this.selected = false;
    _this.folderId = folder ? folder.getId() : null;
    _this.type = null;
    return _this;
  }

  (0, _createClass2["default"])(Asset, [{
    key: "isSelected",
    value: function isSelected() {
      return this.selected;
    }
  }, {
    key: "select",
    value: function select() {
      this.setSelected(true);
    }
  }, {
    key: "unselect",
    value: function unselect() {
      this.setSelected(false);
    }
    /**
     * @param {boolean} value
     */

  }, {
    key: "setSelected",
    value: function setSelected(value) {
      this.selected = value;
    }
  }, {
    key: "open",
    value: function open() {
      this.getType().open(this);
    }
  }, {
    key: "export",
    value: function _export() {
      this.getType()["export"](this);
    }
    /**
     * @override
     */

  }, {
    key: "setName",
    value: function setName(name) {
      var oldName = this.getName();
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(Asset.prototype), "setName", this).call(this, name);

      if (oldName !== name) {
        var assetType = this.getType();

        if (assetType) {
          assetType.rename(oldName, name);
        }
      }
    }
    /**
     * @param {string} oldName
     * @param {string} newName
     */

  }, {
    key: "rename",
    value: function rename(oldName, newName) {
      this.getType().rename(oldName, newName);
    }
    /**
     * @param {*} source
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(source) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.getType().generate(source, this);

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function generate(_x) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @param {*} data
     * @return {boolean}
     */

  }, {
    key: "load",
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(data) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                return _context2.abrupt("return", this.type.load(data, this));

              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function load(_x2) {
        return _load.apply(this, arguments);
      }

      return load;
    }()
  }]);
  return Asset;
}(_AssetData2["default"]);

exports["default"] = Asset;

},{"../project/data/AssetData.js":277,"../utils/Maths.js":363,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],31:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var _FolderData2 = _interopRequireDefault(require("../project/data/FolderData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Folder = /*#__PURE__*/function (_FolderData) {
  (0, _inherits2["default"])(Folder, _FolderData);

  var _super = _createSuper(Folder);

  /**
   * @param {string} name
   * @param {Folder} parentFolder
   */
  function Folder(name) {
    var _this;

    var parentFolder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    (0, _classCallCheck2["default"])(this, Folder);
    _this = _super.call(this);
    _this.id = _Maths["default"].generateId();
    _this.name = name;
    _this.folderId = null;

    if (parentFolder) {
      _this.folderId = parentFolder.getId();
    }

    _this.selected = false;
    return _this;
  }
  /**
   * @return {boolean}
   */


  (0, _createClass2["default"])(Folder, [{
    key: "isSelected",
    value: function isSelected() {
      return this.selected;
    }
  }, {
    key: "select",
    value: function select() {
      this.setSelected(true);
    }
  }, {
    key: "unselect",
    value: function unselect() {
      this.setSelected(false);
    }
    /**
     * @param {boolean} value
     */

  }, {
    key: "setSelected",
    value: function setSelected(value) {
      this.selected = value;
    }
  }]);
  return Folder;
}(_FolderData2["default"]);

exports["default"] = Folder;

},{"../project/data/FolderData.js":286,"../utils/Maths.js":363,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],32:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AssetTypeData2 = _interopRequireDefault(require("../../project/data/AssetTypeData.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {AssetType}
 * @abstract
 */
var AssetType = /*#__PURE__*/function (_AssetTypeData) {
  (0, _inherits2["default"])(AssetType, _AssetTypeData);

  var _super = _createSuper(AssetType);

  function AssetType() {
    (0, _classCallCheck2["default"])(this, AssetType);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AssetType, [{
    key: "load",

    /**
     * @abstract
     * @param {*} data
     * @param {Asset} asset
     * @return {Promise}
     */
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(data, asset) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                throw new _SystemError["default"]("".concat(this.constructor.name, ".load must be implemented"));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function load(_x, _x2) {
        return _load.apply(this, arguments);
      }

      return load;
    }()
    /**
     * @abstract
     * @param {*} source
     * @param {Asset} asset
     * @return {Promise}
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(source, asset) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                throw new _SystemError["default"]("".concat(this.constructor.name, ".generate must be implemented"));

              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function generate(_x3, _x4) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @abstract
     * @param {Asset} asset
     * @param {Object} options
     */

  }, {
    key: "open",
    value: function open(asset, options) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".open must be implemented"));
    }
    /**
     * @abstract
     * @param {*} data
     * @return {boolean}
     */

  }, {
    key: "validate",
    value: function validate(data) {
      throw new _ClientError["default"]("".concat(this.constructor.name, ".validate must be implemented"));
    }
    /**
     * @abstract
     * @param {Asset} asset
     */

  }, {
    key: "export",
    value: function _export(asset) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".export must be implemented"));
    }
    /**
     * @abstract
     * @param {string} oldName
     * @param {string} newName
     * @return {void}
     */

  }, {
    key: "rename",
    value: function rename(oldName, newName) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".rename must be implemented"));
    }
  }]);
  return AssetType;
}(_AssetTypeData2["default"]);

exports["default"] = AssetType;

},{"../../exception/type/ClientError.js":80,"../../exception/type/SystemError.js":82,"../../project/data/AssetTypeData.js":278,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],33:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _AssetType2 = _interopRequireDefault(require("../AssetType.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetAudio = /*#__PURE__*/function (_AssetType) {
  (0, _inherits2["default"])(AssetAudio, _AssetType);

  var _super = _createSuper(AssetAudio);

  function AssetAudio() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetAudio);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "data", void 0);
    return _this;
  }

  (0, _createClass2["default"])(AssetAudio, [{
    key: "load",

    /**
     * @override
     */
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(audioDataUrl, asset) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.setDataUrl(audioDataUrl);

              case 2:
                return _context.abrupt("return", true);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function load(_x, _x2) {
        return _load.apply(this, arguments);
      }

      return load;
    }()
    /**
     * @param {HTMLAudioElement} data
     */

  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
    }
    /**
     * @return {HTMLAudioElement}
     */

  }, {
    key: "getData",
    value: function getData() {
      return this.data;
    }
    /**
     * @override
     */

  }, {
    key: "setDataUrl",
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(dataUrl) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(AssetAudio.prototype), "setDataUrl", this).call(this, dataUrl);

              case 2:
                this.data = new Audio(dataUrl);

              case 3:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function setDataUrl(_x3) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(source, asset) {
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                return _context3.abrupt("return", Promise.resolve(undefined));

              case 1:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function generate(_x4, _x5) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @return {boolean}
     */

  }, {
    key: "isPlaying",
    value: function isPlaying() {
      return !this.getData().paused;
    }
  }, {
    key: "play",
    value: function play() {
      this.getData().play();
    }
  }, {
    key: "stop",
    value: function stop() {
      this.getData().pause();
      this.getData().currentTime = 0;
    }
    /**
     * @override
     */

  }, {
    key: "open",
    value: function open(asset, options) {}
    /**
     * @override
     */

  }, {
    key: "rename",
    value: function rename(oldName, newName) {}
  }, {
    key: "export",
    value: function _export(asset) {
      return undefined;
    }
  }, {
    key: "validate",
    value: function validate(data) {
      return true;
    }
  }]);
  return AssetAudio;
}(_AssetType2["default"]);

exports["default"] = AssetAudio;

},{"../AssetType.js":32,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],34:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _World = _interopRequireDefault(require("../../../world/World.js"));

var _EditGraphScriptContent = _interopRequireDefault(require("../../../content/script/EditGraphScriptContent.js"));

var _AssetScript2 = _interopRequireDefault(require("../script/AssetScript.js"));

var _AssetAnimationScriptGenerator = _interopRequireDefault(require("../../../generator/animation/AssetAnimationScriptGenerator.js"));

var _FileHelper = _interopRequireDefault(require("../../../utils/FileHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetAnimationScriptXml = /*#__PURE__*/function (_AssetScript) {
  (0, _inherits2["default"])(AssetAnimationScriptXml, _AssetScript);

  var _super = _createSuper(AssetAnimationScriptXml);

  /**
   * @type {Document}
   */
  function AssetAnimationScriptXml() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetAnimationScriptXml);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "data", void 0);
    _this.data = null;
    return _this;
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AssetAnimationScriptXml, [{
    key: "open",
    value: function open(asset) {
      var tabManager = _World["default"].get().getTabManager();

      tabManager.createOrActivate(asset.getName(), new _EditGraphScriptContent["default"](asset));
    }
    /**
     * @return {AScript}
     */

  }, {
    key: "parse",
    value: function parse() {
      return _World["default"].get().getScriptManager().load(this.data);
    }
    /**
     * @override
     */

  }, {
    key: "export",
    value: function _export(asset) {
      _FileHelper["default"].save(this.getDataUrl(), _FileHelper["default"].type.XML, asset.getName());
    }
    /**
     * @override
     */

  }, {
    key: "rename",
    value: function rename(oldName, newName) {
      if (this.data) {
        _World["default"].get().getScriptManager().rename(this.data, oldName, newName);
      }
    }
    /**
     * @override
     * @param {AnimationScript} flow
     * @param {Asset} asset
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(flow, asset) {
        var data;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                data = _AssetAnimationScriptGenerator["default"].get().generate(flow);
                _context.next = 3;
                return this.setDataUrl(data);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function generate(_x, _x2) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @override
     * @param {Document} data
     */

  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
    }
    /**
     * @override
     * @return {Document}
     */

  }, {
    key: "getData",
    value: function getData() {
      return this.data;
    }
    /**
     * @override
     */

  }, {
    key: "setDataUrl",
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(dataUrl) {
        var parser, doc;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                parser = new DOMParser();
                doc = parser.parseFromString(dataUrl, 'application/xml');

                if (doc.documentElement.tagName === 'html') {
                  this.setError("Script XML Parser: ".concat(doc.documentElement.textContent));
                } else {
                  this.setError('');
                  this.data = doc;
                }

              case 3:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function setDataUrl(_x3) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
    /**
     * @override
     */

  }, {
    key: "getDataUrl",
    value: function getDataUrl() {
      return new XMLSerializer().serializeToString(this.data);
    }
    /**
     * @override
     */

  }, {
    key: "validate",
    value: function validate(data) {
      return true;
    }
  }]);
  return AssetAnimationScriptXml;
}(_AssetScript2["default"]);

exports["default"] = AssetAnimationScriptXml;

},{"../../../content/script/EditGraphScriptContent.js":65,"../../../generator/animation/AssetAnimationScriptGenerator.js":204,"../../../utils/FileHelper.js":359,"../../../world/World.js":372,"../script/AssetScript.js":37,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],35:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _World = _interopRequireDefault(require("../../../world/World.js"));

var _AssetType2 = _interopRequireDefault(require("../AssetType.js"));

var _AssetAnimationXmlGenerator = _interopRequireDefault(require("../../../generator/animation/AssetAnimationXmlGenerator.js"));

var _EditAnimationContent = _interopRequireDefault(require("../../../content/animation/EditAnimationContent.js"));

var _FileHelper = _interopRequireDefault(require("../../../utils/FileHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetAnimationXml = /*#__PURE__*/function (_AssetType) {
  (0, _inherits2["default"])(AssetAnimationXml, _AssetType);

  var _super = _createSuper(AssetAnimationXml);

  /**
   * @type {Document}
   */

  /**
   * @type {string}
   */
  function AssetAnimationXml() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetAnimationXml);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "data", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "error", void 0);
    _this.data = null;
    return _this;
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AssetAnimationXml, [{
    key: "load",
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(data, asset) {
        var _this2 = this;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                return _context.abrupt("return", new Promise(function (resolve) {
                  _this2.setDataUrl(data);

                  var animation = _this2.parse();

                  asset.setName(animation.getName());
                  resolve(animation);
                }));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function load(_x, _x2) {
        return _load.apply(this, arguments);
      }

      return load;
    }()
    /**
     * @override
     */

  }, {
    key: "open",
    value: function open(asset, options) {
      var tabManager = _World["default"].get().getTabManager();

      tabManager.createOrActivate(asset.getName(), new _EditAnimationContent["default"](asset));
    }
    /**
     * @return {Animation}
     */

  }, {
    key: "parse",
    value: function parse() {
      return _World["default"].get().getAnimationManager().load(this.data);
    }
    /**
     * @override
     */

  }, {
    key: "export",
    value: function _export(asset) {
      _FileHelper["default"].save(this.getDataUrl(), _FileHelper["default"].type.XML, asset.getName());
    }
    /**
     * @override
     * @param {Animation} animation
     * @param {Asset} asset
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(animation, asset) {
        var data;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                data = _AssetAnimationXmlGenerator["default"].get().generate(animation);
                _context2.next = 3;
                return this.setDataUrl(data);

              case 3:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function generate(_x3, _x4) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @override
     */

  }, {
    key: "rename",
    value: function rename(oldName, newName) {
      if (this.data) {
        var animationManager = _World["default"].get().getAnimationManager();

        var oldAnimation = animationManager.findByName(oldName);

        if (oldAnimation) {
          animationManager["delete"](oldAnimation);
        }

        animationManager.rename(this.data, newName);
        this.parse();
      }
    }
    /**
     * @override
     * @param {Document} data
     */

  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
    }
    /**
     * @override
     * @return {Document}
     */

  }, {
    key: "getData",
    value: function getData() {
      return this.data;
    }
    /**
     * @param {string} error
     */

  }, {
    key: "setError",
    value: function setError(error) {
      this.error = error;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getError",
    value: function getError() {
      return this.error;
    }
    /**
     * @override
     */

  }, {
    key: "setDataUrl",
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(dataUrl) {
        var parser, doc;
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                parser = new DOMParser();
                doc = parser.parseFromString(dataUrl, 'application/xml');

                if (doc.documentElement.tagName === 'html') {
                  this.setError("Animation XML Parser: ".concat(doc.documentElement.textContent));
                } else {
                  this.setError('');
                  this.data = doc;
                }

              case 3:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function setDataUrl(_x5) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
    /**
     * @override
     */

  }, {
    key: "getDataUrl",
    value: function getDataUrl() {
      return new XMLSerializer().serializeToString(this.data);
    }
    /**
     * @override
     */

  }, {
    key: "validate",
    value: function validate(data) {
      return true;
    }
  }]);
  return AssetAnimationXml;
}(_AssetType2["default"]);

exports["default"] = AssetAnimationXml;

},{"../../../content/animation/EditAnimationContent.js":64,"../../../generator/animation/AssetAnimationXmlGenerator.js":205,"../../../utils/FileHelper.js":359,"../../../world/World.js":372,"../AssetType.js":32,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],36:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _AssetType2 = _interopRequireDefault(require("../AssetType.js"));

var _Mesh = _interopRequireDefault(require("../../../core/Mesh.js"));

var _ImageHelper = _interopRequireDefault(require("../../../utils/ImageHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {AssetImage}
 */
var AssetImage = /*#__PURE__*/function (_AssetType) {
  (0, _inherits2["default"])(AssetImage, _AssetType);

  var _super = _createSuper(AssetImage);

  /**
   * @type {Mesh}
   */
  function AssetImage() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetImage);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "data", void 0);
    _this.data = new _Mesh["default"]();
    return _this;
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AssetImage, [{
    key: "load",
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(image, asset) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                return _context.abrupt("return", this.data.fromImage(image));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function load(_x, _x2) {
        return _load.apply(this, arguments);
      }

      return load;
    }()
    /**
     * @param {Mesh} data
     */

  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
    }
    /**
     * @return {Mesh}
     */

  }, {
    key: "getData",
    value: function getData() {
      return this.data;
    }
    /**
     * @override
     */

  }, {
    key: "setDataUrl",
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(dataUrl) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.data.fromImage(dataUrl);

              case 2:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function setDataUrl(_x3) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
    /**
     * @override
     */

  }, {
    key: "getDataUrl",
    value: function getDataUrl() {
      return _ImageHelper["default"].getDataURL(this.data.context.canvas, this.data.getSize());
    }
  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(source, asset) {
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                return _context3.abrupt("return", Promise.resolve(undefined));

              case 1:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function generate(_x4, _x5) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @override
     */

  }, {
    key: "open",
    value: function open(asset, options) {}
    /**
     * @override
     */

  }, {
    key: "rename",
    value: function rename(oldName, newName) {}
  }]);
  return AssetImage;
}(_AssetType2["default"]);

exports["default"] = AssetImage;

},{"../../../core/Mesh.js":74,"../../../utils/ImageHelper.js":361,"../AssetType.js":32,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],37:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _AssetType2 = _interopRequireDefault(require("../AssetType.js"));

var _SystemError = _interopRequireDefault(require("../../../exception/type/SystemError.js"));

var _ClientError = _interopRequireDefault(require("../../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var AssetScript = /*#__PURE__*/function (_AssetType) {
  (0, _inherits2["default"])(AssetScript, _AssetType);

  var _super = _createSuper(AssetScript);

  function AssetScript() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetScript);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "error", void 0);
    return _this;
  }

  (0, _createClass2["default"])(AssetScript, [{
    key: "parse",

    /**
     * @abstract
     * @return {AScript}
     */
    value: function parse() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".parse must be implemented"));
    }
    /**
     * @abstract
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(source, asset) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                throw new _SystemError["default"]("".concat(this.constructor.name, ".generate must be implemented"));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function generate(_x, _x2) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @override
     */

  }, {
    key: "load",
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(data, asset) {
        var _this2 = this;

        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                return _context2.abrupt("return", new Promise(function (resolve) {
                  _this2.setDataUrl(data);

                  var script = _this2.parse();

                  asset.setName(script.getName());
                  resolve(script);
                }));

              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));

      function load(_x3, _x4) {
        return _load.apply(this, arguments);
      }

      return load;
    }()
    /**
     * @abstract
     */

  }, {
    key: "open",
    value: function open(asset, options) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".open must be implemented"));
    }
    /**
     * @param {string} error
     */

  }, {
    key: "setError",
    value: function setError(error) {
      this.error = error;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getError",
    value: function getError() {
      return this.error;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {*} data
     */

  }, {
    key: "setData",
    value: function setData(data) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".setData must be implemented"));
    }
    /**
     * @return {*}
     */

  }, {
    key: "getData",
    value: function getData() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getData must be implemented"));
    }
    /**
     * @abstract
     * @param {AScript} data
     * @return {boolean}
     */

  }, {
    key: "validate",
    value: function validate(data) {
      throw new _ClientError["default"]("".concat(this.constructor.name, ".validate must be implemented"));
    }
  }]);
  return AssetScript;
}(_AssetType2["default"]);

exports["default"] = AssetScript;

},{"../../../exception/type/ClientError.js":80,"../../../exception/type/SystemError.js":82,"../AssetType.js":32,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],38:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _World = _interopRequireDefault(require("../../../world/World.js"));

var _EditScriptCodeContent = _interopRequireDefault(require("../../../content/script/EditScriptCodeContent.js"));

var _AssetScript2 = _interopRequireDefault(require("./AssetScript.js"));

var _AssetScriptCodeGenerator = _interopRequireDefault(require("../../../generator/script/AssetScriptCodeGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetScriptCode = /*#__PURE__*/function (_AssetScript) {
  (0, _inherits2["default"])(AssetScriptCode, _AssetScript);

  var _super = _createSuper(AssetScriptCode);

  function AssetScriptCode() {
    (0, _classCallCheck2["default"])(this, AssetScriptCode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AssetScriptCode, [{
    key: "open",

    /**
     * @override
     */
    value: function open(asset) {
      var tabManager = _World["default"].get().getTabManager();

      tabManager.createOrActivate(asset.getName(), new _EditScriptCodeContent["default"](asset));
    }
    /**
     * @override
     */

  }, {
    key: "parse",
    value: function parse() {
      return _World["default"].get().getScriptManager().load(this.getDataUrl());
    }
    /**
     * @return {string}
     */

  }, {
    key: "getDataUrl",
    value: function getDataUrl() {
      return this.dataUrl;
    }
    /**
     * @override
     * @param {AScript} flow
     * @param {Asset} asset
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(flow, asset) {
        var data;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                data = _AssetScriptCodeGenerator["default"].get().generate(flow);
                _context.next = 3;
                return this.setDataUrl(data);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function generate(_x, _x2) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
  }]);
  return AssetScriptCode;
}(_AssetScript2["default"]);

exports["default"] = AssetScriptCode;

},{"../../../content/script/EditScriptCodeContent.js":66,"../../../generator/script/AssetScriptCodeGenerator.js":206,"../../../world/World.js":372,"./AssetScript.js":37,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],39:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _World = _interopRequireDefault(require("../../../world/World.js"));

var _AssetScriptXmlGenerator = _interopRequireDefault(require("../../../generator/script/AssetScriptXmlGenerator.js"));

var _AssetScript2 = _interopRequireDefault(require("./AssetScript.js"));

var _EditGraphScriptContent = _interopRequireDefault(require("../../../content/script/EditGraphScriptContent.js"));

var _ScriptHelper = _interopRequireDefault(require("../../../utils/ScriptHelper.js"));

var _FileHelper = _interopRequireDefault(require("../../../utils/FileHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetScriptXml = /*#__PURE__*/function (_AssetScript) {
  (0, _inherits2["default"])(AssetScriptXml, _AssetScript);

  var _super = _createSuper(AssetScriptXml);

  /**
   * @type {Document}
   */
  function AssetScriptXml() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetScriptXml);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "data", void 0);
    _this.data = null;
    return _this;
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AssetScriptXml, [{
    key: "open",
    value: function open(asset) {
      var tabManager = _World["default"].get().getTabManager();

      tabManager.createOrActivate(asset.getName(), new _EditGraphScriptContent["default"](asset));
    }
    /**
     * @return {AScript}
     */

  }, {
    key: "parse",
    value: function parse() {
      return _World["default"].get().getScriptManager().load(this.data);
    }
    /**
     * @override
     */

  }, {
    key: "validate",
    value: function validate(data) {
      return _ScriptHelper["default"].validate(data);
    }
    /**
     * @override
     * @param {AScript} flow
     * @param {Asset} asset
     */

  }, {
    key: "generate",
    value: function () {
      var _generate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(flow, asset) {
        var data;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                data = _AssetScriptXmlGenerator["default"].get().generate(flow);
                _context.next = 3;
                return this.setDataUrl(data);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function generate(_x, _x2) {
        return _generate.apply(this, arguments);
      }

      return generate;
    }()
    /**
     * @override
     */

  }, {
    key: "rename",
    value: function rename(oldName, newName) {
      if (this.data) {
        _World["default"].get().getScriptManager().rename(this.data, oldName, newName);
      }
    }
    /**
     * @override
     */

  }, {
    key: "export",
    value: function _export(asset) {
      _FileHelper["default"].save(this.getDataUrl(), _FileHelper["default"].type.XML, asset.getName());
    }
    /**
     * @override
     * @param {Document} data
     */

  }, {
    key: "setData",
    value: function setData(data) {
      this.data = data;
    }
    /**
     * @override
     * @return {Document}
     */

  }, {
    key: "getData",
    value: function getData() {
      return this.data;
    }
    /**
     * @override
     */

  }, {
    key: "setDataUrl",
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(dataUrl) {
        var parser, doc;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                parser = new DOMParser();
                doc = parser.parseFromString(dataUrl, 'application/xml');

                if (doc.documentElement.tagName === 'html') {
                  this.setError("Script XML Parser: ".concat(doc.documentElement.textContent));
                } else {
                  this.setError('');
                  this.data = doc;
                }

              case 3:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function setDataUrl(_x3) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
    /**
     * @override
     */

  }, {
    key: "getDataUrl",
    value: function getDataUrl() {
      return new XMLSerializer().serializeToString(this.data);
    }
  }]);
  return AssetScriptXml;
}(_AssetScript2["default"]);

exports["default"] = AssetScriptXml;

},{"../../../content/script/EditGraphScriptContent.js":65,"../../../generator/script/AssetScriptXmlGenerator.js":208,"../../../utils/FileHelper.js":359,"../../../utils/ScriptHelper.js":367,"../../../world/World.js":372,"./AssetScript.js":37,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],40:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentData2 = _interopRequireDefault(require("../project/data/ComponentData.js"));

var _AttributeType = require("../pobject/AttributeType.js");

var _DynamicAttributeHelper = _interopRequireDefault(require("../utils/DynamicAttributeHelper.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var Component = /*#__PURE__*/function (_ComponentData) {
  (0, _inherits2["default"])(Component, _ComponentData);

  var _super = _createSuper(Component);

  function Component(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, Component);
    _this = _super.call(this, name);

    _this.init();

    return _this;
  }
  /**
   * @param {World} world
   * @param {UnitSelector} unitSelector
   * @return {FormField[]}
   */


  (0, _createClass2["default"])(Component, [{
    key: "getFormFields",
    value: function getFormFields(world, unitSelector) {
      var attributes = this.getAttributes();
      var fields = [];
      var excludeFields = this.getExcludeFields();
      attributes.forEach(function (attr) {
        if (!excludeFields.includes(attr.getAttrName())) {
          fields.push.apply(fields, (0, _toConsumableArray2["default"])(_DynamicAttributeHelper["default"].getFormFields(world, unitSelector, attr)));
        }
      });
      return fields;
    }
    /**
     * @return {string[]}
     */

  }, {
    key: "getExcludeFields",
    value: function getExcludeFields() {
      return [];
    }
    /**
     * @private
     */

  }, {
    key: "init",
    value: function init() {
      this.add('enabled', _AttributeType.TYPES.BOOLEAN, true);
      this.initAttributes();
    }
    /**
     * @abstract
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".initAttributes must be implement"));
    }
    /**
     * @protected
     * @param {string} name
     * @param {number} type
     * @param {*} defaultValue
     * @param {*} rule
     */

  }, {
    key: "add",
    value: function add(name, type) {
      var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var rule = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

      _DynamicAttributeHelper["default"].add(this.attributes, name, type, defaultValue, rule);
    }
    /**
     * @protected
     * @param {string} name
     * @return {DynamicAttribute}
     */

  }, {
    key: "get",
    value: function get(name) {
      return _DynamicAttributeHelper["default"].get(this.attributes, name);
    }
    /**
     * @protected
     * @param {string} name
     * @param {*} value
     */

  }, {
    key: "setValue",
    value: function setValue(name, value) {
      _DynamicAttributeHelper["default"].setValue(this.attributes, name, value);
    }
    /**
     * @protected
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "getValue",
    value: function getValue(name) {
      return _DynamicAttributeHelper["default"].getValue(this.attributes, name);
    }
    /**
     * @protected
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "getType",
    value: function getType(name) {
      return _DynamicAttributeHelper["default"].getType(this.attributes, name);
    }
    /**
     * @param {string} name
     * @return {boolean}
     */

  }, {
    key: "hasAttribute",
    value: function hasAttribute(name) {
      return !!_DynamicAttributeHelper["default"].tryGet(this.attributes, name);
    }
  }, {
    key: "enable",
    value: function enable() {
      this.setValue('enabled', true);
    }
  }, {
    key: "disable",
    value: function disable() {
      this.setValue('enabled', false);
    }
    /**
     * @param {boolean} enabled
     */

  }, {
    key: "setEnabled",
    value: function setEnabled(enabled) {
      this.setValue('enabled', enabled);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getEnabled",
    value: function getEnabled() {
      return this.getValue('enabled');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isEnabled",
    value: function isEnabled() {
      return this.getEnabled();
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isRemovable",
    value: function isRemovable() {
      return true;
    }
  }]);
  return Component;
}(_ComponentData2["default"]);

exports["default"] = Component;

},{"../exception/type/SystemError.js":82,"../pobject/AttributeType.js":263,"../project/data/ComponentData.js":282,"../utils/DynamicAttributeHelper.js":358,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/toConsumableArray":21}],41:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _ScriptComponent2 = _interopRequireDefault(require("./ScriptComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AnimationComponent = /*#__PURE__*/function (_ScriptComponent) {
  (0, _inherits2["default"])(AnimationComponent, _ScriptComponent);

  var _super = _createSuper(AnimationComponent);

  function AnimationComponent() {
    var _this;

    (0, _classCallCheck2["default"])(this, AnimationComponent);
    _this = _super.call(this);

    _this.setName('Animation');

    return _this;
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AnimationComponent, [{
    key: "isUnique",
    value: function isUnique() {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(AnimationComponent.prototype), "initAttributes", this).call(this);
      this.add('animation', _AttributeType.TYPES.NUMBER);
      this.add('time', _AttributeType.TYPES.NUMBER);
      this.add('loopTimes', _AttributeType.TYPES.NUMBER);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getAnimation",
    value: function getAnimation() {
      return this.getValue('animation');
    }
    /**
     * @param {number} animation
     */

  }, {
    key: "setAnimation",
    value: function setAnimation(animation) {
      this.setValue('animation', animation);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getTime",
    value: function getTime() {
      return this.getValue('time');
    }
    /**
     * @param {number} time
     */

  }, {
    key: "setTime",
    value: function setTime(time) {
      this.setValue('time', time);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getLoopTimes",
    value: function getLoopTimes() {
      return this.getValue('loopTimes');
    }
    /**
     * @param {number} loopTimes
     */

  }, {
    key: "setLoopTimes",
    value: function setLoopTimes(loopTimes) {
      this.setValue('loopTimes', loopTimes);
    }
  }]);
  return AnimationComponent;
}(_ScriptComponent2["default"]);

exports["default"] = AnimationComponent;

},{"../../pobject/AttributeType.js":263,"./ScriptComponent.js":51,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],42:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../../pobject/Size.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var CameraComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(CameraComponent, _Component);

  var _super = _createSuper(CameraComponent);

  function CameraComponent() {
    (0, _classCallCheck2["default"])(this, CameraComponent);
    return _super.call(this, 'Camera');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(CameraComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('unitFollow', _AttributeType.TYPES.UNIT);
      this.add('trackPoint', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('deadZone', _AttributeType.TYPES.SIZE, new _Size["default"](0));
      this.add('smoothing', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('delayTime', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('delaySmoothing', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('lastUnitFollowPosition', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('lookDistance', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
    }
    /**
     * @return {number}
     */

  }, {
    key: "getUnitFollow",
    value: function getUnitFollow() {
      return this.getValue('unitFollow');
    }
    /**
     * @param {number} unitFollow
     */

  }, {
    key: "setUnitFollow",
    value: function setUnitFollow(unitFollow) {
      this.setValue('unitFollow', unitFollow);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getTrackPoint",
    value: function getTrackPoint() {
      return this.getValue('trackPoint');
    }
    /**
     * @param {Vector} trackPoint
     */

  }, {
    key: "setTrackPoint",
    value: function setTrackPoint(trackPoint) {
      this.setValue('trackPoint', trackPoint);
    }
    /**
     * @return {Size}
     */

  }, {
    key: "getDeadZone",
    value: function getDeadZone() {
      return this.getValue('deadZone');
    }
    /**
     * @param {Size} deadZone
     */

  }, {
    key: "setDeadZone",
    value: function setDeadZone(deadZone) {
      this.setValue('deadZone', deadZone);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getSmoothing",
    value: function getSmoothing() {
      return this.getValue('smoothing');
    }
    /**
     * @param {Vector} smoothing
     */

  }, {
    key: "setSmoothing",
    value: function setSmoothing(smoothing) {
      this.setValue('smoothing', smoothing);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getDelayTime",
    value: function getDelayTime() {
      return this.getValue('delayTime');
    }
    /**
     * @param {Vector} delayTime
     */

  }, {
    key: "setDelayTime",
    value: function setDelayTime(delayTime) {
      this.setValue('delayTime', delayTime);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getDelaySmoothing",
    value: function getDelaySmoothing() {
      return this.getValue('delaySmoothing');
    }
    /**
     * @param {Vector} delaySmoothing
     */

  }, {
    key: "setDelaySmoothing",
    value: function setDelaySmoothing(delaySmoothing) {
      this.setValue('delaySmoothing', delaySmoothing);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getLastUnitFollowPosition",
    value: function getLastUnitFollowPosition() {
      return this.getValue('lastUnitFollowPosition');
    }
    /**
     * @param {Vector} lastUnitFollowPosition
     */

  }, {
    key: "setLastUnitFollowPosition",
    value: function setLastUnitFollowPosition(lastUnitFollowPosition) {
      this.setValue('lastUnitFollowPosition', lastUnitFollowPosition);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getLookDistance",
    value: function getLookDistance() {
      return this.getValue('lookDistance');
    }
    /**
     * @param {Vector} lookDistance
     */

  }, {
    key: "setLookDistance",
    value: function setLookDistance(lookDistance) {
      this.setValue('lookDistance', lookDistance);
    }
    /**
     * @override
     */

  }, {
    key: "isRemovable",
    value: function isRemovable() {
      return false;
    }
  }]);
  return CameraComponent;
}(_Component2["default"]);

exports["default"] = CameraComponent;

},{"../../pobject/AttributeType.js":263,"../../pobject/Size.js":268,"../../utils/Vector.js":370,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],43:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Unit = require("../../unit/Unit.js");

var _ColliderComponent2 = _interopRequireDefault(require("./ColliderComponent.js"));

var _Layout = _interopRequireDefault(require("../../layout/Layout.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var CircleColliderComponent = /*#__PURE__*/function (_ColliderComponent) {
  (0, _inherits2["default"])(CircleColliderComponent, _ColliderComponent);

  var _super = _createSuper(CircleColliderComponent);

  function CircleColliderComponent() {
    (0, _classCallCheck2["default"])(this, CircleColliderComponent);
    return _super.call(this, 'Circle Collider');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(CircleColliderComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(CircleColliderComponent.prototype), "initAttributes", this).call(this);
      this.setShape(_Unit.PrimitiveShape.CIRCLE);
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [].concat((0, _toConsumableArray2["default"])((0, _get2["default"])((0, _getPrototypeOf2["default"])(CircleColliderComponent.prototype), "getFormFields", this).call(this)), [{
        bind: 'radius',
        label: 'Radius (%)',
        type: _Layout["default"].form.TEXT
      }]);
    }
    /**
     * @override
     */

  }, {
    key: "setSize",
    value: function setSize(size) {
      var actualSize = this.getSize();
      var actualRadius = this.getRadius();
      this.setRadius(actualRadius * size.getWidth() / actualSize.getWidth());
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(CircleColliderComponent.prototype), "setSize", this).call(this, size);
    }
  }]);
  return CircleColliderComponent;
}(_ColliderComponent2["default"]);

exports["default"] = CircleColliderComponent;

},{"../../layout/Layout.js":224,"../../unit/Unit.js":327,"./ColliderComponent.js":44,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/toConsumableArray":21}],44:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../../pobject/Size.js"));

var _Layout = _interopRequireDefault(require("../../layout/Layout.js"));

var _Unit = require("../../unit/Unit.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var ColliderComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(ColliderComponent, _Component);

  var _super = _createSuper(ColliderComponent);

  function ColliderComponent() {
    (0, _classCallCheck2["default"])(this, ColliderComponent);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ColliderComponent, [{
    key: "initAttributes",

    /**
     * @override
     */
    value: function initAttributes() {
      this.add('position', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('size', _AttributeType.TYPES.SIZE, new _Size["default"](100));
      this.add('radius', _AttributeType.TYPES.NUMBER, 100);
      this.add('editFlag', _AttributeType.TYPES.BOOLEAN, false);
      this.add('trigger', _AttributeType.TYPES.BOOLEAN, false);
      this.add('shape', _AttributeType.TYPES.STRING, _Unit.PrimitiveShape.RECT);
      this.add('rotation', _AttributeType.TYPES.NUMBER, 0);
      this.add('velocity', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [{
        bind: 'name',
        label: 'Name',
        type: _Layout["default"].form.TEXT
      }, {
        bind: 'editFlag',
        label: 'Edit',
        type: _Layout["default"].form.CHECKBOX
      }, {
        bind: 'enabled',
        label: 'Enabled',
        type: _Layout["default"].form.CHECKBOX
      }, {
        bind: 'trigger',
        label: 'Is trigger',
        type: _Layout["default"].form.CHECKBOX
      }, {
        bind: 'position.x',
        label: 'Position X',
        type: _Layout["default"].form.TEXT
      }, {
        bind: 'position.y',
        label: 'Position Y',
        type: _Layout["default"].form.TEXT
      }, {
        bind: 'rotation',
        label: 'Rotation',
        type: _Layout["default"].form.TEXT
      }];
    }
    /**
     * @param {Vector} position
     */

  }, {
    key: "setPosition",
    value: function setPosition(position) {
      this.setValue('position', position);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getPosition",
    value: function getPosition() {
      return this.getValue('position');
    }
    /**
     * @param {number} rotation
     */

  }, {
    key: "setRotation",
    value: function setRotation(rotation) {
      this.setValue('rotation', rotation);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getRotation",
    value: function getRotation() {
      return this.getValue('rotation');
    }
    /**
     * @param {boolean} editFlag
     */

  }, {
    key: "setEditFlag",
    value: function setEditFlag(editFlag) {
      this.setValue('editFlag', editFlag);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getEditFlag",
    value: function getEditFlag() {
      return this.getValue('editFlag');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isEditFlag",
    value: function isEditFlag() {
      return this.getEditFlag();
    }
    /**
     * @param {boolean} trigger
     */

  }, {
    key: "setTrigger",
    value: function setTrigger(trigger) {
      this.setValue('trigger', trigger);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getTrigger",
    value: function getTrigger() {
      return this.getValue('trigger');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isTrigger",
    value: function isTrigger() {
      return this.getTrigger();
    }
    /**
     * @param {Size} size
     */

  }, {
    key: "setSize",
    value: function setSize(size) {
      this.setValue('size', size);
    }
    /**
     * @return {Size}
     */

  }, {
    key: "getSize",
    value: function getSize() {
      return this.getValue('size');
    }
    /**
     * @param {number} radius
     */

  }, {
    key: "setRadius",
    value: function setRadius(radius) {
      this.setValue('radius', radius);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getRadius",
    value: function getRadius() {
      return this.getValue('radius');
    }
    /**
     * @param {string} shape
     */

  }, {
    key: "setShape",
    value: function setShape(shape) {
      this.setValue('shape', shape);
    }
    /**
     * @return {string}
     */

  }, {
    key: "getShape",
    value: function getShape() {
      return this.getValue('shape');
    }
    /**
     * @param {Vector} velocity
     */

  }, {
    key: "setVelocity",
    value: function setVelocity(velocity) {
      this.setValue('velocity', velocity);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getVelocity",
    value: function getVelocity() {
      return this.getValue('velocity');
    }
    /**
     * @override
     */

  }, {
    key: "isUnique",
    value: function isUnique() {
      return false;
    }
  }]);
  return ColliderComponent;
}(_Component2["default"]);

exports["default"] = ColliderComponent;

},{"../../layout/Layout.js":224,"../../pobject/AttributeType.js":263,"../../pobject/Size.js":268,"../../unit/Unit.js":327,"../../utils/Vector.js":370,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],45:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var LightComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(LightComponent, _Component);

  var _super = _createSuper(LightComponent);

  function LightComponent(name) {
    (0, _classCallCheck2["default"])(this, LightComponent);
    return _super.call(this, name || 'Light');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(LightComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('intensity', _AttributeType.TYPES.NUMBER, 1);
      this.add('color', _AttributeType.TYPES.COLOR, '#FFFFFF');
      this.add('generated', _AttributeType.TYPES.BOOLEAN, false);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getIntensity",
    value: function getIntensity() {
      return this.getValue('intensity');
    }
    /**
     * @param {number} intensity
     */

  }, {
    key: "setIntensity",
    value: function setIntensity(intensity) {
      this.setValue('intensity', intensity);
    }
    /**
     * @return {string}
     */

  }, {
    key: "getColor",
    value: function getColor() {
      return this.getValue('color');
    }
    /**
     * @param {string} color
     */

  }, {
    key: "setColor",
    value: function setColor(color) {
      this.setValue('color', color);
    }
    /**
     * @param {boolean} generated
     */

  }, {
    key: "setGenerated",
    value: function setGenerated(generated) {
      this.setValue('generated', generated);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getGenerated",
    value: function getGenerated() {
      return this.getValue('generated');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isGenerated",
    value: function isGenerated() {
      return this.getGenerated();
    }
  }]);
  return LightComponent;
}(_Component2["default"]);

exports["default"] = LightComponent;

},{"../../pobject/AttributeType.js":263,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],46:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _LightComponent2 = _interopRequireDefault(require("./LightComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LightGlobalComponent = /*#__PURE__*/function (_LightComponent) {
  (0, _inherits2["default"])(LightGlobalComponent, _LightComponent);

  var _super = _createSuper(LightGlobalComponent);

  function LightGlobalComponent() {
    (0, _classCallCheck2["default"])(this, LightGlobalComponent);
    return _super.call(this, 'Light Global');
  }

  return LightGlobalComponent;
}(_LightComponent2["default"]);

exports["default"] = LightGlobalComponent;

},{"./LightComponent.js":45,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],47:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _LightComponent2 = _interopRequireDefault(require("./LightComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LightPointComponent = /*#__PURE__*/function (_LightComponent) {
  (0, _inherits2["default"])(LightPointComponent, _LightComponent);

  var _super = _createSuper(LightPointComponent);

  function LightPointComponent() {
    (0, _classCallCheck2["default"])(this, LightPointComponent);
    return _super.call(this, 'Light Point');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(LightPointComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(LightPointComponent.prototype), "initAttributes", this).call(this);
      this.add('innerAngle', _AttributeType.TYPES.RANGE, 360, [0, 360, 1]);
      this.add('outerAngle', _AttributeType.TYPES.RANGE, 360, [0, 360, 1]);
      this.add('innerRadius', _AttributeType.TYPES.RANGE, 0, [0, 100, 0.01]);
      this.add('outerRadius', _AttributeType.TYPES.RANGE, 100, [0, 100, 0.01]);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getInnerAngle",
    value: function getInnerAngle() {
      return this.getValue('innerAngle');
    }
    /**
     * @param {number} innerAngle
     */

  }, {
    key: "setInnerAngle",
    value: function setInnerAngle(innerAngle) {
      this.setValue('innerAngle', innerAngle);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getOuterAngle",
    value: function getOuterAngle() {
      return this.getValue('outerAngle');
    }
    /**
     * @param {number} outerAngle
     */

  }, {
    key: "setOuterAngle",
    value: function setOuterAngle(outerAngle) {
      this.setValue('outerAngle', outerAngle);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getInnerRadius",
    value: function getInnerRadius() {
      return this.getValue('innerRadius');
    }
    /**
     * @param {number} innerRadius
     */

  }, {
    key: "setInnerRadius",
    value: function setInnerRadius(innerRadius) {
      this.setValue('innerRadius', innerRadius);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getOuterRadius",
    value: function getOuterRadius() {
      return this.getValue('outerRadius');
    }
    /**
     * @param {number} outerRadius
     */

  }, {
    key: "setOuterRadius",
    value: function setOuterRadius(outerRadius) {
      this.setValue('outerRadius', outerRadius);
    }
    /**
     * @override
     */

  }, {
    key: "setValue",
    value: function setValue(name, value) {
      var validValue = value;

      if (name === 'innerAngle') {
        var outerAngle = this.getOuterAngle();
        validValue = outerAngle > parseInt(value) ? value : outerAngle;
      } else if (name === 'outerAngle') {
        var innerAngle = this.getInnerAngle();
        validValue = parseInt(value) > innerAngle ? value : innerAngle;
      }

      (0, _get2["default"])((0, _getPrototypeOf2["default"])(LightPointComponent.prototype), "setValue", this).call(this, name, validValue);
    }
  }]);
  return LightPointComponent;
}(_LightComponent2["default"]);

exports["default"] = LightPointComponent;

},{"../../pobject/AttributeType.js":263,"./LightComponent.js":45,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],48:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _Style = _interopRequireDefault(require("../../pobject/Style.js"));

var _Size = _interopRequireDefault(require("../../pobject/Size.js"));

var _Unit = require("../../unit/Unit.js");

var _AttributeType = require("../../pobject/AttributeType.js");

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _MaterialType = _interopRequireDefault(require("../../material/MaterialType.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MeshComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(MeshComponent, _Component);

  var _super = _createSuper(MeshComponent);

  function MeshComponent() {
    (0, _classCallCheck2["default"])(this, MeshComponent);
    return _super.call(this, 'Mesh');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(MeshComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('shape', _AttributeType.TYPES.STRING, _Unit.PrimitiveShape.RECT);
      this.add('style', _AttributeType.TYPES.STYLE, new _Style["default"]());
      this.add('size', _AttributeType.TYPES.SIZE, new _Size["default"](0));
      this.add('vertices', _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.VECTOR, []);
      this.add('shapeVertices', _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.VECTOR, []);
      this.add('generated', _AttributeType.TYPES.BOOLEAN, false);
      this.add('assetId', _AttributeType.TYPES.NUMBER);
      this.add('imageRepeat', _AttributeType.TYPES.BOOLEAN, false);
      this.add('imageScale', _AttributeType.TYPES.VECTOR, new _Vector["default"]({
        x: 1,
        y: 1
      }));
      this.add('imagePosition', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('imageRepeatAreaMin', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('imageRepeatAreaMax', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('version', _AttributeType.TYPES.NUMBER, 0);
      this.add('material', _AttributeType.TYPES.MATERIAL, _MaterialType["default"].DEFAULT);
    }
    /**
     * @override
     */

  }, {
    key: "getExcludeFields",
    value: function getExcludeFields() {
      return ['generated', 'shape', 'shapeVertices', 'vertices', 'version', 'style'];
    }
    /**
     * @return {string}
     */

  }, {
    key: "getShape",
    value: function getShape() {
      return this.getValue('shape');
    }
    /**
     * @param {string} shape
     */

  }, {
    key: "setShape",
    value: function setShape(shape) {
      this.setValue('shape', shape);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getVersion",
    value: function getVersion() {
      return this.getValue('version');
    }
    /**
     * @param {number} version
     */

  }, {
    key: "setVersion",
    value: function setVersion(version) {
      this.setValue('version', version);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getAssetId",
    value: function getAssetId() {
      return this.getValue('assetId');
    }
    /**
     * @param {number} assetId
     */

  }, {
    key: "setAssetId",
    value: function setAssetId(assetId) {
      this.setValue('assetId', assetId);
    }
    /**
     * @return {Style}
     */

  }, {
    key: "getStyle",
    value: function getStyle() {
      return this.getValue('style');
    }
    /**
     * @param {Style} style
     */

  }, {
    key: "setStyle",
    value: function setStyle(style) {
      this.setValue('style', style);
    }
    /**
     * @param {Size} size
     */

  }, {
    key: "setSize",
    value: function setSize(size) {
      this.setValue('size', size);
    }
    /**
     * @return {Size}
     */

  }, {
    key: "getSize",
    value: function getSize() {
      return this.getValue('size');
    }
    /**
     * @param {boolean} generated
     */

  }, {
    key: "setGenerated",
    value: function setGenerated(generated) {
      this.setValue('generated', generated);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getGenerated",
    value: function getGenerated() {
      return this.getValue('generated');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isGenerated",
    value: function isGenerated() {
      return this.getGenerated();
    }
    /**
     * @param {Vector[]} vertices
     */

  }, {
    key: "setVertices",
    value: function setVertices(vertices) {
      this.setValue('vertices', vertices);
    }
    /**
     * @return {Vector[]}
     */

  }, {
    key: "getVertices",
    value: function getVertices() {
      return this.getValue('vertices');
    }
    /**
     * @param {Vector[]} shapeVertices
     */

  }, {
    key: "setShapeVertices",
    value: function setShapeVertices(shapeVertices) {
      this.setValue('shapeVertices', shapeVertices);
    }
    /**
     * @return {Vector[]}
     */

  }, {
    key: "getShapeVertices",
    value: function getShapeVertices() {
      return this.getValue('shapeVertices');
    }
    /**
     * @param {boolean} imageRepeat
     */

  }, {
    key: "setImageRepeat",
    value: function setImageRepeat(imageRepeat) {
      this.setValue('imageRepeat', imageRepeat);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getImageRepeat",
    value: function getImageRepeat() {
      return this.getValue('imageRepeat');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isImageRepeat",
    value: function isImageRepeat() {
      return this.getImageRepeat();
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getImageScale",
    value: function getImageScale() {
      return this.getValue('imageScale');
    }
    /**
     * @param {Vector} imageScale
     */

  }, {
    key: "setImageScale",
    value: function setImageScale(imageScale) {
      this.setValue('imageScale', imageScale);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getImagePosition",
    value: function getImagePosition() {
      return this.getValue('imagePosition');
    }
    /**
     * @param {Vector} imagePosition
     */

  }, {
    key: "setImagePosition",
    value: function setImagePosition(imagePosition) {
      this.setValue('imagePosition', imagePosition);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getImageRepeatAreaMin",
    value: function getImageRepeatAreaMin() {
      return this.getValue('imageRepeatAreaMin');
    }
    /**
     * @param {Vector} imageRepeatAreaMin
     */

  }, {
    key: "setImageRepeatAreaMin",
    value: function setImageRepeatAreaMin(imageRepeatAreaMin) {
      this.setValue('imageRepeatAreaMin', imageRepeatAreaMin);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getImageRepeatAreaMax",
    value: function getImageRepeatAreaMax() {
      return this.getValue('imageRepeatAreaMax');
    }
    /**
     * @param {Vector} imageRepeatAreaMax
     */

  }, {
    key: "setImageRepeatAreaMax",
    value: function setImageRepeatAreaMax(imageRepeatAreaMax) {
      this.setValue('imageRepeatAreaMax', imageRepeatAreaMax);
    }
    /**
     * @return {string}
     */

  }, {
    key: "getMaterial",
    value: function getMaterial() {
      return this.getValue('material');
    }
    /**
     * @param {string} material
     */

  }, {
    key: "setMaterial",
    value: function setMaterial(material) {
      this.setValue('material', material);
    }
    /**
     * @override
     */

  }, {
    key: "isRemovable",
    value: function isRemovable() {
      return false;
    }
  }]);
  return MeshComponent;
}(_Component2["default"]);

exports["default"] = MeshComponent;

},{"../../material/MaterialType.js":240,"../../pobject/AttributeType.js":263,"../../pobject/Size.js":268,"../../pobject/Style.js":269,"../../unit/Unit.js":327,"../../utils/Vector.js":370,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],49:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Unit = require("../../unit/Unit.js");

var _ColliderComponent2 = _interopRequireDefault(require("./ColliderComponent.js"));

var _Layout = _interopRequireDefault(require("../../layout/Layout.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RectColliderComponent = /*#__PURE__*/function (_ColliderComponent) {
  (0, _inherits2["default"])(RectColliderComponent, _ColliderComponent);

  var _super = _createSuper(RectColliderComponent);

  function RectColliderComponent() {
    (0, _classCallCheck2["default"])(this, RectColliderComponent);
    return _super.call(this, 'Rect Collider');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(RectColliderComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(RectColliderComponent.prototype), "initAttributes", this).call(this);
      this.setShape(_Unit.PrimitiveShape.RECT);
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [].concat((0, _toConsumableArray2["default"])((0, _get2["default"])((0, _getPrototypeOf2["default"])(RectColliderComponent.prototype), "getFormFields", this).call(this)), [{
        bind: 'size.width',
        label: 'Width (%)',
        type: _Layout["default"].form.TEXT
      }, {
        bind: 'size.height',
        label: 'Height (%)',
        type: _Layout["default"].form.TEXT
      }]);
    }
  }]);
  return RectColliderComponent;
}(_ColliderComponent2["default"]);

exports["default"] = RectColliderComponent;

},{"../../layout/Layout.js":224,"../../unit/Unit.js":327,"./ColliderComponent.js":44,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/toConsumableArray":21}],50:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _Layout = _interopRequireDefault(require("../../layout/Layout.js"));

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RigidBodyComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(RigidBodyComponent, _Component);

  var _super = _createSuper(RigidBodyComponent);

  function RigidBodyComponent() {
    (0, _classCallCheck2["default"])(this, RigidBodyComponent);
    return _super.call(this, 'RigidBody');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(RigidBodyComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('freezeRotation', _AttributeType.TYPES.BOOLEAN, false);
      this.add('friction', _AttributeType.TYPES.NUMBER, 0);
      this.add('created', _AttributeType.TYPES.BOOLEAN, false);
      this.add('velocity', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
    }
    /**
     * @param {boolean} freezeRotation
     */

  }, {
    key: "setFreezeRotation",
    value: function setFreezeRotation(freezeRotation) {
      this.setValue('freezeRotation', freezeRotation);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getFreezeRotation",
    value: function getFreezeRotation() {
      return this.getValue('freezeRotation');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isFreezeRotation",
    value: function isFreezeRotation() {
      return this.getFreezeRotation();
    }
    /**
     * @param {boolean} created
     */

  }, {
    key: "setCreated",
    value: function setCreated(created) {
      this.setValue('created', created);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getCreated",
    value: function getCreated() {
      return this.getValue('created');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isCreated",
    value: function isCreated() {
      return this.getCreated();
    }
    /**
     * @param {number} friction
     */

  }, {
    key: "setFriction",
    value: function setFriction(friction) {
      this.setValue('friction', friction);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getFriction",
    value: function getFriction() {
      return this.getValue('friction');
    }
    /**
     * @param {Vector} velocity
     */

  }, {
    key: "setVelocity",
    value: function setVelocity(velocity) {
      this.setValue('velocity', velocity);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getVelocity",
    value: function getVelocity() {
      return this.getValue('velocity');
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [{
        bind: 'freezeRotation',
        label: 'Freeze Rotation',
        type: _Layout["default"].form.CHECKBOX
      }, {
        bind: 'friction',
        label: 'Friction',
        type: _Layout["default"].form.TEXT
      }];
    }
  }]);
  return RigidBodyComponent;
}(_Component2["default"]);

exports["default"] = RigidBodyComponent;

},{"../../layout/Layout.js":224,"../../pobject/AttributeType.js":263,"../../utils/Vector.js":370,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],51:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScriptComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(ScriptComponent, _Component);

  var _super = _createSuper(ScriptComponent);

  function ScriptComponent() {
    (0, _classCallCheck2["default"])(this, ScriptComponent);
    return _super.call(this, 'Script');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ScriptComponent, [{
    key: "isUnique",
    value: function isUnique() {
      return false;
    }
    /**
     * @override
     */

  }, {
    key: "getExcludeFields",
    value: function getExcludeFields() {
      return ['script'];
    }
    /**
     * @param {DynamicAttribute[]} vars
     */

  }, {
    key: "setVarsAttributes",
    value: function setVarsAttributes(vars) {
      var _this = this;

      vars.forEach(function (variable) {
        if (!_this.hasAttribute(variable.getAttrName())) {
          _this.add(variable.getAttrName(), variable.getAttrType(), variable.getAttrValue());
        }
      });
    }
    /**
     * @override
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {
      this.add('script', _AttributeType.TYPES.STRING);
    }
    /**
     * @return {string}
     */

  }, {
    key: "getScript",
    value: function getScript() {
      return this.getValue('script');
    }
    /**
     * @param {string} script
     */

  }, {
    key: "setScript",
    value: function setScript(script) {
      this.setValue('script', script);
    }
    /**
     * @override
     */

  }, {
    key: "getValue",
    value: function getValue(name) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(ScriptComponent.prototype), "getValue", this).call(this, name);
    }
    /**
     * @override
     */

  }, {
    key: "setValue",
    value: function setValue(name, value) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(ScriptComponent.prototype), "setValue", this).call(this, name, value);
    }
    /**
     * @override
     */

  }, {
    key: "getType",
    value: function getType(name) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(ScriptComponent.prototype), "getType", this).call(this, name);
    }
  }]);
  return ScriptComponent;
}(_Component2["default"]);

exports["default"] = ScriptComponent;

},{"../../pobject/AttributeType.js":263,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],52:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _Style = _interopRequireDefault(require("../../pobject/Style.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var StyleComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(StyleComponent, _Component);

  var _super = _createSuper(StyleComponent);

  function StyleComponent() {
    (0, _classCallCheck2["default"])(this, StyleComponent);
    return _super.call(this, 'Style');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(StyleComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('style', _AttributeType.TYPES.STYLE, new _Style["default"]());
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [];
    }
    /**
     * @param {Style} style
     */

  }, {
    key: "setStyle",
    value: function setStyle(style) {
      this.setValue('style', style);
    }
    /**
     * @return {Style}
     */

  }, {
    key: "getStyle",
    value: function getStyle() {
      return this.getValue('style');
    }
    /**
     * @override
     */

  }, {
    key: "isHidden",
    value: function isHidden() {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "isRemovable",
    value: function isRemovable() {
      return false;
    }
  }]);
  return StyleComponent;
}(_Component2["default"]);

exports["default"] = StyleComponent;

},{"../../pobject/AttributeType.js":263,"../../pobject/Style.js":269,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],53:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../Component.js"));

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TransformComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(TransformComponent, _Component);

  var _super = _createSuper(TransformComponent);

  function TransformComponent() {
    (0, _classCallCheck2["default"])(this, TransformComponent);
    return _super.call(this, 'Transform');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(TransformComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('position', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.add('scale', _AttributeType.TYPES.VECTOR, new _Vector["default"]({
        x: 1,
        y: 1
      }));
      this.add('rotation', _AttributeType.TYPES.RANGE, 0, [0, Math.PI, 0.001]);
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getPosition",
    value: function getPosition() {
      return this.getValue('position');
    }
    /**
     * @param {Vector} position
     */

  }, {
    key: "setPosition",
    value: function setPosition(position) {
      this.setValue('position', position);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getRotation",
    value: function getRotation() {
      return this.getValue('rotation');
    }
    /**
     * @param {number|string} rotation
     */

  }, {
    key: "setRotation",
    value: function setRotation(rotation) {
      this.setValue('rotation', parseFloat(rotation));
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getScale",
    value: function getScale() {
      return this.getValue('scale');
    }
    /**
     * @param {Vector} scale
     */

  }, {
    key: "setScale",
    value: function setScale(scale) {
      this.setValue('scale', scale);
    }
    /**
     * @override
     */

  }, {
    key: "isRemovable",
    value: function isRemovable() {
      return false;
    }
  }]);
  return TransformComponent;
}(_Component2["default"]);

exports["default"] = TransformComponent;

},{"../../pobject/AttributeType.js":263,"../../utils/Vector.js":370,"../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],54:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../Component.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GUIPendingComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(GUIPendingComponent, _Component);

  var _super = _createSuper(GUIPendingComponent);

  function GUIPendingComponent() {
    (0, _classCallCheck2["default"])(this, GUIPendingComponent);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GUIPendingComponent, [{
    key: "isHidden",

    /**
     * @override
     */
    value: function isHidden() {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [];
    }
    /**
     * @override
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return GUIPendingComponent;
}(_Component2["default"]);

exports["default"] = GUIPendingComponent;

},{"../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],55:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../../Component.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GUIColliderComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(GUIColliderComponent, _Component);

  var _super = _createSuper(GUIColliderComponent);

  function GUIColliderComponent() {
    (0, _classCallCheck2["default"])(this, GUIColliderComponent);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GUIColliderComponent, [{
    key: "getFormFields",

    /**
     * @override
     */
    value: function getFormFields() {
      return [];
    }
    /**
     * @override
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return GUIColliderComponent;
}(_Component2["default"]);

exports["default"] = GUIColliderComponent;

},{"../../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],56:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../../Component.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GUIGridComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(GUIGridComponent, _Component);

  var _super = _createSuper(GUIGridComponent);

  function GUIGridComponent() {
    (0, _classCallCheck2["default"])(this, GUIGridComponent);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GUIGridComponent, [{
    key: "getFormFields",

    /**
     * @override
     */
    value: function getFormFields() {
      return [];
    }
    /**
     * @override
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return GUIGridComponent;
}(_Component2["default"]);

exports["default"] = GUIGridComponent;

},{"../../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],57:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../../Component.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GUIGridXComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(GUIGridXComponent, _Component);

  var _super = _createSuper(GUIGridXComponent);

  function GUIGridXComponent() {
    (0, _classCallCheck2["default"])(this, GUIGridXComponent);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GUIGridXComponent, [{
    key: "getFormFields",

    /**
     * @override
     */
    value: function getFormFields() {
      return [];
    }
    /**
     * @override
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return GUIGridXComponent;
}(_Component2["default"]);

exports["default"] = GUIGridXComponent;

},{"../../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],58:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../../Component.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GUIGridYComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(GUIGridYComponent, _Component);

  var _super = _createSuper(GUIGridYComponent);

  function GUIGridYComponent() {
    (0, _classCallCheck2["default"])(this, GUIGridYComponent);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GUIGridYComponent, [{
    key: "getFormFields",

    /**
     * @override
     */
    value: function getFormFields() {
      return [];
    }
    /**
     * @override
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return GUIGridYComponent;
}(_Component2["default"]);

exports["default"] = GUIGridYComponent;

},{"../../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],59:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../../Component.js"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NodeComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(NodeComponent, _Component);

  var _super = _createSuper(NodeComponent);

  function NodeComponent() {
    (0, _classCallCheck2["default"])(this, NodeComponent);
    return _super.call(this, 'Node');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(NodeComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('nodeId', _AttributeType.TYPES.NUMBER);
      this.add('title', _AttributeType.TYPES.STRING);
      this.add('type', _AttributeType.TYPES.STRING);
      this.add('inputs', _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.STRING, []);
      this.add('output', _AttributeType.TYPES.STRING);
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [];
    }
    /**
     * @param {number} nodeId
     */

  }, {
    key: "setNodeId",
    value: function setNodeId(nodeId) {
      this.setValue('nodeId', nodeId);
    }
    /**
     * @param {string} title
     */

  }, {
    key: "setTitle",
    value: function setTitle(title) {
      this.setValue('title', title);
    }
    /**
     * @param {string} type
     */

  }, {
    key: "setType",
    value: function setType(type) {
      this.setValue('type', type);
    }
    /**
     * @param {string[]} inputs
     */

  }, {
    key: "setInputs",
    value: function setInputs(inputs) {
      this.setValue('inputs', inputs);
    }
    /**
     * @param {string} output
     */

  }, {
    key: "setOutput",
    value: function setOutput(output) {
      this.setValue('output', output);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getNodeId",
    value: function getNodeId() {
      return this.getValue('nodeId');
    }
    /**
     * @return {string}
     */

  }, {
    key: "getTitle",
    value: function getTitle() {
      return this.getValue('title');
    }
    /**
     * @return {string}
     */

  }, {
    key: "getType",
    value: function getType() {
      return this.getValue('type');
    }
    /**
     * @return {string[]}
     */

  }, {
    key: "getInputs",
    value: function getInputs() {
      return this.getValue('inputs');
    }
    /**
     * @return {string}
     */

  }, {
    key: "getOutput",
    value: function getOutput() {
      return this.getValue('output');
    }
  }]);
  return NodeComponent;
}(_Component2["default"]);

exports["default"] = NodeComponent;

},{"../../../../pobject/AttributeType.js":263,"../../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],60:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../../Component.js"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NodeInputComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(NodeInputComponent, _Component);

  var _super = _createSuper(NodeInputComponent);

  function NodeInputComponent() {
    (0, _classCallCheck2["default"])(this, NodeInputComponent);
    return _super.call(this, 'Node Input');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(NodeInputComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('nodeInputId', _AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [];
    }
    /**
     * @param {number} nodeInputId
     */

  }, {
    key: "setNodeInputId",
    value: function setNodeInputId(nodeInputId) {
      this.setValue('nodeInputId', nodeInputId);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getNodeInputId",
    value: function getNodeInputId() {
      return this.getValue('nodeInputId');
    }
  }]);
  return NodeInputComponent;
}(_Component2["default"]);

exports["default"] = NodeInputComponent;

},{"../../../../pobject/AttributeType.js":263,"../../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],61:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Component2 = _interopRequireDefault(require("../../../Component.js"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GUIPropertyComponent = /*#__PURE__*/function (_Component) {
  (0, _inherits2["default"])(GUIPropertyComponent, _Component);

  var _super = _createSuper(GUIPropertyComponent);

  function GUIPropertyComponent() {
    (0, _classCallCheck2["default"])(this, GUIPropertyComponent);
    return _super.call(this, 'Edit Properties');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GUIPropertyComponent, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.add('selectable', _AttributeType.TYPES.BOOLEAN, true);
      this.add('selected', _AttributeType.TYPES.BOOLEAN, false);
      this.add('locked', _AttributeType.TYPES.BOOLEAN, false);
      this.add('visible', _AttributeType.TYPES.BOOLEAN, true);
      this.add('focused', _AttributeType.TYPES.BOOLEAN, false);
      this.add('rank', _AttributeType.TYPES.NUMBER, 0);
    }
    /**
     * @param {boolean} value
     */

  }, {
    key: "setSelected",
    value: function setSelected(value) {
      this.setValue('selected', value);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getSelected",
    value: function getSelected() {
      return this.getValue('selected');
    }
    /**
     * @param {boolean} value
     */

  }, {
    key: "setFocused",
    value: function setFocused(value) {
      this.setValue('focused', value);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getFocused",
    value: function getFocused() {
      return this.getValue('focused');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isFocused",
    value: function isFocused() {
      return this.getFocused();
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isSelected",
    value: function isSelected() {
      return this.getSelected();
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getSelectable",
    value: function getSelectable() {
      return this.getValue('selectable');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isSelectable",
    value: function isSelectable() {
      return this.getSelectable();
    }
    /**
     * @param {boolean} visible
     */

  }, {
    key: "setVisible",
    value: function setVisible(visible) {
      this.setValue('visible', visible);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getVisible",
    value: function getVisible() {
      return this.getValue('visible');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isVisible",
    value: function isVisible() {
      return this.getVisible();
    }
    /**
     * @param {boolean} locked
     */

  }, {
    key: "setLocked",
    value: function setLocked(locked) {
      this.setValue('locked', locked);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getLocked",
    value: function getLocked() {
      return this.getValue('locked');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isLocked",
    value: function isLocked() {
      return this.getLocked();
    }
    /**
     * @param {number} rank
     */

  }, {
    key: "setRank",
    value: function setRank(rank) {
      this.setValue('rank', rank);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getRank",
    value: function getRank() {
      return this.getValue('rank');
    }
    /**
     * @override
     */

  }, {
    key: "getFormFields",
    value: function getFormFields() {
      return [];
    }
    /**
     * @override
     */

  }, {
    key: "isHidden",
    value: function isHidden() {
      return true;
    }
  }]);
  return GUIPropertyComponent;
}(_Component2["default"]);

exports["default"] = GUIPropertyComponent;

},{"../../../../pobject/AttributeType.js":263,"../../../Component.js":40,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],62:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ContentData2 = _interopRequireDefault(require("../project/data/ContentData.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Content = /*#__PURE__*/function (_ContentData) {
  (0, _inherits2["default"])(Content, _ContentData);

  var _super = _createSuper(Content);

  function Content() {
    (0, _classCallCheck2["default"])(this, Content);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(Content, [{
    key: "getData",

    /**
     * @return {*}
     */
    value: function getData() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getData must be implemented"));
    }
  }]);
  return Content;
}(_ContentData2["default"]);

exports["default"] = Content;

},{"../exception/type/SystemError.js":82,"../project/data/ContentData.js":283,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],63:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var _TabData2 = _interopRequireDefault(require("../project/data/TabData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Tab = /*#__PURE__*/function (_TabData) {
  (0, _inherits2["default"])(Tab, _TabData);

  var _super = _createSuper(Tab);

  /**
   * @type {boolean}
   */

  /**
   * @param {string} name
   * @param {Content} content
   */
  function Tab(name, content) {
    var _this;

    (0, _classCallCheck2["default"])(this, Tab);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "protected", void 0);
    _this.id = _Maths["default"].generateId();
    _this.name = name;
    _this.content = content;
    _this["protected"] = false;
    return _this;
  }
  /**
   * @return {boolean}
   */


  (0, _createClass2["default"])(Tab, [{
    key: "isSelected",
    value: function isSelected() {
      return this.selected;
    }
  }, {
    key: "select",
    value: function select() {
      this.selected = true;
    }
  }, {
    key: "unselect",
    value: function unselect() {
      this.selected = false;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isProtected",
    value: function isProtected() {
      return this["protected"];
    }
  }]);
  return Tab;
}(_TabData2["default"]);

exports["default"] = Tab;

},{"../project/data/TabData.js":298,"../utils/Maths.js":363,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],64:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Content2 = _interopRequireDefault(require("../Content.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var EditAnimationContent = /*#__PURE__*/function (_Content) {
  (0, _inherits2["default"])(EditAnimationContent, _Content);

  var _super = _createSuper(EditAnimationContent);

  /**
   * @param {Asset} data
   */
  function EditAnimationContent(data) {
    (0, _classCallCheck2["default"])(this, EditAnimationContent);
    return _super.call(this, data && data.getId());
  }
  /**
   * @return {Asset}
   */


  (0, _createClass2["default"])(EditAnimationContent, [{
    key: "getData",
    value: function getData() {
      return _World["default"].get().getAssetsManager().findAssetById(this.getDataContentId());
    }
  }]);
  return EditAnimationContent;
}(_Content2["default"]);

exports["default"] = EditAnimationContent;

},{"../../world/World.js":372,"../Content.js":62,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],65:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Content2 = _interopRequireDefault(require("../Content.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var EditGraphScriptContent = /*#__PURE__*/function (_Content) {
  (0, _inherits2["default"])(EditGraphScriptContent, _Content);

  var _super = _createSuper(EditGraphScriptContent);

  /**
   * @param {Asset} data
   */
  function EditGraphScriptContent(data) {
    (0, _classCallCheck2["default"])(this, EditGraphScriptContent);
    return _super.call(this, data && data.getId());
  }
  /**
   * @return {Asset}
   */


  (0, _createClass2["default"])(EditGraphScriptContent, [{
    key: "getData",
    value: function getData() {
      return _World["default"].get().getAssetsManager().findAssetById(this.getDataContentId());
    }
  }]);
  return EditGraphScriptContent;
}(_Content2["default"]);

exports["default"] = EditGraphScriptContent;

},{"../../world/World.js":372,"../Content.js":62,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],66:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Content2 = _interopRequireDefault(require("../Content.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var EditScriptCodeContent = /*#__PURE__*/function (_Content) {
  (0, _inherits2["default"])(EditScriptCodeContent, _Content);

  var _super = _createSuper(EditScriptCodeContent);

  /**
   * @param {Asset} data
   */
  function EditScriptCodeContent(data) {
    (0, _classCallCheck2["default"])(this, EditScriptCodeContent);
    return _super.call(this, data && data.getId());
  }
  /**
   * @return {Asset}
   */


  (0, _createClass2["default"])(EditScriptCodeContent, [{
    key: "getData",
    value: function getData() {
      return _World["default"].get().getAssetsManager().findAssetById(this.getDataContentId());
    }
  }]);
  return EditScriptCodeContent;
}(_Content2["default"]);

exports["default"] = EditScriptCodeContent;

},{"../../world/World.js":372,"../Content.js":62,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],67:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * Define the action to be executed when an event is triggered
 */
var Action = /*#__PURE__*/function () {
  function Action() {
    (0, _classCallCheck2["default"])(this, Action);
    this.queue = [];
  }

  (0, _createClass2["default"])(Action, [{
    key: "add",

    /**
     * Add action to the queue.
     * @param {Object} object the object must define the method "execute"
     * @param {...any} args
     */
    value: function add(object) {
      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      this.queue.push({
        object: object,
        args: args
      });
    }
    /**
     * Run all actions. stop the execution if the "execute" return true.
     */

  }, {
    key: "run",
    value: function run() {
      for (var iQueue in this.queue) {
        if (this.queue.hasOwnProperty(iQueue)) {
          var _action$object;

          var action = this.queue[iQueue];

          if ((_action$object = action.object).run.apply(_action$object, (0, _toConsumableArray2["default"])(action.args))) {
            break;
          }
        }
      }
    }
  }, {
    key: "reset",
    value: function reset() {
      this.queue = [];
    }
  }], [{
    key: "get",
    value: function get() {
      if (!Action.instance) {
        Action.instance = new Action();
      }

      return Action.instance;
    }
  }]);
  return Action;
}();

Action.instance = null;
var _default = Action;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/toConsumableArray":21}],68:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Window = _interopRequireDefault(require("./Window.js"));

var _RunnerHandler = _interopRequireDefault(require("./RunnerHandler.js"));

var _ExceptionHandler = _interopRequireDefault(require("../exception/ExceptionHandler.js"));

/**
 * Define the application main
 */
var Application = /*#__PURE__*/function () {
  /**
   * @type {Loop[]}
   */

  /**
   * @param {Loop[]} loops
   */
  function Application(loops) {
    (0, _classCallCheck2["default"])(this, Application);
    (0, _defineProperty2["default"])(this, "loops", void 0);
    this.loops = loops;
    this.exceptionHandler = _ExceptionHandler["default"].get();
    this.window = _Window["default"].get();
    this.loop = this.loop.bind(this);
  }

  (0, _createClass2["default"])(Application, [{
    key: "start",
    value: function () {
      var _start = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.window.init();
                _context.next = 3;
                return Promise.all(this.loops.map(function (loop) {
                  return loop.get().init();
                }));

              case 3:
                this.loop();

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function start() {
        return _start.apply(this, arguments);
      }

      return start;
    }()
    /**
     * @private
     */

  }, {
    key: "loop",
    value: function loop() {
      try {
        this.loops.forEach(function (loop) {
          var loopInstance = loop.get();

          _RunnerHandler["default"].get().handle(loopInstance.getRunners());

          loopInstance.loop();
        });
      } catch (e) {
        this.exceptionHandler.handle(e);
      }

      this.window.clear();
      this.window.update();
      requestAnimationFrame(this.loop);
    }
  }]);
  return Application;
}();

var _default = Application;
exports["default"] = _default;

},{"../exception/ExceptionHandler.js":79,"./RunnerHandler.js":76,"./Window.js":78,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":26}],69:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _CameraData2 = _interopRequireDefault(require("../project/data/CameraData.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Camera = /*#__PURE__*/function (_CameraData) {
  (0, _inherits2["default"])(Camera, _CameraData);

  var _super = _createSuper(Camera);

  /**
   * @type {Vector}
   */

  /**
   * @type {Vector}
   */
  function Camera(position) {
    var _this;

    (0, _classCallCheck2["default"])(this, Camera);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "position", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "initPosition", void 0);
    _this.initPosition = position;
    _this.position = _this.initPosition;
    _this.scaleFactor = 0.2;
    _this.cameraUnitId = null;
    return _this;
  }
  /**
   * Update camera position
   * @param {Vector} position
   */


  (0, _createClass2["default"])(Camera, [{
    key: "update",
    value: function update(position) {
      this.position = position;
    }
    /**
     * Reset camera position
     */

  }, {
    key: "reset",
    value: function reset() {
      this.position = this.initPosition;
    }
    /**
     * Calculate and return the camera view
     */

  }, {
    key: "getCameraView",
    value: function getCameraView() {
      var cameraViewX = this.position.x;
      var cameraViewY = this.position.y;
      var cameraViewZ = this.position.z || 0;
      return {
        cameraViewX: cameraViewX,
        cameraViewY: cameraViewY,
        cameraViewZ: cameraViewZ
      };
    }
    /**
     * Convert a position to canvas coordination
     * @param {Vector} position
     */

  }, {
    key: "toCanvasCoord",
    value: function toCanvasCoord(position) {
      var _this$getCameraView = this.getCameraView(),
          cameraViewX = _this$getCameraView.cameraViewX,
          cameraViewY = _this$getCameraView.cameraViewY;

      var x = parseInt(position.x) - cameraViewX;
      var y = parseInt(position.y) - cameraViewY;
      return new _Vector["default"]({
        x: x,
        y: y
      });
    }
    /**
     * Get the canvas coordination from the given position
     * @param {Vector} position
     */

  }, {
    key: "fromCanvasCoord",
    value: function fromCanvasCoord(position) {
      var _this$getCameraView2 = this.getCameraView(),
          cameraViewX = _this$getCameraView2.cameraViewX,
          cameraViewY = _this$getCameraView2.cameraViewY;

      var x = position.x + cameraViewX;
      var y = position.y + cameraViewY;
      var z = position.z;
      return new _Vector["default"]({
        x: x,
        y: y,
        z: z
      });
    }
    /**
     * @param {Vector} position
     * @return {Vector}
     */

  }, {
    key: "toCameraScale",
    value: function toCameraScale(position) {
      var scale = this.getScale(position);
      var x = position.x * scale;
      var y = position.y * scale;
      var z = position.z || 0;
      return new _Vector["default"]({
        x: x,
        y: y,
        z: z
      });
    }
    /**
     * @param {Vector} position
     * @return {Vector}
     */

  }, {
    key: "fromCameraScale",
    value: function fromCameraScale(position) {
      var scale = this.getScale(position);
      var x = position.x / scale;
      var y = position.y / scale;
      var z = position.z || 0;
      return new _Vector["default"]({
        x: x,
        y: y,
        z: z
      });
    }
    /**
     * @param {Vector} position
     * @return {number}
     */

  }, {
    key: "getScale",
    value: function getScale(position) {
      var _this$getCameraView3 = this.getCameraView(),
          cameraViewZ = _this$getCameraView3.cameraViewZ;

      var distanceZ = cameraViewZ - (position.z || 0);
      return 1 + distanceZ * this.scaleFactor;
    }
    /**
     * @param {number} scale
     */

  }, {
    key: "setScale",
    value: function setScale(scale) {
      var distanceZ = (scale - 1) / this.scaleFactor;
      this.setPositionZ(distanceZ);
    }
    /**
     * @param {Size} size
     * @param {Vector} position
     * @return {Size}
     */

  }, {
    key: "toScaleSize",
    value: function toScaleSize(size) {
      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _Vector["default"]();
      var scale = this.getScale(position);
      return new _Size["default"]({
        width: size.width * scale,
        height: size.height * scale
      });
    }
    /**
     * @param {number} value
     * @param {Vector} position
     * @return {number}
     */

  }, {
    key: "toScaleNumber",
    value: function toScaleNumber(value) {
      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _Vector["default"]();
      return value * this.getScale(position);
    }
    /**
     * @param {Size} size
     * @param {Vector} position
     * @return {Size}
     */

  }, {
    key: "fromScaleSize",
    value: function fromScaleSize(size) {
      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _Vector["default"]();
      var scale = this.getScale(position);
      return new _Size["default"]({
        width: size.width / scale,
        height: size.height / scale
      });
    }
    /**
     * @param {number} value
     * @param {Vector} position
     * @return {number}
     */

  }, {
    key: "fromScaleNumber",
    value: function fromScaleNumber(value) {
      var position = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _Vector["default"]();
      return value / this.getScale(position);
    }
    /**
     * @param {number} cameraUnitId
     * @param {World} world
     */

  }, {
    key: "setup",
    value: function setup(cameraUnitId, world) {
      this.cameraUnitId = cameraUnitId;
      var unit = this.getUnit(world.getUnitManager());

      if (!unit) {
        throw new TypeError("Error Setup camera (Unit ID: ".concat(cameraUnitId, ")"));
      }

      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var scale = world.getResolution().getWidth() / meshComponent.getSize().getWidth();
      var unitPosition = unit.getComponent(_TransformComponent["default"]).getPosition();
      this.update(unitPosition);
      this.setScale(scale);
      world.regenerateAll();
    }
    /**
     * @param {World} world
     */

  }, {
    key: "disableGuides",
    value: function disableGuides(world) {
      var unit = this.getUnit(world.getUnitManager());
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      meshComponent.setEnabled(false);
    }
    /**
     * @param {UnitManager} unitManager
     */

  }, {
    key: "getUnit",
    value: function getUnit(unitManager) {
      return unitManager.findUnitById(this.cameraUnitId);
    }
    /**
     * @param {Vector} position
     */

  }, {
    key: "setInitPosition",
    value: function setInitPosition(position) {
      this.initPosition = position;
    }
  }]);
  return Camera;
}(_CameraData2["default"]);

var _default = Camera;
exports["default"] = _default;

},{"../component/internal/MeshComponent.js":48,"../component/internal/TransformComponent.js":53,"../pobject/Size.js":268,"../project/data/CameraData.js":281,"../utils/Vector.js":370,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],70:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PREVIEW_URL = exports.STYLE_THEME = exports.CANVAS_CONTEXT_TYPE = exports.HTML_ID_PREFIX = exports.SCENE_HEIGHT = exports.SCENE_WIDTH = void 0;
var SCENE_WIDTH = window.innerWidth;
exports.SCENE_WIDTH = SCENE_WIDTH;
var SCENE_HEIGHT = window.innerHeight;
exports.SCENE_HEIGHT = SCENE_HEIGHT;
var HTML_ID_PREFIX = 'app-el-';
exports.HTML_ID_PREFIX = HTML_ID_PREFIX;
var CANVAS_CONTEXT_TYPE = '2d';
exports.CANVAS_CONTEXT_TYPE = CANVAS_CONTEXT_TYPE;
var STYLE_THEME = 'dark';
exports.STYLE_THEME = STYLE_THEME;
var PREVIEW_URL = '/src/preview/';
exports.PREVIEW_URL = PREVIEW_URL;

},{}],71:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.objectContext = exports.objectCanvas = void 0;
var objectCanvas = document.getElementById('object');
exports.objectCanvas = objectCanvas;
var objectContext = objectCanvas && objectCanvas.getContext('2d');
exports.objectContext = objectContext;

},{}],72:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _World = _interopRequireDefault(require("../world/World.js"));

var _SchemaValidator = _interopRequireDefault(require("../schema/SchemaValidator.js"));

var _Storage = _interopRequireDefault(require("./Storage.js"));

/**
 * Handle the history of action executed.
 * Use the storage to push/pop data.
 * This class is used to manage the Undo action
 * @property {Storage} storage
 * @property {number} maxList
 * @property {Object[]} list
 */
var History = /*#__PURE__*/function () {
  /**
   * @type {History}
   */

  /**
   * @type {HistoryItem[]}
   */

  /**
   * @type {Object}
   */
  function History() {
    (0, _classCallCheck2["default"])(this, History);
    (0, _defineProperty2["default"])(this, "list", void 0);
    (0, _defineProperty2["default"])(this, "dataRecord", void 0);
    this.list = [];
    this.dataRecord = {};
    this.maxList = 10;
  }
  /**
   * @return {History}
   */


  (0, _createClass2["default"])(History, [{
    key: "record",
    value: function () {
      var _record = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.getData();

              case 2:
                this.dataRecord = _context.sent;

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function record() {
        return _record.apply(this, arguments);
      }

      return record;
    }()
  }, {
    key: "save",
    value: function () {
      var _save = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        var newRecord, resultLeftJoin, resultRightJoin, result;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.getData();

              case 2:
                newRecord = _context2.sent;
                _context2.next = 5;
                return _SchemaValidator["default"].get().compare(_Storage["default"].type.WORLD, this.dataRecord, newRecord);

              case 5:
                resultLeftJoin = _context2.sent;
                _context2.next = 8;
                return _SchemaValidator["default"].get().compare(_Storage["default"].type.WORLD, newRecord, this.dataRecord);

              case 8:
                resultRightJoin = _context2.sent;
                result = {
                  after: resultLeftJoin,
                  before: resultRightJoin
                };
                this.push(result);

              case 11:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function save() {
        return _save.apply(this, arguments);
      }

      return save;
    }()
    /**
     * @return {World}
     */

  }, {
    key: "getData",
    value: function () {
      var _getData = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3() {
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return _SchemaValidator["default"].get().validate(_Storage["default"].type.WORLD, _World["default"].get(), false);

              case 2:
                return _context3.abrupt("return", _context3.sent);

              case 3:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function getData() {
        return _getData.apply(this, arguments);
      }

      return getData;
    }()
  }, {
    key: "restore",
    value: function () {
      var _restore = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4() {
        var result, world, dataToDelete, dataToAdd, indexedPath, value, _indexedPath, _value, worldDataValidated;

        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                result = this.pop();
                _context4.next = 3;
                return this.getData();

              case 3:
                world = _context4.sent;

                if (!result) {
                  _context4.next = 23;
                  break;
                }

                dataToDelete = result.after;
                dataToAdd = result.before;
                _context4.t0 = _regenerator["default"].keys(dataToDelete);

              case 8:
                if ((_context4.t1 = _context4.t0()).done) {
                  _context4.next = 15;
                  break;
                }

                indexedPath = _context4.t1.value;
                value = dataToDelete[indexedPath];
                _context4.next = 13;
                return _SchemaValidator["default"].get().updateFromPath(world, indexedPath, value.path, undefined);

              case 13:
                _context4.next = 8;
                break;

              case 15:
                _context4.t2 = _regenerator["default"].keys(dataToAdd);

              case 16:
                if ((_context4.t3 = _context4.t2()).done) {
                  _context4.next = 23;
                  break;
                }

                _indexedPath = _context4.t3.value;
                _value = dataToAdd[_indexedPath];
                _context4.next = 21;
                return _SchemaValidator["default"].get().updateFromPath(world, _indexedPath, _value.path, _value.data);

              case 21:
                _context4.next = 16;
                break;

              case 23:
                _context4.next = 25;
                return _SchemaValidator["default"].get().validate(_Storage["default"].type.WORLD, world, false);

              case 25:
                worldDataValidated = _context4.sent;

                _World["default"].get().set(worldDataValidated);

              case 27:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function restore() {
        return _restore.apply(this, arguments);
      }

      return restore;
    }()
    /**
     * @return {HistoryItem}
     */

  }, {
    key: "pop",
    value: function pop() {
      return this.list.length && this.list.pop();
    }
    /**
     * @param {HistoryItem} result
     */

  }, {
    key: "push",
    value: function push(result) {
      if (this.list.length > this.maxList) {
        this.list.shift();
      }

      this.list.push(result);
    }
    /**
     * @typedef {{after: {path: string, data: *}, before: {path: string, data: *}}} HistoryItem
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return History;
}();

(0, _defineProperty2["default"])(History, "instance", null);
var _default = History;
exports["default"] = _default;

},{"../schema/SchemaValidator.js":319,"../world/World.js":372,"./Storage.js":77,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":26}],73:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.KeyCode = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * Define the keyboard inputs (key pressed, released)
 * @property {number[]} keys
 */
var Keyboard = /*#__PURE__*/function () {
  function Keyboard() {
    (0, _classCallCheck2["default"])(this, Keyboard);
    this.keysPressed = [];
    this.keysReleased = [];
  }
  /**
   * @param {number} key
   */


  (0, _createClass2["default"])(Keyboard, [{
    key: "setKeyPressed",
    value: function setKeyPressed(key) {
      if (!this.isKeyPressed(key)) {
        this.keysPressed.push(key);
      }
    }
    /**
     * @param {number} key
     */

  }, {
    key: "setKeyReleased",
    value: function setKeyReleased(key) {
      if (this.isKeyPressed(key)) {
        var index = this.keysPressed.indexOf(key);
        this.keysPressed.splice(index, 1);
        this.keysReleased.push(key);
      }
    }
    /**
     * @param {number} key
     * @return {Boolean}
     */

  }, {
    key: "isKeyPressed",
    value: function isKeyPressed(key) {
      var index = this.keysPressed.indexOf(key);
      return index !== -1;
    }
    /**
     * @param {number} key
     * @return {Boolean}
     */

  }, {
    key: "isKeyReleased",
    value: function isKeyReleased(key) {
      var index = this.keysReleased.indexOf(key);
      return index !== -1;
    }
    /***
     * @return {Boolean}
     */

  }, {
    key: "isAnyKeyPressed",
    value: function isAnyKeyPressed() {
      return this.keysPressed.length > 0;
    }
  }, {
    key: "clear",
    value: function clear() {
      this.keysReleased = [];
    }
  }]);
  return Keyboard;
}();

var KeyCode = {
  UP: 38,
  DOWN: 40,
  LEFT: 37,
  RIGHT: 39,
  Z: 90,
  S: 83,
  A: 65,
  Q: 81,
  D: 68,
  SPACE: 32,
  ENTER: 13,
  P: 80
};
exports.KeyCode = KeyCode;
var _default = Keyboard;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],74:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ImageHelper = _interopRequireDefault(require("../utils/ImageHelper.js"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var _Constant = require("./Constant.js");

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _BlobData2 = _interopRequireDefault(require("../project/data/BlobData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * Define a block of pixels loaded to the VRAM.
 * Attached to an entity, and used to draw pixels by the GPU
 * @extends {BlobData}
 * @property {Vector} position
 * @property {{width: number, height: number}} size
 * @property {OffscreenCanvasRenderingContext2D} context
 */
var Mesh = /*#__PURE__*/function (_BlobData) {
  (0, _inherits2["default"])(Mesh, _BlobData);

  var _super = _createSuper(Mesh);

  function Mesh() {
    var _this;

    var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new _Vector["default"]();
    var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    (0, _classCallCheck2["default"])(this, Mesh);
    _this = _super.call(this);
    _this.size = _this.initSize(size);
    _this.position = position;

    _this.initCanvas();

    return _this;
  }
  /**
   * @param {number|Size} size
   * @return {Size}
   */


  (0, _createClass2["default"])(Mesh, [{
    key: "initSize",
    value: function initSize(size) {
      return _.isNumber(size) ? new _Size["default"]({
        width: size,
        height: size
      }) : size;
    }
    /**
     * Initialize the canvas and the context for the current Mesh
     */

  }, {
    key: "initCanvas",
    value: function initCanvas() {
      var canvas = new OffscreenCanvas(this.size.width, this.size.height);
      this.context = canvas.getContext(_Constant.CANVAS_CONTEXT_TYPE);
    }
    /**
     * Copy a given canvas to the mesh
     * @param {OffscreenCanvas | HTMLImageElement} canvas
     * @param {Number} x
     * @param {Number} y
     * @param {Number} sw
     * @param {Number} sh
     */

  }, {
    key: "copy",
    value: function copy(canvas, x, y, sw, sh) {
      this.context.drawImage(canvas, x, y, sw, sh);
    }
    /**
     * Clear the Mesh
     * @param {number|Size} size
     */

  }, {
    key: "clear",
    value: function clear() {
      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      this.size = this.initSize(size || this.size);

      if (this.size.width > 0 && this.size.height > 0) {
        this.context.canvas.width = this.size.width;
        this.context.canvas.height = this.size.height;
        return true;
      }

      return false;
    }
    /**
     * Create a mesh from another Mesh
     * @param {Mesh} mesh
     */

  }, {
    key: "copyFromMesh",
    value: function copyFromMesh(mesh) {
      this.copy(mesh.context.canvas, 0, 0, this.size.width, this.size.height);
    }
    /**
     * Create a mesh from a image URL
     * @param {string} imageInput Image url or blob
     * @return {boolean}
     */

  }, {
    key: "fromImage",
    value: function () {
      var _fromImage = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(imageInput) {
        var image, width, height;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!imageInput) {
                  _context.next = 10;
                  break;
                }

                image = new Image();
                image.src = imageInput;
                _context.next = 5;
                return image.decode();

              case 5:
                width = image.width, height = image.height;

                if (!(width && height)) {
                  _context.next = 10;
                  break;
                }

                this.clear(new _Size["default"]({
                  width: width,
                  height: height
                }));
                this.copy(image, 0, 0, width, height);
                return _context.abrupt("return", true);

              case 10:
                return _context.abrupt("return", false);

              case 11:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function fromImage(_x) {
        return _fromImage.apply(this, arguments);
      }

      return fromImage;
    }()
    /**
     * @override
     */

  }, {
    key: "setDataUrl",
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(dataUrl) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.fromImage(dataUrl);

              case 2:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function setDataUrl(_x2) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
    /**
     * @override
     */

  }, {
    key: "getDataUrl",
    value: function getDataUrl() {
      return _ImageHelper["default"].getDataURL(this.context.canvas, this.size);
    }
    /**
     * @param {OffscreenCanvasRenderingContext2D} context
     */

  }, {
    key: "setContext",
    value: function setContext(context) {
      this.context = context;
    }
    /**
     * Instantiate new Mesh from image URL
     * @param {string} imageInput Image url or blob
     * @return {Mesh}
     */

  }], [{
    key: "fromImage",
    value: function () {
      var _fromImage2 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(imageInput) {
        var mesh;
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                mesh = new Mesh();
                _context3.next = 3;
                return mesh.fromImage(imageInput);

              case 3:
                return _context3.abrupt("return", mesh);

              case 4:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function fromImage(_x3) {
        return _fromImage2.apply(this, arguments);
      }

      return fromImage;
    }()
  }]);
  return Mesh;
}(_BlobData2["default"]);

var _default = Mesh;
exports["default"] = _default;

},{"../pobject/Size.js":268,"../project/data/BlobData.js":280,"../utils/ImageHelper.js":361,"../utils/Vector.js":370,"./Constant.js":70,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],75:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.CURSOR = exports.MouseButton = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Context = require("./Context.js");

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

/**
 * Define the mouse inputs (pressed, clicked, mouse position, ...)
 */
var Mouse = /*#__PURE__*/function () {
  function Mouse() {
    (0, _classCallCheck2["default"])(this, Mouse);
    this.keydowns = [];
    this.keyclicks = [];
    this.keydbclicks = [];
    this.mouseWheelMove = false;
    this.position = new _Vector["default"]();
    this.scenePosition = new _Vector["default"]();
    this.target = null;
    this.currentPosition = new _Vector["default"]();
    this.currentScenePosition = new _Vector["default"]();
    this.lastPosition = this.currentPosition;
    this.mouseWheel = {
      y: 0
    };
  }
  /**
   * @param {MouseEvent} event
   * @return {Vector}
   */


  (0, _createClass2["default"])(Mouse, [{
    key: "getPosition",
    value: function getPosition(event) {
      return new _Vector["default"]({
        x: event.clientX,
        y: event.clientY
      });
    }
    /**
     * @param {MouseEvent} event
     * @return {EventTarget}
     */

  }, {
    key: "getTarget",
    value: function getTarget(event) {
      return event.target;
    }
    /**
     * @param {MouseEvent} event
     * @return {EventTarget[]}
     */

  }, {
    key: "getPath",
    value: function getPath(event) {
      return event.composedPath();
    }
    /**
     * @param {number} key
     */

  }, {
    key: "setButtonPressed",
    value: function setButtonPressed(key) {
      if (!this.isButtonPressed(key)) {
        this.keydowns.push(key);
      }

      this.position = this.getPosition(event);
      this.target = this.getTarget(event);
      this.path = this.getPath(event);
      this.scenePosition = this.toSceneCoord(this.position);
    }
    /**
     * @param {number} key
     */

  }, {
    key: "setButtonClicked",
    value: function setButtonClicked(key) {
      if (!this.isButtonClicked(key)) {
        this.keyclicks.push(key);
      }
    }
    /**
     * @param {number} key
     */

  }, {
    key: "setButtonDoubleClicked",
    value: function setButtonDoubleClicked(key) {
      if (!this.isButtonDoubleClicked(key)) {
        this.keydbclicks.push(key);
      }
    }
    /**
     * @param {number} key
     */

  }, {
    key: "setButtonReleased",
    value: function setButtonReleased(key) {
      if (this.isButtonPressed(key)) {
        var index = this.keydowns.indexOf(key);
        this.keydowns.splice(index, 1);
      }
    }
    /**
     * @param {number} deltaY
     */

  }, {
    key: "setMouseWheel",
    value: function setMouseWheel(deltaY) {
      this.mouseWheel.y = deltaY;
      this.mouseWheelMove = true;
      this.target = this.getTarget(event);
    }
    /**
     * Return the distance between the currentPosition and the position
     * of the mouse on the click
     * @returns {Vector}
     */

  }, {
    key: "getDragDistance",
    value: function getDragDistance() {
      var x = this.currentPosition.x - this.position.x;
      var y = this.currentPosition.y - this.position.y;
      return new _Vector["default"]({
        x: x,
        y: y,
        z: 0
      });
    }
    /**
     * @param {Camera} camera
     * @returns {Vector}
     */

  }, {
    key: "getDragDistanceCamera",
    value: function getDragDistanceCamera(camera) {
      var x = this.currentPosition.x - this.position.x;
      var y = this.currentPosition.y - this.position.y;
      return camera.fromCameraScale(new _Vector["default"]({
        x: x,
        y: y,
        z: 0
      }));
    }
    /**
     * Calculate and return the area of drag (selection)
     * @param {Camera} camera
     * @return {{position: Vector, size: Size}}
     */

  }, {
    key: "getDragArea",
    value: function getDragArea(camera) {
      var dragDistance = this.getDragDistanceCamera(camera);
      var scenePosition = camera.fromCameraScale(this.scenePosition);
      var newX = scenePosition.x;
      var newY = scenePosition.y;

      if (dragDistance.x <= 0) {
        newX += dragDistance.x;
      }

      if (dragDistance.y <= 0) {
        newY += dragDistance.y;
      }

      return {
        position: new _Vector["default"]({
          x: newX,
          y: newY
        }),
        size: new _Size["default"]({
          width: Math.abs(dragDistance.x),
          height: Math.abs(dragDistance.y)
        })
      };
    }
    /**
     * Drag and drop (return the drag distance and update the initial position)
     * @param {Camera} camera
     * @return {Vector}
     */

  }, {
    key: "dragAndDrop",
    value: function dragAndDrop(camera) {
      var dragDistance = this.getDragDistanceCamera(camera);
      this.position = this.currentPosition;
      this.scenePosition = this.currentScenePosition;
      return dragDistance;
    }
    /**
     * @param {number} key
     * @return {Boolean}
     */

  }, {
    key: "isButtonPressed",
    value: function isButtonPressed(key) {
      var index = this.keydowns.indexOf(key);
      return index !== -1;
    }
    /**
     * @param {number} key
     * @return {Boolean}
     */

  }, {
    key: "isButtonClicked",
    value: function isButtonClicked(key) {
      var index = this.keyclicks.indexOf(key);
      return index !== -1;
    }
    /**
     * @param {number} key
     * @return {Boolean}
     */

  }, {
    key: "isButtonDoubleClicked",
    value: function isButtonDoubleClicked(key) {
      var index = this.keydbclicks.indexOf(key);
      return index !== -1;
    }
    /**
     * @return {Boolean}
     */

  }, {
    key: "isMouseMove",
    value: function isMouseMove() {
      return this.lastPosition.x !== this.currentPosition.x || this.lastPosition.y !== this.currentPosition.y;
    }
    /**
     * @return {Boolean}
     */

  }, {
    key: "isMouseWheelMove",
    value: function isMouseWheelMove() {
      return this.mouseWheelMove;
    }
    /**
     * @return {{y: number}}
     */

  }, {
    key: "getMouseWheel",
    value: function getMouseWheel() {
      return this.mouseWheel;
    }
    /**
     * Convert position to scene coordinates
     * @param {Vector} position
     * @return {Vector}
     */

  }, {
    key: "toSceneCoord",
    value: function toSceneCoord(_ref) {
      var x = _ref.x,
          y = _ref.y;

      var _objectContext$canvas = _Context.objectContext.canvas.getBoundingClientRect(),
          sceneCanvasX = _objectContext$canvas.left,
          sceneCanvasY = _objectContext$canvas.top;

      return new _Vector["default"]({
        x: x - sceneCanvasX,
        y: y - sceneCanvasY
      });
    }
  }, {
    key: "setMouseMove",
    value: function setMouseMove() {
      this.lastPosition = this.currentPosition;
      this.currentPosition = this.getPosition(event);
      this.currentScenePosition = this.toSceneCoord(this.currentPosition);
    }
  }, {
    key: "clearKeyClicked",
    value: function clearKeyClicked() {
      this.keyclicks = [];
      this.keydbclicks = [];
    }
  }, {
    key: "clear",
    value: function clear() {
      this.clearKeyClicked();
      this.mouseWheelMove = false;
      this.mouseWheel.y = 0;
    }
  }]);
  return Mouse;
}();

var MouseButton = {
  LEFT: 0,
  MIDDLE: 1,
  RIGHT: 2
};
exports.MouseButton = MouseButton;
var CURSOR = {
  DEFAULT: 'default',
  CROSSHAIR: 'crosshair',
  POINTER: 'pointer',
  MOVE: 'move',
  MOVE_ENTITY: 'moveentity',
  RESIZE: 'ew-resize'
};
exports.CURSOR = CURSOR;
var _default = Mouse;
exports["default"] = _default;

},{"../pobject/Size.js":268,"../utils/Vector.js":370,"./Context.js":71,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],76:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Action = _interopRequireDefault(require("./Action.js"));

var _Window = _interopRequireDefault(require("./Window.js"));

/**
 * Handle global events triggered by the user (click , mouse move)
 * and define related action (Runner) to be executed
 */
var RunnerHandler = /*#__PURE__*/function () {
  function RunnerHandler() {
    (0, _classCallCheck2["default"])(this, RunnerHandler);
  }

  (0, _createClass2["default"])(RunnerHandler, [{
    key: "handle",

    /**
     * Apply actions when event is triggered onto the window (Mouse and Keyboard events, ...)
     * @param {Class[]} runners
     */
    value: function handle(runners) {
      var action = _Action["default"].get();

      var deltaTime = _Window["default"].get().getDeltaTime();

      action.reset();
      runners.forEach(function (runner) {
        var runnerInstance = runner.get();
        action.add(runnerInstance, deltaTime);
      });
      action.run();
    }
  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return RunnerHandler;
}();

RunnerHandler.instance = null;
var _default = RunnerHandler;
exports["default"] = _default;

},{"./Action.js":67,"./Window.js":78,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],77:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _XmlSerDe = _interopRequireDefault(require("../serde/XmlSerDe.js"));

var _JsSerDe = _interopRequireDefault(require("../serde/JsSerDe.js"));

var _SchemaValidator = _interopRequireDefault(require("../schema/SchemaValidator.js"));

/**
 * Utils to manage the storage of data over time.
 * Handle clones and manage conflicts
 * @property {Map<string, *>} data
 */
var Storage = /*#__PURE__*/function () {
  /**
   * @type {Storage}
   */
  function Storage() {
    (0, _classCallCheck2["default"])(this, Storage);
    this.data = {};
  }
  /**
   * @returns {Storage}
   */


  (0, _createClass2["default"])(Storage, [{
    key: "update",

    /**
     * Update the storage (merge data)
     * @param {string} type
     * @param {Object|Array} data
     */
    value: function update(type, data) {
      this.data[type] = _.cloneDeep(data);
      return this;
    }
    /**
     * Update the storage and validate data
     * @param {string} type
     * @param {Object|Array} data
     * @param {boolean} forGame
     */

  }, {
    key: "updateAndValidate",
    value: function () {
      var _updateAndValidate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(type, data) {
        var forGame,
            validData,
            _args = arguments;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                forGame = _args.length > 2 && _args[2] !== undefined ? _args[2] : false;
                _context.next = 3;
                return _SchemaValidator["default"].get().validate(type, data, forGame);

              case 3:
                validData = _context.sent;
                this.data[type] = _.cloneDeep(validData);
                return _context.abrupt("return", this);

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function updateAndValidate(_x, _x2) {
        return _updateAndValidate.apply(this, arguments);
      }

      return updateAndValidate;
    }()
    /**
     * Load and validate data to the given target
     * @param {string} type
     * @param {Object|Array} data
     * @param {Object} target
     */

  }, {
    key: "load",
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(type, data, target) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.updateAndValidate(type, data);

              case 2:
                target.set(_.cloneDeep(this.data[type]));

              case 3:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function load(_x3, _x4, _x5) {
        return _load.apply(this, arguments);
      }

      return load;
    }()
    /**
     * Validate and save given data to the storage
     * @param {string} type
     * @param {Object|Array} data
     */

  }, {
    key: "save",
    value: function () {
      var _save = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(type, data) {
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return this.updateAndValidate(type, data);

              case 2:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function save(_x6, _x7) {
        return _save.apply(this, arguments);
      }

      return save;
    }()
    /**
     * Validate and save given data to the storage (for building game)
     * @param {string} type
     * @param {Object|Array} data
     */

  }, {
    key: "saveForGame",
    value: function () {
      var _saveForGame = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4(type, data) {
        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                _context4.next = 2;
                return this.updateAndValidate(type, data, true);

              case 2:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function saveForGame(_x8, _x9) {
        return _saveForGame.apply(this, arguments);
      }

      return saveForGame;
    }()
    /**
     * Get data from the storage
     * @param {String} type
     * @return {Object}
     */

  }, {
    key: "fetch",
    value: function fetch(type) {
      var data = this.data[type];
      return data && _.cloneDeep(data);
    }
    /**
     * Export all data to the given format
     * @param {string} key
     * @param {Storage.format} format
     * @return {string|Object}
     */

  }, {
    key: "export",
    value: function _export(key, format) {
      var serde = this.getSerDe(format);
      return new serde().serialize(this.data[key]);
    }
    /**
     * Import data from the given data and format
     * @param {string} data
     * @param {Storage.format} format
     * @return {Map<string, *>}
     */

  }, {
    key: "import",
    value: function _import(data, format) {
      var serde = this.getSerDe(format);
      return new serde().deserialize(data);
    }
    /**
     * Save data to local storage
     * @param {string} key
     * @param {Object|Array} data
     */

  }, {
    key: "saveLocal",
    value: function () {
      var _saveLocal = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee5(key, data) {
        return _regenerator["default"].wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                _context5.next = 2;
                return this.save(key, data);

              case 2:
                localStorage.setItem(key, JSON.stringify(this.data[key]));

              case 3:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this);
      }));

      function saveLocal(_x10, _x11) {
        return _saveLocal.apply(this, arguments);
      }

      return saveLocal;
    }()
    /**
     * Load data from local storage to the target object
     * @param {string} key
     * @param {Object} target
     * @return {Object}
     */

  }, {
    key: "loadLocal",
    value: function () {
      var _loadLocal = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee6(key, target) {
        return _regenerator["default"].wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                _context6.next = 2;
                return this.loadJson(key, target, localStorage.getItem(key));

              case 2:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this);
      }));

      function loadLocal(_x12, _x13) {
        return _loadLocal.apply(this, arguments);
      }

      return loadLocal;
    }()
    /**
     * Load data from the given json string
     * @param {string} key
     * @param {Object} target
     * @param {string} jsonString
     * @return {Object}
     */

  }, {
    key: "loadJson",
    value: function () {
      var _loadJson = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee7(key, target, jsonString) {
        var data;
        return _regenerator["default"].wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                data = JSON.parse(jsonString);
                _context7.next = 3;
                return this.load(key, data, target);

              case 3:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7, this);
      }));

      function loadJson(_x14, _x15, _x16) {
        return _loadJson.apply(this, arguments);
      }

      return loadJson;
    }()
  }, {
    key: "reset",
    value: function reset() {
      localStorage.clear();
    }
    /**
     * @param {Storage.format} format
     * @return {Class}
     */

  }, {
    key: "getSerDe",
    value: function getSerDe(format) {
      switch (format) {
        case Storage.format.XML:
          return _XmlSerDe["default"];

        case Storage.format.WEB:
          return _JsSerDe["default"];

        case Storage.format.BIN:
          return BinSerDe;

        default:
          throw new TypeError("Export format ".concat(format, " not recognized"));
      }
    }
  }], [{
    key: "get",
    value: function get() {
      if (!Storage.instance) {
        Storage.instance = new Storage();
      }

      return Storage.instance;
    }
  }]);
  return Storage;
}();

(0, _defineProperty2["default"])(Storage, "instance", void 0);
Storage.type = {
  ENTITY: 'entities',
  WORLD: 'world'
};
Storage.format = {
  XML: 'xml',
  WEB: 'web',
  BIN: 'bin'
};
var _default = Storage;
exports["default"] = _default;

},{"../schema/SchemaValidator.js":319,"../serde/JsSerDe.js":322,"../serde/XmlSerDe.js":324,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":26}],78:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Keyboard = _interopRequireDefault(require("./Keyboard.js"));

var _Mouse = _interopRequireDefault(require("./Mouse.js"));

var _Constant = require("./Constant.js");

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var _Context = require("./Context.js");

var _ExceptionHandler = _interopRequireDefault(require("../exception/ExceptionHandler.js"));

/**
 * Handle the window event listeners (keyboard, mouse, ...)
 * @property {Keyboard} keyboard
 * @property {Mouse} mouse
 */
var Window = /*#__PURE__*/function () {
  /**
   * @type {Window}
   */

  /**
   * @type {number}
   */

  /**
   * @type {number}
   */
  function Window() {
    (0, _classCallCheck2["default"])(this, Window);
    (0, _defineProperty2["default"])(this, "lastUpdTime", void 0);
    (0, _defineProperty2["default"])(this, "deltaTime", void 0);
    this.keyboard = new _Keyboard["default"]();
    this.exceptionHandler = _ExceptionHandler["default"].get();
    this.mouse = new _Mouse["default"]();
    this.size = new _Size["default"]({
      width: _Constant.SCENE_WIDTH,
      height: _Constant.SCENE_HEIGHT
    });
  }

  (0, _createClass2["default"])(Window, [{
    key: "init",
    value: function init() {
      this.initEvents();
      this.initCanvas();
    }
  }, {
    key: "initCanvas",
    value: function initCanvas() {
      _Context.objectContext.canvas.width = this.size.width;
      _Context.objectContext.canvas.height = this.size.height;
    }
  }, {
    key: "initEvents",
    value: function initEvents() {
      var _this = this;

      document.addEventListener('keydown', function (event) {
        var key = event.keyCode;

        _this.keyboard.setKeyPressed(key);
      });
      document.addEventListener('keyup', function (event) {
        var key = event.keyCode;

        _this.keyboard.setKeyReleased(key);
      });
      document.addEventListener('click', function (event) {
        var key = event.button;

        _this.mouse.setButtonClicked(key);
      });
      document.addEventListener('dblclick', function (event) {
        var key = event.button;

        _this.mouse.setButtonDoubleClicked(key);
      });
      document.addEventListener('mousedown', function (event) {
        var key = event.button;

        _this.mouse.setButtonPressed(key);
      });
      document.addEventListener('mouseup', function (event) {
        var key = event.button;

        _this.mouse.setButtonReleased(key);
      });
      document.addEventListener('mousemove', function () {
        _this.mouse.setMouseMove();
      });
      document.addEventListener('wheel', function (event) {
        _this.mouse.setMouseWheel(event.deltaY);
      });
      window.addEventListener('unhandledrejection', function (e) {
        _this.exceptionHandler.handle(e.reason);

        e.preventDefault();
      });
    }
    /**
     * @return {number}
     */

  }, {
    key: "getDeltaTime",
    value: function getDeltaTime() {
      return this.deltaTime;
    }
    /**
     * @param {Size} size
     */

  }, {
    key: "setSize",
    value: function setSize(size) {
      this.size = size;
      this.initCanvas();
    }
    /**
     * @return {Size}
     */

  }, {
    key: "getSize",
    value: function getSize() {
      return this.size;
    }
  }, {
    key: "clear",
    value: function clear() {
      this.mouse.clear();
      this.keyboard.clear();
    }
  }, {
    key: "update",
    value: function update() {
      this.deltaTime = this.lastUpdTime ? (Date.now() - this.lastUpdTime) / 1000 : 0;
      this.lastUpdTime = Date.now();
    }
    /**
     * @return {Window}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return Window;
}();

(0, _defineProperty2["default"])(Window, "instance", null);
var _default = Window;
exports["default"] = _default;

},{"../exception/ExceptionHandler.js":79,"../pobject/Size.js":268,"./Constant.js":70,"./Context.js":71,"./Keyboard.js":73,"./Mouse.js":75,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],79:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _StateManager = _interopRequireDefault(require("../state/StateManager.js"));

var _ClientError = _interopRequireDefault(require("./type/ClientError.js"));

var _SystemError = _interopRequireDefault(require("./type/SystemError.js"));

var ExceptionHandler = /*#__PURE__*/function () {
  function ExceptionHandler() {
    (0, _classCallCheck2["default"])(this, ExceptionHandler);
    (0, _defineProperty2["default"])(this, "lastError", void 0);
  }

  (0, _createClass2["default"])(ExceptionHandler, [{
    key: "handle",

    /**
     * @param {Error} e
     */
    value: function handle(e) {
      if (!(e instanceof _ClientError["default"]) && !(e instanceof _SystemError["default"])) {
        throw e;
      }

      console.warn(e);

      try {
        _StateManager["default"].get().stopAll();
      } catch (error) {
        _StateManager["default"].get().reset();
      } //Here Go to the last recovery point
      //....


      this.setLastError(e);
    }
    /**
     * @param {Error} error
     */

  }, {
    key: "setLastError",
    value: function setLastError(error) {
      this.lastError = error;
    }
    /**
     * @return {Error}
     */

  }, {
    key: "getLastError",
    value: function getLastError() {
      return this.lastError;
    }
    /**
     * @return {Error}
     */

  }, {
    key: "popLastError",
    value: function popLastError() {
      var lastError = this.getLastError();
      this.setLastError(null);
      return lastError;
    }
    /**
     * @return {ExceptionHandler}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return ExceptionHandler;
}();

(0, _defineProperty2["default"])(ExceptionHandler, "instance", void 0);
var _default = ExceptionHandler;
exports["default"] = _default;

},{"../state/StateManager.js":326,"./type/ClientError.js":80,"./type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],80:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ClientError = /*#__PURE__*/function (_Error) {
  (0, _inherits2["default"])(ClientError, _Error);

  var _super = _createSuper(ClientError);

  function ClientError(message) {
    (0, _classCallCheck2["default"])(this, ClientError);
    return _super.call(this, message);
  }

  return ClientError;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(Error));

exports["default"] = ClientError;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/wrapNativeSuper":24}],81:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {PhysicError}
 * @extends {Error}
 */
var PhysicError = /*#__PURE__*/function (_Error) {
  (0, _inherits2["default"])(PhysicError, _Error);

  var _super = _createSuper(PhysicError);

  function PhysicError(message) {
    (0, _classCallCheck2["default"])(this, PhysicError);
    return _super.call(this, message);
  }

  return PhysicError;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(Error));

var _default = PhysicError;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/wrapNativeSuper":24}],82:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SystemError = /*#__PURE__*/function (_Error) {
  (0, _inherits2["default"])(SystemError, _Error);

  var _super = _createSuper(SystemError);

  function SystemError(message) {
    (0, _classCallCheck2["default"])(this, SystemError);
    return _super.call(this, message);
  }

  return SystemError;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(Error));

exports["default"] = SystemError;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/wrapNativeSuper":24}],83:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var ExecutorRegistry = /*#__PURE__*/function () {
  /**
   * @private
   */
  function ExecutorRegistry() {
    (0, _classCallCheck2["default"])(this, ExecutorRegistry);

    /**
     * @private
     * @type {ComponentExecutor[]}
     */
    this.registry = [];
  }
  /**
   * @param {ComponentExecutor[]} registry
   */


  (0, _createClass2["default"])(ExecutorRegistry, [{
    key: "register",
    value: function register(registry) {
      this.registry = registry;
    }
    /**
     * @param {Unit} unit
     * @param {{camera: Camera, lights: Unit[], deltaTime: number}} executionContext
     */

  }, {
    key: "execute",
    value: function execute(unit, executionContext) {
      this.registry.forEach(function (executor) {
        if (unit.hasComponentsByClasses(executor.getTargetComponents())) {
          executor.execute(unit, executionContext);
        }
      });
    }
    /**
     * @return {ExecutorRegistry}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return ExecutorRegistry;
}();

exports["default"] = ExecutorRegistry;
(0, _defineProperty2["default"])(ExecutorRegistry, "instance", void 0);

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],84:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _AnimationComponent = _interopRequireDefault(require("../../component/internal/AnimationComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AnimationMeshExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(AnimationMeshExecutor, _ComponentExecutor);

  var _super = _createSuper(AnimationMeshExecutor);

  function AnimationMeshExecutor() {
    (0, _classCallCheck2["default"])(this, AnimationMeshExecutor);
    return _super.call(this, [_AnimationComponent["default"], _MeshComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AnimationMeshExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var world = _World["default"].get();

      var deltaTime = executionContext.deltaTime;
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var animation = world.getAnimationManager().findById(animationComponent.getAnimation());

      if (animation) {
        var playInfo = animation.playAt(deltaTime, animationComponent.getTime());
        animationComponent.setTime(playInfo.time);
        animationComponent.setLoopTimes(playInfo.loopTimes);

        if (playInfo.frame) {
          meshComponent.setAssetId(playInfo.frame.getAssetId());
          meshComponent.setGenerated(false);
        }
      }
    }
  }]);
  return AnimationMeshExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = AnimationMeshExecutor;

},{"../../component/internal/AnimationComponent.js":41,"../../component/internal/MeshComponent.js":48,"../../world/World.js":372,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],85:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _AnimationComponent = _interopRequireDefault(require("../../component/internal/AnimationComponent.js"));

var _OnAnimationStartEvent = _interopRequireDefault(require("../../flow/event/native/OnAnimationStartEvent.js"));

var _ScriptHelper = _interopRequireDefault(require("../../utils/ScriptHelper.js"));

var _AAnimation = _interopRequireDefault(require("../../flow/animation/AAnimation.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AnimationScriptExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(AnimationScriptExecutor, _ComponentExecutor);

  var _super = _createSuper(AnimationScriptExecutor);

  function AnimationScriptExecutor() {
    (0, _classCallCheck2["default"])(this, AnimationScriptExecutor);
    return _super.call(this, [_AnimationComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AnimationScriptExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var world = _World["default"].get();

      var functionRegistry = world.getFunctionRegistry();
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);

      if (animationComponent.isEnabled()) {
        var animation = animationComponent.getAnimation();
        var scriptName = animationComponent.getScript();
        functionRegistry.getInstancesByClass(scriptName).forEach(function (instance) {
          if (instance instanceof _OnAnimationStartEvent["default"] && !animation) {
            instance.execute(functionRegistry, unit, animationComponent, world);
          } else if (instance instanceof _AAnimation["default"]) {
            var animationInstance = parseInt(_ScriptHelper["default"].getValueFromFunctionName(scriptName, instance.getName()));

            if (animationInstance === animation) {
              instance.execute(functionRegistry, unit, animationComponent, world);
            }
          }
        });
      }
    }
  }]);
  return AnimationScriptExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = AnimationScriptExecutor;

},{"../../component/internal/AnimationComponent.js":41,"../../flow/animation/AAnimation.js":97,"../../flow/event/native/OnAnimationStartEvent.js":106,"../../utils/ScriptHelper.js":367,"../../world/World.js":372,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],86:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

var _CameraComponent = _interopRequireDefault(require("../../component/internal/CameraComponent.js"));

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

var _ObjectHelper = _interopRequireDefault(require("../../utils/ObjectHelper.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var CameraExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(CameraExecutor, _ComponentExecutor);

  var _super = _createSuper(CameraExecutor);

  function CameraExecutor() {
    (0, _classCallCheck2["default"])(this, CameraExecutor);
    return _super.call(this, [_TransformComponent["default"], _MeshComponent["default"], _CameraComponent["default"]]);
  }
  /**
   * @todo: need some refactoring
   * @override
   */


  (0, _createClass2["default"])(CameraExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var world = _World["default"].get();

      var cameraComponent = unit.getComponent(_CameraComponent["default"]);
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var unitFollow = world.getUnitManager().findUnitById(cameraComponent.getUnitFollow());

      if (unitFollow) {
        var maxSmoothing = 0.01;
        var minSmoothing = 0.1;
        var minSmoothInput = 1;
        var maxSmoothInput = 10;
        var deadZone = cameraComponent.getDeadZone();
        var smoothing = cameraComponent.getSmoothing();
        var delayTime = cameraComponent.getDelayTime();
        var delaySmoothing = cameraComponent.getDelaySmoothing();
        var lastLookDistance = cameraComponent.getLookDistance();
        var lastUnitFollowPosition = cameraComponent.getLastUnitFollowPosition();
        var unitFollowPosition = unitFollow.getComponent(_TransformComponent["default"]).getPosition();
        var sizeCamera = meshComponent.getSize();
        var sizeUnitFollow = unitFollow.getComponent(_MeshComponent["default"]).getSize();
        var centerCamera = new _Vector["default"]({
          x: sizeCamera.getWidth() / 2,
          y: sizeCamera.getHeight() / 2
        });
        var centerUnitFollow = new _Vector["default"]({
          x: sizeUnitFollow.getWidth() / 2,
          y: sizeUnitFollow.getHeight() / 2
        });
        var lastCameraPosition = transformComponent.getPosition();
        var newCameraPosition = new _Vector["default"](lastCameraPosition); //calculate tracking point

        var maxDelay = 200;

        var cameraPositionAttachedToUnit = _Vector["default"].add(_Vector["default"].subtract(unitFollowPosition, centerCamera), centerUnitFollow);

        var trackPoint = _Vector["default"].subtract(cameraPositionAttachedToUnit, new _Vector["default"]({
          x: lastCameraPosition.getX(),
          y: lastCameraPosition.getY()
        }));

        var moveUnitDistance = _Vector["default"].subtract(unitFollowPosition, lastUnitFollowPosition);

        var newDelaySmoothing = new _Vector["default"]({
          x: _Maths["default"].fromInterval([maxSmoothing, minSmoothing], [minSmoothInput, maxSmoothInput], maxSmoothInput - delaySmoothing.getX()),
          y: _Maths["default"].fromInterval([maxSmoothing, minSmoothing], [minSmoothInput, maxSmoothInput], maxSmoothInput - delaySmoothing.getY())
        });

        var maxLookDistance = _Vector["default"].linearMultiply(moveUnitDistance, _Vector["default"].multiply(delayTime, maxDelay));

        var lookDistance = _Vector["default"].add(lastLookDistance, maxLookDistance);

        if (lookDistance > maxLookDistance) {
          lookDistance = maxLookDistance;
        }

        var smoothLookDistance = _Vector["default"].linearMultiply(lookDistance, newDelaySmoothing);

        lookDistance = _Vector["default"].subtract(lookDistance, smoothLookDistance);

        var trackPointDelayed = _Vector["default"].add(trackPoint, smoothLookDistance); //move camera


        if (Math.abs(trackPointDelayed.getX()) >= deadZone.getWidth() / 2) {
          var distanceX = (Math.abs(trackPointDelayed.getX()) - deadZone.getWidth() / 2) * (Math.abs(trackPointDelayed.getX()) / trackPointDelayed.getX());

          var distanceXSmoothing = distanceX * _Maths["default"].fromInterval([maxSmoothing, minSmoothing], [minSmoothInput, maxSmoothInput], maxSmoothInput - smoothing.getX());

          newCameraPosition.setX(newCameraPosition.getX() + distanceXSmoothing);
        }

        if (Math.abs(trackPointDelayed.getY()) >= deadZone.getHeight() / 2) {
          var distanceY = (Math.abs(trackPointDelayed.getY()) - deadZone.getHeight() / 2) * (Math.abs(trackPointDelayed.getY()) / trackPointDelayed.getY());

          var distanceYSmoothing = distanceY * _Maths["default"].fromInterval([maxSmoothing, minSmoothing], [minSmoothInput, maxSmoothInput], maxSmoothInput - smoothing.getY());

          newCameraPosition.setY(newCameraPosition.getY() + distanceYSmoothing);
        }

        if (!_ObjectHelper["default"].isEqual(transformComponent.getPosition(), newCameraPosition) || !_ObjectHelper["default"].isEqual(cameraComponent.getTrackPoint(), trackPointDelayed)) {
          transformComponent.getPosition().setX(newCameraPosition.getX());
          transformComponent.getPosition().setY(newCameraPosition.getY());
          cameraComponent.setTrackPoint(trackPointDelayed);
          cameraComponent.setLastUnitFollowPosition(unitFollowPosition);
          cameraComponent.setLookDistance(lookDistance);
          meshComponent.setGenerated(false);
        }
      }
    }
  }]);
  return CameraExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = CameraExecutor;

},{"../../component/internal/CameraComponent.js":42,"../../component/internal/MeshComponent.js":48,"../../component/internal/TransformComponent.js":53,"../../utils/Maths.js":363,"../../utils/ObjectHelper.js":365,"../../utils/Vector.js":370,"../../world/World.js":372,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],87:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _RigidBodyComponent = _interopRequireDefault(require("../../component/internal/RigidBodyComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

var _RigidBodyOptions = _interopRequireDefault(require("../../pobject/RigidBodyOptions.js"));

var _ColliderComponent = _interopRequireDefault(require("../../component/internal/ColliderComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ColliderExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(ColliderExecutor, _ComponentExecutor);

  var _super = _createSuper(ColliderExecutor);

  function ColliderExecutor() {
    (0, _classCallCheck2["default"])(this, ColliderExecutor);
    return _super.call(this, [_TransformComponent["default"], _MeshComponent["default"], _ColliderComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ColliderExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();

      if (!unit.hasComponents([_RigidBodyComponent["default"]])) {
        var options = new _RigidBodyOptions["default"]();
        options.isStatic = true;
        physicsManager.addBody(unit, options);
      }
    }
  }]);
  return ColliderExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = ColliderExecutor;

},{"../../component/internal/ColliderComponent.js":44,"../../component/internal/MeshComponent.js":48,"../../component/internal/RigidBodyComponent.js":50,"../../component/internal/TransformComponent.js":53,"../../pobject/RigidBodyOptions.js":267,"../../world/World.js":372,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],88:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

var ComponentExecutor = /*#__PURE__*/function () {
  /**
   * @protected
   * @param {Component[]} targetComponents
   */
  function ComponentExecutor(targetComponents) {
    (0, _classCallCheck2["default"])(this, ComponentExecutor);
    this.targetComponents = targetComponents;
  }
  /**
   * @override
   * @param {Unit} unit
   * @param {{camera: Camera, lights: Unit[], deltaTime: number}} executionContext
   * @return {void}
   */


  (0, _createClass2["default"])(ComponentExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".execute must be implemented"));
    }
    /**
     * @return {Component[]}
     */

  }, {
    key: "getTargetComponents",
    value: function getTargetComponents() {
      return this.targetComponents;
    }
  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return ComponentExecutor;
}();

exports["default"] = ComponentExecutor;
(0, _defineProperty2["default"])(ComponentExecutor, "instance", void 0);

},{"../../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],89:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

var _MaterialType = _interopRequireDefault(require("../../material/MaterialType.js"));

var _LightPointComponent = _interopRequireDefault(require("../../component/internal/LightPointComponent.js"));

var _LightGlobalComponent = _interopRequireDefault(require("../../component/internal/LightGlobalComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LightExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(LightExecutor, _ComponentExecutor);

  var _super = _createSuper(LightExecutor);

  function LightExecutor() {
    (0, _classCallCheck2["default"])(this, LightExecutor);
    return _super.call(this, [_MeshComponent["default"], _TransformComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(LightExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var lights = executionContext.lights;

      if (meshComponent.isGenerated() && meshComponent.getMaterial() === _MaterialType["default"].LIGHT) {
        if (this.mustGenerateLight(transformComponent.getPosition(), meshComponent.getSize(), lights)) {
          meshComponent.setGenerated(false);
        }
      }
    }
    /**
     * @param {Vector} unitPosition
     * @param {Size} unitSize
     * @param {Unit[]} lights
     * @return {boolean}
     */

  }, {
    key: "mustGenerateLight",
    value: function mustGenerateLight(unitPosition, unitSize, lights) {
      return !!lights.find(function (lightUnit) {
        if (lightUnit.hasComponents([_LightPointComponent["default"]])) {
          var transformComponent = lightUnit.getComponent(_TransformComponent["default"]);
          var meshComponent = lightUnit.getComponent(_MeshComponent["default"]);
          var lightPosition = transformComponent.getPosition();
          var lightSize = meshComponent.getSize();
          return !(unitPosition.getX() + unitSize.getWidth() < lightPosition.getX() || lightPosition.getX() + lightSize.getWidth() < unitPosition.getX() || unitPosition.getY() + unitSize.getHeight() < lightPosition.getY() || lightPosition.getY() + lightSize.getHeight() < unitPosition.getY());
        } else if (lightUnit.hasComponents([_LightGlobalComponent["default"]])) {
          return true;
        }
      });
    }
  }]);
  return LightExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = LightExecutor;

},{"../../component/internal/LightGlobalComponent.js":46,"../../component/internal/LightPointComponent.js":47,"../../component/internal/MeshComponent.js":48,"../../component/internal/TransformComponent.js":53,"../../material/MaterialType.js":240,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],90:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _Constant = require("../../core/Constant.js");

var _DataContext = _interopRequireDefault(require("../../pobject/DataContext.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

var _GeometryHelper = _interopRequireDefault(require("../../utils/GeometryHelper.js"));

var _Size = _interopRequireDefault(require("../../pobject/Size.js"));

var _ShapeGenerator = _interopRequireDefault(require("../../generator/ShapeGenerator.js"));

var _UnitHelper = _interopRequireDefault(require("../../utils/UnitHelper.js"));

var _Mesh = _interopRequireDefault(require("../../core/Mesh.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../component/internal/gui/property/GUIPropertyComponent.js"));

var _ImageHelper = _interopRequireDefault(require("../../utils/ImageHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MeshGenerationExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(MeshGenerationExecutor, _ComponentExecutor);

  var _super = _createSuper(MeshGenerationExecutor);

  function MeshGenerationExecutor() {
    (0, _classCallCheck2["default"])(this, MeshGenerationExecutor);
    return _super.call(this, [_MeshComponent["default"], _TransformComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(MeshGenerationExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var propertyComponent = unit.getComponent(_GUIPropertyComponent["default"]);

      var world = _World["default"].get();

      var camera = executionContext.camera;

      if (!meshComponent.isGenerated()) {
        meshComponent.setVertices(_UnitHelper["default"].generateVertices(unit));

        if (!meshComponent.isEnabled() || !propertyComponent.isVisible() || !this.generate(unit, world, camera)) {
          world.getMeshManager().clear(unit.getId());
        }

        meshComponent.setGenerated(true);
        meshComponent.setVersion(_Maths["default"].generateId());
      }
    }
    /**
     * @param {Unit} unit
     * @param {World} world
     * @param {Camera} camera
     */

  }, {
    key: "generate",
    value: function generate(unit, world, camera) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var dataContext = this.startContext(unit.getId(), meshComponent, transformComponent, world, camera);

      if (dataContext) {
        this.drawContext(unit, dataContext);
        return this.closeContext(meshComponent, transformComponent, dataContext);
      }
    }
    /**
     * @param {number} unitId
     * @param {MeshComponent} meshComponent
     * @param {TransformComponent} transformComponent
     * @param {World} world
     * @param {Camera} camera
     * @return {DataContext | null}
     */

  }, {
    key: "startContext",
    value: function startContext(unitId, meshComponent, transformComponent, world, camera) {
      var scaleSize = this.getScaleSize(camera, meshComponent, transformComponent);
      var rotation = transformComponent.getRotation();

      var _GeometryHelper$getLa = _GeometryHelper["default"].getLargestRectangle(rotation, scaleSize),
          width = _GeometryHelper$getLa.width,
          height = _GeometryHelper$getLa.height;

      if (width > 0 && height > 0) {
        var center = new _Vector["default"]({
          x: scaleSize.width / 2,
          y: scaleSize.height / 2
        });
        var canvas = new OffscreenCanvas(width, height);
        var context = canvas.getContext(_Constant.CANVAS_CONTEXT_TYPE);

        var _meshComponent$getSty = meshComponent.getStyle(),
            opacity = _meshComponent$getSty.opacity,
            borderSize = _meshComponent$getSty.borderSize,
            fillColor = _meshComponent$getSty.fillColor,
            color = _meshComponent$getSty.color;

        context.strokeStyle = color;

        if (fillColor) {
          context.fillStyle = fillColor;
        }

        if (_.isNumber(opacity)) {
          context.globalAlpha = opacity;
        }

        context.lineWidth = borderSize || 1;
        context.translate(width / 2, height / 2);
        context.rotate(rotation);
        context.translate(-center.x, -center.y);
        return new _DataContext["default"](unitId, center, context, scaleSize, camera, world);
      }

      return null;
    }
    /**
     * @param {Unit} unit
     * @param {DataContext} dataContext
     */

  }, {
    key: "drawContext",
    value: function drawContext(unit, dataContext) {
      _ShapeGenerator["default"].get().draw(unit, dataContext);
    }
    /**
     * @param {MeshComponent} meshComponent
     * @param {TransformComponent} transformComponent
     * @param {DataContext} dataContext
     * @return {boolean}
     */

  }, {
    key: "closeContext",
    value: function closeContext(meshComponent, transformComponent, dataContext) {
      var _meshComponent$getSty2 = meshComponent.getStyle(),
          fillColor = _meshComponent$getSty2.fillColor,
          color = _meshComponent$getSty2.color,
          borderSize = _meshComponent$getSty2.borderSize;

      var context = dataContext.context,
          world = dataContext.world,
          unitId = dataContext.unitId,
          scaleSize = dataContext.scaleSize;

      if (meshComponent.getAssetId()) {
        if (fillColor) {
          context.fill();
          context.globalCompositeOperation = 'destination-over';
        }

        context.clip();
        var asset = world.getAssetsManager().findAssetById(meshComponent.getAssetId());
        var canvasBg = asset.getType().getData().context.canvas;

        if (meshComponent.isImageRepeat()) {
          var canvasBgScaled = _UnitHelper["default"].generateImageRepeat(canvasBg, dataContext, meshComponent);

          context.drawImage(canvasBgScaled, 0, 0, scaleSize.width, scaleSize.height);
        } else {
          var transformScale = transformComponent.getScale();
          context.drawImage(_ImageHelper["default"].scaleCanvas(canvasBg, transformScale), 0, 0, scaleSize.width * Math.abs(transformScale.getX()), scaleSize.height * Math.abs(transformScale.getY()));
        }

        this.getMaterial(world, meshComponent.getMaterial()).generate(canvasBg, dataContext, meshComponent, transformComponent);
        borderSize && context.stroke();
      } else if (fillColor) {
        context.fill();

        if (color) {
          context.stroke();
        }
      } else {
        context.stroke();
      }

      return this.updateMeshFromContext(unitId, world.getMeshManager(), context);
    }
    /**
     * @param {World} world
     * @param {string} material
     * @return {Material}
     */

  }, {
    key: "getMaterial",
    value: function getMaterial(world, material) {
      return world.getMaterialRegistry().getInstance(material);
    }
    /**
     * @param {World} world
     * @return {Mesh}
     */

  }, {
    key: "getTexture",
    value: function getTexture(world) {
      var texture = world.getAssetsManager().findAssetById(this.getTextureId());

      if (texture) {
        return texture.getType().getData();
      }

      return null;
    }
    /**
     * @param {number} unitId
     * @param {MeshManager} meshManager
     * @param {OffscreenCanvasRenderingContext2D} context
     */

  }, {
    key: "updateMeshFromContext",
    value: function updateMeshFromContext(unitId, meshManager, context) {
      var sw = context.canvas.width,
          sh = context.canvas.height;

      if (sw && sh) {
        var mesh = meshManager.get(unitId);

        if (!mesh) {
          mesh = new _Mesh["default"]();
        }

        mesh.clear(new _Size["default"]({
          width: sw,
          height: sh
        }));
        mesh.context = context;
        meshManager.set(unitId, mesh);
        return true;
      }

      return false;
    }
    /**
     * @param {Camera} camera
     * @param {MeshComponent} meshComponent
     * @param transformComponent
     * @return {Size}
     */

  }, {
    key: "getScaleSize",
    value: function getScaleSize(camera, meshComponent, transformComponent) {
      return camera.toScaleSize(meshComponent.getSize());
    }
  }]);
  return MeshGenerationExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = MeshGenerationExecutor;

},{"../../component/internal/MeshComponent.js":48,"../../component/internal/TransformComponent.js":53,"../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../core/Constant.js":70,"../../core/Mesh.js":74,"../../generator/ShapeGenerator.js":203,"../../pobject/DataContext.js":264,"../../pobject/Size.js":268,"../../utils/GeometryHelper.js":360,"../../utils/ImageHelper.js":361,"../../utils/Maths.js":363,"../../utils/UnitHelper.js":369,"../../utils/Vector.js":370,"../../world/World.js":372,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],91:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _StyleComponent = _interopRequireDefault(require("../../component/internal/StyleComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MeshStyleExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(MeshStyleExecutor, _ComponentExecutor);

  var _super = _createSuper(MeshStyleExecutor);

  function MeshStyleExecutor() {
    (0, _classCallCheck2["default"])(this, MeshStyleExecutor);
    return _super.call(this, [_MeshComponent["default"], _StyleComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(MeshStyleExecutor, [{
    key: "execute",
    value: function execute(unit) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var styleComponent = unit.getComponent(_StyleComponent["default"]);
      var style = styleComponent.getStyle();
      var meshStyle = meshComponent.getStyle();

      if (meshStyle.getColor() !== style.getColor() || meshStyle.getBorderSize() !== style.getBorderSize()) {
        meshStyle.setColor(style.getColor());
        meshStyle.setBorderSize(style.getBorderSize());
        meshStyle.setFillColor(style.getFillColor());
        meshStyle.setColorOpacity(style.getColorOpacity());
        meshStyle.setFillColorOpacity(style.getFillColorOpacity());
        meshComponent.setGenerated(false);
      }
    }
  }]);
  return MeshStyleExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = MeshStyleExecutor;

},{"../../component/internal/MeshComponent.js":48,"../../component/internal/StyleComponent.js":52,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],92:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _RigidBodyComponent = _interopRequireDefault(require("../../component/internal/RigidBodyComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

var _RigidBodyOptions = _interopRequireDefault(require("../../pobject/RigidBodyOptions.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RigidBodyExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(RigidBodyExecutor, _ComponentExecutor);

  var _super = _createSuper(RigidBodyExecutor);

  function RigidBodyExecutor() {
    (0, _classCallCheck2["default"])(this, RigidBodyExecutor);
    return _super.call(this, [_TransformComponent["default"], _MeshComponent["default"], _RigidBodyComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(RigidBodyExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();
      var rigidBodyComponent = unit.getComponent(_RigidBodyComponent["default"]);
      var options = new _RigidBodyOptions["default"]();

      if (!rigidBodyComponent.isCreated()) {
        physicsManager.deleteUnit(unit);
      }

      options.isStatic = false;
      options.freezeRotation = rigidBodyComponent.isFreezeRotation();
      options.velocity = rigidBodyComponent.getVelocity();
      physicsManager.addBody(unit, options);
      physicsManager.setFriction(unit, rigidBodyComponent.getFriction());
      rigidBodyComponent.setCreated(true);
    }
  }]);
  return RigidBodyExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = RigidBodyExecutor;

},{"../../component/internal/MeshComponent.js":48,"../../component/internal/RigidBodyComponent.js":50,"../../component/internal/TransformComponent.js":53,"../../pobject/RigidBodyOptions.js":267,"../../world/World.js":372,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],93:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ComponentExecutor2 = _interopRequireDefault(require("./ComponentExecutor.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _ScriptComponent = _interopRequireDefault(require("../../component/internal/ScriptComponent.js"));

var _Mouse = require("../../core/Mouse.js");

var _OnMouseClickEvent = _interopRequireDefault(require("../../flow/event/native/OnMouseClickEvent.js"));

var _OnKeyDownEvent = _interopRequireDefault(require("../../flow/event/native/OnKeyDownEvent.js"));

var _GameInput = require("../../preference/gameInput/GameInput.js");

var _OnInputXAxisEvent = _interopRequireDefault(require("../../flow/event/native/OnInputXAxisEvent.js"));

var _OnInputYAxisEvent = _interopRequireDefault(require("../../flow/event/native/OnInputYAxisEvent.js"));

var _OnInputJumpEvent = _interopRequireDefault(require("../../flow/event/native/OnInputJumpEvent.js"));

var _Window = _interopRequireDefault(require("../../core/Window.js"));

var _OnUpdateEvent = _interopRequireDefault(require("../../flow/event/native/OnUpdateEvent.js"));

var _OnInputAttackEvent = _interopRequireDefault(require("../../flow/event/native/OnInputAttackEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScriptExecutor = /*#__PURE__*/function (_ComponentExecutor) {
  (0, _inherits2["default"])(ScriptExecutor, _ComponentExecutor);

  var _super = _createSuper(ScriptExecutor);

  function ScriptExecutor() {
    (0, _classCallCheck2["default"])(this, ScriptExecutor);
    return _super.call(this, [_ScriptComponent["default"]]);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ScriptExecutor, [{
    key: "execute",
    value: function execute(unit, executionContext) {
      var _Window$get = _Window["default"].get(),
          mouse = _Window$get.mouse,
          keyboard = _Window$get.keyboard;

      var world = _World["default"].get();

      var functionRegistry = world.getFunctionRegistry();
      var gameInput = world.getPreference().getGameInput();
      unit.findComponentsByClass(_ScriptComponent["default"]).filter(function (scriptComponent) {
        return scriptComponent.isEnabled();
      }).forEach(function (scriptComponent) {
        functionRegistry.getInstancesByClass(scriptComponent.getScript()).forEach(function (instance) {
          if (mouse.isButtonClicked(_Mouse.MouseButton.LEFT) && instance instanceof _OnMouseClickEvent["default"] || keyboard.isAnyKeyPressed() && instance instanceof _OnKeyDownEvent["default"] || (keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.RIGHT)) || keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.LEFT))) && instance instanceof _OnInputXAxisEvent["default"] || (keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.UP)) || keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.DOWN))) && instance instanceof _OnInputYAxisEvent["default"] || keyboard.isKeyReleased(gameInput.getKeyCode(_GameInput.GAME_INPUTS.JUMP)) && instance instanceof _OnInputJumpEvent["default"] || keyboard.isKeyReleased(gameInput.getKeyCode(_GameInput.GAME_INPUTS.ATTACK)) && instance instanceof _OnInputAttackEvent["default"] || instance instanceof _OnUpdateEvent["default"]) {
            instance.execute(functionRegistry, unit, scriptComponent, world);
          }
        });
      });
    }
  }]);
  return ScriptExecutor;
}(_ComponentExecutor2["default"]);

exports["default"] = ScriptExecutor;

},{"../../component/internal/ScriptComponent.js":51,"../../core/Mouse.js":75,"../../core/Window.js":78,"../../flow/event/native/OnInputAttackEvent.js":108,"../../flow/event/native/OnInputJumpEvent.js":109,"../../flow/event/native/OnInputXAxisEvent.js":110,"../../flow/event/native/OnInputYAxisEvent.js":111,"../../flow/event/native/OnKeyDownEvent.js":112,"../../flow/event/native/OnMouseClickEvent.js":113,"../../flow/event/native/OnUpdateEvent.js":114,"../../preference/gameInput/GameInput.js":271,"../../world/World.js":372,"./ComponentExecutor.js":88,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],94:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AScriptData2 = _interopRequireWildcard(require("../project/data/AScriptData.js"));

var _FunctionNode = _interopRequireDefault(require("./node/FunctionNode.js"));

var _ConstantNode = _interopRequireDefault(require("./node/ConstantNode.js"));

var _EventNode = _interopRequireDefault(require("./node/EventNode.js"));

var _ConditionNode = _interopRequireDefault(require("./node/ConditionNode.js"));

var _UnitNode = _interopRequireDefault(require("./node/UnitNode.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var _KeyCodeNode = _interopRequireDefault(require("./node/KeyCodeNode.js"));

var _Camera = _interopRequireDefault(require("../core/Camera.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _Constant = require("../core/Constant.js");

var _StringVariableNode = _interopRequireDefault(require("./node/variable/StringVariableNode.js"));

var _AnimationNode = _interopRequireDefault(require("./node/AnimationNode.js"));

var _ComponentNode = _interopRequireDefault(require("./node/ComponentNode.js"));

var _ReferenceNode = _interopRequireDefault(require("./node/ReferenceNode.js"));

var _SelfNode = _interopRequireDefault(require("./node/SelfNode.js"));

var _ToggleVariableNode = _interopRequireDefault(require("./node/variable/ToggleVariableNode.js"));

var _BooleanVariableNode = _interopRequireDefault(require("./node/variable/BooleanVariableNode.js"));

var _NumberVariableNode = _interopRequireDefault(require("./node/variable/NumberVariableNode.js"));

var _ComponentVariableNode = _interopRequireDefault(require("./node/variable/ComponentVariableNode.js"));

var _MaskGroupVariableNode = _interopRequireDefault(require("./node/variable/MaskGroupVariableNode.js"));

var _LoopNode = _interopRequireDefault(require("./node/LoopNode.js"));

var _AudioVariableNode = _interopRequireDefault(require("./node/variable/AudioVariableNode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var AScript = /*#__PURE__*/function (_AScriptData) {
  (0, _inherits2["default"])(AScript, _AScriptData);

  var _super = _createSuper(AScript);

  function AScript(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, AScript);
    _this = _super.call(this, props);
    _this.camera = new _Camera["default"](new _Vector["default"]({
      x: -_Constant.SCENE_WIDTH / 2,
      y: -_Constant.SCENE_HEIGHT / 2
    }));
    return _this;
  }
  /**
   * @param {FunctionRegistry} registry
   * @param {ANode} nodeClass
   * @param {string|number|boolean} value
   * @return {ANode}
   */


  (0, _createClass2["default"])(AScript, [{
    key: "createNode",
    value: function createNode(registry, nodeClass, value) {
      var sourceName;

      switch (nodeClass) {
        case _FunctionNode["default"]:
        case _ConditionNode["default"]:
        case _EventNode["default"]:
          sourceName = registry.tryGetInstance(value).getName();
          break;

        case _ConstantNode["default"]:
        case _KeyCodeNode["default"]:
        case _UnitNode["default"]:
        case _AnimationNode["default"]:
        case _ReferenceNode["default"]:
        case _LoopNode["default"]:
        case _StringVariableNode["default"]:
        case _ToggleVariableNode["default"]:
        case _BooleanVariableNode["default"]:
        case _AudioVariableNode["default"]:
        case _NumberVariableNode["default"]:
        case _ComponentVariableNode["default"]:
        case _MaskGroupVariableNode["default"]:
        case _ComponentNode["default"]:
          sourceName = value;
          break;

        case _SelfNode["default"]:
          sourceName = 'Self';
          break;

        default:
          throw new _ClientError["default"]("Script Create Node: \"".concat(nodeClass.name, "\" not supported"));
      }

      var node = new nodeClass(sourceName);
      this.addNode(node);
      return node;
    }
    /**
     * @param {FunctionRegistry} functionRegistry
     */

  }, {
    key: "delete",
    value: function _delete(functionRegistry) {
      functionRegistry.removeInstancesByClass(this.getName());
    }
    /**
     * @param {ANode} node
     * @param {number} id
     */

  }, {
    key: "updateNodeId",
    value: function updateNodeId(node, id) {
      var existNode = this.findNodeById(id);

      if (existNode) {
        throw new _ClientError["default"]("Script Create Node: Duplicate Node Id \"".concat(id, "\""));
      }

      node.setId(id);
    }
    /**
     * @param {ANode} node
     */

  }, {
    key: "addNode",
    value: function addNode(node) {
      this.nodes.push(node);
    }
    /**
     * @param {number} id
     */

  }, {
    key: "removeNodeById",
    value: function removeNodeById(id) {
      this.removeConnectionsByNodeId(id);
      var nodeIndex = this.nodes.findIndex(function (node) {
        return node.getId() === id;
      });
      this.nodes.splice(nodeIndex, 1);
    }
    /**
     * @param {number} nodeId
     */

  }, {
    key: "removeConnectionsByNodeId",
    value: function removeConnectionsByNodeId(nodeId) {
      var _this2 = this;

      var connections = this.getInputs().filter(function (input) {
        return input.getSourceNodeId() === nodeId;
      });
      connections.forEach(function (connection) {
        return _this2.removeInputById(connection.getId());
      });
    }
    /**
     * @param {number} id
     */

  }, {
    key: "removeInputById",
    value: function removeInputById(id) {
      var nodeInput = this.getInputs().find(function (pNodeInput) {
        return pNodeInput.getId() === id;
      });
      var node = this.findNodeById(nodeInput.getNodeId());

      if (!node) {
        throw new _ClientError["default"]("Target Node for edge ID \"".concat(id, "\" not found"));
      }

      var nodeInputIndex = node.getInputs().findIndex(function (pNodeInput) {
        return pNodeInput.getId() === id;
      });
      node.getInputs().splice(nodeInputIndex, 1);
    }
    /**
     * @return {ANode[]}
     */

  }, {
    key: "getSelectedNodes",
    value: function getSelectedNodes() {
      return this.nodes.filter(function (node) {
        return node.isSelected();
      });
    }
    /**
     * @return {NodeInput[]}
     */

  }, {
    key: "getInputs",
    value: function getInputs() {
      return this.getNodes().reduce(function (nodeInputs, node) {
        return nodeInputs.concat(node.getInputs());
      }, []);
    }
    /**
     * @return {NodeInput[]}
     */

  }, {
    key: "getSelectedEdges",
    value: function getSelectedEdges() {
      return this.getInputs().filter(function (nodeInput) {
        return nodeInput.isSelected();
      });
    }
    /**
     * @param {number} id
     * @return {ANode}
     */

  }, {
    key: "findNodeById",
    value: function findNodeById(id) {
      return this.nodes.find(function (node) {
        return node.getId() === id;
      });
    }
    /**
     * @param {ANode} nodeClass
     * @return {ANode[]}
     */

  }, {
    key: "findNodesByClass",
    value: function findNodesByClass(nodeClass) {
      return this.nodes.filter(function (node) {
        return node instanceof nodeClass;
      });
    }
    /**
     * @param {number} id
     * @return {NodeInput}
     */

  }, {
    key: "findNodeInputById",
    value: function findNodeInputById(id) {
      return this.getInputs().find(function (nodeInput) {
        return nodeInput.getId() === id;
      });
    }
    /**
     * @param {string} name
     * @return {ANode}
     */

  }, {
    key: "findNodeByName",
    value: function findNodeByName(name) {
      return this.nodes.find(function (node) {
        return node.getName() === name;
      });
    }
    /**
     * @param {string} name
     * @param {ANode} nodeClass
     * @return {ANode}
     */

  }, {
    key: "findNodeByNameClass",
    value: function findNodeByNameClass(name, nodeClass) {
      return this.nodes.find(function (node) {
        return node.getName() === name && node instanceof nodeClass;
      });
    }
  }, {
    key: "compile",
    value: function compile() {
      if (this.doCompile()) {
        this.setStatus(_AScriptData2.STATUS.COMPILED);
      } else {
        this.setStatus(_AScriptData2.STATUS.ERROR);
      }
    }
  }, {
    key: "reset",
    value: function reset() {
      this.setStatus(_AScriptData2.STATUS.NEW);
    }
    /**
     * @abstract
     * @private
     * @return {boolean}
     */

  }, {
    key: "doCompile",
    value: function doCompile() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".doCompile must be implemented"));
    }
  }]);
  return AScript;
}(_AScriptData2["default"]);

exports["default"] = AScript;

},{"../core/Camera.js":69,"../core/Constant.js":70,"../exception/type/ClientError.js":80,"../exception/type/SystemError.js":82,"../project/data/AScriptData.js":276,"../utils/Vector.js":370,"./node/AnimationNode.js":173,"./node/ComponentNode.js":174,"./node/ConditionNode.js":175,"./node/ConstantNode.js":176,"./node/EventNode.js":177,"./node/FunctionNode.js":178,"./node/KeyCodeNode.js":179,"./node/LoopNode.js":180,"./node/ReferenceNode.js":181,"./node/SelfNode.js":182,"./node/UnitNode.js":183,"./node/variable/AudioVariableNode.js":184,"./node/variable/BooleanVariableNode.js":185,"./node/variable/ComponentVariableNode.js":186,"./node/variable/MaskGroupVariableNode.js":187,"./node/variable/NumberVariableNode.js":188,"./node/variable/StringVariableNode.js":189,"./node/variable/ToggleVariableNode.js":190,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],95:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ClassScript2 = _interopRequireDefault(require("./ClassScript.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AnimationScript = /*#__PURE__*/function (_ClassScript) {
  (0, _inherits2["default"])(AnimationScript, _ClassScript);

  var _super = _createSuper(AnimationScript);

  function AnimationScript() {
    (0, _classCallCheck2["default"])(this, AnimationScript);
    return _super.apply(this, arguments);
  }

  return AnimationScript;
}(_ClassScript2["default"]);

exports["default"] = AnimationScript;

},{"./ClassScript.js":96,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],96:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AScript2 = _interopRequireDefault(require("./AScript.js"));

var _ClassCompiler = _interopRequireDefault(require("./compiler/ClassCompiler.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ClassScript = /*#__PURE__*/function (_AScript) {
  (0, _inherits2["default"])(ClassScript, _AScript);

  var _super = _createSuper(ClassScript);

  function ClassScript() {
    (0, _classCallCheck2["default"])(this, ClassScript);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ClassScript, [{
    key: "doCompile",

    /**
     * @override
     */
    value: function doCompile() {
      return _ClassCompiler["default"].get().run(this);
    }
  }]);
  return ClassScript;
}(_AScript2["default"]);

exports["default"] = ClassScript;

},{"./AScript.js":94,"./compiler/ClassCompiler.js":98,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],97:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEmptyStackFunction2 = _interopRequireDefault(require("../function/AEmptyStackFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AAnimation = /*#__PURE__*/function (_AEmptyStackFunction) {
  (0, _inherits2["default"])(AAnimation, _AEmptyStackFunction);

  var _super = _createSuper(AAnimation);

  /**
   * @param {string} value
   */
  function AAnimation(value) {
    (0, _classCallCheck2["default"])(this, AAnimation);
    return _super.call(this, "".concat(value) || 'Animation');
  }

  return AAnimation;
}(_AEmptyStackFunction2["default"]);

exports["default"] = AAnimation;

},{"../function/AEmptyStackFunction.js":115,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],98:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _StackOperation = _interopRequireWildcard(require("../../operation/StackOperation.js"));

var _StackRegister = require("../../operation/StackRegister.js");

var _AEvent = _interopRequireDefault(require("../event/AEvent.js"));

var _Compiler2 = _interopRequireDefault(require("./Compiler.js"));

var _ClassScript = _interopRequireDefault(require("../ClassScript.js"));

var _AFunction = _interopRequireDefault(require("../function/AFunction.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _ACondition = _interopRequireDefault(require("../condition/ACondition.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var _AVariable = _interopRequireDefault(require("../variable/AVariable.js"));

var _AAnimation = _interopRequireDefault(require("../animation/AAnimation.js"));

var _NodeHelper = _interopRequireDefault(require("../../utils/NodeHelper.js"));

var _AStackFunction = _interopRequireDefault(require("../function/AStackFunction.js"));

var _ScriptHelper = _interopRequireDefault(require("../../utils/ScriptHelper.js"));

var _OnAnyAnimationStartEvent = _interopRequireDefault(require("../event/native/OnAnyAnimationStartEvent.js"));

var _StopAnimationFunction = _interopRequireDefault(require("../function/native/animation/StopAnimationFunction.js"));

var _StartAnimationFunction = _interopRequireDefault(require("../function/native/animation/StartAnimationFunction.js"));

var _GetCurrentAnimationFunction = _interopRequireDefault(require("../function/native/animation/GetCurrentAnimationFunction.js"));

var _IsAnimationPlayingFunction = _interopRequireDefault(require("../function/native/animation/IsAnimationPlayingFunction.js"));

var _NotFunction = _interopRequireDefault(require("../function/native/basic/NotFunction.js"));

var _AReference = _interopRequireDefault(require("../reference/AReference.js"));

var _ASelf = _interopRequireDefault(require("../unit/ASelf.js"));

var _AToggleVariable = _interopRequireDefault(require("../variable/AToggleVariable.js"));

var _ANativeFunction = _interopRequireDefault(require("../function/native/ANativeFunction.js"));

var _ALoop = _interopRequireDefault(require("../loop/ALoop.js"));

var _GetValueFunction = _interopRequireDefault(require("../function/native/object/GetValueFunction.js"));

var _IsArrayEmptyFunction = _interopRequireDefault(require("../function/native/array/IsArrayEmptyFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ClassCompiler = /*#__PURE__*/function (_Compiler) {
  (0, _inherits2["default"])(ClassCompiler, _Compiler);

  var _super = _createSuper(ClassCompiler);

  function ClassCompiler() {
    (0, _classCallCheck2["default"])(this, ClassCompiler);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ClassCompiler, [{
    key: "run",

    /**
     * @override
     */
    value: function run(script) {
      if (!(script instanceof _ClassScript["default"])) {
        throw new _SystemError["default"]("The given script is not correct (must be a Class script)");
      }

      var nodes = script.getNodes();

      var world = _World["default"].get();

      var functionRegistry = world.getFunctionRegistry();
      functionRegistry.removeInstancesByClass(script.getName()); //compile stack function

      nodes.forEach(function (node) {
        var element = _NodeHelper["default"].getSourceNode(node);

        if (!element) {
          throw new _ClientError["default"]("Class Compiler Error: cannot find function ".concat(node.getSourceName()));
        }

        if (!functionRegistry.getInstance(element.getName()) && !(element instanceof _AStackFunction["default"])) {
          throw new _ClientError["default"]("Class Compiler Error: function ".concat(node.getSourceName(), " not a registered function nor stack function"));
        }

        var stackFunction = _ScriptHelper["default"].createFunction(script, node);

        if (element.getOutput()) {
          stackFunction.addOutput(element.getOutput().getAttrType());
        }

        functionRegistry.tryRegister(stackFunction);
      }); //compile associations

      script.getInputs().forEach(function (input) {
        var node = script.findNodeById(input.getNodeId());

        var functionName = _ScriptHelper["default"].generateFunctionName(script, node);

        var element = _NodeHelper["default"].getSourceNode(node);

        var sourceNode = script.findNodeById(input.getSourceNodeId());
        var targetName = input.getTargetName();
        var stackFunction = functionRegistry.getInstance(functionName);

        if (sourceNode) {
          var sourceElement = _NodeHelper["default"].getSourceNode(sourceNode);

          var sourceElementName = _ScriptHelper["default"].generateFunctionName(script, sourceNode);

          var sourceStackFunction = functionRegistry.getInstance(sourceElementName);

          if (sourceElement instanceof _AEvent["default"]) {
            var _sourceStackFunction$;

            (_sourceStackFunction$ = sourceStackFunction.getStack()).push.apply(_sourceStackFunction$, [new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, functionName)]);
          } else if (sourceElement instanceof _AVariable["default"]) {
            var _stackFunction$getSta;

            var targetInput = element.findInputByName(targetName);

            (_stackFunction$getSta = stackFunction.getStack()).push.apply(_stackFunction$getSta, [new _StackOperation["default"](_StackOperation.OPERATIONS.GET, sourceNode.getSourceName()), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, targetInput.getAttrName(), _StackRegister.CONSTANTS.RESULT)]);

            if (sourceElement instanceof _AToggleVariable["default"]) {
              var _stackFunction$getSta2;

              (_stackFunction$getSta2 = stackFunction.getStack()).push.apply(_stackFunction$getSta2, [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _StackRegister.CONSTANTS.RESULT, ''), new _StackOperation["default"](_StackOperation.OPERATIONS.SET, sourceNode.getSourceName())]);
            }
          } else if (sourceElement instanceof _ASelf["default"]) {
            var _stackFunction$getSta3;

            var _targetInput = element.findInputByName(targetName);

            (_stackFunction$getSta3 = stackFunction.getStack()).push.apply(_stackFunction$getSta3, [new _StackOperation["default"](_StackOperation.OPERATIONS.SELF, "".concat(_targetInput.getAttrType())), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _targetInput.getAttrName(), _StackRegister.CONSTANTS.RESULT)]);
          } else if (sourceElement instanceof _AAnimation["default"]) {
            if (element instanceof _ANativeFunction["default"]) {
              var _stackFunction$getSta4;

              var _targetInput2 = element.findInputByName(targetName);

              (_stackFunction$getSta4 = stackFunction.getStack()).push.apply(_stackFunction$getSta4, [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _targetInput2.getAttrName(), sourceElement.getName())]);
            }
          } else if (sourceElement instanceof _ALoop["default"]) {
            var _targetInput3 = element.findInputByName(targetName);

            if (_targetInput3) {
              var _stackFunction$getSta5;

              (_stackFunction$getSta5 = stackFunction.getStack()).push.apply(_stackFunction$getSta5, [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _targetInput3.getAttrName(), '[MEM]attributes')]);
            }
          } // must be the last condition
          else if (sourceElement instanceof _AFunction["default"]) {
              var _targetInput4 = element.findInputByName(targetName);

              if (_targetInput4) {
                var _stackFunction$getSta6;

                (_stackFunction$getSta6 = stackFunction.getStack()).push.apply(_stackFunction$getSta6, [new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, sourceElementName), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _targetInput4.getAttrName(), _StackRegister.CONSTANTS.RESULT)]);
              }
            } else if (sourceElement) {
              throw new _SystemError["default"]("Class compiler: ".concat(sourceElement.constructor.name, " not supported"));
            }
        }
      }); //complete compiling function

      nodes.forEach(function (node) {
        var element = _NodeHelper["default"].getSourceNode(node);

        var functionName = _ScriptHelper["default"].generateFunctionName(script, node);

        var stackFunction = functionRegistry.getInstance(functionName);

        if (!(element instanceof _AEvent["default"])) {
          if (functionRegistry.getInstance(element.getName())) {
            if (element instanceof _ALoop["default"]) {
              var _stackFunction$getSta7;

              var isArrayEmpty = new _IsArrayEmptyFunction["default"]();

              (_stackFunction$getSta7 = stackFunction.getStack()).push.apply(_stackFunction$getSta7, [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, '[MEM]array', _StackRegister.CONSTANTS.RESULT), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'array', _StackRegister.CONSTANTS.RESULT), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, isArrayEmpty.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.EXIT, _StackRegister.CONSTANTS.RESULT), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'index', '0'), new _StackOperation["default"](_StackOperation.OPERATIONS.JUMP_TO, 'start_loop'), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'array', '[MEM]array'), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, element.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, '[MEM]attributes', _StackRegister.CONSTANTS.RESULT)]);
            } else {
              stackFunction.getStack().push(new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, element.getName()));
            }
          } else if (element instanceof _AAnimation["default"]) {
            var _stackFunction$getSta8;

            var onAnyAnimation = new _OnAnyAnimationStartEvent["default"]();
            var isAnimationPlaying = new _IsAnimationPlayingFunction["default"]();
            var startAnimation = new _StartAnimationFunction["default"]();
            var not = new _NotFunction["default"]();

            (_stackFunction$getSta8 = stackFunction.getStack()).push.apply(_stackFunction$getSta8, [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, isAnimationPlaying.getInputs()[0].getAttrName(), element.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, isAnimationPlaying.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, not.getInputs()[0].getAttrName(), _StackRegister.CONSTANTS.RESULT), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, not.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.JUMP, _StackRegister.CONSTANTS.RESULT, 'start_animation'), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, startAnimation.getInputs()[0].getAttrName(), element.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, startAnimation.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.JUMP_TO, 'start_animation')]);

            if (!_ScriptHelper["default"].isNodeHasPredecessor(script, node, onAnyAnimation.getName())) {
              stackFunction.getStack().push(new _StackOperation["default"](_StackOperation.OPERATIONS.DISPATCH, onAnyAnimation.getName()));
            }
          } else if (element instanceof _AStackFunction["default"]) {
            var _stackFunction$getSta9;

            (_stackFunction$getSta9 = stackFunction.getStack()).push.apply(_stackFunction$getSta9, (0, _toConsumableArray2["default"])(element.getStack()));
          }

          if (element instanceof _ACondition["default"]) {
            stackFunction.getStack().push(new _StackOperation["default"](_StackOperation.OPERATIONS.EXIT, _StackRegister.CONSTANTS.RESULT));
          }
        }
      }); //complete compiling associations

      script.getInputs().forEach(function (input) {
        var node = script.findNodeById(input.getNodeId());

        var element = _NodeHelper["default"].getSourceNode(node);

        var functionName = _ScriptHelper["default"].generateFunctionName(script, node);

        var sourceNode = script.findNodeById(input.getSourceNodeId());
        var targetName = input.getTargetName();

        if (sourceNode) {
          var sourceElement = _NodeHelper["default"].getSourceNode(sourceNode);

          var sourceElementName = _ScriptHelper["default"].generateFunctionName(script, sourceNode);

          var sourceStackFunction = functionRegistry.getInstance(sourceElementName);

          if (sourceElement instanceof _AAnimation["default"]) {
            if (element instanceof _AAnimation["default"]) {
              var _sourceStackFunction$2;

              var stopAnimation = new _StopAnimationFunction["default"]();

              (_sourceStackFunction$2 = sourceStackFunction.getStack()).push.apply(_sourceStackFunction$2, [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, stopAnimation.getInputs()[0].getAttrName(), sourceElement.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, stopAnimation.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, functionName)]);
            } else if (element instanceof _ACondition["default"]) {
              var _sourceStackFunction$3;

              (_sourceStackFunction$3 = sourceStackFunction.getStack()).push.apply(_sourceStackFunction$3, [new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, functionName)]);
            }
          } else if (sourceElement instanceof _ACondition["default"]) {
            if (element instanceof _AAnimation["default"] || element instanceof _AReference["default"]) {
              var _sourceStackFunction$4;

              var getCurrentAnimation = new _GetCurrentAnimationFunction["default"]();

              var _stopAnimation = new _StopAnimationFunction["default"]();

              (_sourceStackFunction$4 = sourceStackFunction.getStack()).push.apply(_sourceStackFunction$4, [new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, getCurrentAnimation.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _stopAnimation.getInputs()[0].getAttrName(), _StackRegister.CONSTANTS.RESULT), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, _stopAnimation.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, functionName)]);
            } else {
              var _sourceStackFunction$5;

              (_sourceStackFunction$5 = sourceStackFunction.getStack()).push.apply(_sourceStackFunction$5, [new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, functionName)]);
            }
          } else if (sourceElement instanceof _ALoop["default"]) {
            var getValueFunction = new _GetValueFunction["default"]();
            var targetInput = element.findInputByName(targetName);

            if (!targetInput) {
              var _sourceStackFunction$6;

              (_sourceStackFunction$6 = sourceStackFunction.getStack()).push.apply(_sourceStackFunction$6, [new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, functionName), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'attributes', '[MEM]attributes'), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'name', 'index'), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, getValueFunction.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'attributes', '[MEM]attributes'), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'index', _StackRegister.CONSTANTS.RESULT), new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, 'name', 'ended'), new _StackOperation["default"](_StackOperation.OPERATIONS.CALL, getValueFunction.getName()), new _StackOperation["default"](_StackOperation.OPERATIONS.JUMP, _StackRegister.CONSTANTS.RESULT, 'start_loop')]);
            }
          }
        }
      });
      return true;
    }
  }]);
  return ClassCompiler;
}(_Compiler2["default"]);

exports["default"] = ClassCompiler;

},{"../../exception/type/ClientError.js":80,"../../exception/type/SystemError.js":82,"../../operation/StackOperation.js":241,"../../operation/StackRegister.js":243,"../../utils/NodeHelper.js":364,"../../utils/ScriptHelper.js":367,"../../world/World.js":372,"../ClassScript.js":96,"../animation/AAnimation.js":97,"../condition/ACondition.js":101,"../event/AEvent.js":105,"../event/native/OnAnyAnimationStartEvent.js":107,"../function/AFunction.js":116,"../function/AStackFunction.js":117,"../function/native/ANativeFunction.js":118,"../function/native/animation/GetCurrentAnimationFunction.js":119,"../function/native/animation/IsAnimationPlayingFunction.js":122,"../function/native/animation/StartAnimationFunction.js":123,"../function/native/animation/StopAnimationFunction.js":124,"../function/native/array/IsArrayEmptyFunction.js":125,"../function/native/basic/NotFunction.js":141,"../function/native/object/GetValueFunction.js":155,"../loop/ALoop.js":171,"../reference/AReference.js":192,"../unit/ASelf.js":193,"../variable/AToggleVariable.js":201,"../variable/AVariable.js":202,"./Compiler.js":99,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/toConsumableArray":21}],99:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

/**
 * @abstract
 */
var Compiler = /*#__PURE__*/function () {
  function Compiler() {
    (0, _classCallCheck2["default"])(this, Compiler);
  }

  (0, _createClass2["default"])(Compiler, [{
    key: "run",

    /**
     * @abstract
     * @param {AScript} flow
     * @return {boolean}
     */
    value: function run(flow) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".run must be implemented"));
    }
    /**
     * @return {Compiler}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return Compiler;
}();

exports["default"] = Compiler;
(0, _defineProperty2["default"])(Compiler, "instance", void 0);

},{"../../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],100:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AStackFunction2 = _interopRequireDefault(require("../function/AStackFunction.js"));

var _StackOperation = _interopRequireWildcard(require("../../operation/StackOperation.js"));

var _StackRegister = require("../../operation/StackRegister.js");

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AComponent = /*#__PURE__*/function (_AStackFunction) {
  (0, _inherits2["default"])(AComponent, _AStackFunction);

  var _super = _createSuper(AComponent);

  /**
   * @param {string} value
   */
  function AComponent(value) {
    var _this;

    (0, _classCallCheck2["default"])(this, AComponent);
    _this = _super.call(this, 'Component');
    _this.stack = [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _StackRegister.CONSTANTS.RESULT, "".concat(value))];

    _this.setName("".concat(value));

    _this.addOutput(_AttributeType.TYPES.STRING);

    return _this;
  }

  (0, _createClass2["default"])(AComponent, [{
    key: "createStack",
    value: function createStack() {}
  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return AComponent;
}(_AStackFunction2["default"]);

exports["default"] = AComponent;

},{"../../operation/StackOperation.js":241,"../../operation/StackRegister.js":243,"../../pobject/AttributeType.js":263,"../function/AStackFunction.js":117,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],101:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AStackFunction2 = _interopRequireDefault(require("../function/AStackFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ACondition = /*#__PURE__*/function (_AStackFunction) {
  (0, _inherits2["default"])(ACondition, _AStackFunction);

  var _super = _createSuper(ACondition);

  function ACondition() {
    (0, _classCallCheck2["default"])(this, ACondition);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ACondition, [{
    key: "createStack",
    value: function createStack() {}
  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return ACondition;
}(_AStackFunction2["default"]);

exports["default"] = ACondition;

},{"../function/AStackFunction.js":117,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],102:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _ACondition2 = _interopRequireDefault(require("./ACondition.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var FalseCondition = /*#__PURE__*/function (_ACondition) {
  (0, _inherits2["default"])(FalseCondition, _ACondition);

  var _super = _createSuper(FalseCondition);

  function FalseCondition(name) {
    (0, _classCallCheck2["default"])(this, FalseCondition);
    return _super.call(this, name || 'False');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(FalseCondition, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.BOOLEAN, false);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(!this.getInputValue('target'));
    }
  }]);
  return FalseCondition;
}(_ACondition2["default"]);

exports["default"] = FalseCondition;

},{"../../pobject/AttributeType.js":263,"./ACondition.js":101,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],103:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _ACondition2 = _interopRequireDefault(require("./ACondition.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TrueCondition = /*#__PURE__*/function (_ACondition) {
  (0, _inherits2["default"])(TrueCondition, _ACondition);

  var _super = _createSuper(TrueCondition);

  function TrueCondition(name) {
    (0, _classCallCheck2["default"])(this, TrueCondition);
    return _super.call(this, name || 'True');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(TrueCondition, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.BOOLEAN, false);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(!!this.getInputValue('target'));
    }
  }]);
  return TrueCondition;
}(_ACondition2["default"]);

exports["default"] = TrueCondition;

},{"../../pobject/AttributeType.js":263,"./ACondition.js":101,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],104:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AStackFunction2 = _interopRequireDefault(require("../function/AStackFunction.js"));

var _StackOperation = _interopRequireWildcard(require("../../operation/StackOperation.js"));

var _StackRegister = require("../../operation/StackRegister.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AConstant = /*#__PURE__*/function (_AStackFunction) {
  (0, _inherits2["default"])(AConstant, _AStackFunction);

  var _super = _createSuper(AConstant);

  /**
   * @param {number|string|boolean} value
   * @param {string} type
   */
  function AConstant(type, value) {
    var _this;

    (0, _classCallCheck2["default"])(this, AConstant);
    _this = _super.call(this, 'Constant');
    _this.stack = [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _StackRegister.CONSTANTS.RESULT, value)];

    _this.setName("".concat(value));

    _this.addOutput(type);

    return _this;
  }

  (0, _createClass2["default"])(AConstant, [{
    key: "createStack",
    value: function createStack() {}
  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return AConstant;
}(_AStackFunction2["default"]);

exports["default"] = AConstant;

},{"../../operation/StackOperation.js":241,"../../operation/StackRegister.js":243,"../function/AStackFunction.js":117,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],105:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEmptyStackFunction2 = _interopRequireDefault(require("../function/AEmptyStackFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var AEvent = /*#__PURE__*/function (_AEmptyStackFunction) {
  (0, _inherits2["default"])(AEvent, _AEmptyStackFunction);

  var _super = _createSuper(AEvent);

  function AEvent() {
    (0, _classCallCheck2["default"])(this, AEvent);
    return _super.apply(this, arguments);
  }

  return AEvent;
}(_AEmptyStackFunction2["default"]);

exports["default"] = AEvent;

},{"../function/AEmptyStackFunction.js":115,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],106:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnAnimationStartEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnAnimationStartEvent, _AEvent);

  var _super = _createSuper(OnAnimationStartEvent);

  function OnAnimationStartEvent(name) {
    (0, _classCallCheck2["default"])(this, OnAnimationStartEvent);
    return _super.call(this, name || 'OnAnimationStart');
  }

  return OnAnimationStartEvent;
}(_AEvent2["default"]);

exports["default"] = OnAnimationStartEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],107:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnAnyAnimationStartEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnAnyAnimationStartEvent, _AEvent);

  var _super = _createSuper(OnAnyAnimationStartEvent);

  function OnAnyAnimationStartEvent(name) {
    (0, _classCallCheck2["default"])(this, OnAnyAnimationStartEvent);
    return _super.call(this, name || 'OnAnyAnimationStart');
  }

  return OnAnyAnimationStartEvent;
}(_AEvent2["default"]);

exports["default"] = OnAnyAnimationStartEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],108:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnInputAttackEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnInputAttackEvent, _AEvent);

  var _super = _createSuper(OnInputAttackEvent);

  function OnInputAttackEvent(name) {
    (0, _classCallCheck2["default"])(this, OnInputAttackEvent);
    return _super.call(this, name || 'OnInputAttack');
  }

  return OnInputAttackEvent;
}(_AEvent2["default"]);

exports["default"] = OnInputAttackEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],109:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnInputJumpEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnInputJumpEvent, _AEvent);

  var _super = _createSuper(OnInputJumpEvent);

  function OnInputJumpEvent(name) {
    (0, _classCallCheck2["default"])(this, OnInputJumpEvent);
    return _super.call(this, name || 'OnInputJump');
  }

  return OnInputJumpEvent;
}(_AEvent2["default"]);

exports["default"] = OnInputJumpEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],110:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnInputXAxisEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnInputXAxisEvent, _AEvent);

  var _super = _createSuper(OnInputXAxisEvent);

  function OnInputXAxisEvent(name) {
    (0, _classCallCheck2["default"])(this, OnInputXAxisEvent);
    return _super.call(this, name || 'OnInputXAxis');
  }

  return OnInputXAxisEvent;
}(_AEvent2["default"]);

exports["default"] = OnInputXAxisEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],111:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnInputYAxisEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnInputYAxisEvent, _AEvent);

  var _super = _createSuper(OnInputYAxisEvent);

  function OnInputYAxisEvent(name) {
    (0, _classCallCheck2["default"])(this, OnInputYAxisEvent);
    return _super.call(this, name || 'OnInputYAxis');
  }

  return OnInputYAxisEvent;
}(_AEvent2["default"]);

exports["default"] = OnInputYAxisEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],112:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnKeyDownEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnKeyDownEvent, _AEvent);

  var _super = _createSuper(OnKeyDownEvent);

  function OnKeyDownEvent(name) {
    (0, _classCallCheck2["default"])(this, OnKeyDownEvent);
    return _super.call(this, name || 'OnKeyDown');
  }

  return OnKeyDownEvent;
}(_AEvent2["default"]);

exports["default"] = OnKeyDownEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],113:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnMouseClickEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnMouseClickEvent, _AEvent);

  var _super = _createSuper(OnMouseClickEvent);

  function OnMouseClickEvent(name) {
    (0, _classCallCheck2["default"])(this, OnMouseClickEvent);
    return _super.call(this, name || 'OnMouseClick');
  }

  return OnMouseClickEvent;
}(_AEvent2["default"]);

exports["default"] = OnMouseClickEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],114:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEvent2 = _interopRequireDefault(require("../AEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OnUpdateEvent = /*#__PURE__*/function (_AEvent) {
  (0, _inherits2["default"])(OnUpdateEvent, _AEvent);

  var _super = _createSuper(OnUpdateEvent);

  function OnUpdateEvent(name) {
    (0, _classCallCheck2["default"])(this, OnUpdateEvent);
    return _super.call(this, name || 'OnUpdate');
  }

  return OnUpdateEvent;
}(_AEvent2["default"]);

exports["default"] = OnUpdateEvent;

},{"../AEvent.js":105,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],115:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AStackFunction2 = _interopRequireDefault(require("./AStackFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AEmptyStackFunction = /*#__PURE__*/function (_AStackFunction) {
  (0, _inherits2["default"])(AEmptyStackFunction, _AStackFunction);

  var _super = _createSuper(AEmptyStackFunction);

  function AEmptyStackFunction(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, AEmptyStackFunction);
    _this = _super.call(this, name);
    _this.inputs = [];
    _this.stack = [];
    return _this;
  }

  (0, _createClass2["default"])(AEmptyStackFunction, [{
    key: "initAttributes",
    value: function initAttributes() {}
  }, {
    key: "createStack",
    value: function createStack() {}
    /**
     * @param {DynamicAttribute[]} inputs
     */

  }, {
    key: "setInputs",
    value: function setInputs(inputs) {
      this.inputs = inputs;
    }
    /**
     * @param {StackOperation[]} stack
     */

  }, {
    key: "setStack",
    value: function setStack(stack) {
      this.stack = stack;
    }
  }]);
  return AEmptyStackFunction;
}(_AStackFunction2["default"]);

exports["default"] = AEmptyStackFunction;

},{"./AStackFunction.js":117,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],116:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../utils/DynamicAttributeHelper.js"));

var _StackRegister = require("../../operation/StackRegister.js");

var _FunctionData2 = _interopRequireDefault(require("../../project/data/FunctionData.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AFunction = /*#__PURE__*/function (_FunctionData) {
  (0, _inherits2["default"])(AFunction, _FunctionData);

  var _super = _createSuper(AFunction);

  /**
   * @param {string} name
   */
  function AFunction(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, AFunction);
    _this = _super.call(this, name);

    _this.init();

    return _this;
  }
  /**
   * @abstract
   */


  (0, _createClass2["default"])(AFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".initAttributes must be implemented"));
    }
    /**
     * @param {string} className
     * @return {boolean}
     */

  }, {
    key: "isInstanceOfClass",
    value: function isInstanceOfClass(className) {
      var regexName = new RegExp("^".concat(className, "."));
      return !!this.getName().match(regexName);
    }
  }, {
    key: "init",
    value: function init() {
      this.initAttributes();
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isGlobal",
    value: function isGlobal() {
      return !this.getName().match(/\./);
    }
    /**
     * @abstract
     * @param {FunctionRegistry} functionRegistry
     * @param {Unit} unit
     * @param {ScriptComponent} scriptComponent
     * @param {World} world
     * @return {void}
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".execute must be implemented"));
    }
    /**
     * @protected
     * @param {string} name
     * @param {number} type
     * @param {*} defaultValue
     */

  }, {
    key: "addInput",
    value: function addInput(name, type) {
      var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

      _DynamicAttributeHelper["default"].add(this.inputs, name, type, defaultValue);
    }
    /**
     * @protected
     * @param {string} name
     * @return {DynamicAttribute}
     */

  }, {
    key: "getInput",
    value: function getInput(name) {
      return _DynamicAttributeHelper["default"].get(this.inputs, name);
    }
    /**
     * @return {string[]}
     */

  }, {
    key: "getInputNames",
    value: function getInputNames() {
      return this.inputs.map(function (input) {
        return input.getAttrName();
      });
    }
    /**
     * @return {number[]}
     */

  }, {
    key: "getInputIds",
    value: function getInputIds() {
      return this.inputs.map(function (input) {
        return input.getId();
      });
    }
    /**
     * @param {string} name
     * @param {*} value
     */

  }, {
    key: "setInputValue",
    value: function setInputValue(name, value) {
      _DynamicAttributeHelper["default"].setValue(this.inputs, name, value);
    }
    /**
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "getInputValue",
    value: function getInputValue(name) {
      return _DynamicAttributeHelper["default"].getValue(this.inputs, name);
    }
    /**
     * @param {string} name
     * @return {number}
     */

  }, {
    key: "getInputId",
    value: function getInputId(name) {
      return _DynamicAttributeHelper["default"].getId(this.inputs, name);
    }
    /**
     * @param {string} name
     * @return {DynamicAttribute}
     */

  }, {
    key: "findInputByName",
    value: function findInputByName(name) {
      return _DynamicAttributeHelper["default"].findByName(this.inputs, name);
    }
    /**
     * @param {number} id
     * @return {DynamicAttribute}
     */

  }, {
    key: "findInputById",
    value: function findInputById(id) {
      return _DynamicAttributeHelper["default"].findById(this.inputs, id);
    }
    /**
     * @param {number} index
     * @return {DynamicAttribute}
     */

  }, {
    key: "findInputByIndex",
    value: function findInputByIndex(index) {
      return _DynamicAttributeHelper["default"].findByIndex(this.inputs, index);
    }
    /**
     * @param {number} type
     * @param {*} defaultValue
     */

  }, {
    key: "addOutput",
    value: function addOutput(type) {
      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      this.output = _DynamicAttributeHelper["default"].create(_StackRegister.CONSTANTS.RESULT, type, defaultValue);
    }
    /**
     * @return {DynamicAttribute}
     */

  }, {
    key: "getOutput",
    value: function getOutput() {
      return this.output;
    }
    /**
     * @return {DynamicAttribute[]}
     */

  }, {
    key: "getInputs",
    value: function getInputs() {
      return this.inputs;
    }
    /**
     * @protected
     * @param {*} value
     */

  }, {
    key: "setOutputValue",
    value: function setOutputValue(value) {
      this.output && this.output.setAttrValue(value);
    }
    /**
     * @return {*}
     */

  }, {
    key: "getOutputValue",
    value: function getOutputValue() {
      return this.output && this.output.getAttrValue();
    }
  }]);
  return AFunction;
}(_FunctionData2["default"]);

exports["default"] = AFunction;

},{"../../exception/type/SystemError.js":82,"../../operation/StackRegister.js":243,"../../project/data/FunctionData.js":287,"../../utils/DynamicAttributeHelper.js":358,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],117:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AFunction2 = _interopRequireDefault(require("./AFunction.js"));

var _StackProcessor = _interopRequireDefault(require("../../operation/StackProcessor.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AStackFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(AStackFunction, _AFunction);

  var _super = _createSuper(AStackFunction);

  function AStackFunction() {
    (0, _classCallCheck2["default"])(this, AStackFunction);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AStackFunction, [{
    key: "init",

    /**
     * @override
     */
    value: function init() {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(AStackFunction.prototype), "init", this).call(this);
      this.createStack();
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var stackRegister = _StackProcessor["default"].get().run(this.getName(), this.stack, functionRegistry, unit, scriptComponent, world);

      this.setOutputValue(stackRegister.popRet(this.getName()));
    }
    /**
     * @abstract
     */

  }, {
    key: "createStack",
    value: function createStack() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".createStack must be implemented"));
    }
    /**
     * @abstract
     */

  }, {
    key: "initAttributes",
    value: function initAttributes() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".initAttributes must be implemented for Native function"));
    }
  }]);
  return AStackFunction;
}(_AFunction2["default"]);

exports["default"] = AStackFunction;

},{"../../exception/type/SystemError.js":82,"../../operation/StackProcessor.js":242,"./AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],118:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AFunction2 = _interopRequireDefault(require("../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var ANativeFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(ANativeFunction, _AFunction);

  var _super = _createSuper(ANativeFunction);

  function ANativeFunction() {
    (0, _classCallCheck2["default"])(this, ANativeFunction);
    return _super.apply(this, arguments);
  }

  return ANativeFunction;
}(_AFunction2["default"]);

exports["default"] = ANativeFunction;

},{"../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],119:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _AnimationComponent = _interopRequireDefault(require("../../../../component/internal/AnimationComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetCurrentAnimationFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetCurrentAnimationFunction, _AFunction);

  var _super = _createSuper(GetCurrentAnimationFunction);

  function GetCurrentAnimationFunction() {
    (0, _classCallCheck2["default"])(this, GetCurrentAnimationFunction);
    return _super.call(this, 'GetCurrentAnimation');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetCurrentAnimationFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);
      this.setOutputValue(animationComponent && "".concat(animationComponent.getAnimation()));
    }
  }]);
  return GetCurrentAnimationFunction;
}(_AFunction2["default"]);

exports["default"] = GetCurrentAnimationFunction;

},{"../../../../component/internal/AnimationComponent.js":41,"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],120:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _AnimationComponent = _interopRequireDefault(require("../../../../component/internal/AnimationComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var HasCurrentAnimationFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(HasCurrentAnimationFunction, _AFunction);

  var _super = _createSuper(HasCurrentAnimationFunction);

  function HasCurrentAnimationFunction() {
    (0, _classCallCheck2["default"])(this, HasCurrentAnimationFunction);
    return _super.call(this, 'HasCurrentAnimation');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(HasCurrentAnimationFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);
      this.setOutputValue(!!animationComponent && !!animationComponent.getAnimation());
    }
  }]);
  return HasCurrentAnimationFunction;
}(_AFunction2["default"]);

exports["default"] = HasCurrentAnimationFunction;

},{"../../../../component/internal/AnimationComponent.js":41,"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],121:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _ANativeFunction2 = _interopRequireDefault(require("../ANativeFunction.js"));

var _AnimationComponent = _interopRequireDefault(require("../../../../component/internal/AnimationComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var IsAnimationEndedFunction = /*#__PURE__*/function (_ANativeFunction) {
  (0, _inherits2["default"])(IsAnimationEndedFunction, _ANativeFunction);

  var _super = _createSuper(IsAnimationEndedFunction);

  function IsAnimationEndedFunction() {
    (0, _classCallCheck2["default"])(this, IsAnimationEndedFunction);
    return _super.call(this, 'IsAnimationEnded');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(IsAnimationEndedFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);
      this.setOutputValue(animationComponent.getLoopTimes() > 0);
    }
  }]);
  return IsAnimationEndedFunction;
}(_ANativeFunction2["default"]);

exports["default"] = IsAnimationEndedFunction;

},{"../../../../component/internal/AnimationComponent.js":41,"../../../../pobject/AttributeType.js":263,"../ANativeFunction.js":118,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],122:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _AnimationComponent = _interopRequireDefault(require("../../../../component/internal/AnimationComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var IsAnimationPlayingFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(IsAnimationPlayingFunction, _AFunction);

  var _super = _createSuper(IsAnimationPlayingFunction);

  function IsAnimationPlayingFunction() {
    (0, _classCallCheck2["default"])(this, IsAnimationPlayingFunction);
    return _super.call(this, 'IsAnimationPlaying');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(IsAnimationPlayingFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.ANIMATION, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var animation = this.getInputValue('target');
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);
      this.setOutputValue(animation.getId() === animationComponent.getAnimation());
    }
  }]);
  return IsAnimationPlayingFunction;
}(_AFunction2["default"]);

exports["default"] = IsAnimationPlayingFunction;

},{"../../../../component/internal/AnimationComponent.js":41,"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],123:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _AnimationComponent = _interopRequireDefault(require("../../../../component/internal/AnimationComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var StartAnimationFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(StartAnimationFunction, _AFunction);

  var _super = _createSuper(StartAnimationFunction);

  function StartAnimationFunction() {
    (0, _classCallCheck2["default"])(this, StartAnimationFunction);
    return _super.call(this, 'ActivateAnimation');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(StartAnimationFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.ANIMATION, 0);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var animation = this.getInputValue('target');
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);
      animationComponent.setTime(0);
      animationComponent.setLoopTimes(0);
      animationComponent.setAnimation(animation.getId());
    }
  }]);
  return StartAnimationFunction;
}(_AFunction2["default"]);

exports["default"] = StartAnimationFunction;

},{"../../../../component/internal/AnimationComponent.js":41,"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],124:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _AnimationComponent = _interopRequireDefault(require("../../../../component/internal/AnimationComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var StopAnimationFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(StopAnimationFunction, _AFunction);

  var _super = _createSuper(StopAnimationFunction);

  function StopAnimationFunction() {
    (0, _classCallCheck2["default"])(this, StopAnimationFunction);
    return _super.call(this, 'EndAnimation');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(StopAnimationFunction, [{
    key: "initAttributes",
    value: function initAttributes() {}
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var animationComponent = unit.getComponent(_AnimationComponent["default"]);
      animationComponent.setTime(0);
      animationComponent.setLoopTimes(0);
      animationComponent.setAnimation(null);
    }
  }]);
  return StopAnimationFunction;
}(_AFunction2["default"]);

exports["default"] = StopAnimationFunction;

},{"../../../../component/internal/AnimationComponent.js":41,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],125:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var isArrayEmptyFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(isArrayEmptyFunction, _AFunction);

  var _super = _createSuper(isArrayEmptyFunction);

  function isArrayEmptyFunction() {
    (0, _classCallCheck2["default"])(this, isArrayEmptyFunction);
    return _super.call(this, 'isArrayEmpty');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(isArrayEmptyFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('array', _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.ANY, []);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var array = this.getInputValue('array');
      this.setOutputValue(!array || array.length);
    }
  }]);
  return isArrayEmptyFunction;
}(_AFunction2["default"]);

exports["default"] = isArrayEmptyFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],126:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var IsAudioPlayingFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(IsAudioPlayingFunction, _AFunction);

  var _super = _createSuper(IsAudioPlayingFunction);

  function IsAudioPlayingFunction() {
    (0, _classCallCheck2["default"])(this, IsAudioPlayingFunction);
    return _super.call(this, 'IsAudioPlaying');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(IsAudioPlayingFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.AUDIO, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var assetAudio = this.getInputValue('target');
      this.setOutputValue(assetAudio.isPlaying());
    }
  }]);
  return IsAudioPlayingFunction;
}(_AFunction2["default"]);

exports["default"] = IsAudioPlayingFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],127:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var PlayAudioFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(PlayAudioFunction, _AFunction);

  var _super = _createSuper(PlayAudioFunction);

  function PlayAudioFunction() {
    (0, _classCallCheck2["default"])(this, PlayAudioFunction);
    return _super.call(this, 'PlayAudio');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(PlayAudioFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.AUDIO, 0);
      this.addInput('volume', _AttributeType.TYPES.NUMBER, 1);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var assetAudio = this.getInputValue('target');
      var volume = this.getInputValue('volume');
      var audio = assetAudio.getData();
      audio.pause();
      audio.volume = Math.max(0, Math.min(volume, 1));
      audio.currentTime = 0;
      audio.play();
    }
  }]);
  return PlayAudioFunction;
}(_AFunction2["default"]);

exports["default"] = PlayAudioFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],128:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AbsFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(AbsFunction, _AFunction);

  var _super = _createSuper(AbsFunction);

  function AbsFunction() {
    (0, _classCallCheck2["default"])(this, AbsFunction);
    return _super.call(this, 'Abs');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AbsFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value = parseFloat(this.getInputValue('value'));
      this.setOutputValue(Math.abs(value));
    }
  }]);
  return AbsFunction;
}(_AFunction2["default"]);

exports["default"] = AbsFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],129:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AddFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(AddFunction, _AFunction);

  var _super = _createSuper(AddFunction);

  function AddFunction() {
    (0, _classCallCheck2["default"])(this, AddFunction);
    return _super.call(this, '+');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AddFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value1 = this.getInputValue('value1');
      var value2 = this.getInputValue('value2');
      this.setOutputValue(parseFloat(value1) + parseFloat(value2));
    }
  }]);
  return AddFunction;
}(_AFunction2["default"]);

exports["default"] = AddFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],130:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AddVectorFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(AddVectorFunction, _AFunction);

  var _super = _createSuper(AddVectorFunction);

  function AddVectorFunction() {
    (0, _classCallCheck2["default"])(this, AddVectorFunction);
    return _super.call(this, 'Vector + Vector');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AddVectorFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.VECTOR, 0);
      this.addInput('value2', _AttributeType.TYPES.VECTOR, 0);
      this.addOutput(_AttributeType.TYPES.VECTOR);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value1 = this.getInputValue('value1');
      var value2 = this.getInputValue('value2');
      this.setOutputValue(_Vector["default"].add(value1, value2));
    }
  }]);
  return AddVectorFunction;
}(_AFunction2["default"]);

exports["default"] = AddVectorFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],131:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AndFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(AndFunction, _AFunction);

  var _super = _createSuper(AndFunction);

  function AndFunction() {
    (0, _classCallCheck2["default"])(this, AndFunction);
    return _super.call(this, '&&');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AndFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.BOOLEAN, 0);
      this.addInput('value2', _AttributeType.TYPES.BOOLEAN, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(!!this.getInputValue('value1') && !!this.getInputValue('value2'));
    }
  }]);
  return AndFunction;
}(_AFunction2["default"]);

exports["default"] = AndFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],132:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var DivideFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(DivideFunction, _AFunction);

  var _super = _createSuper(DivideFunction);

  function DivideFunction() {
    (0, _classCallCheck2["default"])(this, DivideFunction);
    return _super.call(this, '/');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(DivideFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value1 = this.getInputValue('value1');
      var value2 = this.getInputValue('value2');
      var result;

      if (value1 instanceof _Vector["default"]) {
        result = _Vector["default"].divide(value1, value2);
      } else {
        result = parseFloat(value1) / parseFloat(value2);
      }

      this.setOutputValue(result);
    }
  }]);
  return DivideFunction;
}(_AFunction2["default"]);

exports["default"] = DivideFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],133:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var EqualToFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(EqualToFunction, _AFunction);

  var _super = _createSuper(EqualToFunction);

  function EqualToFunction() {
    (0, _classCallCheck2["default"])(this, EqualToFunction);
    return _super.call(this, '==');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(EqualToFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value1 = this.getInputValue('value1');
      var value2 = this.getInputValue('value2');
      var result;

      if (value1 instanceof _Vector["default"] && value2 instanceof _Vector["default"]) {
        result = value1.equals(value2);
      } else {
        result = parseFloat(this.getInputValue('value1')) === parseFloat(this.getInputValue('value2'));
      }

      this.setOutputValue(result);
    }
  }]);
  return EqualToFunction;
}(_AFunction2["default"]);

exports["default"] = EqualToFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],134:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GreaterThanFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GreaterThanFunction, _AFunction);

  var _super = _createSuper(GreaterThanFunction);

  function GreaterThanFunction() {
    (0, _classCallCheck2["default"])(this, GreaterThanFunction);
    return _super.call(this, '>');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GreaterThanFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(parseFloat(this.getInputValue('value1')) > parseFloat(this.getInputValue('value2')));
    }
  }]);
  return GreaterThanFunction;
}(_AFunction2["default"]);

exports["default"] = GreaterThanFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],135:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GreaterThanOrEqualFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GreaterThanOrEqualFunction, _AFunction);

  var _super = _createSuper(GreaterThanOrEqualFunction);

  function GreaterThanOrEqualFunction() {
    (0, _classCallCheck2["default"])(this, GreaterThanOrEqualFunction);
    return _super.call(this, '>=');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GreaterThanOrEqualFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(parseFloat(this.getInputValue('value1')) >= parseFloat(this.getInputValue('value2')));
    }
  }]);
  return GreaterThanOrEqualFunction;
}(_AFunction2["default"]);

exports["default"] = GreaterThanOrEqualFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],136:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Window = _interopRequireDefault(require("../../../../core/Window.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var IsKeyDownFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(IsKeyDownFunction, _AFunction);

  var _super = _createSuper(IsKeyDownFunction);

  function IsKeyDownFunction() {
    (0, _classCallCheck2["default"])(this, IsKeyDownFunction);
    return _super.call(this, 'IsKeyDown');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(IsKeyDownFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('key', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry) {
      var keyboard = _Window["default"].get().keyboard;

      var key = parseInt(this.getInputValue('key'));
      this.setOutputValue(keyboard.isKeyPressed(key));
    }
  }]);
  return IsKeyDownFunction;
}(_AFunction2["default"]);

exports["default"] = IsKeyDownFunction;

},{"../../../../core/Window.js":78,"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],137:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LessThanFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(LessThanFunction, _AFunction);

  var _super = _createSuper(LessThanFunction);

  function LessThanFunction() {
    (0, _classCallCheck2["default"])(this, LessThanFunction);
    return _super.call(this, '<');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(LessThanFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(parseFloat(this.getInputValue('value1')) < parseFloat(this.getInputValue('value2')));
    }
  }]);
  return LessThanFunction;
}(_AFunction2["default"]);

exports["default"] = LessThanFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],138:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LogFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(LogFunction, _AFunction);

  var _super = _createSuper(LogFunction);

  function LogFunction() {
    (0, _classCallCheck2["default"])(this, LogFunction);
    return _super.call(this, 'Log');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(LogFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value', _AttributeType.TYPES.STRING);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      console.log(this.getInputValue('value'));
    }
  }]);
  return LogFunction;
}(_AFunction2["default"]);

exports["default"] = LogFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],139:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MultiplyFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(MultiplyFunction, _AFunction);

  var _super = _createSuper(MultiplyFunction);

  function MultiplyFunction() {
    (0, _classCallCheck2["default"])(this, MultiplyFunction);
    return _super.call(this, 'Multiply');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(MultiplyFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value1 = this.getInputValue('value1');
      var value2 = this.getInputValue('value2');
      var result;

      if (value1 instanceof _Vector["default"] && value2 instanceof _Vector["default"]) {
        result = _Vector["default"].multiply(value1, value2);
      } else {
        result = parseFloat(value1) * parseFloat(value2);
      }

      this.setOutputValue(result);
    }
  }]);
  return MultiplyFunction;
}(_AFunction2["default"]);

exports["default"] = MultiplyFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],140:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NotEqualToFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(NotEqualToFunction, _AFunction);

  var _super = _createSuper(NotEqualToFunction);

  function NotEqualToFunction() {
    (0, _classCallCheck2["default"])(this, NotEqualToFunction);
    return _super.call(this, '!=');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(NotEqualToFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value1 = this.getInputValue('value1');
      var value2 = this.getInputValue('value2');
      var result;

      if (value1 instanceof _Vector["default"] && value2 instanceof _Vector["default"]) {
        result = !value1.equals(value2);
      } else {
        result = parseFloat(this.getInputValue('value1')) !== parseFloat(this.getInputValue('value2'));
      }

      this.setOutputValue(result);
    }
  }]);
  return NotEqualToFunction;
}(_AFunction2["default"]);

exports["default"] = NotEqualToFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],141:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NotFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(NotFunction, _AFunction);

  var _super = _createSuper(NotFunction);

  function NotFunction() {
    (0, _classCallCheck2["default"])(this, NotFunction);
    return _super.call(this, '!');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(NotFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value', _AttributeType.TYPES.BOOLEAN, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(!this.getInputValue('value'));
    }
  }]);
  return NotFunction;
}(_AFunction2["default"]);

exports["default"] = NotFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],142:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var OrFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(OrFunction, _AFunction);

  var _super = _createSuper(OrFunction);

  function OrFunction() {
    (0, _classCallCheck2["default"])(this, OrFunction);
    return _super.call(this, '||');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(OrFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.BOOLEAN, 0);
      this.addInput('value2', _AttributeType.TYPES.BOOLEAN, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(!!this.getInputValue('value1') || !!this.getInputValue('value2'));
    }
  }]);
  return OrFunction;
}(_AFunction2["default"]);

exports["default"] = OrFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],143:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RoundFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(RoundFunction, _AFunction);

  var _super = _createSuper(RoundFunction);

  function RoundFunction() {
    (0, _classCallCheck2["default"])(this, RoundFunction);
    return _super.call(this, 'Round');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(RoundFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('digits', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value = parseFloat(this.getInputValue('value'));
      var numberDigits = parseInt(this.getInputValue('digits'));
      this.setOutputValue(Math.round(value * Math.pow(1, numberDigits)) / Math.pow(1, numberDigits));
    }
  }]);
  return RoundFunction;
}(_AFunction2["default"]);

exports["default"] = RoundFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],144:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SubtractFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(SubtractFunction, _AFunction);

  var _super = _createSuper(SubtractFunction);

  function SubtractFunction() {
    (0, _classCallCheck2["default"])(this, SubtractFunction);
    return _super.call(this, '-');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(SubtractFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('value1', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('value2', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var value1 = this.getInputValue('value1');
      var value2 = this.getInputValue('value2');
      var result;

      if (value1 instanceof _Vector["default"] && value2 instanceof _Vector["default"]) {
        result = _Vector["default"].subtract(value1, value2);
      } else {
        result = parseFloat(value1) - parseFloat(value2);
      }

      this.setOutputValue(result);
    }
  }]);
  return SubtractFunction;
}(_AFunction2["default"]);

exports["default"] = SubtractFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],145:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../../../utils/DynamicAttributeHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetFunction, _AFunction);

  var _super = _createSuper(GetFunction);

  function GetFunction() {
    (0, _classCallCheck2["default"])(this, GetFunction);
    return _super.call(this, 'Get');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('component', _AttributeType.TYPES.COMPONENT, 0);
      this.addInput('attribute', _AttributeType.TYPES.STRING);
      this.addOutput(_AttributeType.TYPES.ANY);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var classComponent = this.getInputValue('component');
      var attribute = this.getInputValue('attribute');
      var component = unit.getComponent(classComponent);
      var componentAttribute = component.get(attribute);
      var value = component.getValue(attribute);

      var outputValue = _DynamicAttributeHelper["default"].getValueByType(value, componentAttribute.getAttrType(), world, unit, scriptComponent);

      this.setOutputValue(outputValue);
    }
  }]);
  return GetFunction;
}(_AFunction2["default"]);

exports["default"] = GetFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/DynamicAttributeHelper.js":358,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],146:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../../../utils/DynamicAttributeHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetInstanceFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetInstanceFunction, _AFunction);

  var _super = _createSuper(GetInstanceFunction);

  function GetInstanceFunction() {
    (0, _classCallCheck2["default"])(this, GetInstanceFunction);
    return _super.call(this, 'GetInstance');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetInstanceFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('component', _AttributeType.TYPES.COMPONENT_INSTANCE, 0);
      this.addInput('attribute', _AttributeType.TYPES.STRING);
      this.addOutput(_AttributeType.TYPES.ANY);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var component = this.getInputValue('component');
      var attribute = this.getInputValue('attribute');
      var componentAttribute = component.get(attribute);
      var value = component.getValue(attribute);

      var outputValue = _DynamicAttributeHelper["default"].getValueByType(value, componentAttribute.getAttrType(), world, unit, scriptComponent);

      this.setOutputValue(outputValue);
    }
  }]);
  return GetInstanceFunction;
}(_AFunction2["default"]);

exports["default"] = GetInstanceFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/DynamicAttributeHelper.js":358,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],147:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetUnitByComponentFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetUnitByComponentFunction, _AFunction);

  var _super = _createSuper(GetUnitByComponentFunction);

  function GetUnitByComponentFunction() {
    (0, _classCallCheck2["default"])(this, GetUnitByComponentFunction);
    return _super.call(this, 'GetUnitByComponent');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetUnitByComponentFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('component', _AttributeType.TYPES.COMPONENT_INSTANCE);
      this.addOutput(_AttributeType.TYPES.UNIT);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var component = this.getInputValue('component');
      var unitFound = world.getUnitManager().findUnitByComponent(component);
      this.setOutputValue(unitFound && unitFound.getId());
    }
  }]);
  return GetUnitByComponentFunction;
}(_AFunction2["default"]);

exports["default"] = GetUnitByComponentFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],148:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../../../utils/DynamicAttributeHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetVarFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetVarFunction, _AFunction);

  var _super = _createSuper(GetVarFunction);

  function GetVarFunction() {
    (0, _classCallCheck2["default"])(this, GetVarFunction);
    return _super.call(this, 'GetVar');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetVarFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('variable', _AttributeType.TYPES.STRING);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var variable = this.getInputValue('variable');
      var value = scriptComponent.getValue(variable);

      var outputValue = _DynamicAttributeHelper["default"].getValueByType(value, scriptComponent.getType(variable), world, unit, scriptComponent);

      this.setOutputValue(outputValue);
    }
  }]);
  return GetVarFunction;
}(_AFunction2["default"]);

exports["default"] = GetVarFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/DynamicAttributeHelper.js":358,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],149:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../../../utils/DynamicAttributeHelper.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SetFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(SetFunction, _AFunction);

  var _super = _createSuper(SetFunction);

  function SetFunction() {
    (0, _classCallCheck2["default"])(this, SetFunction);
    return _super.call(this, 'Set');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(SetFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('component', _AttributeType.TYPES.COMPONENT, 0);
      this.addInput('attribute', _AttributeType.TYPES.STRING);
      this.addInput('value', _AttributeType.TYPES.STRING);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var classComponent = this.getInputValue('component');
      var attribute = this.getInputValue('attribute');
      var value = this.getInputValue('value');
      var componentAttribute = unit.getComponent(classComponent).get(attribute);

      var newValue = _DynamicAttributeHelper["default"].getValueByType(value, componentAttribute.getAttrType(), world, unit, scriptComponent);

      var component = unit.getComponent(classComponent);
      component.setValue(attribute, newValue);

      if (classComponent === _MeshComponent["default"]) {
        component.setGenerated(false);
      }
    }
  }]);
  return SetFunction;
}(_AFunction2["default"]);

exports["default"] = SetFunction;

},{"../../../../component/internal/MeshComponent.js":48,"../../../../pobject/AttributeType.js":263,"../../../../utils/DynamicAttributeHelper.js":358,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],150:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../../../utils/DynamicAttributeHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SetInstanceFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(SetInstanceFunction, _AFunction);

  var _super = _createSuper(SetInstanceFunction);

  function SetInstanceFunction() {
    (0, _classCallCheck2["default"])(this, SetInstanceFunction);
    return _super.call(this, 'SetInstance');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(SetInstanceFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('component', _AttributeType.TYPES.COMPONENT_INSTANCE, 0);
      this.addInput('attribute', _AttributeType.TYPES.STRING);
      this.addInput('value', _AttributeType.TYPES.STRING);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var component = this.getInputValue('component');
      var attribute = this.getInputValue('attribute');
      var value = this.getInputValue('value');
      var componentAttribute = component.get(attribute);

      var newValue = _DynamicAttributeHelper["default"].getValueByType(value, componentAttribute.getAttrType(), world, unit, scriptComponent);

      component.setValue(attribute, newValue);
    }
  }]);
  return SetInstanceFunction;
}(_AFunction2["default"]);

exports["default"] = SetInstanceFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/DynamicAttributeHelper.js":358,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],151:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../../../utils/DynamicAttributeHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SetVarFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(SetVarFunction, _AFunction);

  var _super = _createSuper(SetVarFunction);

  function SetVarFunction() {
    (0, _classCallCheck2["default"])(this, SetVarFunction);
    return _super.call(this, 'SetVar');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(SetVarFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('variable', _AttributeType.TYPES.STRING);
      this.addInput('value', _AttributeType.TYPES.STRING);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var variable = this.getInputValue('variable');
      var value = this.getInputValue('value');

      var newValue = _DynamicAttributeHelper["default"].getValueByType(value, scriptComponent.getType(variable), world, unit, scriptComponent);

      scriptComponent.setValue(variable, newValue);
    }
  }]);
  return SetVarFunction;
}(_AFunction2["default"]);

exports["default"] = SetVarFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/DynamicAttributeHelper.js":358,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],152:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _GameInput = require("../../../../preference/gameInput/GameInput.js");

var _World = _interopRequireDefault(require("../../../../world/World.js"));

var _Window = _interopRequireDefault(require("../../../../core/Window.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetInputXAxisFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetInputXAxisFunction, _AFunction);

  var _super = _createSuper(GetInputXAxisFunction);

  function GetInputXAxisFunction() {
    (0, _classCallCheck2["default"])(this, GetInputXAxisFunction);
    return _super.call(this, 'GetInputXAxis');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetInputXAxisFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addOutput(_AttributeType.TYPES.NUMBER, 0);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit) {
      var keyboard = _Window["default"].get().keyboard;

      var gameInput = _World["default"].get().getPreference().getGameInput();

      var value = 0;

      if (keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.RIGHT))) {
        value = gameInput.get(_GameInput.GAME_INPUTS.RIGHT).getValue().getAttrValue();
      } else if (keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.LEFT))) {
        value = gameInput.get(_GameInput.GAME_INPUTS.LEFT).getValue().getAttrValue();
      }

      this.setOutputValue(value);
    }
  }]);
  return GetInputXAxisFunction;
}(_AFunction2["default"]);

exports["default"] = GetInputXAxisFunction;

},{"../../../../core/Window.js":78,"../../../../pobject/AttributeType.js":263,"../../../../preference/gameInput/GameInput.js":271,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],153:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _GameInput = require("../../../../preference/gameInput/GameInput.js");

var _World = _interopRequireDefault(require("../../../../world/World.js"));

var _Window = _interopRequireDefault(require("../../../../core/Window.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetInputYAxisFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetInputYAxisFunction, _AFunction);

  var _super = _createSuper(GetInputYAxisFunction);

  function GetInputYAxisFunction() {
    (0, _classCallCheck2["default"])(this, GetInputYAxisFunction);
    return _super.call(this, 'GetInputYAxis');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetInputYAxisFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addOutput(_AttributeType.TYPES.NUMBER, 0);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry) {
      var keyboard = _Window["default"].get().keyboard;

      var gameInput = _World["default"].get().getPreference().getGameInput();

      var value = 0;

      if (keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.UP))) {
        value = gameInput.get(_GameInput.GAME_INPUTS.UP).getValue().getAttrValue();
      } else if (keyboard.isKeyPressed(gameInput.getKeyCode(_GameInput.GAME_INPUTS.DOWN))) {
        value = gameInput.get(_GameInput.GAME_INPUTS.DOWN).getValue().getAttrValue();
      }

      this.setOutputValue(value);
    }
  }]);
  return GetInputYAxisFunction;
}(_AFunction2["default"]);

exports["default"] = GetInputYAxisFunction;

},{"../../../../core/Window.js":78,"../../../../pobject/AttributeType.js":263,"../../../../preference/gameInput/GameInput.js":271,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],154:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../component/internal/MeshComponent.js"));

var _ObjectHelper = _interopRequireDefault(require("../../../../utils/ObjectHelper.js"));

var _RigidBodyComponent = _interopRequireDefault(require("../../../../component/internal/RigidBodyComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScaleMeshFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(ScaleMeshFunction, _AFunction);

  var _super = _createSuper(ScaleMeshFunction);

  function ScaleMeshFunction() {
    (0, _classCallCheck2["default"])(this, ScaleMeshFunction);
    return _super.call(this, 'ScaleMesh');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ScaleMeshFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addInput('scale', _AttributeType.TYPES.VECTOR, 0);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit) {
      var target = this.getInputValue('target');
      var scale = this.getInputValue('scale');
      var transformComponent = target.getComponent(_TransformComponent["default"]);
      var actualScale = transformComponent.getScale();
      target.getComponent(_TransformComponent["default"]).setScale(scale);

      if (!_ObjectHelper["default"].isEqual(actualScale, scale)) {
        target.getComponent(_MeshComponent["default"]).setGenerated(false);
        var rigidBodyComponent = unit.getComponent(_RigidBodyComponent["default"]);

        if (rigidBodyComponent) {
          rigidBodyComponent.setCreated(false);
        }
      }
    }
  }]);
  return ScaleMeshFunction;
}(_AFunction2["default"]);

exports["default"] = ScaleMeshFunction;

},{"../../../../component/internal/MeshComponent.js":48,"../../../../component/internal/RigidBodyComponent.js":50,"../../../../component/internal/TransformComponent.js":53,"../../../../pobject/AttributeType.js":263,"../../../../utils/ObjectHelper.js":365,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],155:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../../../utils/DynamicAttributeHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetValueFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetValueFunction, _AFunction);

  var _super = _createSuper(GetValueFunction);

  function GetValueFunction() {
    (0, _classCallCheck2["default"])(this, GetValueFunction);
    return _super.call(this, 'GetValue');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetValueFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('attributes', _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.DYNAMIC_ATTRIBUTE, []);
      this.addInput('name', _AttributeType.TYPES.STRING);
      this.addOutput(_AttributeType.TYPES.ANY);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var attributes = this.getInputValue('attributes');
      var name = this.getInputValue('name');

      var attribute = _DynamicAttributeHelper["default"].get(attributes, name);

      var outputValue = _DynamicAttributeHelper["default"].getValueByType(attribute.getAttrValue(), attribute.getAttrType(), world, unit, scriptComponent);

      this.setOutputValue(outputValue);
    }
  }]);
  return GetValueFunction;
}(_AFunction2["default"]);

exports["default"] = GetValueFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/DynamicAttributeHelper.js":358,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],156:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _World = _interopRequireDefault(require("../../../../world/World.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ApplyForceFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(ApplyForceFunction, _AFunction);

  var _super = _createSuper(ApplyForceFunction);

  function ApplyForceFunction() {
    (0, _classCallCheck2["default"])(this, ApplyForceFunction);
    return _super.call(this, 'ApplyForce');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ApplyForceFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addInput('position', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
      this.addInput('force', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit) {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();
      var target = this.getInputValue('target');
      var position = this.getInputValue('position');
      var force = this.getInputValue('force');
      physicsManager.applyForce(target, position, force);
    }
  }]);
  return ApplyForceFunction;
}(_AFunction2["default"]);

exports["default"] = ApplyForceFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],157:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _World = _interopRequireDefault(require("../../../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetAllCollisionFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetAllCollisionFunction, _AFunction);

  var _super = _createSuper(GetAllCollisionFunction);

  function GetAllCollisionFunction() {
    (0, _classCallCheck2["default"])(this, GetAllCollisionFunction);
    return _super.call(this, 'GetAllCollision');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetAllCollisionFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT);
      this.addInput('collider', _AttributeType.TYPES.COMPONENT_INSTANCE);
      this.addInput('maskGroup', _AttributeType.TYPES.MASK_GROUP_INSTANCE);
      this.addOutput(_AttributeType.TYPES.ARRAY | _AttributeType.TYPES.COMPONENT_INSTANCE);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();
      var colliderComponent = this.getInputValue('collider');
      var unit = this.getInputValue('target');
      var maskGroup = this.getInputValue('maskGroup');
      var colliderComponents = physicsManager.getAllCollision(world, unit, colliderComponent, maskGroup);
      this.setOutputValue(colliderComponents.map(function (pColliderComponent) {
        return pColliderComponent.getId();
      }));
    }
  }]);
  return GetAllCollisionFunction;
}(_AFunction2["default"]);

exports["default"] = GetAllCollisionFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],158:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _World = _interopRequireDefault(require("../../../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetVelocityXFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetVelocityXFunction, _AFunction);

  var _super = _createSuper(GetVelocityXFunction);

  function GetVelocityXFunction() {
    (0, _classCallCheck2["default"])(this, GetVelocityXFunction);
    return _super.call(this, 'GetVelocityX');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetVelocityXFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit) {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();
      var target = this.getInputValue('target');
      this.setOutputValue(physicsManager.getVelocity(target).getX());
    }
  }]);
  return GetVelocityXFunction;
}(_AFunction2["default"]);

exports["default"] = GetVelocityXFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],159:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _World = _interopRequireDefault(require("../../../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetVelocityYFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetVelocityYFunction, _AFunction);

  var _super = _createSuper(GetVelocityYFunction);

  function GetVelocityYFunction() {
    (0, _classCallCheck2["default"])(this, GetVelocityYFunction);
    return _super.call(this, 'GetVelocityY');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetVelocityYFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit) {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();
      var target = this.getInputValue('target');
      this.setOutputValue(physicsManager.getVelocity(target).getY());
    }
  }]);
  return GetVelocityYFunction;
}(_AFunction2["default"]);

exports["default"] = GetVelocityYFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],160:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var IsGroundedFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(IsGroundedFunction, _AFunction);

  var _super = _createSuper(IsGroundedFunction);

  function IsGroundedFunction() {
    (0, _classCallCheck2["default"])(this, IsGroundedFunction);
    return _super.call(this, 'IsGrounded');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(IsGroundedFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addInput('component', _AttributeType.TYPES.COMPONENT_INSTANCE, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var physicsManager = world.getPhysicsManager();
      var target = this.getInputValue('target');
      var colliderComponent = this.getInputValue('component');
      this.setOutputValue(physicsManager.isGrounded(target, colliderComponent));
    }
  }]);
  return IsGroundedFunction;
}(_AFunction2["default"]);

exports["default"] = IsGroundedFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],161:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _World = _interopRequireDefault(require("../../../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MoveXAxisFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(MoveXAxisFunction, _AFunction);

  var _super = _createSuper(MoveXAxisFunction);

  function MoveXAxisFunction() {
    (0, _classCallCheck2["default"])(this, MoveXAxisFunction);
    return _super.call(this, 'MoveXAxis');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(MoveXAxisFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addInput('speed', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('direction', _AttributeType.TYPES.NUMBER, 0);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit) {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();
      var target = this.getInputValue('target');
      var speed = parseFloat(this.getInputValue('speed'));
      var direction = parseFloat(this.getInputValue('direction'));
      physicsManager.moveXAxis(target, speed * direction);
    }
  }]);
  return MoveXAxisFunction;
}(_AFunction2["default"]);

exports["default"] = MoveXAxisFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],162:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ArrayFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(ArrayFunction, _AFunction);

  var _super = _createSuper(ArrayFunction);

  function ArrayFunction() {
    (0, _classCallCheck2["default"])(this, ArrayFunction);
    return _super.call(this, 'Array');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ArrayFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('length', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.ARRAY | _AttributeType.TYPES.ANY);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var length = this.getInputValue('length');
      this.setOutputValue(new Array(length));
    }
  }]);
  return ArrayFunction;
}(_AFunction2["default"]);

exports["default"] = ArrayFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],163:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var VectorFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(VectorFunction, _AFunction);

  var _super = _createSuper(VectorFunction);

  function VectorFunction() {
    (0, _classCallCheck2["default"])(this, VectorFunction);
    return _super.call(this, 'Vector');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(VectorFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('x', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('y', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('z', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.VECTOR);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(new _Vector["default"]({
        x: parseFloat(this.getInputValue('x')),
        y: parseFloat(this.getInputValue('y')),
        z: parseFloat(this.getInputValue('z'))
      }));
    }
  }]);
  return VectorFunction;
}(_AFunction2["default"]);

exports["default"] = VectorFunction;

},{"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],164:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetTimeFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetTimeFunction, _AFunction);

  var _super = _createSuper(GetTimeFunction);

  function GetTimeFunction() {
    (0, _classCallCheck2["default"])(this, GetTimeFunction);
    return _super.call(this, 'GetTime');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetTimeFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      this.setOutputValue(Date.now());
    }
  }]);
  return GetTimeFunction;
}(_AFunction2["default"]);

exports["default"] = GetTimeFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],165:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var IsUpdateTimeFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(IsUpdateTimeFunction, _AFunction);

  var _super = _createSuper(IsUpdateTimeFunction);

  function IsUpdateTimeFunction() {
    (0, _classCallCheck2["default"])(this, IsUpdateTimeFunction);
    return _super.call(this, 'IsUpdateTime');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(IsUpdateTimeFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('nextTimeVariable', _AttributeType.TYPES.STRING);
      this.addInput('updateRate', _AttributeType.TYPES.NUMBER, 0);
      this.addOutput(_AttributeType.TYPES.BOOLEAN);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(functionRegistry, unit, scriptComponent, world) {
      var nextTimeVariable = this.getInputValue('nextTimeVariable');
      var updateRate = this.getInputValue('updateRate');
      var nexTimeUpdate = scriptComponent.getValue(nextTimeVariable);
      var timeNow = Date.now();
      var isUpdate = timeNow > nexTimeUpdate;

      if (isUpdate || !nexTimeUpdate) {
        scriptComponent.setValue(nextTimeVariable, timeNow + updateRate);
      }

      this.setOutputValue(isUpdate);
    }
  }]);
  return IsUpdateTimeFunction;
}(_AFunction2["default"]);

exports["default"] = IsUpdateTimeFunction;

},{"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],166:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _ClientError = _interopRequireDefault(require("../../../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetComponentFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetComponentFunction, _AFunction);

  var _super = _createSuper(GetComponentFunction);

  function GetComponentFunction() {
    (0, _classCallCheck2["default"])(this, GetComponentFunction);
    return _super.call(this, 'GetComponent');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetComponentFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT);
      this.addInput('name', _AttributeType.TYPES.STRING);
      this.addOutput(_AttributeType.TYPES.COMPONENT_INSTANCE);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var unit = this.getInputValue('target');
      var componentName = this.getInputValue('name');
      var component = unit.findComponentByName(componentName);

      if (!component) {
        throw new _ClientError["default"]("".concat(this.getName(), ": ").concat(componentName, " not found"));
      }

      this.setOutputValue(component.getId());
    }
  }]);
  return GetComponentFunction;
}(_AFunction2["default"]);

exports["default"] = GetComponentFunction;

},{"../../../../exception/type/ClientError.js":80,"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],167:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _World = _interopRequireDefault(require("../../../../world/World.js"));

var _ClientError = _interopRequireDefault(require("../../../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetUnitFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetUnitFunction, _AFunction);

  var _super = _createSuper(GetUnitFunction);

  function GetUnitFunction() {
    (0, _classCallCheck2["default"])(this, GetUnitFunction);
    return _super.call(this, 'GetUnit');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetUnitFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('name', _AttributeType.TYPES.STRING, 0);
      this.addOutput(_AttributeType.TYPES.NUMBER);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var name = this.getInputValue('name');

      var unit = _World["default"].get().findUnitByName(name);

      if (!unit) {
        throw new _ClientError["default"]("GetUnit: ".concat(name, " not found"));
      }

      this.setOutputValue(unit.getId());
    }
  }]);
  return GetUnitFunction;
}(_AFunction2["default"]);

exports["default"] = GetUnitFunction;

},{"../../../../exception/type/ClientError.js":80,"../../../../pobject/AttributeType.js":263,"../../../../world/World.js":372,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],168:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../component/internal/TransformComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GetWorldPositionFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(GetWorldPositionFunction, _AFunction);

  var _super = _createSuper(GetWorldPositionFunction);

  function GetWorldPositionFunction() {
    (0, _classCallCheck2["default"])(this, GetWorldPositionFunction);
    return _super.call(this, 'GetWorldPosition');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(GetWorldPositionFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addOutput(_AttributeType.TYPES.VECTOR);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var target = this.getInputValue('target');
      var position = target.getComponent(_TransformComponent["default"]).getPosition();
      this.setOutputValue(position);
    }
  }]);
  return GetWorldPositionFunction;
}(_AFunction2["default"]);

exports["default"] = GetWorldPositionFunction;

},{"../../../../component/internal/TransformComponent.js":53,"../../../../pobject/AttributeType.js":263,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],169:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../../AFunction.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../component/internal/TransformComponent.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SetWorldPositionFunction = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(SetWorldPositionFunction, _AFunction);

  var _super = _createSuper(SetWorldPositionFunction);

  function SetWorldPositionFunction() {
    (0, _classCallCheck2["default"])(this, SetWorldPositionFunction);
    return _super.call(this, 'SetWorldPosition');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(SetWorldPositionFunction, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.UNIT, 0);
      this.addInput('vector', _AttributeType.TYPES.VECTOR, new _Vector["default"]());
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var target = this.getInputValue('target');
      target.getComponent(_TransformComponent["default"]).setPosition(this.getInputValue('vector'));
    }
  }]);
  return SetWorldPositionFunction;
}(_AFunction2["default"]);

exports["default"] = SetWorldPositionFunction;

},{"../../../../component/internal/TransformComponent.js":53,"../../../../pobject/AttributeType.js":263,"../../../../utils/Vector.js":370,"../../AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],170:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AStackFunction2 = _interopRequireDefault(require("../function/AStackFunction.js"));

var _StackOperation = _interopRequireWildcard(require("../../operation/StackOperation.js"));

var _StackRegister = require("../../operation/StackRegister.js");

var _Keyboard = require("../../core/Keyboard.js");

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AKeyCode = /*#__PURE__*/function (_AStackFunction) {
  (0, _inherits2["default"])(AKeyCode, _AStackFunction);

  var _super = _createSuper(AKeyCode);

  /**
   * @param {string} value
   */
  function AKeyCode(value) {
    var _this;

    (0, _classCallCheck2["default"])(this, AKeyCode);
    _this = _super.call(this, 'KeyCode');
    _this.stack = [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _StackRegister.CONSTANTS.RESULT, "".concat(_Keyboard.KeyCode[value]))];

    _this.setName("".concat(value));

    _this.addOutput(_AttributeType.TYPES.NUMBER);

    return _this;
  }

  (0, _createClass2["default"])(AKeyCode, [{
    key: "createStack",
    value: function createStack() {}
  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return AKeyCode;
}(_AStackFunction2["default"]);

exports["default"] = AKeyCode;

},{"../../core/Keyboard.js":73,"../../operation/StackOperation.js":241,"../../operation/StackRegister.js":243,"../../pobject/AttributeType.js":263,"../function/AStackFunction.js":117,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],171:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _AFunction2 = _interopRequireDefault(require("../function/AFunction.js"));

var _DynamicAttribute = _interopRequireDefault(require("../../pobject/DynamicAttribute.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ALoop = /*#__PURE__*/function (_AFunction) {
  (0, _inherits2["default"])(ALoop, _AFunction);

  var _super = _createSuper(ALoop);

  function ALoop(name) {
    (0, _classCallCheck2["default"])(this, ALoop);
    return _super.call(this, name || 'Loop');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ALoop, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('index', _AttributeType.TYPES.NUMBER, 0);
      this.addInput('array', _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.ANY, false);
      this.addOutput(_AttributeType.TYPES.ARRAY | _AttributeType.TYPES.DYNAMIC_ATTRIBUTE);
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var index = this.getInputValue('index') || 0;
      var array = this.getInputValue('array');
      var attributes = [new _DynamicAttribute["default"]('index', _AttributeType.TYPES.NUMBER, index + 1), new _DynamicAttribute["default"]('element', _AttributeType.TYPES.ANY, array[index]), new _DynamicAttribute["default"]('ended', _AttributeType.TYPES.BOOLEAN, index >= array.length - 1)];
      this.setOutputValue(attributes);
    }
  }]);
  return ALoop;
}(_AFunction2["default"]);

exports["default"] = ALoop;

},{"../../pobject/AttributeType.js":263,"../../pobject/DynamicAttribute.js":265,"../function/AFunction.js":116,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],172:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.NODE_TYPES = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _ANodeData2 = _interopRequireDefault(require("../../project/data/ANodeData.js"));

var _NodeInput = _interopRequireDefault(require("../../pobject/NodeInput.js"));

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var ANode = /*#__PURE__*/function (_ANodeData) {
  (0, _inherits2["default"])(ANode, _ANodeData);

  var _super = _createSuper(ANode);

  /**
   * @type {boolean}
   */

  /**
   * @type {Vector}
   */

  /**
   * @param {string} sourceName
   */
  function ANode(sourceName) {
    var _this;

    (0, _classCallCheck2["default"])(this, ANode);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "selected", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "position", void 0);
    _this.sourceName = sourceName;
    _this.position = new _Vector["default"]();
    return _this;
  }
  /**
   * @param {ANode} sourceNode
   * @param {string|null} targetName
   */


  (0, _createClass2["default"])(ANode, [{
    key: "attach",
    value: function attach(sourceNode, targetName) {
      var inputNode = this.getInputNodeAttached(targetName);

      if (!inputNode) {
        var newInputNode = new _NodeInput["default"]();
        newInputNode.setSourceNodeId(sourceNode.getId());
        newInputNode.setTargetName(targetName);
        newInputNode.setNodeId(this.getId());
        this.inputs.push(newInputNode);
      } else {
        inputNode.sourceNode = sourceNode;
      }
    }
    /**
     * @param {string} targetName
     * @return {NodeInput}
     */

  }, {
    key: "getInputNodeAttached",
    value: function getInputNodeAttached(targetName) {
      return this.inputs.find(function (input) {
        return input.getTargetName() === targetName;
      });
    }
    /**
     * @param {FunctionRegistry} functionRegistry
     * @param {NodeInput} nodeInput
     * @return {DynamicAttribute}
     */

  }, {
    key: "getTargetInput",
    value: function getTargetInput(functionRegistry, nodeInput) {
      var functionInstance = functionRegistry.getInstance(this.getSourceName());
      return functionInstance ? functionInstance.findInputByName(nodeInput.getTargetName()) : null;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.sourceName;
    }
    /**
     * @abstract
     * @return {string}
     */

  }, {
    key: "getType",
    value: function getType() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getType must be implemented"));
    }
    /**
     * @param {boolean} selected
     */

  }, {
    key: "setSelected",
    value: function setSelected(selected) {
      this.selected = selected;
    }
  }, {
    key: "select",
    value: function select() {
      this.setSelected(true);
    }
  }, {
    key: "unselect",
    value: function unselect() {
      this.setSelected(false);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isSelected",
    value: function isSelected() {
      return this.selected;
    }
    /**
     * @param {Vector} position
     */

  }, {
    key: "setPosition",
    value: function setPosition(position) {
      this.position = position;
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getPosition",
    value: function getPosition() {
      return this.position;
    }
  }]);
  return ANode;
}(_ANodeData2["default"]);

exports["default"] = ANode;
var NODE_TYPES = {
  EVENT: 'event',
  FUNCTION: 'function',
  CONSTANT: 'constant',
  CONDITION: 'condition',
  LOOP: 'loop',
  UNIT: 'unit',
  KEY_CODE: 'key_code',
  VAR_STRING: 'var_string',
  VAR_NUMBER: 'var_number',
  VAR_TOGGLE: 'var_toggle',
  VAR_BOOLEAN: 'var_bool',
  VAR_COMPONENT: 'var_component',
  VAR_MASK_GROUP: 'var_mask_group',
  VAR_AUDIO: 'var_audio',
  ANIMATION: 'animation',
  COMPONENT: 'component',
  REFERENCE: 'reference',
  SELF: 'self',
  AUDIO: 'audio'
};
exports.NODE_TYPES = NODE_TYPES;

},{"../../exception/type/SystemError.js":82,"../../pobject/NodeInput.js":266,"../../project/data/ANodeData.js":275,"../../utils/Vector.js":370,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],173:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AnimationNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(AnimationNode, _ANode);

  var _super = _createSuper(AnimationNode);

  function AnimationNode() {
    (0, _classCallCheck2["default"])(this, AnimationNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AnimationNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.ANIMATION;
    }
  }]);
  return AnimationNode;
}(_ANode2["default"]);

exports["default"] = AnimationNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],174:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ComponentNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(ComponentNode, _ANode);

  var _super = _createSuper(ComponentNode);

  function ComponentNode() {
    (0, _classCallCheck2["default"])(this, ComponentNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ComponentNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.COMPONENT;
    }
  }]);
  return ComponentNode;
}(_ANode2["default"]);

exports["default"] = ComponentNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],175:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ConditionNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(ConditionNode, _ANode);

  var _super = _createSuper(ConditionNode);

  function ConditionNode() {
    (0, _classCallCheck2["default"])(this, ConditionNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ConditionNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.CONDITION;
    }
  }]);
  return ConditionNode;
}(_ANode2["default"]);

exports["default"] = ConditionNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],176:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ConstantNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(ConstantNode, _ANode);

  var _super = _createSuper(ConstantNode);

  function ConstantNode() {
    (0, _classCallCheck2["default"])(this, ConstantNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ConstantNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.CONSTANT;
    }
  }]);
  return ConstantNode;
}(_ANode2["default"]);

exports["default"] = ConstantNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],177:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var EventNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(EventNode, _ANode);

  var _super = _createSuper(EventNode);

  function EventNode() {
    (0, _classCallCheck2["default"])(this, EventNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(EventNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.EVENT;
    }
  }]);
  return EventNode;
}(_ANode2["default"]);

exports["default"] = EventNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],178:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var FunctionNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(FunctionNode, _ANode);

  var _super = _createSuper(FunctionNode);

  function FunctionNode() {
    (0, _classCallCheck2["default"])(this, FunctionNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(FunctionNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.FUNCTION;
    }
  }]);
  return FunctionNode;
}(_ANode2["default"]);

exports["default"] = FunctionNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],179:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var KeyCodeNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(KeyCodeNode, _ANode);

  var _super = _createSuper(KeyCodeNode);

  function KeyCodeNode() {
    (0, _classCallCheck2["default"])(this, KeyCodeNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(KeyCodeNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.KEY_CODE;
    }
  }]);
  return KeyCodeNode;
}(_ANode2["default"]);

exports["default"] = KeyCodeNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],180:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LoopNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(LoopNode, _ANode);

  var _super = _createSuper(LoopNode);

  function LoopNode() {
    (0, _classCallCheck2["default"])(this, LoopNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(LoopNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.LOOP;
    }
  }]);
  return LoopNode;
}(_ANode2["default"]);

exports["default"] = LoopNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],181:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ReferenceNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(ReferenceNode, _ANode);

  var _super = _createSuper(ReferenceNode);

  function ReferenceNode() {
    (0, _classCallCheck2["default"])(this, ReferenceNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ReferenceNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.REFERENCE;
    }
  }]);
  return ReferenceNode;
}(_ANode2["default"]);

exports["default"] = ReferenceNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],182:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SelfNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(SelfNode, _ANode);

  var _super = _createSuper(SelfNode);

  function SelfNode() {
    (0, _classCallCheck2["default"])(this, SelfNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(SelfNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.SELF;
    }
  }]);
  return SelfNode;
}(_ANode2["default"]);

exports["default"] = SelfNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],183:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireWildcard(require("./ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var UnitNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(UnitNode, _ANode);

  var _super = _createSuper(UnitNode);

  function UnitNode() {
    (0, _classCallCheck2["default"])(this, UnitNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(UnitNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode2.NODE_TYPES.UNIT;
    }
  }]);
  return UnitNode;
}(_ANode2["default"]);

exports["default"] = UnitNode;

},{"./ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],184:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VariableNode2 = _interopRequireDefault(require("./VariableNode.js"));

var _ANode = require("../ANode.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AudioVariableNode = /*#__PURE__*/function (_VariableNode) {
  (0, _inherits2["default"])(AudioVariableNode, _VariableNode);

  var _super = _createSuper(AudioVariableNode);

  function AudioVariableNode() {
    (0, _classCallCheck2["default"])(this, AudioVariableNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AudioVariableNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode.NODE_TYPES.VAR_AUDIO;
    }
  }]);
  return AudioVariableNode;
}(_VariableNode2["default"]);

exports["default"] = AudioVariableNode;

},{"../ANode.js":172,"./VariableNode.js":191,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],185:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VariableNode2 = _interopRequireDefault(require("./VariableNode.js"));

var _ANode = require("../ANode.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var BooleanVariableNode = /*#__PURE__*/function (_VariableNode) {
  (0, _inherits2["default"])(BooleanVariableNode, _VariableNode);

  var _super = _createSuper(BooleanVariableNode);

  function BooleanVariableNode() {
    (0, _classCallCheck2["default"])(this, BooleanVariableNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(BooleanVariableNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode.NODE_TYPES.VAR_BOOLEAN;
    }
  }]);
  return BooleanVariableNode;
}(_VariableNode2["default"]);

exports["default"] = BooleanVariableNode;

},{"../ANode.js":172,"./VariableNode.js":191,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],186:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VariableNode2 = _interopRequireDefault(require("./VariableNode.js"));

var _ANode = require("../ANode.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ComponentVariableNode = /*#__PURE__*/function (_VariableNode) {
  (0, _inherits2["default"])(ComponentVariableNode, _VariableNode);

  var _super = _createSuper(ComponentVariableNode);

  function ComponentVariableNode() {
    (0, _classCallCheck2["default"])(this, ComponentVariableNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ComponentVariableNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode.NODE_TYPES.VAR_COMPONENT;
    }
  }]);
  return ComponentVariableNode;
}(_VariableNode2["default"]);

exports["default"] = ComponentVariableNode;

},{"../ANode.js":172,"./VariableNode.js":191,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],187:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VariableNode2 = _interopRequireDefault(require("./VariableNode.js"));

var _ANode = require("../ANode.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MaskGroupVariableNode = /*#__PURE__*/function (_VariableNode) {
  (0, _inherits2["default"])(MaskGroupVariableNode, _VariableNode);

  var _super = _createSuper(MaskGroupVariableNode);

  function MaskGroupVariableNode() {
    (0, _classCallCheck2["default"])(this, MaskGroupVariableNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MaskGroupVariableNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode.NODE_TYPES.VAR_MASK_GROUP;
    }
  }]);
  return MaskGroupVariableNode;
}(_VariableNode2["default"]);

exports["default"] = MaskGroupVariableNode;

},{"../ANode.js":172,"./VariableNode.js":191,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],188:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VariableNode2 = _interopRequireDefault(require("./VariableNode.js"));

var _ANode = require("../ANode.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NumberVariableNode = /*#__PURE__*/function (_VariableNode) {
  (0, _inherits2["default"])(NumberVariableNode, _VariableNode);

  var _super = _createSuper(NumberVariableNode);

  function NumberVariableNode() {
    (0, _classCallCheck2["default"])(this, NumberVariableNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(NumberVariableNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode.NODE_TYPES.VAR_NUMBER;
    }
  }]);
  return NumberVariableNode;
}(_VariableNode2["default"]);

exports["default"] = NumberVariableNode;

},{"../ANode.js":172,"./VariableNode.js":191,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],189:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VariableNode2 = _interopRequireDefault(require("./VariableNode.js"));

var _ANode = require("../ANode.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var StringVariableNode = /*#__PURE__*/function (_VariableNode) {
  (0, _inherits2["default"])(StringVariableNode, _VariableNode);

  var _super = _createSuper(StringVariableNode);

  function StringVariableNode() {
    (0, _classCallCheck2["default"])(this, StringVariableNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(StringVariableNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode.NODE_TYPES.VAR_STRING;
    }
  }]);
  return StringVariableNode;
}(_VariableNode2["default"]);

exports["default"] = StringVariableNode;

},{"../ANode.js":172,"./VariableNode.js":191,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],190:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _VariableNode2 = _interopRequireDefault(require("./VariableNode.js"));

var _ANode = require("../ANode.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ToggleVariableNode = /*#__PURE__*/function (_VariableNode) {
  (0, _inherits2["default"])(ToggleVariableNode, _VariableNode);

  var _super = _createSuper(ToggleVariableNode);

  function ToggleVariableNode() {
    (0, _classCallCheck2["default"])(this, ToggleVariableNode);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ToggleVariableNode, [{
    key: "getType",

    /**
     * @override
     */
    value: function getType() {
      return _ANode.NODE_TYPES.VAR_TOGGLE;
    }
  }]);
  return ToggleVariableNode;
}(_VariableNode2["default"]);

exports["default"] = ToggleVariableNode;

},{"../ANode.js":172,"./VariableNode.js":191,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],191:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ANode2 = _interopRequireDefault(require("../ANode.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var VariableNode = /*#__PURE__*/function (_ANode) {
  (0, _inherits2["default"])(VariableNode, _ANode);

  var _super = _createSuper(VariableNode);

  function VariableNode() {
    (0, _classCallCheck2["default"])(this, VariableNode);
    return _super.apply(this, arguments);
  }

  return VariableNode;
}(_ANode2["default"]);

exports["default"] = VariableNode;

},{"../ANode.js":172,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],192:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AStackFunction2 = _interopRequireDefault(require("../function/AStackFunction.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AReference = /*#__PURE__*/function (_AStackFunction) {
  (0, _inherits2["default"])(AReference, _AStackFunction);

  var _super = _createSuper(AReference);

  /**
   * @param {string} value
   */
  function AReference(value) {
    (0, _classCallCheck2["default"])(this, AReference);
    return _super.call(this, 'Reference');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(AReference, [{
    key: "initAttributes",
    value: function initAttributes() {
      this.addInput('target', _AttributeType.TYPES.STRING);
    }
    /**
     * @override
     */

  }, {
    key: "createStack",
    value: function createStack() {}
  }]);
  return AReference;
}(_AStackFunction2["default"]);

exports["default"] = AReference;

},{"../../pobject/AttributeType.js":263,"../function/AStackFunction.js":117,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],193:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEmptyStackFunction2 = _interopRequireDefault(require("../function/AEmptyStackFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ASelf = /*#__PURE__*/function (_AEmptyStackFunction) {
  (0, _inherits2["default"])(ASelf, _AEmptyStackFunction);

  var _super = _createSuper(ASelf);

  /**
   * @param {string} value
   */
  function ASelf(value) {
    (0, _classCallCheck2["default"])(this, ASelf);
    return _super.call(this, 'Self');
  }

  return ASelf;
}(_AEmptyStackFunction2["default"]);

exports["default"] = ASelf;

},{"../function/AEmptyStackFunction.js":115,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],194:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AStackFunction2 = _interopRequireDefault(require("../function/AStackFunction.js"));

var _StackOperation = _interopRequireWildcard(require("../../operation/StackOperation.js"));

var _StackRegister = require("../../operation/StackRegister.js");

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AUnit = /*#__PURE__*/function (_AStackFunction) {
  (0, _inherits2["default"])(AUnit, _AStackFunction);

  var _super = _createSuper(AUnit);

  /**
   * @param {number|string} value
   */
  function AUnit(value) {
    var _this;

    (0, _classCallCheck2["default"])(this, AUnit);
    _this = _super.call(this, 'Unit');
    _this.stack = [new _StackOperation["default"](_StackOperation.OPERATIONS.PUSH, _StackRegister.CONSTANTS.RESULT, "".concat(value))];

    _this.setName("".concat(value));

    _this.addOutput(_AttributeType.TYPES.NUMBER);

    return _this;
  }

  (0, _createClass2["default"])(AUnit, [{
    key: "createStack",
    value: function createStack() {}
  }, {
    key: "initAttributes",
    value: function initAttributes() {}
  }]);
  return AUnit;
}(_AStackFunction2["default"]);

exports["default"] = AUnit;

},{"../../operation/StackOperation.js":241,"../../operation/StackRegister.js":243,"../../pobject/AttributeType.js":263,"../function/AStackFunction.js":117,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],195:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AVariable2 = _interopRequireDefault(require("./AVariable.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AAudioVariable = /*#__PURE__*/function (_AVariable) {
  (0, _inherits2["default"])(AAudioVariable, _AVariable);

  var _super = _createSuper(AAudioVariable);

  /**
   * @param {string} name
   */
  function AAudioVariable(name) {
    (0, _classCallCheck2["default"])(this, AAudioVariable);
    return _super.call(this, _AttributeType.TYPES.AUDIO, name);
  }

  return AAudioVariable;
}(_AVariable2["default"]);

exports["default"] = AAudioVariable;

},{"../../pobject/AttributeType.js":263,"./AVariable.js":202,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],196:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AVariable2 = _interopRequireDefault(require("./AVariable.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ABooleanVariable = /*#__PURE__*/function (_AVariable) {
  (0, _inherits2["default"])(ABooleanVariable, _AVariable);

  var _super = _createSuper(ABooleanVariable);

  /**
   * @param {string} name
   */
  function ABooleanVariable(name) {
    (0, _classCallCheck2["default"])(this, ABooleanVariable);
    return _super.call(this, _AttributeType.TYPES.BOOLEAN, name);
  }

  return ABooleanVariable;
}(_AVariable2["default"]);

exports["default"] = ABooleanVariable;

},{"../../pobject/AttributeType.js":263,"./AVariable.js":202,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],197:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AVariable2 = _interopRequireDefault(require("./AVariable.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AComponentVariable = /*#__PURE__*/function (_AVariable) {
  (0, _inherits2["default"])(AComponentVariable, _AVariable);

  var _super = _createSuper(AComponentVariable);

  /**
   * @param {string} name
   */
  function AComponentVariable(name) {
    (0, _classCallCheck2["default"])(this, AComponentVariable);
    return _super.call(this, _AttributeType.TYPES.COMPONENT_INSTANCE, name);
  }

  return AComponentVariable;
}(_AVariable2["default"]);

exports["default"] = AComponentVariable;

},{"../../pobject/AttributeType.js":263,"./AVariable.js":202,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],198:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AVariable2 = _interopRequireDefault(require("./AVariable.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AMaskGroupVariable = /*#__PURE__*/function (_AVariable) {
  (0, _inherits2["default"])(AMaskGroupVariable, _AVariable);

  var _super = _createSuper(AMaskGroupVariable);

  /**
   * @param {string} name
   */
  function AMaskGroupVariable(name) {
    (0, _classCallCheck2["default"])(this, AMaskGroupVariable);
    return _super.call(this, _AttributeType.TYPES.MASK_GROUP_INSTANCE, name);
  }

  return AMaskGroupVariable;
}(_AVariable2["default"]);

exports["default"] = AMaskGroupVariable;

},{"../../pobject/AttributeType.js":263,"./AVariable.js":202,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],199:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AVariable2 = _interopRequireDefault(require("./AVariable.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ANumberVariable = /*#__PURE__*/function (_AVariable) {
  (0, _inherits2["default"])(ANumberVariable, _AVariable);

  var _super = _createSuper(ANumberVariable);

  /**
   * @param {string} name
   */
  function ANumberVariable(name) {
    (0, _classCallCheck2["default"])(this, ANumberVariable);
    return _super.call(this, _AttributeType.TYPES.NUMBER, name);
  }

  return ANumberVariable;
}(_AVariable2["default"]);

exports["default"] = ANumberVariable;

},{"../../pobject/AttributeType.js":263,"./AVariable.js":202,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],200:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AVariable2 = _interopRequireDefault(require("./AVariable.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AStringVariable = /*#__PURE__*/function (_AVariable) {
  (0, _inherits2["default"])(AStringVariable, _AVariable);

  var _super = _createSuper(AStringVariable);

  /**
   * @param {string} name
   */
  function AStringVariable(name) {
    (0, _classCallCheck2["default"])(this, AStringVariable);
    return _super.call(this, _AttributeType.TYPES.STRING, name);
  }

  return AStringVariable;
}(_AVariable2["default"]);

exports["default"] = AStringVariable;

},{"../../pobject/AttributeType.js":263,"./AVariable.js":202,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],201:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AVariable2 = _interopRequireDefault(require("./AVariable.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AToggleVariable = /*#__PURE__*/function (_AVariable) {
  (0, _inherits2["default"])(AToggleVariable, _AVariable);

  var _super = _createSuper(AToggleVariable);

  /**
   * @param {string} name
   */
  function AToggleVariable(name) {
    (0, _classCallCheck2["default"])(this, AToggleVariable);
    return _super.call(this, _AttributeType.TYPES.BOOLEAN, name);
  }

  return AToggleVariable;
}(_AVariable2["default"]);

exports["default"] = AToggleVariable;

},{"../../pobject/AttributeType.js":263,"./AVariable.js":202,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],202:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AEmptyStackFunction2 = _interopRequireDefault(require("../function/AEmptyStackFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var AVariable = /*#__PURE__*/function (_AEmptyStackFunction) {
  (0, _inherits2["default"])(AVariable, _AEmptyStackFunction);

  var _super = _createSuper(AVariable);

  /**
   * @param {string} name
   * @param {string} type
   */
  function AVariable(type, name) {
    var _this;

    (0, _classCallCheck2["default"])(this, AVariable);
    _this = _super.call(this, 'Variable');

    _this.setName("".concat(name));

    _this.addOutput(type);

    return _this;
  }

  return AVariable;
}(_AEmptyStackFunction2["default"]);

exports["default"] = AVariable;

},{"../function/AEmptyStackFunction.js":115,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],203:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Unit = require("../unit/Unit.js");

var _RectShapeGenerator = _interopRequireDefault(require("./shape/rect/RectShapeGenerator.js"));

var _ArrowRightShapeGenerator = _interopRequireDefault(require("./shape/arrow/ArrowRightShapeGenerator.js"));

var _ArrowDownShapeGenerator = _interopRequireDefault(require("./shape/arrow/ArrowDownShapeGenerator.js"));

var _CircleShapeGenerator = _interopRequireDefault(require("./shape/circle/CircleShapeGenerator.js"));

var _ArrowRectRightShapeGenerator = _interopRequireDefault(require("./shape/arrowrect/ArrowRectRightShapeGenerator.js"));

var _ArrowRectDownShapeGenerator = _interopRequireDefault(require("./shape/arrowrect/ArrowRectDownShapeGenerator.js"));

var _GridShapeGenerator = _interopRequireDefault(require("./shape/grid/GridShapeGenerator.js"));

var _LineShapeGenerator = _interopRequireDefault(require("./shape/line/LineShapeGenerator.js"));

var _RectCrossShapeGenerator = _interopRequireDefault(require("./shape/rect/RectCrossShapeGenerator.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _NodeShapeGenerator = _interopRequireDefault(require("./shape/node/NodeShapeGenerator.js"));

var _CameraShapeGenerator = _interopRequireDefault(require("./shape/camera/CameraShapeGenerator.js"));

var _LightPointShapeGenerator = _interopRequireDefault(require("./shape/light/LightPointShapeGenerator.js"));

/**
 * @abstract
 */
var ShapeGenerator = /*#__PURE__*/function () {
  function ShapeGenerator() {
    (0, _classCallCheck2["default"])(this, ShapeGenerator);
  }

  (0, _createClass2["default"])(ShapeGenerator, [{
    key: "draw",

    /**
     * @abstract
     * @param {Unit} unit
     * @param {DataContext} dataContext
     */
    value: function draw(unit, dataContext) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var type = this.getShapeTypeGenerator(meshComponent.getShape());
      new type().draw(unit, dataContext);
    }
    /**
     * @param {string} shape
     * @return {Class<TypeShapeGenerator>}
     */

  }, {
    key: "getShapeTypeGenerator",
    value: function getShapeTypeGenerator(shape) {
      switch (shape) {
        case _Unit.PrimitiveShape.RECT:
          return _RectShapeGenerator["default"];

        case _Unit.PrimitiveShape.RECT_CROSS:
          return _RectCrossShapeGenerator["default"];

        case _Unit.PrimitiveShape.CAMERA:
          return _CameraShapeGenerator["default"];

        case _Unit.PrimitiveShape.LIGHT_POINT:
          return _LightPointShapeGenerator["default"];

        case _Unit.PrimitiveShape.ARROW_RIGHT:
          return _ArrowRightShapeGenerator["default"];

        case _Unit.PrimitiveShape.ARROW_DOWN:
          return _ArrowDownShapeGenerator["default"];

        case _Unit.PrimitiveShape.ARROW_RECT_RIGHT:
          return _ArrowRectRightShapeGenerator["default"];

        case _Unit.PrimitiveShape.ARROW_RECT_DOWN:
          return _ArrowRectDownShapeGenerator["default"];

        case _Unit.PrimitiveShape.CIRCLE:
          return _CircleShapeGenerator["default"];

        case _Unit.PrimitiveShape.GRID:
          return _GridShapeGenerator["default"];

        case _Unit.PrimitiveShape.LINE:
          return _LineShapeGenerator["default"];

        case _Unit.PrimitiveShape.NODE:
          return _NodeShapeGenerator["default"];

        default:
          throw new TypeError("".concat(shape, " not supported by ShapeGenerator"));
      }
    }
    /**
     * @return {ShapeGenerator}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return ShapeGenerator;
}();

exports["default"] = ShapeGenerator;
(0, _defineProperty2["default"])(ShapeGenerator, "instance", void 0);

},{"../component/internal/MeshComponent.js":48,"../unit/Unit.js":327,"./shape/arrow/ArrowDownShapeGenerator.js":210,"./shape/arrow/ArrowRightShapeGenerator.js":211,"./shape/arrowrect/ArrowRectDownShapeGenerator.js":213,"./shape/arrowrect/ArrowRectRightShapeGenerator.js":214,"./shape/camera/CameraShapeGenerator.js":216,"./shape/circle/CircleShapeGenerator.js":217,"./shape/grid/GridShapeGenerator.js":218,"./shape/light/LightPointShapeGenerator.js":219,"./shape/line/LineShapeGenerator.js":220,"./shape/node/NodeShapeGenerator.js":221,"./shape/rect/RectCrossShapeGenerator.js":222,"./shape/rect/RectShapeGenerator.js":223,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],204:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AssetScriptXmlGenerator = _interopRequireDefault(require("../script/AssetScriptXmlGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetAnimationScriptGenerator = /*#__PURE__*/function (_AssetScriptXmlGenera) {
  (0, _inherits2["default"])(AssetAnimationScriptGenerator, _AssetScriptXmlGenera);

  var _super = _createSuper(AssetAnimationScriptGenerator);

  function AssetAnimationScriptGenerator() {
    (0, _classCallCheck2["default"])(this, AssetAnimationScriptGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AssetAnimationScriptGenerator, null, [{
    key: "get",

    /**
     * @return {AssetAnimationScriptGenerator}
     */
    value: function get() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(AssetAnimationScriptGenerator), "get", this).call(this);
    }
  }]);
  return AssetAnimationScriptGenerator;
}(_AssetScriptXmlGenerator["default"]);

exports["default"] = AssetAnimationScriptGenerator;

},{"../script/AssetScriptXmlGenerator.js":208,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],205:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var AssetAnimationXmlGenerator = /*#__PURE__*/function () {
  function AssetAnimationXmlGenerator() {
    (0, _classCallCheck2["default"])(this, AssetAnimationXmlGenerator);
  }

  (0, _createClass2["default"])(AssetAnimationXmlGenerator, [{
    key: "generate",

    /**
     * @param {Animation} animation
     * @return {string}
     */
    value: function generate(animation) {
      var xmlSerializer = new XMLSerializer();
      var root = document.implementation.createDocument('', '', null);
      var parentNode = root.createElement('animation');
      parentNode.setAttribute('id', "".concat(animation.getId()));
      parentNode.setAttribute('name', animation.getName());
      parentNode.setAttribute('samples', "".concat(animation.getSamples()));
      parentNode.setAttribute('length', "".concat(animation.getLengthSecond()));
      animation.getFrames().forEach(function (keyframe) {
        var nodeNode = root.createElement('frame');
        nodeNode.setAttribute('id', "".concat(keyframe.getId()));
        nodeNode.setAttribute('asset', "".concat(keyframe.getAssetId()));
        nodeNode.setAttribute('time', "".concat(keyframe.getTime()));
        parentNode.appendChild(nodeNode);
      });
      root.appendChild(parentNode);
      return xmlSerializer.serializeToString(root);
    }
    /**
     * @return {AssetAnimationXmlGenerator}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return AssetAnimationXmlGenerator;
}();

exports["default"] = AssetAnimationXmlGenerator;
(0, _defineProperty2["default"])(AssetAnimationXmlGenerator, "instance", void 0);

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],206:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _AssetScriptGenerator2 = _interopRequireDefault(require("./AssetScriptGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var AssetScriptCodeGenerator = /*#__PURE__*/function (_AssetScriptGenerator) {
  (0, _inherits2["default"])(AssetScriptCodeGenerator, _AssetScriptGenerator);

  var _super = _createSuper(AssetScriptCodeGenerator);

  function AssetScriptCodeGenerator() {
    (0, _classCallCheck2["default"])(this, AssetScriptCodeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AssetScriptCodeGenerator, [{
    key: "generate",

    /**
     * @override
     * @param {AScript} flow
     * @return {string}
     */
    value: function generate(flow) {
      return "class ".concat(flow.getName().replace(' ', ''), " {}");
    }
    /**
     * @return {AssetScriptCodeGenerator}
     */

  }], [{
    key: "get",
    value: function get() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(AssetScriptCodeGenerator), "get", this).call(this);
    }
  }]);
  return AssetScriptCodeGenerator;
}(_AssetScriptGenerator2["default"]);

exports["default"] = AssetScriptCodeGenerator;
(0, _defineProperty2["default"])(AssetScriptCodeGenerator, "instance", void 0);

},{"./AssetScriptGenerator.js":207,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],207:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

/**
 * @abstract
 */
var AssetScriptGenerator = /*#__PURE__*/function () {
  function AssetScriptGenerator() {
    (0, _classCallCheck2["default"])(this, AssetScriptGenerator);
  }

  (0, _createClass2["default"])(AssetScriptGenerator, [{
    key: "generate",

    /**
     * @abstract
     * @param {AScript} flow
     * @return {string}
     */
    value: function generate(flow) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".generate must be implemented"));
    }
    /**
     * @return {*}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return AssetScriptGenerator;
}();

exports["default"] = AssetScriptGenerator;
(0, _defineProperty2["default"])(AssetScriptGenerator, "instance", void 0);

},{"../../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],208:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _ScriptHelper = _interopRequireDefault(require("../../utils/ScriptHelper.js"));

var _AssetScriptGenerator2 = _interopRequireDefault(require("./AssetScriptGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var AssetScriptXmlGenerator = /*#__PURE__*/function (_AssetScriptGenerator) {
  (0, _inherits2["default"])(AssetScriptXmlGenerator, _AssetScriptGenerator);

  var _super = _createSuper(AssetScriptXmlGenerator);

  function AssetScriptXmlGenerator() {
    (0, _classCallCheck2["default"])(this, AssetScriptXmlGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AssetScriptXmlGenerator, [{
    key: "generate",

    /**
     * @override
     * @param {AScript} flow
     * @return {string}
     */
    value: function generate(flow) {
      var _flow$getCamera$getPo = flow.getCamera().getPosition(),
          x = _flow$getCamera$getPo.x,
          y = _flow$getCamera$getPo.y,
          z = _flow$getCamera$getPo.z;

      var xmlSerializer = new XMLSerializer();
      var root = document.implementation.createDocument('', '', null);
      var parentNode = root.createElement('flow');
      parentNode.setAttribute('type', 'class');
      parentNode.setAttribute('name', flow.getName());
      parentNode.setAttribute('view', "".concat(x, ",").concat(y, ",").concat(z));
      flow.getNodes().forEach(function (node) {
        var nodeNode = root.createElement('node');

        var nodeType = _ScriptHelper["default"].getNodeType(node);

        var _node$getPosition = node.getPosition(),
            nodePositionX = _node$getPosition.x,
            nodePositionY = _node$getPosition.y;

        nodeNode.setAttribute('type', nodeType);
        nodeNode.setAttribute('id', "".concat(node.getId()));
        nodeNode.setAttribute('position', "".concat(nodePositionX, ",").concat(nodePositionY));
        nodeNode.setAttribute('value', node.getSourceName());
        parentNode.appendChild(nodeNode);
      });
      flow.getNodes().forEach(function (node) {
        node.getInputs().forEach(function (input) {
          if (flow.findNodeById(input.getSourceNodeId())) {
            var edgeNode = root.createElement('edge');
            edgeNode.setAttribute('source', "".concat(input.getSourceNodeId()));
            edgeNode.setAttribute('target', "".concat(node.getId()));
            edgeNode.setAttribute('connection', input.getTargetName() || '');
            parentNode.appendChild(edgeNode);
          }
        });
      });
      root.appendChild(parentNode);
      return xmlSerializer.serializeToString(root);
    }
    /**
     * @return {AssetScriptXmlGenerator|*}
     */

  }], [{
    key: "get",
    value: function get() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(AssetScriptXmlGenerator), "get", this).call(this);
    }
  }]);
  return AssetScriptXmlGenerator;
}(_AssetScriptGenerator2["default"]);

exports["default"] = AssetScriptXmlGenerator;
(0, _defineProperty2["default"])(AssetScriptXmlGenerator, "instance", void 0);

},{"../../utils/ScriptHelper.js":367,"./AssetScriptGenerator.js":207,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],209:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * @abstract
 */
var TypeShapeGenerator = /*#__PURE__*/function () {
  function TypeShapeGenerator() {
    (0, _classCallCheck2["default"])(this, TypeShapeGenerator);
  }

  (0, _createClass2["default"])(TypeShapeGenerator, [{
    key: "draw",

    /**
     * @abstract
     * @param {Unit} unit
     * @param {DataContext} dataContext
     * @return {void}
     */
    value: function draw(unit, dataContext) {
      throw new TypeError("".concat(this.constructor.name, ".draw must be implemented"));
    }
  }]);
  return TypeShapeGenerator;
}();

exports["default"] = TypeShapeGenerator;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],210:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../utils/Vector.js"));

var _ArrowShapeGenerator2 = _interopRequireDefault(require("./ArrowShapeGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ArrowDownShapeGenerator = /*#__PURE__*/function (_ArrowShapeGenerator) {
  (0, _inherits2["default"])(ArrowDownShapeGenerator, _ArrowShapeGenerator);

  var _super = _createSuper(ArrowDownShapeGenerator);

  function ArrowDownShapeGenerator() {
    (0, _classCallCheck2["default"])(this, ArrowDownShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ArrowDownShapeGenerator, [{
    key: "convertVertices",

    /**
     * @override
     */
    value: function convertVertices(vertices, size) {
      return [new _Vector["default"]({
        x: size.width / 2,
        y: 0
      }), new _Vector["default"]({
        x: size.width / 2,
        y: size.height
      })];
    }
  }]);
  return ArrowDownShapeGenerator;
}(_ArrowShapeGenerator2["default"]);

exports["default"] = ArrowDownShapeGenerator;

},{"../../../utils/Vector.js":370,"./ArrowShapeGenerator.js":212,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],211:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../utils/Vector.js"));

var _ArrowShapeGenerator2 = _interopRequireDefault(require("./ArrowShapeGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ArrowRightShapeGenerator = /*#__PURE__*/function (_ArrowShapeGenerator) {
  (0, _inherits2["default"])(ArrowRightShapeGenerator, _ArrowShapeGenerator);

  var _super = _createSuper(ArrowRightShapeGenerator);

  function ArrowRightShapeGenerator() {
    (0, _classCallCheck2["default"])(this, ArrowRightShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ArrowRightShapeGenerator, [{
    key: "convertVertices",

    /**
     * @override
     */
    value: function convertVertices(vertices, size) {
      return vertices.map(function (_ref) {
        var x = _ref.x,
            y = _ref.y,
            z = _ref.z;
        return new _Vector["default"]({
          x: x,
          y: y + size.getHeight() / 2,
          z: z
        });
      });
    }
  }]);
  return ArrowRightShapeGenerator;
}(_ArrowShapeGenerator2["default"]);

exports["default"] = ArrowRightShapeGenerator;

},{"../../../utils/Vector.js":370,"./ArrowShapeGenerator.js":212,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],212:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

var _UnitHelper = _interopRequireDefault(require("../../../utils/UnitHelper.js"));

var _MeshComponent = _interopRequireDefault(require("../../../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var ArrowShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(ArrowShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(ArrowShapeGenerator);

  function ArrowShapeGenerator() {
    (0, _classCallCheck2["default"])(this, ArrowShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ArrowShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var context = dataContext.context;
      var vertices = this.convertVertices(meshComponent.getVertices(), meshComponent.getSize());
      context.beginPath();
      this.drawLine(dataContext, vertices);
      this.drawArrow(dataContext, vertices);
    }
    /**
     * @return {{headLength: number, headAngle: number}}
     */

  }, {
    key: "getArrowProps",
    value: function getArrowProps() {
      return {
        headLength: 20,
        headAngle: Math.PI / 12
      };
    }
    /**
     * @abstract
     * @param {Vector[]} vertices
     * @param {Size} size
     * @return {Vector[]}
     */

  }, {
    key: "convertVertices",
    value: function convertVertices(vertices, size) {
      throw new TypeError("".concat(this.constructor.name, ".convertVertices must be implemented"));
    }
    /**
     * @param {DataContext} dataContext
     * @param {Vector[]} vertices
     */

  }, {
    key: "drawLine",
    value: function drawLine(dataContext, vertices) {
      var context = dataContext.context,
          camera = dataContext.camera;

      var scaleVertices = _UnitHelper["default"].scaleVertices(camera, vertices);

      context.moveTo(scaleVertices[0].x, scaleVertices[0].y);
      context.lineTo(scaleVertices[1].x, scaleVertices[1].y);
    }
    /**
     * @param {DataContext} dataContext
     * @param {Vector[]} vertices
     */

  }, {
    key: "drawArrow",
    value: function drawArrow(dataContext, vertices) {
      var context = dataContext.context,
          camera = dataContext.camera;

      var scaleVertices = _UnitHelper["default"].scaleVertices(camera, vertices);

      var arrowProps = this.getArrowProps();
      var pointFrom = scaleVertices[0];
      var pointTo = scaleVertices[1];
      var dx = pointTo.x - pointFrom.x;
      var dy = pointTo.y - pointFrom.y;
      var angle = Math.atan2(dy, dx);
      context.moveTo(pointTo.x, pointTo.y);
      context.lineTo(pointTo.x - arrowProps.headLength * Math.cos(angle - arrowProps.headAngle), pointTo.y - arrowProps.headLength * Math.sin(angle - arrowProps.headAngle));
      context.moveTo(pointTo.x, pointTo.y);
      context.lineTo(pointTo.x - arrowProps.headLength * Math.cos(angle + arrowProps.headAngle), pointTo.y - arrowProps.headLength * Math.sin(angle + arrowProps.headAngle));
    }
  }]);
  return ArrowShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = ArrowShapeGenerator;

},{"../../../component/internal/MeshComponent.js":48,"../../../utils/UnitHelper.js":369,"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],213:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ArrowRectShapeGenerator = _interopRequireDefault(require("./ArrowRectShapeGenerator.js"));

var _UnitHelper = _interopRequireDefault(require("../../../utils/UnitHelper.js"));

var _Vector = _interopRequireDefault(require("../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ArrowRectDownShapeGenerator = /*#__PURE__*/function (_ArrowRectShapeGenera) {
  (0, _inherits2["default"])(ArrowRectDownShapeGenerator, _ArrowRectShapeGenera);

  var _super = _createSuper(ArrowRectDownShapeGenerator);

  function ArrowRectDownShapeGenerator() {
    (0, _classCallCheck2["default"])(this, ArrowRectDownShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ArrowRectDownShapeGenerator, [{
    key: "drawScaleRect",

    /**
     * @override
     */
    value: function drawScaleRect(dataContext, vertices) {
      var context = dataContext.context,
          camera = dataContext.camera;

      var scaleVertices = _UnitHelper["default"].scaleVertices(camera, vertices);

      var _this$getArrowProps = this.getArrowProps(),
          headSize = _this$getArrowProps.headSize;

      var _scaleVertices$ = scaleVertices[1],
          x = _scaleVertices$.x,
          y = _scaleVertices$.y;
      context.rect(x - headSize / 2, y - headSize, headSize, headSize);
    }
    /**
     * @override
     */

  }, {
    key: "convertVertices",
    value: function convertVertices(vertices, size) {
      return [new _Vector["default"]({
        x: size.width / 2,
        y: 0
      }), new _Vector["default"]({
        x: size.width / 2,
        y: size.height
      })];
    }
  }]);
  return ArrowRectDownShapeGenerator;
}(_ArrowRectShapeGenerator["default"]);

exports["default"] = ArrowRectDownShapeGenerator;

},{"../../../utils/UnitHelper.js":369,"../../../utils/Vector.js":370,"./ArrowRectShapeGenerator.js":215,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],214:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ArrowRectShapeGenerator = _interopRequireDefault(require("./ArrowRectShapeGenerator.js"));

var _UnitHelper = _interopRequireDefault(require("../../../utils/UnitHelper.js"));

var _Vector = _interopRequireDefault(require("../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ArrowRectRightShapeGenerator = /*#__PURE__*/function (_ArrowRectShapeGenera) {
  (0, _inherits2["default"])(ArrowRectRightShapeGenerator, _ArrowRectShapeGenera);

  var _super = _createSuper(ArrowRectRightShapeGenerator);

  function ArrowRectRightShapeGenerator() {
    (0, _classCallCheck2["default"])(this, ArrowRectRightShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ArrowRectRightShapeGenerator, [{
    key: "drawScaleRect",

    /**
     * @override
     */
    value: function drawScaleRect(dataContext, vertices) {
      var context = dataContext.context,
          camera = dataContext.camera;

      var scaleVertices = _UnitHelper["default"].scaleVertices(camera, vertices);

      var _this$getArrowProps = this.getArrowProps(),
          headSize = _this$getArrowProps.headSize;

      var _scaleVertices$ = scaleVertices[1],
          x = _scaleVertices$.x,
          y = _scaleVertices$.y;
      context.rect(x - headSize, y - headSize / 2, headSize, headSize);
    }
    /**
     * @override
     */

  }, {
    key: "convertVertices",
    value: function convertVertices(vertices, size) {
      return vertices.map(function (_ref) {
        var x = _ref.x,
            y = _ref.y,
            z = _ref.z;
        return new _Vector["default"]({
          x: x,
          y: y + size.getHeight() / 2,
          z: z
        });
      });
    }
  }]);
  return ArrowRectRightShapeGenerator;
}(_ArrowRectShapeGenerator["default"]);

exports["default"] = ArrowRectRightShapeGenerator;

},{"../../../utils/UnitHelper.js":369,"../../../utils/Vector.js":370,"./ArrowRectShapeGenerator.js":215,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],215:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

var _UnitHelper = _interopRequireDefault(require("../../../utils/UnitHelper.js"));

var _MeshComponent = _interopRequireDefault(require("../../../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var ArrowRectShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(ArrowRectShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(ArrowRectShapeGenerator);

  function ArrowRectShapeGenerator() {
    (0, _classCallCheck2["default"])(this, ArrowRectShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ArrowRectShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var context = dataContext.context;
      var vertices = this.convertVertices(meshComponent.getVertices(), meshComponent.getSize());
      context.beginPath();
      this.drawLine(dataContext, vertices);
      this.drawScaleRect(dataContext, vertices);
    }
    /**
     * @return {{headSize: number}}
     */

  }, {
    key: "getArrowProps",
    value: function getArrowProps() {
      return {
        headSize: 10
      };
    }
    /**
     * @param {DataContext} dataContext
     * @param {Vector[]} vertices
     */

  }, {
    key: "drawLine",
    value: function drawLine(dataContext, vertices) {
      var context = dataContext.context,
          camera = dataContext.camera;

      var scaleVertices = _UnitHelper["default"].scaleVertices(camera, vertices);

      context.moveTo(scaleVertices[0].x, scaleVertices[0].y);
      context.lineTo(scaleVertices[1].x, scaleVertices[1].y);
    }
    /**
     * @abstract
     * @param {DataContext} dataContext
     * @param {Vector[]} vertices
     */

  }, {
    key: "drawScaleRect",
    value: function drawScaleRect(dataContext, vertices) {
      throw new TypeError("".concat(this.constructor.name, ".drawRect must be implemented"));
    }
    /**
     * @abstract
     * @param {Vector[]} vertices
     * @param {Size} size
     * @return {Vector[]}
     */

  }, {
    key: "convertVertices",
    value: function convertVertices(vertices, size) {
      throw new TypeError("".concat(this.constructor.name, ".convertVertices must be implemented"));
    }
  }]);
  return ArrowRectShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = ArrowRectShapeGenerator;

},{"../../../component/internal/MeshComponent.js":48,"../../../utils/UnitHelper.js":369,"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],216:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

var _CameraComponent = _interopRequireDefault(require("../../../component/internal/CameraComponent.js"));

var _Vector = _interopRequireDefault(require("../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var CameraShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(CameraShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(CameraShapeGenerator);

  function CameraShapeGenerator() {
    (0, _classCallCheck2["default"])(this, CameraShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(CameraShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var cameraComponent = unit.getComponent(_CameraComponent["default"]);
      var context = dataContext.context,
          scaleSize = dataContext.scaleSize,
          camera = dataContext.camera;
      var width = scaleSize.width,
          height = scaleSize.height;
      var centerSize = new _Vector["default"]({
        x: width / 2,
        y: height / 2
      });

      var trackPoint = _Vector["default"].add(camera.toCameraScale(cameraComponent.getTrackPoint()), centerSize);

      var deadZone = camera.toScaleSize(cameraComponent.getDeadZone()); //camera bounds

      context.beginPath();
      context.rect(0, 0, width, height);
      context.moveTo(0, height / 2);
      context.lineTo(width, height / 2);
      context.moveTo(width / 2, 0);
      context.lineTo(width / 2, height);
      context.fillStyle = 'rgba(40,70,114,0.3)';
      context.fill(); //dead zone

      context.fillStyle = 'rgba(0,0,0,0.2)';
      context.fillRect(centerSize.getX() - deadZone.getWidth() / 2, centerSize.getY() - deadZone.getHeight() / 2, deadZone.getWidth(), deadZone.getHeight()); //tracking point

      var sizeTrackPoint = camera.toScaleNumber(10);
      context.fillStyle = 'rgb(213,199,25)';
      context.fillRect(trackPoint.getX() - sizeTrackPoint / 2, trackPoint.getY() - sizeTrackPoint / 2, sizeTrackPoint, sizeTrackPoint);
    }
  }]);
  return CameraShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = CameraShapeGenerator;

},{"../../../component/internal/CameraComponent.js":42,"../../../utils/Vector.js":370,"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],217:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var CircleShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(CircleShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(CircleShapeGenerator);

  function CircleShapeGenerator() {
    (0, _classCallCheck2["default"])(this, CircleShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(CircleShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var center = dataContext.center,
          context = dataContext.context,
          scaleSize = dataContext.scaleSize;
      var sw = scaleSize.width;
      var radiusScale = Math.abs(sw / 2 - 1);
      context.ellipse(center.x, center.y, radiusScale, radiusScale, 0, 0, 2 * Math.PI);
    }
  }]);
  return CircleShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = CircleShapeGenerator;

},{"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],218:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

var _Size = _interopRequireDefault(require("../../../pobject/Size.js"));

var _MeshComponent = _interopRequireDefault(require("../../../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GridShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(GridShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(GridShapeGenerator);

  function GridShapeGenerator() {
    (0, _classCallCheck2["default"])(this, GridShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GridShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var context = dataContext.context,
          scaleSize = dataContext.scaleSize;
      var sizeScaleRate = scaleSize.width / meshComponent.getSize().getWidth();
      var chunkEachSize = 40 * sizeScaleRate;
      var chunkNbrX = Math.ceil(scaleSize.width / chunkEachSize);
      var chunkNbrY = Math.ceil(scaleSize.height / chunkEachSize);
      var chunkSize = new _Size["default"]({
        width: chunkEachSize,
        height: chunkEachSize
      });
      context.rect(0, 0, scaleSize.width, scaleSize.height);
      Array.from(Array(chunkNbrX * chunkNbrY).keys()).forEach(function (iChunk) {
        context.rect(chunkSize.width * (iChunk % chunkNbrX), chunkSize.height * Math.floor(iChunk / chunkNbrX), chunkSize.width, chunkSize.height);
      });
    }
  }]);
  return GridShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = GridShapeGenerator;

},{"../../../component/internal/MeshComponent.js":48,"../../../pobject/Size.js":268,"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],219:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

var _LightPointComponent = _interopRequireDefault(require("../../../component/internal/LightPointComponent.js"));

var _Maths = _interopRequireDefault(require("../../../utils/Maths.js"));

var _LightHelper = _interopRequireDefault(require("../../../utils/LightHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var LightPointShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(LightPointShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(LightPointShapeGenerator);

  function LightPointShapeGenerator() {
    (0, _classCallCheck2["default"])(this, LightPointShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(LightPointShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var lightComponent = unit.getComponent(_LightPointComponent["default"]);

      var outerAngle = Math.PI * 2 - _Maths["default"].fromDegree(lightComponent.getOuterAngle());

      var innerAngle = Math.PI * 2 - _Maths["default"].fromDegree(lightComponent.getInnerAngle());

      var outerRadius = lightComponent.getOuterRadius();
      var center = dataContext.center,
          context = dataContext.context,
          scaleSize = dataContext.scaleSize,
          camera = dataContext.camera;
      var sw = scaleSize.width * outerRadius / 100;
      var radiusScale = Math.abs(sw / 2 - 1); //calculate light boundaries

      var outerLightBounds = _LightHelper["default"].getLightBounds(center, outerAngle, radiusScale);

      var innerLightBounds = _LightHelper["default"].getLightBounds(center, innerAngle, radiusScale);

      _LightHelper["default"].drawOuterLightBounds(context, outerLightBounds, radiusScale, outerAngle);

      context.stroke();

      _LightHelper["default"].drawInnerLightBounds(context, outerLightBounds.first, innerLightBounds.first, radiusScale);

      context.stroke();

      _LightHelper["default"].drawInnerLightBounds(context, outerLightBounds.second, innerLightBounds.second, radiusScale);

      context.stroke(); //circle bulb

      var sizeBulb = camera.toScaleNumber(10);
      context.beginPath();
      context.arc(center.x, center.y, sizeBulb, 0, Math.PI * 2);
      context.closePath();
      context.fillStyle = 'rgba(255,255,247,0.71)';
      context.fill();
    }
  }]);
  return LightPointShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = LightPointShapeGenerator;

},{"../../../component/internal/LightPointComponent.js":47,"../../../utils/LightHelper.js":362,"../../../utils/Maths.js":363,"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],220:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

var _MeshComponent = _interopRequireDefault(require("../../../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LineShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(LineShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(LineShapeGenerator);

  function LineShapeGenerator() {
    (0, _classCallCheck2["default"])(this, LineShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(LineShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var context = dataContext.context,
          camera = dataContext.camera;
      var vertices = meshComponent.getShapeVertices();

      var _camera$toCameraScale = camera.toCameraScale(vertices[0]),
          x0 = _camera$toCameraScale.x,
          y0 = _camera$toCameraScale.y;

      var _camera$toCameraScale2 = camera.toCameraScale(vertices[1]),
          x1 = _camera$toCameraScale2.x,
          y1 = _camera$toCameraScale2.y;

      context.beginPath();
      context.moveTo(x0, y0);
      context.lineTo(x1, y1);
    }
  }]);
  return LineShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = LineShapeGenerator;

},{"../../../component/internal/MeshComponent.js":48,"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],221:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

var _NodeComponent = _interopRequireDefault(require("../../../component/internal/gui/node/NodeComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _NodeHelper = _interopRequireDefault(require("../../../utils/NodeHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var NodeShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(NodeShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(NodeShapeGenerator);

  function NodeShapeGenerator() {
    (0, _classCallCheck2["default"])(this, NodeShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(NodeShapeGenerator, [{
    key: "draw",

    /**
     * @override
     * @TODO: need some refactoring
     */
    value: function draw(unit, dataContext) {
      var nodeComponent = unit.getComponent(_NodeComponent["default"]);
      var guiPropertyComponent = unit.getComponent(_GUIPropertyComponent["default"]);
      var title = nodeComponent.getTitle();
      var type = nodeComponent.getType();
      var inputs = nodeComponent.getInputs();
      var output = nodeComponent.getOutput();
      var context = dataContext.context,
          scaleSize = dataContext.scaleSize,
          camera = dataContext.camera;
      var width = scaleSize.width,
          height = scaleSize.height; //props

      var _NodeHelper$getNodeGU = _NodeHelper["default"].getNodeGUIProps(type),
          sizeInput = _NodeHelper$getNodeGU.sizeInput,
          fontSize = _NodeHelper$getNodeGU.fontSize,
          heightHead = _NodeHelper$getNodeGU.heightHead,
          shadowBlur = _NodeHelper$getNodeGU.shadowBlur,
          boxColor = _NodeHelper$getNodeGU.boxColor,
          baseInputColor = _NodeHelper$getNodeGU.baseInputColor,
          colorFocused = _NodeHelper$getNodeGU.colorFocused,
          fontColor = _NodeHelper$getNodeGU.fontColor,
          headColor = _NodeHelper$getNodeGU.headColor,
          padding = _NodeHelper$getNodeGU.padding,
          selectColor = _NodeHelper$getNodeGU.selectColor; //convert props to camera scale


      var heightHeadScale = camera.toScaleNumber(heightHead);
      var fontSizeScale = camera.toScaleNumber(fontSize);
      var paddingScale = camera.toScaleNumber(padding);
      var sizeInputScale = camera.toScaleNumber(sizeInput); // box

      var shadowColor = headColor;

      if (guiPropertyComponent.isSelected()) {
        shadowColor = selectColor;
      } else if (guiPropertyComponent.isFocused()) {
        shadowColor = colorFocused;
      }

      context.shadowColor = shadowColor;
      context.shadowBlur = shadowBlur;
      context.fillStyle = boxColor;
      context.strokeStyle = guiPropertyComponent.isSelected() ? selectColor : headColor;
      context.rect(0, 0, width, height);
      context.fill();
      context.stroke();
      context.shadowColor = null;
      context.shadowBlur = 0; //box header

      context.fillStyle = headColor;
      context.fillRect(0, 0, width, heightHeadScale); //box header title

      context.font = "".concat(fontSizeScale, "px Arial");
      context.fillStyle = fontColor;
      context.fillText(title, paddingScale, fontSizeScale + paddingScale); //base input

      if (_NodeHelper["default"].hasBaseInput(type)) {
        var _NodeHelper$getNodeGU2 = _NodeHelper["default"].getNodeGUIInput(type, -1),
            baseInputPosition = _NodeHelper$getNodeGU2.position;

        var baseInputPositionScale = camera.toCameraScale(baseInputPosition);
        context.fillStyle = baseInputColor;
        context.fillRect(baseInputPositionScale.getX(), baseInputPositionScale.getY(), sizeInputScale, sizeInputScale);
      } //other inputs


      inputs.forEach(function (input, index) {
        var _NodeHelper$getNodeGU3 = _NodeHelper["default"].getNodeGUIInput(type, index),
            inputPosition = _NodeHelper$getNodeGU3.position;

        var inputPositionScale = camera.toCameraScale(inputPosition);
        context.fillStyle = headColor;
        context.fillRect(inputPositionScale.getX(), inputPositionScale.getY(), sizeInputScale, sizeInputScale);
        context.fillStyle = fontColor;
        context.fillText(input, inputPositionScale.getX() + sizeInputScale + paddingScale, inputPositionScale.getY() + sizeInputScale);
      }); //output

      if (output || _NodeHelper["default"].hasBaseOutput(type)) {
        var _NodeHelper$getNodeGU4 = _NodeHelper["default"].getNodeGUIOutput(type, camera.fromScaleSize(scaleSize)),
            outputPosition = _NodeHelper$getNodeGU4.position;

        var outputPositionScale = camera.toCameraScale(outputPosition);
        context.fillStyle = baseInputColor;
        context.fillRect(outputPositionScale.getX(), outputPositionScale.getY(), sizeInputScale, sizeInputScale);
      }
    }
  }]);
  return NodeShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = NodeShapeGenerator;

},{"../../../component/internal/gui/node/NodeComponent.js":59,"../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../utils/NodeHelper.js":364,"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],222:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RectCrossShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(RectCrossShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(RectCrossShapeGenerator);

  function RectCrossShapeGenerator() {
    (0, _classCallCheck2["default"])(this, RectCrossShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(RectCrossShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var context = dataContext.context,
          scaleSize = dataContext.scaleSize;
      var width = scaleSize.width,
          height = scaleSize.height;
      context.beginPath();
      context.rect(0, 0, width, height);
      context.moveTo(0, 0);
      context.lineTo(width, height);
      context.moveTo(width, 0);
      context.lineTo(0, height);
    }
  }]);
  return RectCrossShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = RectCrossShapeGenerator;

},{"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],223:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _TypeShapeGenerator2 = _interopRequireDefault(require("../TypeShapeGenerator.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RectShapeGenerator = /*#__PURE__*/function (_TypeShapeGenerator) {
  (0, _inherits2["default"])(RectShapeGenerator, _TypeShapeGenerator);

  var _super = _createSuper(RectShapeGenerator);

  function RectShapeGenerator() {
    (0, _classCallCheck2["default"])(this, RectShapeGenerator);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(RectShapeGenerator, [{
    key: "draw",

    /**
     * @override
     */
    value: function draw(unit, dataContext) {
      var context = dataContext.context,
          scaleSize = dataContext.scaleSize;
      context.rect(0, 0, scaleSize.width, scaleSize.height);
    }
  }]);
  return RectShapeGenerator;
}(_TypeShapeGenerator2["default"]);

exports["default"] = RectShapeGenerator;

},{"../TypeShapeGenerator.js":209,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],224:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

/**
 * Define the layout of the screen
 */
var Layout = function Layout() {
  (0, _classCallCheck2["default"])(this, Layout);
};

Layout.zone = {
  LEFT: 'left',
  TOP: 'top',
  TOP_TAB: 'top-tab',
  BODY: 'body',
  RIGHT: 'right',
  BOTTOM: 'bottom',
  FOOTER: 'footer',
  WINDOW: 'window'
};
Layout.type = {
  DRAW: 'draw',
  ACTION: 'action',
  STYLE: 'style',
  PANEL: 'panel',
  BODY_CONTAINER: 'body-container',
  BODY_ITEM: 'body-item',
  TAB_LIST: 'tab_list',
  TAB_ITEM: 'tab_item',
  PANEL_ACTION: 'panel_action',
  STYLE_COLOR: 'style_color',
  ENTITY_ELEMENT: 'entity_element',
  UNIT_ELEMENT: 'unit_element',
  LAYER_ACTION: 'layer_action',
  LIST_ELEMENT: 'list_element',
  TEXT: 'text',
  FORM: 'form',
  FORM_ELEMENT: 'form_element',
  FORM_INLINE: 'form_inline',
  GRAPH: 'graph',
  ICON: 'icon',
  ICON_TEXT: 'icon-text',
  TREE: 'tree',
  ASSETS: 'assets',
  WRAPPER: 'wrapper',
  FOLDER_ELEMENT: 'folder_element',
  ASSET_ELEMENT: 'asset_element',
  ASSET_VIEW: 'asset_view'
};
Layout.form = {
  CHECKBOX: 'checkbox',
  TEXT: 'text',
  NUMBER: 'number',
  DROPDOWN: 'dropdown',
  FILE: 'file',
  COLOR: 'color',
  RANGE: 'range',
  TEXTAREA: 'textarea',
  WYSIWYG: 'wysiwyg'
};
var _default = Layout;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/interopRequireDefault":12}],225:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Scene2 = _interopRequireDefault(require("./Scene.js"));

var _World = _interopRequireDefault(require("../world/World.js"));

var _Window = _interopRequireDefault(require("../core/Window.js"));

var _ExecutorRegistry = _interopRequireDefault(require("../executor/ExecutorRegistry.js"));

var _MeshGenerationExecutor = _interopRequireDefault(require("../executor/type/MeshGenerationExecutor.js"));

var _GameRenderRunner = require("../runner/renderer/GameRenderRunner.js");

var _GameExecutorRunner = require("../runner/executor/GameExecutorRunner.js");

var _RigidBodyExecutor = _interopRequireDefault(require("../executor/type/RigidBodyExecutor.js"));

var _PhysicsRunner = require("../runner/physics/PhysicsRunner.js");

var _ColliderExecutor = _interopRequireDefault(require("../executor/type/ColliderExecutor.js"));

var _MeshStyleExecutor = _interopRequireDefault(require("../executor/type/MeshStyleExecutor.js"));

var _ScriptExecutor = _interopRequireDefault(require("../executor/type/ScriptExecutor.js"));

var _AnimationScriptExecutor = _interopRequireDefault(require("../executor/type/AnimationScriptExecutor.js"));

var _AnimationMeshExecutor = _interopRequireDefault(require("../executor/type/AnimationMeshExecutor.js"));

var _WorldInitializeRunner = _interopRequireDefault(require("../runner/world/WorldInitializeRunner.js"));

var _ColliderDebugRunner = _interopRequireDefault(require("../runner/debug/ColliderDebugRunner.js"));

var _CameraRunner = _interopRequireDefault(require("../runner/camera/CameraRunner.js"));

var _CameraExecutor = _interopRequireDefault(require("../executor/type/CameraExecutor.js"));

var _LightExecutor = _interopRequireDefault(require("../executor/type/LightExecutor.js"));

var _LightRunner = _interopRequireDefault(require("../runner/light/LightRunner.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {Game}
 * @extends {Loop}
 */
var Game = /*#__PURE__*/function (_Scene) {
  (0, _inherits2["default"])(Game, _Scene);

  var _super = _createSuper(Game);

  /**
   * @type {Game}
   */
  function Game() {
    var _this;

    (0, _classCallCheck2["default"])(this, Game);
    _this = _super.call(this);
    _this.runners = [_WorldInitializeRunner["default"], _ColliderDebugRunner["default"], _GameExecutorRunner.GameExecutorRunner, _GameRenderRunner.GameRenderRunner, _PhysicsRunner.PhysicsRunner, _CameraRunner["default"], _LightRunner["default"]];

    _ExecutorRegistry["default"].get().register([new _MeshGenerationExecutor["default"](), new _RigidBodyExecutor["default"](), new _ColliderExecutor["default"](), new _MeshStyleExecutor["default"](), new _ScriptExecutor["default"](), new _AnimationScriptExecutor["default"](), new _AnimationMeshExecutor["default"](), new _CameraExecutor["default"](), new _LightExecutor["default"]()]);

    return _this;
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(Game, [{
    key: "doInit",
    value: function () {
      var _doInit = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var world, window;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(Game.prototype), "doInit", this).call(this);

              case 2:
                world = _World["default"].get();
                window = _Window["default"].get();
                window.setSize(world.getResolution());
                world.setupCamera();
                world.regenerateAll();
                world.getPhysicsManager().init();

              case 8:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function doInit() {
        return _doInit.apply(this, arguments);
      }

      return doInit;
    }()
  }]);
  return Game;
}(_Scene2["default"]);

(0, _defineProperty2["default"])(Game, "instance", void 0);
var _default = Game;
exports["default"] = _default;

},{"../core/Window.js":78,"../executor/ExecutorRegistry.js":83,"../executor/type/AnimationMeshExecutor.js":84,"../executor/type/AnimationScriptExecutor.js":85,"../executor/type/CameraExecutor.js":86,"../executor/type/ColliderExecutor.js":87,"../executor/type/LightExecutor.js":89,"../executor/type/MeshGenerationExecutor.js":90,"../executor/type/MeshStyleExecutor.js":91,"../executor/type/RigidBodyExecutor.js":92,"../executor/type/ScriptExecutor.js":93,"../runner/camera/CameraRunner.js":310,"../runner/debug/ColliderDebugRunner.js":311,"../runner/executor/GameExecutorRunner.js":312,"../runner/light/LightRunner.js":313,"../runner/physics/PhysicsRunner.js":314,"../runner/renderer/GameRenderRunner.js":315,"../runner/world/WorldInitializeRunner.js":316,"../world/World.js":372,"./Scene.js":228,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],226:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var Loop = /*#__PURE__*/function () {
  function Loop() {
    (0, _classCallCheck2["default"])(this, Loop);
    (0, _defineProperty2["default"])(this, "runners", void 0);
    this.loop = this.loop.bind(this);
    this.runners = [];
  }
  /**
   * @type {Class[]}
   */


  (0, _createClass2["default"])(Loop, [{
    key: "getRunners",

    /**
     * @return {Class[]}
     */
    value: function getRunners() {
      return this.runners;
    }
  }, {
    key: "init",
    value: function () {
      var _init = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.doInit();

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function init() {
        return _init.apply(this, arguments);
      }

      return init;
    }()
    /**
     * @abstract
     */

  }, {
    key: "doInit",
    value: function () {
      var _doInit = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                throw new TypeError('Loop.init must be implemented!');

              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));

      function doInit() {
        return _doInit.apply(this, arguments);
      }

      return doInit;
    }()
    /**
     * @abstract
     */

  }, {
    key: "loop",
    value: function loop() {
      throw new TypeError('Loop.loop must be implemented!');
    }
  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return Loop;
}();

var _default = Loop;
exports["default"] = _default;

},{"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":26}],227:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Game2 = _interopRequireDefault(require("./Game.js"));

var _World = _interopRequireDefault(require("../world/World.js"));

var _Storage = _interopRequireDefault(require("../core/Storage.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {RunGame}
 * @extends {Game}
 */
var RunGame = /*#__PURE__*/function (_Game) {
  (0, _inherits2["default"])(RunGame, _Game);

  var _super = _createSuper(RunGame);

  function RunGame() {
    (0, _classCallCheck2["default"])(this, RunGame);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(RunGame, [{
    key: "doInit",

    /**
     * @type {PreviewGame}
     */

    /**
     * @override
     */
    value: function () {
      var _doInit = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return _Storage["default"].get().load(_Storage["default"].type.WORLD, EngineWorldData.world, _World["default"].get());

              case 2:
                _context.next = 4;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(RunGame.prototype), "doInit", this).call(this);

              case 4:
                _World["default"].get().disableGuides();

              case 5:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function doInit() {
        return _doInit.apply(this, arguments);
      }

      return doInit;
    }()
  }]);
  return RunGame;
}(_Game2["default"]);

(0, _defineProperty2["default"])(RunGame, "instance", void 0);
var _default = RunGame;
exports["default"] = _default;

},{"../core/Storage.js":77,"../world/World.js":372,"./Game.js":225,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],228:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Loop2 = _interopRequireDefault(require("./Loop.js"));

var _MeshRenderer = _interopRequireDefault(require("../renderer/MeshRenderer.js"));

var _World = _interopRequireDefault(require("../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {Scene}
 * @extends {Loop}
 */
var Scene = /*#__PURE__*/function (_Loop) {
  (0, _inherits2["default"])(Scene, _Loop);

  var _super = _createSuper(Scene);

  /**
   * @type {Scene}
   */
  function Scene() {
    var _this;

    (0, _classCallCheck2["default"])(this, Scene);
    _this = _super.call(this);
    _this.meshRenderer = _MeshRenderer["default"].get();
    return _this;
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(Scene, [{
    key: "doInit",
    value: function () {
      var _doInit = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function doInit() {
        return _doInit.apply(this, arguments);
      }

      return doInit;
    }()
  }, {
    key: "loop",
    value: function loop() {
      var world = _World["default"].get();

      world.update();
      this.meshRenderer.render();
    }
  }]);
  return Scene;
}(_Loop2["default"]);

(0, _defineProperty2["default"])(Scene, "instance", void 0);
var _default = Scene;
exports["default"] = _default;

},{"../renderer/MeshRenderer.js":307,"../world/World.js":372,"./Loop.js":226,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],229:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _Animation = _interopRequireDefault(require("../animation/Animation.js"));

var _AnimationParser = _interopRequireDefault(require("../parser/animation/AnimationParser.js"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var AnimationManager = /*#__PURE__*/function () {
  /**
   * @type {Animation[]}
   */
  function AnimationManager() {
    (0, _classCallCheck2["default"])(this, AnimationManager);
    (0, _defineProperty2["default"])(this, "animations", void 0);
    this.animations = [];
  }
  /**
   * @return {Animation[]}
   */


  (0, _createClass2["default"])(AnimationManager, [{
    key: "getAnimations",
    value: function getAnimations() {
      return this.animations;
    }
    /**
     * @param {string} name
     * @return {Animation}
     */

  }, {
    key: "findByName",
    value: function findByName(name) {
      return this.animations.find(function (animation) {
        return animation.getName() === name;
      });
    }
    /**
     * @param {number} id
     * @return {Animation}
     */

  }, {
    key: "findById",
    value: function findById(id) {
      return this.animations.find(function (animation) {
        return animation.getId() === id;
      });
    }
    /**
     * @param {Timeline} timeline
     * @return {Animation}
     */

  }, {
    key: "findByTimeline",
    value: function findByTimeline(timeline) {
      return this.animations.find(function (animation) {
        return animation.getTimeline().find(function (pTimeline) {
          return pTimeline === timeline;
        });
      });
    }
    /**
     * @param {Asset} asset
     * @return {Animation[]}
     */

  }, {
    key: "findAnimationsByAsset",
    value: function findAnimationsByAsset(asset) {
      return this.animations.filter(function (animation) {
        return animation.getFrames().find(function (frame) {
          return frame.getAssetId() === asset.getId();
        });
      });
    }
    /**
     * @param {Asset} asset
     * @return {Animation[]}
     */

  }, {
    key: "deleteFrameByAsset",
    value: function deleteFrameByAsset(asset) {
      this.animations.forEach(function (animation) {
        var frame = animation.getFrames().find(function (pFrame) {
          return pFrame.getAssetId() === asset.getId();
        });
        animation.deleteFrame(frame);
      });
    }
    /**
     * @param {string} name
     * @return {Animation}
     */

  }, {
    key: "create",
    value: function create(name) {
      var animation = new _Animation["default"](_Maths["default"].generateId(), name);
      this.tryAdd(animation);
      return animation;
    }
    /**
     * @param {Animation} animation
     */

  }, {
    key: "delete",
    value: function _delete(animation) {
      var index = this.animations.findIndex(function (pAnimation) {
        return pAnimation === animation;
      });

      if (index >= 0) {
        this.animations.splice(index, 1);
      } else {
        throw new _ClientError["default"]("Animation cannot be deleted (\"".concat(animation.getName(), "\" not found)"));
      }
    }
    /**
     * @param {Animation} animation
     */

  }, {
    key: "tryAdd",
    value: function tryAdd(animation) {
      var existAnimation = this.findByName(animation.getName());

      if (existAnimation) {
        throw new _ClientError["default"]("Animation with name \"".concat(animation.getName(), "\" already exist!"));
      }

      this.animations.push(animation);
    }
    /**
     * @param {Animation} animation
     */

  }, {
    key: "add",
    value: function add(animation) {
      var index = this.animations.findIndex(function (pAnimation) {
        return pAnimation.getName() === animation.getName();
      });

      if (index >= 0) {
        this.animations[index] = animation;
      } else {
        this.animations.push(animation);
      }
    }
    /**
     * @param {Document} data
     * @return {Animation}
     */

  }, {
    key: "load",
    value: function load(data) {
      var animation = _AnimationParser["default"].parse(data);

      if (animation) {
        this.add(animation);
        return animation;
      }

      return null;
    }
    /**
     * @param {Document} data
     * @param {string} newName
     */

  }, {
    key: "rename",
    value: function rename(data, newName) {
      _AnimationParser["default"].rename(data, newName);
    }
    /**
     * @param {TabManager} tabManager
     * @return {Animation}
     */

  }, {
    key: "getSelected",
    value: function getSelected(tabManager) {
      var assetTab = this.getSelectedAsset(tabManager);
      return assetTab && this.findByName(assetTab.getName());
    }
    /**
     * @param {TabManager} tabManager
     * @return {Asset}
     */

  }, {
    key: "getSelectedAsset",
    value: function getSelectedAsset(tabManager) {
      return tabManager.getSelectedContentData();
    }
  }]);
  return AnimationManager;
}();

exports["default"] = AnimationManager;

},{"../animation/Animation.js":27,"../exception/type/ClientError.js":80,"../parser/animation/AnimationParser.js":253,"../utils/Maths.js":363,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],230:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AssetsManagerData2 = _interopRequireDefault(require("../project/data/AssetsManagerData.js"));

var _Asset = _interopRequireDefault(require("../asset/Asset.js"));

var _FileHelper = _interopRequireDefault(require("../utils/FileHelper.js"));

var _AssetImage = _interopRequireDefault(require("../asset/types/image/AssetImage.js"));

var _AssetScriptXml = _interopRequireDefault(require("../asset/types/script/AssetScriptXml.js"));

var _Folder = _interopRequireDefault(require("../asset/Folder.js"));

var _ClassScript = _interopRequireDefault(require("../flow/ClassScript.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _AssetScript = _interopRequireDefault(require("../asset/types/script/AssetScript.js"));

var _Animation = _interopRequireDefault(require("../animation/Animation.js"));

var _AssetAnimationXml = _interopRequireDefault(require("../asset/types/animation/AssetAnimationXml.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var _AnimationScript = _interopRequireDefault(require("../flow/AnimationScript.js"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var _AssetAudio = _interopRequireDefault(require("../asset/types/Audio/AssetAudio.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {AssetsManager}
 * @extends {AssetsManagerData}
 */
var AssetsManager = /*#__PURE__*/function (_AssetsManagerData) {
  (0, _inherits2["default"])(AssetsManager, _AssetsManagerData);

  var _super = _createSuper(AssetsManager);

  function AssetsManager() {
    (0, _classCallCheck2["default"])(this, AssetsManager);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AssetsManager, [{
    key: "setAsset",

    /**
     * @private
     * @param {string} data
     * @param {Class<AssetType>} type
     * @param {string} name
     * @return {Asset}
     */
    value: function () {
      var _setAsset = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(data, type, name) {
        var folder, asset;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                folder = this.getSelectedFolder() || this.getRootFolder();
                asset = new _Asset["default"](folder, {});
                asset.setType(new type());
                asset.setName(name);
                _context.next = 6;
                return asset.load(data);

              case 6:
                if (!_context.sent) {
                  _context.next = 9;
                  break;
                }

                this.assets.push(asset);
                return _context.abrupt("return", asset);

              case 9:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function setAsset(_x, _x2, _x3) {
        return _setAsset.apply(this, arguments);
      }

      return setAsset;
    }()
    /**
     * @param {string} data
     * @param {Class<AssetType>} assetType
     * @param {string} assetName
     * @param {number} folderId
     * @return {Asset}
     */

  }, {
    key: "createAsset",
    value: function () {
      var _createAsset = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(data, assetType, assetName, folderId) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                return _context2.abrupt("return", this.setAsset(data, assetType, assetName));

              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function createAsset(_x4, _x5, _x6, _x7) {
        return _createAsset.apply(this, arguments);
      }

      return createAsset;
    }()
    /**
     * @param {Asset} asset
     */

  }, {
    key: "deleteAsset",
    value: function deleteAsset(asset) {
      var indexAsset = this.assets.findIndex(function (pAsset) {
        return pAsset === asset;
      });

      if (indexAsset >= 0) {
        this.assets.splice(indexAsset, 1);
      } else {
        throw new TypeError("Asset cannot be deleted (\"".concat(asset.getName(), "\" not found)"));
      }
    }
    /**
     * @param {Folder} folder
     */

  }, {
    key: "deleteFolder",
    value: function deleteFolder(folder) {
      var indexFolder = this.folders.findIndex(function (pFolder) {
        return pFolder === folder;
      });

      if (indexFolder >= 0) {
        this.folders.splice(indexFolder, 1);
      } else {
        throw new TypeError("Folder cannot be deleted (\"".concat(folder.getName(), "\" not found)"));
      }
    }
    /**
     * @param {Folder} folder
     * @param {Class<AssetScript>} type
     * @param {AssetScriptGenerator} generator
     */

  }, {
    key: "createClassScript",
    value: function () {
      var _createClassScript = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(folder, type, generator) {
        var assetName, flow;
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                assetName = this.generateUniqAssetName('NewScript', folder.getId());
                flow = new _ClassScript["default"](assetName);
                return _context3.abrupt("return", this.createAsset(generator.generate(flow), type, assetName, folder.getId()));

              case 3:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function createClassScript(_x8, _x9, _x10) {
        return _createClassScript.apply(this, arguments);
      }

      return createClassScript;
    }()
    /**
     * @param {Folder} folder
     * @param {Class<AssetScript>} type
     * @param {AssetAnimationScriptGenerator} generator
     */

  }, {
    key: "createAnimationScript",
    value: function () {
      var _createAnimationScript = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4(folder, type, generator) {
        var assetName, flow;
        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                assetName = this.generateUniqAssetName('NewAnimationScript', folder.getId());
                flow = new _AnimationScript["default"](assetName);
                return _context4.abrupt("return", this.createAsset(generator.generate(flow), type, assetName, folder.getId()));

              case 3:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function createAnimationScript(_x11, _x12, _x13) {
        return _createAnimationScript.apply(this, arguments);
      }

      return createAnimationScript;
    }()
    /**
     * @param {Folder} folder
     * @param {Class<AssetAnimationXml>} type
     * @param {AssetAnimationXmlGenerator} generator
     */

  }, {
    key: "createAnimation",
    value: function () {
      var _createAnimation = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee5(folder, type, generator) {
        var assetName, animation;
        return _regenerator["default"].wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                assetName = this.generateUniqAssetName('Animation', folder.getId());
                animation = new _Animation["default"](_Maths["default"].generateId(), assetName);
                return _context5.abrupt("return", this.createAsset(generator.generate(animation), type, assetName, folder.getId()));

              case 3:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this);
      }));

      function createAnimation(_x14, _x15, _x16) {
        return _createAnimation.apply(this, arguments);
      }

      return createAnimation;
    }()
    /**
     * @param {File} blob
     */

  }, {
    key: "setAssetByBlob",
    value: function setAssetByBlob(blob) {
      var _this = this;

      return new Promise(function (resolve, reject) {
        var reader = new FileReader();

        reader.onload = function () {
          resolve(reader.result);
        };

        reader.onerror = reject;

        if (_this.isBlobImage(blob) || _this.isBlobAudio(blob)) {
          reader.readAsDataURL(blob);
        } else {
          reader.readAsText(blob);
        }
      }).then(function (data) {
        var type = _this.getAssetType(blob);

        return _this.setAsset(data, type, _FileHelper["default"].getFilename(blob.name));
      });
    }
    /**
     * @param {Blob} blob
     * @return {boolean}
     */

  }, {
    key: "isBlobImage",
    value: function isBlobImage(blob) {
      var type = this.getAssetType(blob);
      return type === _AssetImage["default"];
    }
    /**
     * @param {Blob} blob
     * @return {boolean}
     */

  }, {
    key: "isBlobAudio",
    value: function isBlobAudio(blob) {
      var type = this.getAssetType(blob);
      return type === _AssetAudio["default"];
    }
    /**
     * @return {Asset[]}
     */

  }, {
    key: "getParsedAssets",
    value: function getParsedAssets() {
      var _this2 = this;

      return this.getAssets().filter(function (asset) {
        return _this2.isAssetScript(asset) || _this2.isAssetAnimation(asset);
      });
    }
    /**
     * @return {Asset[]}
     */

  }, {
    key: "getAudioAssets",
    value: function getAudioAssets() {
      var _this3 = this;

      return this.getAssets().filter(function (asset) {
        return _this3.isAssetAudio(asset);
      });
    }
    /**
     * @param {Asset} asset
     * @return {boolean}
     */

  }, {
    key: "isAssetScript",
    value: function isAssetScript(asset) {
      return asset && asset.getType() instanceof _AssetScript["default"];
    }
    /**
     * @param {Asset} asset
     * @return {boolean}
     */

  }, {
    key: "isAssetAnimation",
    value: function isAssetAnimation(asset) {
      return asset && asset.getType() instanceof _AssetAnimationXml["default"];
    }
    /**
     * @param {Asset} asset
     * @return {boolean}
     */

  }, {
    key: "isAssetImage",
    value: function isAssetImage(asset) {
      return asset && asset.getType() instanceof _AssetImage["default"];
    }
    /**
     * @param {Asset} asset
     * @return {boolean}
     */

  }, {
    key: "isAssetAudio",
    value: function isAssetAudio(asset) {
      return asset && asset.getType() instanceof _AssetAudio["default"];
    }
    /**
     * @param {Blob} blob
     * @return {Class<AssetType>}
     */

  }, {
    key: "getAssetType",
    value: function getAssetType(blob) {
      var type = blob.type;

      switch (type) {
        case _FileHelper["default"].type.IMG_JPEG:
        case _FileHelper["default"].type.IMG_PNG:
          return _AssetImage["default"];

        case _FileHelper["default"].type.XML:
          return _AssetScriptXml["default"];

        case _FileHelper["default"].type.WAV:
          return _AssetAudio["default"];

        case _FileHelper["default"].type.MPEG:
          return _AssetAudio["default"];

        default:
          throw new _ClientError["default"]("Asset type \"".concat(type, "\" not supported"));
      }
    }
    /**
     * @return {null}
     */

  }, {
    key: "getAsset",
    value: function getAsset() {
      return null;
    }
    /**
     * @return {Asset}
     */

  }, {
    key: "getSelectedAsset",
    value: function getSelectedAsset() {
      return this.getAssets().find(function (asset) {
        return asset.isSelected();
      });
    }
    /**
     * @return {Folder}
     */

  }, {
    key: "getSelectedFolder",
    value: function getSelectedFolder() {
      return this.getFolders().find(function (folder) {
        return folder.isSelected();
      });
    }
    /**
     * @return {Asset[]}
     */

  }, {
    key: "getSelectedAssets",
    value: function getSelectedAssets() {
      return this.getAssets().filter(function (asset) {
        return asset.isSelected();
      });
    }
    /**
     * @param {number|string} assetId
     * @return {Asset | null}
     */

  }, {
    key: "findAssetById",
    value: function findAssetById(assetId) {
      return this.getAssets().find(function (asset) {
        return asset.id === parseInt(assetId);
      });
    }
    /**
     * @param {number|string} assetId
     * @return {Asset}
     */

  }, {
    key: "findAssetImageById",
    value: function findAssetImageById(assetId) {
      var asset = this.findAssetById(assetId);

      if (!asset || !this.isAssetImage(asset)) {
        throw new _SystemError["default"]("No asset image found with ID \"".concat(assetId, "\""));
      }

      return asset;
    }
    /**
     * @param {number|string} assetId
     * @return {Asset}
     */

  }, {
    key: "findAssetAudioById",
    value: function findAssetAudioById(assetId) {
      var asset = this.findAssetById(assetId);

      if (!asset || !this.isAssetAudio(asset)) {
        throw new _SystemError["default"]("No asset audio found with ID \"".concat(assetId, "\""));
      }

      return asset;
    }
    /**
     * @param {string} name
     * @param {number} folderId
     * @return {Asset | null}
     */

  }, {
    key: "findAssetByName",
    value: function findAssetByName(name, folderId) {
      return this.getAssets().find(function (asset) {
        return asset.getName() === name && asset.getFolderId() === folderId;
      });
    }
    /**
     * @param {number|string} folderId
     * @return {Folder | null}
     */

  }, {
    key: "findFolderById",
    value: function findFolderById(folderId) {
      return this.getFolders().find(function (folder) {
        return folder.id === parseInt(folderId);
      });
    }
    /**
     * @param {number|null} parentId
     * @return {Folder | null}
     */

  }, {
    key: "findFolderByParentId",
    value: function findFolderByParentId(parentId) {
      return this.getFolders().find(function (folder) {
        return folder.folderId === parentId;
      });
    }
    /**
     * @param {number|null} folderId
     * @return {Asset[]}
     */

  }, {
    key: "findAssetsByFolderId",
    value: function findAssetsByFolderId(folderId) {
      return this.getAssets().filter(function (asset) {
        return asset.folderId === folderId;
      });
    }
    /**
     * @param {number | null} folderId
     * @return {Folder[]}
     */

  }, {
    key: "findFolders",
    value: function findFolders(folderId) {
      return this.getFolders().filter(function (folder) {
        return folder.folderId === folderId;
      });
    }
    /**
     * @param {string} name
     * @param {number | null} folderId
     * @return {Folder}
     */

  }, {
    key: "findFolderByName",
    value: function findFolderByName(name, folderId) {
      return this.findFolders(folderId).find(function (pFolder) {
        return pFolder.getName() === name;
      });
    }
    /**
     * @return {Folder}
     */

  }, {
    key: "createRootFolder",
    value: function createRootFolder() {
      var rootFolderExist = this.findFolderByParentId(null);

      if (!rootFolderExist) {
        var rootFolder = new _Folder["default"]('Root');
        this.addFolder(rootFolder);
        return rootFolder;
      }

      return rootFolderExist;
    }
    /**
     * @return {Folder}
     */

  }, {
    key: "getRootFolder",
    value: function getRootFolder() {
      return this.findFolderByParentId(null);
    }
    /**
     * @param {Folder} parentFolder
     */

  }, {
    key: "createFolder",
    value: function createFolder(parentFolder) {
      var actualParentFolder = parentFolder ? parentFolder : this.getRootFolder();
      var folderName = this.generateUniqFolderName('New Folder', actualParentFolder.getId());
      this.addFolder(new _Folder["default"](folderName, actualParentFolder));
    }
    /**
     * @param {string} name
     * @param {number} parentFolderId
     * @return {string}
     */

  }, {
    key: "generateUniqFolderName",
    value: function generateUniqFolderName(name, parentFolderId) {
      var attempt = 0,
          newName,
          existFolder;

      do {
        newName = attempt ? "".concat(name, " (").concat(attempt, ")") : name;
        existFolder = this.findFolderByName(newName, parentFolderId);
        attempt++;
      } while (existFolder && attempt < NAME_ATTEMPT_MAX);

      return newName;
    }
    /**
     * @param {string} name
     * @param {number} folderId
     * @return {string}
     */

  }, {
    key: "generateUniqAssetName",
    value: function generateUniqAssetName(name, folderId) {
      var attempt = 0,
          newName,
          existAsset;

      do {
        newName = attempt ? "".concat(name).concat(attempt) : name;
        existAsset = this.findAssetByName(newName, folderId);
        attempt++;
      } while (existAsset && attempt < NAME_ATTEMPT_MAX);

      return newName;
    }
    /**
     * @private
     * @param {Folder} folder
     */

  }, {
    key: "addFolder",
    value: function addFolder(folder) {
      var existFolder = this.findFolderByName(folder.getName(), folder.getFolderId());

      if (!existFolder) {
        this.folders.push(folder);
      } else {
        throw new TypeError("Cannot add folder ".concat(folder.getName(), ": Already exist"));
      }
    }
  }]);
  return AssetsManager;
}(_AssetsManagerData2["default"]);

exports["default"] = AssetsManager;
var NAME_ATTEMPT_MAX = 200;

},{"../animation/Animation.js":27,"../asset/Asset.js":30,"../asset/Folder.js":31,"../asset/types/Audio/AssetAudio.js":33,"../asset/types/animation/AssetAnimationXml.js":35,"../asset/types/image/AssetImage.js":36,"../asset/types/script/AssetScript.js":37,"../asset/types/script/AssetScriptXml.js":39,"../exception/type/ClientError.js":80,"../exception/type/SystemError.js":82,"../flow/AnimationScript.js":95,"../flow/ClassScript.js":96,"../project/data/AssetsManagerData.js":279,"../utils/FileHelper.js":359,"../utils/Maths.js":363,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],231:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _UnitHelper = _interopRequireDefault(require("../utils/UnitHelper.js"));

var _World = _interopRequireDefault(require("../world/World.js"));

var _GraphNodeUnitInstant = _interopRequireDefault(require("../unit/instant/type/internal/graph/GraphNodeUnitInstant.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _ScriptGraphSelector = _interopRequireDefault(require("../selector/ScriptGraphSelector.js"));

var _NodeComponent = _interopRequireDefault(require("../component/internal/gui/node/NodeComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _ObjectHelper = _interopRequireDefault(require("../utils/ObjectHelper.js"));

var _NodeInputComponent = _interopRequireDefault(require("../component/internal/gui/node/NodeInputComponent.js"));

var _GraphEdgeUnitInstant = _interopRequireDefault(require("../unit/instant/type/internal/graph/GraphEdgeUnitInstant.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _Unit = _interopRequireDefault(require("../unit/Unit.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _NodeHelper = _interopRequireDefault(require("../utils/NodeHelper.js"));

var GraphManager = /*#__PURE__*/function () {
  /**
   * @type {UnitInstant[]}
   */
  function GraphManager() {
    (0, _classCallCheck2["default"])(this, GraphManager);
    (0, _defineProperty2["default"])(this, "units", void 0);
    this.units = [];
  }
  /**
   * @return {UnitInstant[]}
   */


  (0, _createClass2["default"])(GraphManager, [{
    key: "getUnits",
    value: function getUnits() {
      return this.units;
    }
    /**
     * @return {UnitInstant[]}
     */

  }, {
    key: "getGraphUnits",
    value: function getGraphUnits() {
      return this.getUnits().filter(function (unit) {
        return unit.hasComponents([_NodeComponent["default"]]);
      });
    }
    /**
     * @return {UnitInstant[]}
     */

  }, {
    key: "getGraphEdges",
    value: function getGraphEdges() {
      return this.getUnits().filter(function (unit) {
        return unit.hasComponents([_NodeInputComponent["default"]]);
      });
    }
    /**
     * @param {AScript} script
     * @param {MeshRenderer} renderer
     */

  }, {
    key: "draw",
    value: function draw(script, renderer) {
      var world = _World["default"].get();

      this.update(script);
      this.getUnits().forEach(function (gUnit) {
        _UnitHelper["default"].drawUnit(gUnit, script.getCamera(), world.getMeshManager(), renderer);
      });
    }
    /**
     * @param {AScript} script
     * @return {boolean}
     * @todo To be revisited
     */

  }, {
    key: "updateGraphNodes",
    value: function updateGraphNodes(script) {
      var _this = this;

      var updated = false;
      var units = this.getGraphUnits();
      var nodes = script.getNodes();
      var graphNodeIds = units.map(function (graphUnit) {
        return graphUnit.getComponent(_NodeComponent["default"]).getNodeId();
      });
      var nodeIds = nodes.map(function (node) {
        return node.getId();
      });
      nodes.forEach(function (node) {
        var isGraphUnitExist = graphNodeIds.includes(node.getId());

        if (!isGraphUnitExist) {
          _this.createGraphNodeUnit(node, script);

          updated = true;
        } else {
          var graphUnit = units.find(function (gUnit) {
            return gUnit.getComponent(_NodeComponent["default"]).getNodeId() === node.getId();
          });
          var position = graphUnit.getComponent(_TransformComponent["default"]).getPosition();

          if (!_ObjectHelper["default"].isEqual(node.getPosition(), position)) {
            node.setPosition(position);
            updated = true;
          }

          graphUnit.update(node.getPosition(), node, script);
        }
      });
      graphNodeIds.forEach(function (graphNodeId) {
        if (!nodeIds.includes(graphNodeId)) {
          _this.deleteGraphNodeUnitByNodeId(graphNodeId);

          updated = true;
        }
      });
      return updated;
    }
    /**
     * @param {AScript} script
     * @return {boolean}
     */

  }, {
    key: "updateGraphEdges",
    value: function updateGraphEdges(script) {
      var _this2 = this;

      var updated = false;
      var units = this.getGraphEdges();
      var graphEdgeIds = units.map(function (graphUnit) {
        return graphUnit.getComponent(_NodeInputComponent["default"]).getNodeInputId();
      });
      var nodeInputIds = script.getInputs().map(function (nodeInput) {
        return nodeInput.getId();
      });
      script.getInputs().forEach(function (nodeInput) {
        var graphUnitExist = graphEdgeIds.includes(nodeInput.getId());

        if (!graphUnitExist) {
          _this2.createGraphEdgeUnit(script, nodeInput);

          updated = true;
        } else {
          var graphUnit = units.find(function (gUnit) {
            return gUnit.getComponent(_NodeInputComponent["default"]).getNodeInputId() === nodeInput.getId();
          });
          graphUnit.update(script, nodeInput);
        }
      });
      graphEdgeIds.forEach(function (graphEdgeId) {
        if (!nodeInputIds.includes(graphEdgeId)) {
          _this2.deleteGraphEdgeUnitByNodeId(graphEdgeId);

          updated = true;
        }
      });
      return updated;
    }
    /**
     * @param {ANode} node
     * @param {AScript} script
     */

  }, {
    key: "createGraphNodeUnit",
    value: function createGraphNodeUnit(node, script) {
      var unit = new _GraphNodeUnitInstant["default"]();
      var position = node.getPosition();
      unit.instantiate(position, node, script);

      if (_NodeHelper["default"].isHidden(node)) {
        unit.getComponent(_MeshComponent["default"]).setEnabled(false);
      }

      this.getUnits().push(unit);
      return unit;
    }
    /**
     * @param {AScript} script
     * @param {NodeInput} nodeInput
     */

  }, {
    key: "createGraphEdgeUnit",
    value: function createGraphEdgeUnit(script, nodeInput) {
      var unit = new _GraphEdgeUnitInstant["default"]();
      unit.instantiate(script, nodeInput);

      if (_NodeHelper["default"].isHidden(script.findNodeById(nodeInput.getSourceNodeId()))) {
        unit.getComponent(_MeshComponent["default"]).setEnabled(false);
      }

      this.getUnits().push(unit);
      return unit;
    }
    /**
     * @template T
     * @param {Class} T
     * @param {...any} props
     * @return {T}
     */

  }, {
    key: "createUnitInstant",
    value: function createUnitInstant(T) {
      if (!(T.prototype instanceof _Unit["default"])) {
        throw new _ClientError["default"]("Unit type must be child of Unit class (".concat(type, " given)"));
      }

      var unit = new T();

      for (var _len = arguments.length, props = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        props[_key - 1] = arguments[_key];
      }

      unit.instantiate.apply(unit, props);
      this.getUnits().push(unit);
      return unit;
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "deleteUnit",
    value: function deleteUnit(unit) {
      var index = this.getUnits().findIndex(function (element) {
        return element.getId() === unit.getId();
      });
      return this.getUnits().splice(index, 1);
    }
    /**
     * @param {number} graphNodeId
     */

  }, {
    key: "deleteGraphNodeUnitByNodeId",
    value: function deleteGraphNodeUnitByNodeId(graphNodeId) {
      var units = this.getUnits();
      var index = units.findIndex(function (graphUnit) {
        var nodeComponent = graphUnit.getComponent(_NodeComponent["default"]);
        return nodeComponent && nodeComponent.getNodeId() === graphNodeId;
      });
      units.splice(index, 1);
    }
    /**
     * @param {number} graphEdgeId
     */

  }, {
    key: "deleteGraphEdgeUnitByNodeId",
    value: function deleteGraphEdgeUnitByNodeId(graphEdgeId) {
      var units = this.getUnits();
      var index = units.findIndex(function (graphUnit) {
        var nodeInputComponent = graphUnit.getComponent(_NodeInputComponent["default"]);
        return nodeInputComponent && nodeInputComponent.getNodeInputId() === graphEdgeId;
      });
      units.splice(index, 1);
    }
    /**
     * @param {Vector} position
     * @return {Unit}
     */

  }, {
    key: "findFirstUnitByPosition",
    value: function findFirstUnitByPosition(position) {
      return _ScriptGraphSelector["default"].get().get(_World["default"].get(), position);
    }
    /**
     * @param {AScript} script
     * @param {Mouse} mouse
     * @return {Unit[]}
     */

  }, {
    key: "focusUnits",
    value: function focusUnits(script, mouse) {
      var unitSelector = _ScriptGraphSelector["default"].get();

      var world = _World["default"].get();

      unitSelector.unfocusAll(world);
      var currentScenePosition = new _Vector["default"](mouse.currentScenePosition);
      var vector3d = script.getCamera().fromCameraScale(currentScenePosition);
      unitSelector.focus(world, script.getCamera().fromCanvasCoord(vector3d));
    }
    /**
     * @param {AScript} script
     * @param {{position: Vector, size: Size}} dragArea
     * @return {Unit[]}
     */

  }, {
    key: "selectUnits",
    value: function selectUnits(script, dragArea) {
      var unitSelector = _ScriptGraphSelector["default"].get();

      var world = _World["default"].get();

      unitSelector.unselectAll(world);
      return unitSelector.select(world, script.getCamera().fromCanvasCoord(dragArea.position), dragArea.size);
    }
    /**
     * @return {UnitInstant[]}
     */

  }, {
    key: "getSelected",
    value: function getSelected() {
      return this.getGraphUnits().filter(function (unit) {
        return unit.isSelected();
      });
    }
    /**
     * @param {AScript} script
     */

  }, {
    key: "update",
    value: function update(script) {
      if (script) {
        var updated = false;
        updated = this.updateGraphNodes(script) || updated;
        updated = this.updateGraphEdges(script) || updated;

        if (updated) {
          script.reset();
          this.save(script);
        }
      }
    }
    /**
     * @param {AScript} script
     */

  }, {
    key: "save",
    value: function save(script) {
      var asset = _World["default"].get().getTabManager().getSelectedContentData();

      asset.generate(script);
    }
  }, {
    key: "reset",
    value: function reset() {
      this.units = [];
    }
  }, {
    key: "regenerateAll",
    value: function regenerateAll() {
      this.getUnits().forEach(function (unit) {
        return unit.getComponent(_MeshComponent["default"]).setGenerated(false);
      });
    }
  }]);
  return GraphManager;
}();

exports["default"] = GraphManager;

},{"../component/internal/MeshComponent.js":48,"../component/internal/TransformComponent.js":53,"../component/internal/gui/node/NodeComponent.js":59,"../component/internal/gui/node/NodeInputComponent.js":60,"../exception/type/ClientError.js":80,"../selector/ScriptGraphSelector.js":320,"../unit/Unit.js":327,"../unit/instant/type/internal/graph/GraphEdgeUnitInstant.js":334,"../unit/instant/type/internal/graph/GraphNodeUnitInstant.js":335,"../utils/NodeHelper.js":364,"../utils/ObjectHelper.js":365,"../utils/UnitHelper.js":369,"../utils/Vector.js":370,"../world/World.js":372,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],232:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

/**
 * @class {MeshManager}
 */
var MeshManager = /*#__PURE__*/function () {
  /**
   * @type {Mesh[]}
   */
  function MeshManager() {
    (0, _classCallCheck2["default"])(this, MeshManager);
    (0, _defineProperty2["default"])(this, "meshes", void 0);
    this.meshes = [];
  }
  /**
   * @return {Mesh[]}
   */


  (0, _createClass2["default"])(MeshManager, [{
    key: "getMeshes",
    value: function getMeshes() {
      return this.meshes;
    }
    /**
     * @param {number} index
     * @return {Mesh}
     */

  }, {
    key: "get",
    value: function get(index) {
      return this.meshes[index];
    }
    /**
     * @param {number} index
     * @param {Mesh} mesh
     */

  }, {
    key: "set",
    value: function set(index, mesh) {
      this.meshes[index] = mesh;
    }
    /**
     * @param {number} index
     */

  }, {
    key: "clear",
    value: function clear(index) {
      var mesh = this.get(index);

      if (mesh) {
        mesh.clear();
      }
    }
  }]);
  return MeshManager;
}();

exports["default"] = MeshManager;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],233:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _MatterEngine = _interopRequireDefault(require("../physics/engine/matter/MatterEngine.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _ColliderComponent = _interopRequireDefault(require("../component/internal/ColliderComponent.js"));

var _UnitHelper = _interopRequireDefault(require("../utils/UnitHelper.js"));

var _GeometryHelper = _interopRequireDefault(require("../utils/GeometryHelper.js"));

var _RigidBodyComponent = _interopRequireDefault(require("../component/internal/RigidBodyComponent.js"));

var PhysicsManager = /*#__PURE__*/function () {
  /**
   * @type {PhysicsEngine}
   */
  function PhysicsManager() {
    (0, _classCallCheck2["default"])(this, PhysicsManager);
    (0, _defineProperty2["default"])(this, "physicsEngine", void 0);
    this.physicsEngine = new _MatterEngine["default"]();
  }

  (0, _createClass2["default"])(PhysicsManager, [{
    key: "init",
    value: function init() {
      this.physicsEngine.init();
    }
    /**
     * @return {PhysicsEngine}
     */

  }, {
    key: "getPhysicsEngine",
    value: function getPhysicsEngine() {
      return this.physicsEngine;
    }
    /**
     * @param {Unit} unit
     * @param {RigidBodyOptions} options
     */

  }, {
    key: "addBody",
    value: function addBody(unit, options) {
      this.physicsEngine.addBody(unit, options);
    }
    /**
     * @param {Unit} unit
     * @param {Vector} position
     * @param {Vector} force
     */

  }, {
    key: "applyForce",
    value: function applyForce(unit, position, force) {
      this.physicsEngine.applyForce(unit, position, force);
    }
    /**
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @param {Vector} start
     * @param {Vector} end
     * @return {{body: *, bodyA: *, bodyB: *, collided: boolean}[]}
     */

  }, {
    key: "rayCast",
    value: function rayCast(unit, colliderComponent, start, end) {
      var position = _UnitHelper["default"].getColliderPosition(unit, colliderComponent);

      var size = _UnitHelper["default"].getColliderSize(unit, colliderComponent);

      var bottomPosition = _Vector["default"].add(position, new _Vector["default"]({
        x: size.getWidth() / 2,
        y: size.getHeight()
      }));

      return this.physicsEngine.rayCast(unit, _Vector["default"].add(bottomPosition, start), _Vector["default"].add(bottomPosition, end));
    }
    /**
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {boolean}
     */

  }, {
    key: "isGrounded",
    value: function isGrounded(unit, colliderComponent) {
      var startVector = new _Vector["default"]({
        x: 0,
        y: 0
      });
      var endVector = new _Vector["default"]({
        x: 0,
        y: 1
      });
      var collisions = this.rayCast(unit, colliderComponent, startVector, endVector).filter(function (collision) {
        return collision.collided;
      });
      return !!collisions.length;
    }
    /**
     * @param {World} world
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @param {MaskGroup} maskGroup
     * @return {ColliderComponent[]}
     */

  }, {
    key: "getAllCollision",
    value: function getAllCollision(world, unit, colliderComponent, maskGroup) {
      var maskGroupUnits = world.getUnitManager().findUnitsByMaskGroup(maskGroup);
      var sourceColliderUnit = {
        unit: unit,
        colliderComponent: colliderComponent
      };
      var targetColliderUnits = [];
      maskGroupUnits.forEach(function (maskGroupUnit) {
        maskGroupUnit.findComponentsByClass(_ColliderComponent["default"]).forEach(function (maskColliderComponent) {
          targetColliderUnits.push({
            unit: maskGroupUnit,
            colliderComponent: maskColliderComponent
          });
        });
      });
      return this.physicsEngine.getAllCollision(sourceColliderUnit, targetColliderUnits);
    }
    /**
     * @param {Unit} unit
     * @param {number} friction
     */

  }, {
    key: "setFriction",
    value: function setFriction(unit, friction) {
      this.physicsEngine.setFriction(unit, friction);
    }
    /**
     * @param {Unit} unit
     * @return {Vector}
     */

  }, {
    key: "getVelocity",
    value: function getVelocity(unit) {
      return this.physicsEngine.getVelocity(unit);
    }
    /**
     * @param {Unit} unit
     * @param {Vector} velocity
     */

  }, {
    key: "setVelocity",
    value: function setVelocity(unit, velocity) {
      this.physicsEngine.setVelocity(unit, velocity);
    }
    /**
     * @param {Unit} unit
     * @param {number} speed
     */

  }, {
    key: "moveXAxis",
    value: function moveXAxis(unit, speed) {
      this.setVelocity(unit, new _Vector["default"]({
        x: speed,
        y: this.getVelocity(unit).getY()
      }));
    }
  }, {
    key: "updateEngine",
    value: function updateEngine() {
      this.physicsEngine.update();
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "update",
    value: function update(unit) {
      this.updateUnit(unit);
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "deleteUnit",
    value: function deleteUnit(unit) {
      this.physicsEngine.deleteUnit(unit);
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "updateUnit",
    value: function updateUnit(unit) {
      var body = this.physicsEngine.findBody(unit);

      if (body) {
        // unit component
        var transformComponent = unit.getComponent(_TransformComponent["default"]);
        var meshComponent = unit.getComponent(_MeshComponent["default"]);
        var rigidBodyComponent = unit.getComponent(_RigidBodyComponent["default"]); // unit/body info

        var bodyRotation = this.physicsEngine.getBodyRotation(body);
        var bodyVelocity = this.physicsEngine.getVelocity(unit);
        var bodyPosition = new _Vector["default"](this.physicsEngine.getBodyPosition(body));
        var actualUnitRotation = transformComponent.getRotation();
        var actualUnitSize = meshComponent.getSize();
        var bodyRotationRounded = Math.round(bodyRotation * 100) / 100; //init result

        var newPosition = _GeometryHelper["default"].fromCenterPosition(bodyPosition, bodyRotationRounded, actualUnitSize);

        var newRotation = bodyRotationRounded; //first active collider

        var colliderComponents = unit.findComponentsByClass(_ColliderComponent["default"]).filter(function (colliderComponent) {
          return colliderComponent.isEnabled();
        });
        var firstColliderComponent = colliderComponents[0];

        if (firstColliderComponent) {
          var firstColliderRelativePosition = _UnitHelper["default"].getColliderRelativePosition(unit, firstColliderComponent);

          var bodyCollider = this.physicsEngine.getBodyColliders(body)[0];

          if (bodyCollider) {
            var bodyColliderPosition = new _Vector["default"](this.physicsEngine.getBodyPosition(bodyCollider));

            var actualColliderSize = _UnitHelper["default"].getColliderSize(unit, firstColliderComponent);

            var unitColliderPosition = _GeometryHelper["default"].fromCenterPosition(bodyColliderPosition, bodyRotationRounded, actualColliderSize);

            var newUnitPosition = _Vector["default"].subtract(unitColliderPosition, firstColliderRelativePosition);

            var correctionVector = _UnitHelper["default"].GetCorrectionVector(actualUnitSize, actualColliderSize, bodyRotationRounded, firstColliderRelativePosition);

            newPosition = _Vector["default"].subtract(newUnitPosition, correctionVector);
          }
        } //save velocity


        colliderComponents.forEach(function (colliderComponent) {
          colliderComponent.setVelocity(bodyVelocity);
        });

        if (rigidBodyComponent) {
          rigidBodyComponent.setVelocity(bodyVelocity);
        }

        transformComponent.setPosition(newPosition);
        transformComponent.setRotation(newRotation);

        if (actualUnitRotation !== newRotation) {
          meshComponent.setGenerated(false);
        }
      }
    }
  }]);
  return PhysicsManager;
}();

exports["default"] = PhysicsManager;

},{"../component/internal/ColliderComponent.js":44,"../component/internal/MeshComponent.js":48,"../component/internal/RigidBodyComponent.js":50,"../component/internal/TransformComponent.js":53,"../physics/engine/matter/MatterEngine.js":260,"../utils/GeometryHelper.js":360,"../utils/UnitHelper.js":369,"../utils/Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],234:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AScript = _interopRequireDefault(require("../flow/AScript.js"));

var _ScriptParser = _interopRequireDefault(require("../parser/flow/ScriptParser.js"));

var _ScriptManagerData2 = _interopRequireDefault(require("../project/data/ScriptManagerData.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScriptManager = /*#__PURE__*/function (_ScriptManagerData) {
  (0, _inherits2["default"])(ScriptManager, _ScriptManagerData);

  var _super = _createSuper(ScriptManager);

  function ScriptManager() {
    (0, _classCallCheck2["default"])(this, ScriptManager);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ScriptManager, [{
    key: "findByName",

    /**
     * @param {string} name
     * @return {AScript}
     */
    value: function findByName(name) {
      return this.getScripts().find(function (script) {
        return script.getName() === name;
      });
    }
    /**
     * @param {string} name
     * @param {Function} type
     * @return {AScript}
     */

  }, {
    key: "create",
    value: function create(name, type) {
      if (type.prototype instanceof _AScript["default"]) {
        var script = new type(name);
        this.tryAdd(script);
        return script;
      }

      throw new _SystemError["default"]("Script must be of type AScript!");
    }
    /**
     * @param {AScript} script
     * @param {FunctionRegistry} functionRegistry
     */

  }, {
    key: "delete",
    value: function _delete(script, functionRegistry) {
      var scriptIndex = this.scripts.findIndex(function (pScript) {
        return pScript === script;
      });

      if (scriptIndex >= 0) {
        this.scripts.splice(scriptIndex, 1);
        script["delete"](functionRegistry);
      } else {
        throw new _ClientError["default"]("Script cannot be deleted (\"".concat(script.getName(), "\" not found)"));
      }
    }
    /**
     * @param {AScript} script
     */

  }, {
    key: "tryAdd",
    value: function tryAdd(script) {
      var existScript = this.findByName(script.getName());

      if (existScript) {
        throw new _ClientError["default"]("Script with name \"".concat(script.getName(), "\" already exist!"));
      }

      this.scripts.push(script);
    }
    /**
     * @param {AScript} script
     */

  }, {
    key: "add",
    value: function add(script) {
      var indexScript = this.scripts.findIndex(function (pScript) {
        return pScript.getName() === script.getName();
      });

      if (indexScript >= 0) {
        this.scripts[indexScript] = script;
      } else {
        this.scripts.push(script);
      }
    }
    /**
     * @param {Document|string} data
     * @return {AScript}
     */

  }, {
    key: "load",
    value: function load(data) {
      var script = _ScriptParser["default"].parse(data);

      if (script) {
        this.add(script);
        return script;
      }

      return null;
    }
    /**
     * @param {Document} data
     * @param {string} oldName
     * @param {string} newName
     */

  }, {
    key: "rename",
    value: function rename(data, oldName, newName) {
      _ScriptParser["default"].rename(data, newName);

      var script = this.findByName(oldName);
      script.setName(newName);
    }
    /**
     * @param {TabManager} tabManager
     * @return {AScript}
     */

  }, {
    key: "getSelected",
    value: function getSelected(tabManager) {
      var assetTab = this.getSelectedAsset(tabManager);
      return assetTab && this.findByName(assetTab.getName());
    }
    /**
     * @param {TabManager} tabManager
     * @return {Asset}
     */

  }, {
    key: "getSelectedAsset",
    value: function getSelectedAsset(tabManager) {
      return tabManager.getSelectedContentData();
    }
  }]);
  return ScriptManager;
}(_ScriptManagerData2["default"]);

exports["default"] = ScriptManager;

},{"../exception/type/ClientError.js":80,"../exception/type/SystemError.js":82,"../flow/AScript.js":94,"../parser/flow/ScriptParser.js":254,"../project/data/ScriptManagerData.js":297,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],235:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Tab = _interopRequireDefault(require("../content/Tab.js"));

var _TabManagerData2 = _interopRequireDefault(require("../project/data/TabManagerData.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TabManager = /*#__PURE__*/function (_TabManagerData) {
  (0, _inherits2["default"])(TabManager, _TabManagerData);

  var _super = _createSuper(TabManager);

  function TabManager() {
    var _this;

    (0, _classCallCheck2["default"])(this, TabManager);
    _this = _super.call(this);
    _this.tabs = [];
    return _this;
  }
  /**
   * @return {Tab}
   */


  (0, _createClass2["default"])(TabManager, [{
    key: "getSelected",
    value: function getSelected() {
      return this.tabs.find(function (tab) {
        return tab.isSelected();
      });
    }
    /**
     * @return {*}
     */

  }, {
    key: "getSelectedContentData",
    value: function getSelectedContentData() {
      var selectedTab = this.getSelected();
      return selectedTab && selectedTab.getContent() && selectedTab.getContent().getData();
    }
    /**
     * @param {number} id
     * @return {Tab}
     */

  }, {
    key: "findById",
    value: function findById(id) {
      return this.tabs.find(function (tab) {
        return tab.getId() === id;
      });
    }
    /**
     * @param {string} name
     * @return {Tab}
     */

  }, {
    key: "findByName",
    value: function findByName(name) {
      return this.tabs.find(function (tab) {
        return tab.getName() === name;
      });
    }
    /**
     * @param {*} data
     * @return {Tab}
     */

  }, {
    key: "findByData",
    value: function findByData(data) {
      return this.tabs.find(function (tab) {
        return tab.getContent().getData() === data;
      });
    }
    /**
     * @param {string} name
     * @param {Content} content
     * @return {Tab}
     */

  }, {
    key: "create",
    value: function create(name) {
      var content = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var tab = new _Tab["default"](name, content);
      this.tryAdd(tab);
      this.activate(tab);
      return tab;
    }
    /**
     * @param {string} name
     * @param {Content} content
     * @return {Tab}
     */

  }, {
    key: "createOrActivate",
    value: function createOrActivate(name, content) {
      var existTab = this.findByName(name);

      if (existTab) {
        this.activate(existTab);
      } else {
        this.create(name, content);
      }
    }
    /**
     * @param {Tab} tab
     */

  }, {
    key: "activate",
    value: function activate(tab) {
      if (tab) {
        this.tabs.forEach(function (pTab) {
          return pTab.unselect();
        });
        var existTab = this.findByName(tab.getName());

        if (existTab) {
          existTab.select();
        } else {
          throw new _SystemError["default"]("Tab with name \"".concat(tab.getName(), "\" not found"));
        }
      }
    }
    /**
     * @param {Tab} tab
     */

  }, {
    key: "remove",
    value: function remove(tab) {
      var indexTab = this.tabs.findIndex(function (pTab) {
        return pTab === tab;
      });

      if (indexTab >= 0) {
        this.tabs.splice(indexTab, 1);
        this.activate(this.tabs[indexTab - 1]);
      } else {
        throw new _SystemError["default"]("Cannot remove Tab Id ".concat(tab.getId(), " : Not found"));
      }
    }
    /**
     * @param {Tab} tab
     */

  }, {
    key: "tryAdd",
    value: function tryAdd(tab) {
      var existTab = this.findByName(tab.getName());

      if (existTab) {
        throw new _SystemError["default"]("Tab with name \"".concat(tab.getName(), "\" already exist!"));
      }

      this.tabs.push(tab);
    }
  }, {
    key: "init",
    value: function init() {
      var scene = this.findByName('Scene');

      if (scene) {
        scene["protected"] = true;
      } else {
        this.create('Scene')["protected"] = true;
      }
    }
  }]);
  return TabManager;
}(_TabManagerData2["default"]);

exports["default"] = TabManager;

},{"../content/Tab.js":63,"../exception/type/SystemError.js":82,"../project/data/TabManagerData.js":299,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],236:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Unit = _interopRequireDefault(require("../unit/Unit.js"));

var _UnitManagerData2 = _interopRequireDefault(require("../project/data/UnitManagerData.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _EmptyUnit = _interopRequireDefault(require("../unit/type/EmptyUnit.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../component/internal/gui/property/GUIPropertyComponent.js"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _ScriptComponent = _interopRequireDefault(require("../component/internal/ScriptComponent.js"));

var _CommonUtil = _interopRequireDefault(require("../utils/CommonUtil.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * Manage the units, components list (get, add, load, ...)
 *
 * @property {Unit[]} units
 */
var UnitManager = /*#__PURE__*/function (_UnitManagerData) {
  (0, _inherits2["default"])(UnitManager, _UnitManagerData);

  var _super = _createSuper(UnitManager);

  function UnitManager() {
    var _this;

    (0, _classCallCheck2["default"])(this, UnitManager);
    _this = _super.call(this);
    _this.units = [];
    return _this;
  }
  /**
   * @param {Unit} unit
   * @return {number}
   */


  (0, _createClass2["default"])(UnitManager, [{
    key: "getIndexOfUnit",
    value: function getIndexOfUnit(unit) {
      return this.units.findIndex(function (element) {
        return element.getId() === unit.getId();
      });
    }
    /**
     * @param {number} unitId
     * @return {Unit}
     */

  }, {
    key: "findUnitById",
    value: function findUnitById(unitId) {
      return this.units.find(function (element) {
        return element.getId() === unitId;
      });
    }
    /**
     * @param {string} name
     * @return {Unit}
     */

  }, {
    key: "findUnitByName",
    value: function findUnitByName(name) {
      return this.units.find(function (element) {
        return element.getName() === name;
      });
    }
    /**
     * @param {MaskGroup} maskGroup
     * @return {Unit[]}
     */

  }, {
    key: "findUnitsByMaskGroup",
    value: function findUnitsByMaskGroup(maskGroup) {
      return this.units.filter(function (unit) {
        return unit.getMaskGroupId() === maskGroup.getId();
      });
    }
    /**
     * @param {Class} type
     * @return {Unit[]}
     */

  }, {
    key: "findUnitsByType",
    value: function findUnitsByType(type) {
      return this.units.filter(function (element) {
        return element instanceof type;
      });
    }
    /**
     * @param {Class} type
     * @return {Unit}
     */

  }, {
    key: "findFirstUnitByType",
    value: function findFirstUnitByType(type) {
      var result = this.findUnitsByType(type);
      return result && result[0];
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Unit[]}
     */

  }, {
    key: "findUnitsByComponents",
    value: function findUnitsByComponents(componentClasses) {
      return this.units.filter(function (element) {
        return element.hasComponents(componentClasses);
      });
    }
    /**
     * @param {Asset} asset
     * @return {Unit[]}
     */

  }, {
    key: "findUnitsByAsset",
    value: function findUnitsByAsset(asset) {
      return this.units.filter(function (unit) {
        var meshComponent = unit.getComponent(_MeshComponent["default"]);

        if (meshComponent) {
          return meshComponent.getAssetId() === asset.getId();
        }
      });
    }
    /**
     * @param {Asset} asset
     */

  }, {
    key: "deleteUnitsByAsset",
    value: function deleteUnitsByAsset(asset) {
      var _this2 = this;

      this.findUnitsByAsset(asset).forEach(function (unit) {
        _this2.deleteUnit(unit);
      });
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Unit[]}
     */

  }, {
    key: "findUnitsByComponentClasses",
    value: function findUnitsByComponentClasses(componentClasses) {
      return this.units.filter(function (element) {
        return element.hasComponentsByClasses(componentClasses);
      });
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Unit[]}
     */

  }, {
    key: "findUnitsByAnyComponentClasses",
    value: function findUnitsByAnyComponentClasses(componentClasses) {
      return this.units.filter(function (element) {
        return element.hasAnyComponentsByClasses(componentClasses);
      });
    }
    /**
     * @param {AScript} script
     * @return {Unit[]}
     */

  }, {
    key: "findUnitsAttachedToScript",
    value: function findUnitsAttachedToScript(script) {
      var _this3 = this;

      return this.units.filter(function (unit) {
        return _this3.findComponentAttachedToScript(unit, script);
      });
    }
    /**
     * @param {Component} component
     * @return {Unit}
     */

  }, {
    key: "findUnitByComponent",
    value: function findUnitByComponent(component) {
      return this.units.find(function (unit) {
        return unit.findComponentById(component.id);
      });
    }
    /**
     * @param {Unit} unit
     * @param {AScript} script
     * @return {Component}
     */

  }, {
    key: "findComponentAttachedToScript",
    value: function findComponentAttachedToScript(unit, script) {
      var scriptComponents = unit.findComponentsByClass(_ScriptComponent["default"]);
      return scriptComponents.find(function (scriptComponent) {
        return scriptComponent.getScript() === script.getName();
      });
    }
    /**
     * @param {number} componentId
     * @return {Component}
     */

  }, {
    key: "findComponentById",
    value: function findComponentById(componentId) {
      for (var iUnit in this.units) {
        var unit = this.units[iUnit];
        var component = unit.findComponentById(componentId);

        if (component) {
          return component;
        }
      }

      return null;
    }
    /**
     * @template T
     * @param {Class} T
     * @return {T}
     */

  }, {
    key: "createUnit",
    value: function createUnit(T) {
      if (!(T.prototype instanceof _Unit["default"])) {
        throw new _ClientError["default"]("Unit type must be child of Unit class (".concat(type, " given)"));
      }

      var unit = new T();
      this.addUnit(unit);
      return unit;
    }
    /**
     * @template T
     * @param {Class} T
     * @param {...any} props
     * @return {T}
     */

  }, {
    key: "createUnitInstant",
    value: function createUnitInstant(T) {
      if (!(T.prototype instanceof _Unit["default"])) {
        throw new _ClientError["default"]("Unit type must be child of Unit class (".concat(type, " given)"));
      }

      var unit = new T();

      for (var _len = arguments.length, props = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        props[_key - 1] = arguments[_key];
      }

      unit.instantiate.apply(unit, props);
      this.addUnit(unit);
      return unit;
    }
    /**
     * @param {string} shape
     * @param {Vector} position
     * @return {Unit}
     */

  }, {
    key: "createPrimitiveUnit",
    value: function createPrimitiveUnit(shape, position) {
      var unit = this.createUnit(_EmptyUnit["default"]);
      unit.setName(shape);
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(new _Vector["default"](_.cloneDeep(position)));
      meshComponent.setShape(shape);
      return unit;
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "addUnit",
    value: function addUnit(unit) {
      var _this4 = this;

      _CommonUtil["default"].setupName(unit, unit.getName(), function (name) {
        return unit.setName(name);
      }, function (name) {
        return _this4.findUnitByName(name);
      });

      var rank = unit.getComponent(_GUIPropertyComponent["default"]).getRank();
      var indexBiggerRank = this.units.findIndex(function (pUnit) {
        return pUnit.getComponent(_GUIPropertyComponent["default"]).getRank() > rank;
      });

      if (indexBiggerRank >= 0) {
        this.units.splice(indexBiggerRank, 0, unit);
      } else {
        this.units.push(unit);
      }
    }
  }, {
    key: "sortUnits",
    value: function sortUnits() {
      this.units.sort(function (unitA, unitB) {
        return unitA.getComponent(_GUIPropertyComponent["default"]).getRank() > unitB.getComponent(_GUIPropertyComponent["default"]).getRank();
      });
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "deleteUnit",
    value: function deleteUnit(unit) {
      return this.units.splice(this.getIndexOfUnit(unit), 1);
    }
    /**
     * @param {number} unitId
     */

  }, {
    key: "deleteUnitById",
    value: function deleteUnitById(unitId) {
      var unit = this.findUnitById(unitId);
      this.deleteUnit(unit);
    }
    /**
     * @param {Unit} unit
     * @param {number} targetIndex
     */

  }, {
    key: "moveUnitToIndex",
    value: function moveUnitToIndex(unit, targetIndex) {
      this.deleteUnit(unit);
      this.units.splice(targetIndex, 0, unit);
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "moveUnitUp",
    value: function moveUnitUp(unit) {
      var index = this.getIndexOfUnit(unit);

      if (index > 0) {
        this.moveUnitToIndex(unit, index - 1);
      }
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "moveUnitDown",
    value: function moveUnitDown(unit) {
      var index = this.getIndexOfUnit(unit);

      if (index < this.units.length - 1) {
        this.moveUnitToIndex(unit, index + 1);
      }
    }
    /**
     * @param {number} unitId
     */

  }, {
    key: "tryDeleteUnitById",
    value: function tryDeleteUnitById(unitId) {
      var unit = this.findUnitById(unitId);
      unit && this.deleteUnit(unit);
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Unit[]}
     */

  }, {
    key: "getUnitsHasComponents",
    value: function getUnitsHasComponents(componentClasses) {
      return this.getUnits().filter(function (unit) {
        return unit.hasComponents(componentClasses);
      });
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Unit[]}
     */

  }, {
    key: "getUnitsHasComponentClasses",
    value: function getUnitsHasComponentClasses(componentClasses) {
      return this.getUnits().filter(function (unit) {
        return unit.hasComponentsByClasses(componentClasses);
      });
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Unit}
     */

  }, {
    key: "getOneUnitHasComponents",
    value: function getOneUnitHasComponents(componentClasses) {
      var result = this.getUnitsHasComponents(componentClasses);
      return result && result[0];
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Unit[]}
     */

  }, {
    key: "getUnitsHasAnyComponents",
    value: function getUnitsHasAnyComponents(componentClasses) {
      return this.getUnits().filter(function (unit) {
        return unit.hasAnyComponents(componentClasses);
      });
    }
    /**
     * @param {Unit} unit
     * @return {Unit}
     */

  }, {
    key: "clone",
    value: function clone(unit) {
      var cloneUnit = _.cloneDeep(unit);

      cloneUnit.setName("Clone of ".concat(unit.getName()));
      cloneUnit.setId(_Maths["default"].generateId());
      this.addUnit(cloneUnit);
      return cloneUnit;
    }
    /**
     * @param {Unit[]} units
     * @return {Unit[]}
     */

  }, {
    key: "cloneUnits",
    value: function cloneUnits(units) {
      var _this5 = this;

      return units.map(function (unit) {
        return _this5.clone(unit);
      });
    }
    /**
     * @param {World} world
     */

  }, {
    key: "regenerateAll",
    value: function regenerateAll(world) {
      this.units.forEach(function (unit) {
        var meshComponent = unit.getComponent(_MeshComponent["default"]);

        if (meshComponent) {
          meshComponent.setGenerated(false);
        }
      });
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "setupName",
    value: function setupName(unit) {
      var initialName = unit.getName();
      var name = initialName;
      var existUnit = null;
      var iDuplicate = 0;

      do {
        unit.setName(name);
        existUnit = this.findUnitByName(name);

        if (existUnit) {
          iDuplicate++;
          name = "".concat(initialName, " (").concat(iDuplicate, ")");
        }
      } while (existUnit);
    }
  }]);
  return UnitManager;
}(_UnitManagerData2["default"]);

exports["default"] = UnitManager;

},{"../component/internal/MeshComponent.js":48,"../component/internal/ScriptComponent.js":51,"../component/internal/TransformComponent.js":53,"../component/internal/gui/property/GUIPropertyComponent.js":61,"../exception/type/ClientError.js":80,"../project/data/UnitManagerData.js":301,"../unit/Unit.js":327,"../unit/type/EmptyUnit.js":351,"../utils/CommonUtil.js":356,"../utils/Maths.js":363,"../utils/Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],237:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Material2 = _interopRequireDefault(require("./Material.js"));

var _MaterialType = _interopRequireDefault(require("./MaterialType.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var DefaultMaterial = /*#__PURE__*/function (_Material) {
  (0, _inherits2["default"])(DefaultMaterial, _Material);

  var _super = _createSuper(DefaultMaterial);

  function DefaultMaterial() {
    (0, _classCallCheck2["default"])(this, DefaultMaterial);
    return _super.call(this, _MaterialType["default"].DEFAULT);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(DefaultMaterial, [{
    key: "generate",
    value: function generate(canvas, dataContext, meshComponent, transformComponent) {}
  }]);
  return DefaultMaterial;
}(_Material2["default"]);

exports["default"] = DefaultMaterial;

},{"./Material.js":239,"./MaterialType.js":240,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],238:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Material2 = _interopRequireDefault(require("./Material.js"));

var _LightHelper = _interopRequireDefault(require("../utils/LightHelper.js"));

var _LightPointComponent = _interopRequireDefault(require("../component/internal/LightPointComponent.js"));

var _LightGlobalComponent = _interopRequireDefault(require("../component/internal/LightGlobalComponent.js"));

var _Constant = require("../core/Constant.js");

var _MaterialType = _interopRequireDefault(require("./MaterialType.js"));

var _Color = _interopRequireDefault(require("../utils/Color.js"));

var _ImageHelper = _interopRequireDefault(require("../utils/ImageHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LightMaterial = /*#__PURE__*/function (_Material) {
  (0, _inherits2["default"])(LightMaterial, _Material);

  var _super = _createSuper(LightMaterial);

  function LightMaterial() {
    (0, _classCallCheck2["default"])(this, LightMaterial);
    return _super.call(this, _MaterialType["default"].LIGHT);
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(LightMaterial, [{
    key: "generate",
    value: function generate(canvas, dataContext, meshComponent, transformComponent) {
      var context = dataContext.context,
          scaleSize = dataContext.scaleSize,
          world = dataContext.world,
          camera = dataContext.camera;
      var unitManager = world.getUnitManager();
      var lightGlobalUnits = unitManager.findUnitsByComponents([_LightGlobalComponent["default"]]);
      var globalIntensity = 1;
      var globalColor = '#000000';

      if (lightGlobalUnits.length) {
        var lightGlobalComponent = lightGlobalUnits[0].getComponent(_LightGlobalComponent["default"]);
        globalIntensity = lightGlobalComponent.getIntensity();
        globalColor = lightGlobalComponent.getColor();
      }

      var globalColorRgba = _Color["default"].hexToRgb(globalColor, globalIntensity);

      var canvasLightContainer = new OffscreenCanvas(scaleSize.width, scaleSize.height);
      var contextLightContainer = canvasLightContainer.getContext(_Constant.CANVAS_CONTEXT_TYPE);
      contextLightContainer.fillStyle = globalColorRgba;
      contextLightContainer.fillRect(0, 0, scaleSize.width, scaleSize.height);
      var canvasLights = new OffscreenCanvas(scaleSize.width, scaleSize.height);
      var contextLights = canvasLights.getContext(_Constant.CANVAS_CONTEXT_TYPE);
      contextLights.globalCompositeOperation = 'lighter';
      unitManager.findUnitsByComponentClasses([_LightPointComponent["default"]]).forEach(function (unitLight) {
        var lightCanvas = _LightHelper["default"].getPoint(unitLight, camera, transformComponent.getPosition(), scaleSize, globalIntensity, globalColor);

        contextLights.drawImage(lightCanvas, 0, 0, scaleSize.width, scaleSize.height);
      });
      contextLightContainer.drawImage(canvasLights, 0, 0, scaleSize.width, scaleSize.height);

      var lightCanvasSourceAtop = _ImageHelper["default"].copyCanvas(context.canvas);

      var lightContextSourceAtop = lightCanvasSourceAtop.getContext(_Constant.CANVAS_CONTEXT_TYPE);
      lightContextSourceAtop.globalCompositeOperation = 'source-atop';
      lightContextSourceAtop.drawImage(canvasLightContainer, 0, 0, scaleSize.width, scaleSize.height);
      var globalCompositeOperation = context.globalCompositeOperation;
      context.globalCompositeOperation = 'multiply';
      context.drawImage(lightCanvasSourceAtop, 0, 0, scaleSize.width, scaleSize.height);
      context.globalCompositeOperation = globalCompositeOperation;
    }
  }]);
  return LightMaterial;
}(_Material2["default"]);

exports["default"] = LightMaterial;

},{"../component/internal/LightGlobalComponent.js":46,"../component/internal/LightPointComponent.js":47,"../core/Constant.js":70,"../utils/Color.js":355,"../utils/ImageHelper.js":361,"../utils/LightHelper.js":362,"./Material.js":239,"./MaterialType.js":240,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],239:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _MaterialData2 = _interopRequireDefault(require("../project/data/MaterialData.js"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var Material = /*#__PURE__*/function (_MaterialData) {
  (0, _inherits2["default"])(Material, _MaterialData);

  var _super = _createSuper(Material);

  /**
   * @param {string} name
   */
  function Material(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, Material);
    _this = _super.call(this);
    _this.id = _Maths["default"].generateId();
    _this.name = name;
    return _this;
  }
  /**
   * @abstract
   * @param {OffscreenCanvas} canvas
   * @param {DataContext} dataContext
   * @param {MeshComponent} meshComponent
   * @param {TransformComponent} transformComponent
   * @return {void}
   */


  (0, _createClass2["default"])(Material, [{
    key: "generate",
    value: function generate(canvas, dataContext, meshComponent, transformComponent) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".generate must be implement"));
    }
  }]);
  return Material;
}(_MaterialData2["default"]);

exports["default"] = Material;

},{"../exception/type/SystemError.js":82,"../project/data/MaterialData.js":292,"../utils/Maths.js":363,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],240:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _default = {
  DEFAULT: 'default',
  LIGHT: 'light'
};
exports["default"] = _default;

},{}],241:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.OPERATIONS = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var StackOperation = /*#__PURE__*/function () {
  /**
   * @type {string}
   */

  /**
   * @type{string[]}
   */

  /**
   * @param {string} operation
   * @param {string} args
   */
  function StackOperation(operation) {
    (0, _classCallCheck2["default"])(this, StackOperation);
    (0, _defineProperty2["default"])(this, "operation", void 0);
    (0, _defineProperty2["default"])(this, "args", void 0);
    this.operation = operation;

    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    this.args = args;
  }
  /**
   * @param {string} operation
   */


  (0, _createClass2["default"])(StackOperation, [{
    key: "setOperation",
    value: function setOperation(operation) {
      this.operation = operation;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getOperation",
    value: function getOperation() {
      return this.operation;
    }
    /**
     * @return {string[]}
     */

  }, {
    key: "getArgs",
    value: function getArgs() {
      return this.args;
    }
    /**
     * @param {string[]} args
     */

  }, {
    key: "setArgs",
    value: function setArgs(args) {
      this.args = args;
    }
    /**
     * @param {string[]} args
     */

  }, {
    key: "concatArgs",
    value: function concatArgs(args) {
      this.setArgs(args);
    }
  }]);
  return StackOperation;
}();

exports["default"] = StackOperation;
var OPERATIONS = {
  PUSH: 'push',
  GET: 'get',
  SET: 'set',
  CALL: 'call',
  EXIT: 'exit',
  JUMP: 'jump',
  JUMP_TO: 'jump_to',
  DISPATCH: 'dispatch',
  SELF: 'self'
};
exports.OPERATIONS = OPERATIONS;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],242:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _StackOperation = _interopRequireWildcard(require("./StackOperation.js"));

var _CallProcessor = _interopRequireDefault(require("./processor/CallProcessor.js"));

var _StackRegister = _interopRequireDefault(require("./StackRegister.js"));

var _PushProcessor = _interopRequireDefault(require("./processor/PushProcessor.js"));

var _ExitProcessor = _interopRequireDefault(require("./processor/ExitProcessor.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var _GetProcessor = _interopRequireDefault(require("./processor/GetProcessor.js"));

var _EventProcessor = _interopRequireDefault(require("./processor/EventProcessor.js"));

var _JumpProcessor = _interopRequireDefault(require("./processor/JumpProcessor.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _SelfProcessor = _interopRequireDefault(require("./processor/SelfProcessor.js"));

var _SetProcessor = _interopRequireDefault(require("./processor/SetProcessor.js"));

var StackProcessor = /*#__PURE__*/function () {
  /**
   * @type {StackRegister}
   */
  function StackProcessor() {
    (0, _classCallCheck2["default"])(this, StackProcessor);
    (0, _defineProperty2["default"])(this, "stackRegister", void 0);
    this.stackRegister = _StackRegister["default"].get();
  }
  /**
   * @param {string} functionName
   * @param {StackOperation[]} stack
   * @param {FunctionRegistry} functionRegistry
   * @param {Unit} unit
   * @param {ScriptComponent} scriptComponent
   * @param {World} world
   * @return {StackRegister}
   */


  (0, _createClass2["default"])(StackProcessor, [{
    key: "run",
    value: function run(functionName, stack, functionRegistry, unit, scriptComponent, world) {
      var _this = this;

      var iStackOperation = 0;

      var _loop = function _loop() {
        var stackOperation = stack[iStackOperation];

        if (_this.stackRegister.popSignal(functionName)) {
          return "break";
        }

        if (stackOperation instanceof _StackOperation["default"]) {
          var operation = stackOperation.getOperation();

          switch (operation) {
            case _StackOperation.OPERATIONS.CALL:
              _CallProcessor["default"].run(functionName, stackOperation, _this.stackRegister, functionRegistry, unit, scriptComponent, world);

              break;

            case _StackOperation.OPERATIONS.DISPATCH:
              _EventProcessor["default"].run(stackOperation, _this.stackRegister, functionRegistry, unit, scriptComponent, world);

              break;

            case _StackOperation.OPERATIONS.GET:
              _GetProcessor["default"].run(functionName, stackOperation, _this.stackRegister, unit, scriptComponent);

              break;

            case _StackOperation.OPERATIONS.SET:
              _SetProcessor["default"].run(functionName, stackOperation, _this.stackRegister, unit, scriptComponent);

              break;

            case _StackOperation.OPERATIONS.SELF:
              _SelfProcessor["default"].run(functionName, stackOperation, _this.stackRegister, unit, scriptComponent);

              break;

            case _StackOperation.OPERATIONS.PUSH:
              _PushProcessor["default"].run(functionName, stackOperation, _this.stackRegister);

              break;

            case _StackOperation.OPERATIONS.EXIT:
              _ExitProcessor["default"].run(functionName, stackOperation, _this.stackRegister);

              break;

            case _StackOperation.OPERATIONS.JUMP:
              _JumpProcessor["default"].run(functionName, stackOperation, _this.stackRegister);

              break;

            case _StackOperation.OPERATIONS.JUMP_TO:
              // No action needed
              break;

            default:
              throw new _SystemError["default"]("Stack operation ".concat(operation, " is not supported"));
          }
        } else {
          throw new _SystemError["default"]("Stack operation is not valid");
        }

        var jumpTo = _this.stackRegister.popJump(functionName);

        if (jumpTo) {
          var nextJumpToIndex = stack.findIndex(function (vStack) {
            return vStack.getOperation() === _StackOperation.OPERATIONS.JUMP_TO && vStack.getArgs()[0] === jumpTo;
          });

          if (nextJumpToIndex >= 0) {
            iStackOperation = nextJumpToIndex;
          } else {
            throw new _ClientError["default"]("No \"JUMP TO\" operation found for \"".concat(jumpTo, "\""));
          }
        }

        iStackOperation++;
      };

      while (iStackOperation < stack.length) {
        var _ret = _loop();

        if (_ret === "break") break;
      }

      return this.stackRegister;
    }
    /**
     * @return {StackProcessor}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return StackProcessor;
}();

exports["default"] = StackProcessor;
(0, _defineProperty2["default"])(StackProcessor, "instance", void 0);

},{"../exception/type/ClientError.js":80,"../exception/type/SystemError.js":82,"./StackOperation.js":241,"./StackRegister.js":243,"./processor/CallProcessor.js":244,"./processor/EventProcessor.js":245,"./processor/ExitProcessor.js":246,"./processor/GetProcessor.js":247,"./processor/JumpProcessor.js":248,"./processor/PushProcessor.js":249,"./processor/SelfProcessor.js":250,"./processor/SetProcessor.js":251,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13}],243:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CONSTANTS = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var StackRegister = /*#__PURE__*/function () {
  /**
   * @type {Object}
   */
  function StackRegister() {
    (0, _classCallCheck2["default"])(this, StackRegister);
    (0, _defineProperty2["default"])(this, "register", void 0);
    this.register = {};
  }
  /**
   * @param {string} functionName
   * @param {string} name
   * @param {*} value
   */


  (0, _createClass2["default"])(StackRegister, [{
    key: "push",
    value: function push(functionName, name, value) {
      this.register[this.getScopeName(functionName, name)] = value;
    }
    /**
     * @param {string} functionName
     * @param {*} value
     */

  }, {
    key: "pushRet",
    value: function pushRet(functionName, value) {
      this.register[this.getScopeName(functionName, CONSTANTS.RESULT)] = value;
    }
    /**
     * @param {string} functionName
     * @param {*} value
     */

  }, {
    key: "pushSignal",
    value: function pushSignal(functionName, value) {
      this.register[this.getScopeName(functionName, CONSTANTS.SIGNAL)] = value;
    }
    /**
     * @param {string} functionName
     * @param {*} value
     */

  }, {
    key: "pushJump",
    value: function pushJump(functionName, value) {
      this.register[this.getScopeName(functionName, CONSTANTS.JUMP)] = value;
    }
    /**
     * @param {string} functionName
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "pop",
    value: function pop(functionName, name) {
      var value = this.register[this.getScopeName(functionName, name)];

      if (!this.isMemory(name)) {
        this["delete"](functionName, name);
      }

      return value;
    }
    /**
     * @param {string} functionName
     * @return {*}
     */

  }, {
    key: "popRet",
    value: function popRet(functionName) {
      return this.register[this.getScopeName(functionName, CONSTANTS.RESULT)];
    }
    /**
     * @param {string} functionName
     * @param {string} name
     */

  }, {
    key: "delete",
    value: function _delete(functionName, name) {
      delete this.register[this.getScopeName(functionName, name)];
    }
    /**
     * @param {string} functionName
     * @return {*}
     */

  }, {
    key: "popSignal",
    value: function popSignal(functionName) {
      return this.pop(functionName, CONSTANTS.SIGNAL);
    }
    /**
     * @param {string} functionName
     * @return {*}
     */

  }, {
    key: "popJump",
    value: function popJump(functionName) {
      return this.pop(functionName, CONSTANTS.JUMP);
    }
    /**
     * @param {string} name
     * @return {boolean}
     */

  }, {
    key: "isMemory",
    value: function isMemory(name) {
      return !!"".concat(name).match(/^\[MEM].*/);
    }
    /**
     * @param {string} functionName
     * @param {string} name
     * @return {string}
     */

  }, {
    key: "getScopeName",
    value: function getScopeName(functionName, name) {
      if (name === CONSTANTS.RESULT || name === CONSTANTS.JUMP || name === CONSTANTS.SIGNAL || this.isMemory(name)) {
        return name;
      }

      return functionName ? "".concat(functionName, ".").concat(name) : name;
    }
    /**
     * @return {StackRegister}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return StackRegister;
}();

exports["default"] = StackRegister;
(0, _defineProperty2["default"])(StackRegister, "instance", void 0);
var CONSTANTS = {
  RESULT: '__result__',
  SIGNAL: '__signal__',
  JUMP: '__jump__'
};
exports.CONSTANTS = CONSTANTS;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],244:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("../../utils/DynamicAttributeHelper.js"));

var CallProcessor = /*#__PURE__*/function () {
  function CallProcessor() {
    (0, _classCallCheck2["default"])(this, CallProcessor);
  }

  (0, _createClass2["default"])(CallProcessor, null, [{
    key: "run",

    /**
     * @param {string} functionName
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     * @param {FunctionRegistry} functionRegistry
     * @param {Unit} unit
     * @param {ScriptComponent} scriptComponent
     * @param {World} world
     */
    value: function run(functionName, stackOperation, stackRegister, functionRegistry, unit, scriptComponent, world) {
      var args = stackOperation.getArgs();
      var calledFunctionName = args && args[0];

      if (!calledFunctionName) {
        throw new _ClientError["default"]("Stack operation invalid (Function not provided)");
      }

      var aFunction = functionRegistry.getInstance(calledFunctionName);

      if (!aFunction) {
        throw new _ClientError["default"]("Function \"".concat(calledFunctionName, "\" not founded in the registry"));
      }

      var inputs = aFunction.getInputs();
      inputs.forEach(function (input) {
        var inputName = input.getAttrName();
        var inputType = input.getAttrType();
        var value = stackRegister.pop(functionName, inputName);

        var inputValue = _DynamicAttributeHelper["default"].getValueByType(value, inputType, world, unit, scriptComponent);

        if (value === null) {
          throw new _ClientError["default"]("Function \"".concat(calledFunctionName, "\": Input name ").concat(inputName, " not provided"));
        }

        aFunction.setInputValue(inputName, inputValue);
      });
      aFunction.execute(functionRegistry, unit, scriptComponent, world);
      stackRegister.pushRet(functionName, aFunction.getOutputValue());
    }
  }]);
  return CallProcessor;
}();

exports["default"] = CallProcessor;

},{"../../exception/type/ClientError.js":80,"../../utils/DynamicAttributeHelper.js":358,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],245:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var EventProcessor = /*#__PURE__*/function () {
  function EventProcessor() {
    (0, _classCallCheck2["default"])(this, EventProcessor);
  }

  (0, _createClass2["default"])(EventProcessor, null, [{
    key: "run",

    /**
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     * @param {FunctionRegistry} functionRegistry
     * @param {Unit} unit
     * @param {ScriptComponent} scriptComponent
     * @param {World} world
     */
    value: function run(stackOperation, stackRegister, functionRegistry, unit, scriptComponent, world) {
      var args = stackOperation.getArgs();

      if (args.length !== 1) {
        throw new _ClientError["default"]("Dispatch: Inputs invalids (expected: 1, given: ".concat(args.length, ")"));
      }

      var eventName = args && args[0];

      if (!eventName) {
        throw new _ClientError["default"]("Stack operation invalid (Event not provided)");
      }

      var aEvent = functionRegistry.getInstance(eventName);

      if (!eventName) {
        throw new _ClientError["default"]("Event \"".concat(eventName, "\" not founded in the registry"));
      }

      functionRegistry.getInstancesByClass(scriptComponent.getScript()).forEach(function (instance) {
        if (instance instanceof aEvent.constructor) {
          instance.execute(functionRegistry, unit, scriptComponent, world);
        }
      });
    }
  }]);
  return EventProcessor;
}();

exports["default"] = EventProcessor;

},{"../../exception/type/ClientError.js":80,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],246:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _StackRegister = require("../StackRegister.js");

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var ExitProcessor = /*#__PURE__*/function () {
  function ExitProcessor() {
    (0, _classCallCheck2["default"])(this, ExitProcessor);
  }

  (0, _createClass2["default"])(ExitProcessor, null, [{
    key: "run",

    /**
     * @param {string} functionName
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     */
    value: function run(functionName, stackOperation, stackRegister) {
      var args = stackOperation.getArgs();

      if (args.length !== 1) {
        throw new _ClientError["default"]("Push: Inputs invalids (expected: 1, given: ".concat(args.length, ")"));
      }

      var name = args[0];

      if (name === _StackRegister.CONSTANTS.RESULT) {
        stackRegister.pushSignal(functionName, !stackRegister.popRet(functionName));
      } else {
        stackRegister.pushSignal(functionName, !stackRegister.pop(functionName, name));
      }
    }
  }]);
  return ExitProcessor;
}();

exports["default"] = ExitProcessor;

},{"../../exception/type/ClientError.js":80,"../StackRegister.js":243,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],247:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

var GetProcessor = /*#__PURE__*/function () {
  function GetProcessor() {
    (0, _classCallCheck2["default"])(this, GetProcessor);
  }

  (0, _createClass2["default"])(GetProcessor, null, [{
    key: "run",

    /**
     * @param {string} functionName
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     * @param {Unit} unit
     * @param {ScriptComponent} scriptComponent
     */
    value: function run(functionName, stackOperation, stackRegister, unit, scriptComponent) {
      var args = stackOperation.getArgs();

      if (args.length !== 1) {
        throw new _ClientError["default"]("Get: Inputs invalids (expected: 1, given: ".concat(args.length, ")"));
      }

      var name = args[0];

      if (!scriptComponent || !scriptComponent.hasAttribute(name)) {
        throw new _SystemError["default"]("".concat(this.constructor.name, ": No value bound for variable \"").concat(name, "\""));
      }

      stackRegister.pushRet(functionName, scriptComponent.getValue(name));
    }
  }]);
  return GetProcessor;
}();

exports["default"] = GetProcessor;

},{"../../exception/type/ClientError.js":80,"../../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],248:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _StackRegister = require("../StackRegister.js");

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var JumpProcessor = /*#__PURE__*/function () {
  function JumpProcessor() {
    (0, _classCallCheck2["default"])(this, JumpProcessor);
  }

  (0, _createClass2["default"])(JumpProcessor, null, [{
    key: "run",

    /**
     * @param {string} functionName
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     */
    value: function run(functionName, stackOperation, stackRegister) {
      var args = stackOperation.getArgs();

      if (args.length !== 2) {
        throw new _ClientError["default"]("Jump: Inputs invalids (expected: 2, given: ".concat(args.length, ")"));
      }

      var name = args[0];
      var jumpTo = args[1];

      if (name === _StackRegister.CONSTANTS.RESULT) {
        stackRegister.pushJump(functionName, !stackRegister.popRet(functionName) ? jumpTo : null);
      } else {
        stackRegister.pushJump(functionName, !stackRegister.pop(functionName, name) ? jumpTo : null);
      }
    }
  }]);
  return JumpProcessor;
}();

exports["default"] = JumpProcessor;

},{"../../exception/type/ClientError.js":80,"../StackRegister.js":243,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],249:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _StackRegister = require("../StackRegister.js");

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var PushProcessor = /*#__PURE__*/function () {
  function PushProcessor() {
    (0, _classCallCheck2["default"])(this, PushProcessor);
  }

  (0, _createClass2["default"])(PushProcessor, null, [{
    key: "run",

    /**
     * @param {string} functionName
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     */
    value: function run(functionName, stackOperation, stackRegister) {
      var args = stackOperation.getArgs();

      if (args.length !== 2) {
        throw new _ClientError["default"]("Push: Inputs invalids (expected: 2, given: ".concat(args.length, ")"));
      }

      var name = args[0];
      var value = args[1];

      if (!name) {
        throw new _ClientError["default"]("Push operation invalid (Name not provided)");
      }

      if (value === _StackRegister.CONSTANTS.RESULT) {
        stackRegister.push(functionName, name, stackRegister.popRet(functionName));
      } else if (stackRegister.isMemory(value)) {
        stackRegister.push(functionName, name, stackRegister.pop(functionName, value));
      } else {
        stackRegister.push(functionName, name, value);
      }
    }
  }]);
  return PushProcessor;
}();

exports["default"] = PushProcessor;

},{"../../exception/type/ClientError.js":80,"../StackRegister.js":243,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],250:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var _AttributeType = _interopRequireWildcard(require("../../pobject/AttributeType.js"));

var SelfProcessor = /*#__PURE__*/function () {
  function SelfProcessor() {
    (0, _classCallCheck2["default"])(this, SelfProcessor);
  }

  (0, _createClass2["default"])(SelfProcessor, null, [{
    key: "run",

    /**
     * @param {string} functionName
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     * @param {Unit} unit
     * @param {ScriptComponent} scriptComponent
     */
    value: function run(functionName, stackOperation, stackRegister, unit, scriptComponent) {
      var args = stackOperation.getArgs();

      if (args.length !== 1) {
        throw new _ClientError["default"]("Self: Inputs invalids (expected: 1, given: ".concat(args.length, ")"));
      }

      var type = args[0];

      if (_AttributeType["default"].is(type, _AttributeType.TYPES.UNIT)) {
        stackRegister.pushRet(functionName, unit.getId());
      } else if (_AttributeType["default"].is(type, _AttributeType.TYPES.COMPONENT_INSTANCE)) {
        stackRegister.pushRet(functionName, scriptComponent.getId());
      } else {
        throw new _ClientError["default"]("Self: Input type \"".concat(type, "\" not supported"));
      }
    }
  }]);
  return SelfProcessor;
}();

exports["default"] = SelfProcessor;

},{"../../exception/type/ClientError.js":80,"../../pobject/AttributeType.js":263,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13}],251:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

var SetProcessor = /*#__PURE__*/function () {
  function SetProcessor() {
    (0, _classCallCheck2["default"])(this, SetProcessor);
  }

  (0, _createClass2["default"])(SetProcessor, null, [{
    key: "run",

    /**
     * @param {string} functionName
     * @param {StackOperation} stackOperation
     * @param {StackRegister} stackRegister
     * @param {Unit} unit
     * @param {ScriptComponent} scriptComponent
     */
    value: function run(functionName, stackOperation, stackRegister, unit, scriptComponent) {
      var args = stackOperation.getArgs();

      if (args.length !== 1) {
        throw new _ClientError["default"]("Set: Inputs invalids (expected: 1, given: ".concat(args.length, ")"));
      }

      var name = args[0];

      if (!scriptComponent || !scriptComponent.hasAttribute(name)) {
        throw new _SystemError["default"]("".concat(this.constructor.name, ": No value bound for variable \"").concat(name, "\""));
      }

      scriptComponent.setValue(name, stackRegister.popRet(functionName));
    }
  }]);
  return SetProcessor;
}();

exports["default"] = SetProcessor;

},{"../../exception/type/ClientError.js":80,"../../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],252:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

/**
 * @abstract
 */
var Parser = /*#__PURE__*/function () {
  function Parser() {
    (0, _classCallCheck2["default"])(this, Parser);
  }

  (0, _createClass2["default"])(Parser, null, [{
    key: "parse",

    /**
     * @abstract
     * @param {*} data
     * @return {*}
     */
    value: function parse(data) {
      throw new _SystemError["default"]("".concat(this.prototype.name, ".parse must be implemented"));
    }
  }]);
  return Parser;
}();

exports["default"] = Parser;

},{"../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],253:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Parser2 = _interopRequireDefault(require("../Parser.js"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var _Animation = _interopRequireDefault(require("../../animation/Animation.js"));

var _KeyFrame = _interopRequireDefault(require("../../animation/KeyFrame.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AnimationParser = /*#__PURE__*/function (_Parser) {
  (0, _inherits2["default"])(AnimationParser, _Parser);

  var _super = _createSuper(AnimationParser);

  function AnimationParser() {
    (0, _classCallCheck2["default"])(this, AnimationParser);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AnimationParser, null, [{
    key: "parse",

    /**
     * @param {Document} xmlDocument
     * @return {Animation}
     */
    value: function parse(xmlDocument) {
      if (xmlDocument.constructor === XMLDocument) {
        var xmlNode = xmlDocument.documentElement;
        var id = parseInt(xmlNode.getAttribute('id'));
        var name = xmlNode.getAttribute('name');
        var samples = xmlNode.getAttribute('samples');
        var lengthSecond = xmlNode.getAttribute('length');
        var animation = new _Animation["default"](id, name);
        var keyframes = [];
        xmlNode.childNodes.forEach(function (cXmlNode) {
          var element = cXmlNode.nodeName;

          if (element === 'frame') {
            var asset = cXmlNode.getAttribute('asset');
            var time = cXmlNode.getAttribute('time');
            var frameId = parseInt(cXmlNode.getAttribute('id'));
            var keyframe = new _KeyFrame["default"]();
            keyframe.setId(frameId);
            keyframe.setAssetId(parseInt(asset));
            keyframe.setTime(parseInt(time));
            keyframes.push(keyframe);
          }
        });
        animation.setFrames(keyframes);
        animation.setSamples(parseInt(samples));
        animation.setLengthSecond(parseFloat(lengthSecond));
        return animation;
      } else {
        throw new _ClientError["default"]("".concat(this.constructor.name, ": data must be an XML Document"));
      }
    }
    /**
     * @param {Document} xmlDocument
     * @param {string} newName
     */

  }, {
    key: "rename",
    value: function rename(xmlDocument, newName) {
      var xmlNode = xmlDocument.documentElement;
      xmlNode.setAttribute('name', newName);
    }
  }]);
  return AnimationParser;
}(_Parser2["default"]);

exports["default"] = AnimationParser;

},{"../../animation/Animation.js":27,"../../animation/KeyFrame.js":28,"../../exception/type/ClientError.js":80,"../Parser.js":252,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],254:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Parser2 = _interopRequireDefault(require("../Parser.js"));

var _ClassScriptXmlParser = _interopRequireDefault(require("./class/ClassScriptXmlParser.js"));

var _ClassScriptCodeParser = _interopRequireDefault(require("./class/ClassScriptCodeParser.js"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScriptParser = /*#__PURE__*/function (_Parser) {
  (0, _inherits2["default"])(ScriptParser, _Parser);

  var _super = _createSuper(ScriptParser);

  function ScriptParser() {
    (0, _classCallCheck2["default"])(this, ScriptParser);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ScriptParser, null, [{
    key: "parse",

    /**
     * @param {Document|string} data
     * @return {AScript}
     */
    value: function parse(data) {
      var type;

      switch (data.constructor) {
        case XMLDocument:
          type = data.documentElement.getAttribute('type');

          if (type === 'class') {
            return _ClassScriptXmlParser["default"].parse(data);
          } else {
            throw new _ClientError["default"]("Script data type \"".concat(type, "\" not supported"));
          }

        case String:
          type = 'class';

          if (type === 'class') {
            var dataStrip = data.replace(/(<([^>]+)>)/gi, '').replace(/&nbsp;/g, ' ');
            return _ClassScriptCodeParser["default"].parse(dataStrip);
          } else {
            throw new _ClientError["default"]("Script data type \"".concat(type, "\" not supported"));
          }

        default:
          throw new _ClientError["default"]("Script data format not supported (".concat(data.constructor.name, " given)"));
      }
    }
    /**
     * @param {Document|string} data
     * @param {string} newName
     */

  }, {
    key: "rename",
    value: function rename(data, newName) {
      if (data) {
        switch (data.constructor) {
          case XMLDocument:
            var type = data.documentElement.getAttribute('type');

            if (type === 'class') {
              var xmlNode = data.documentElement;
              xmlNode.setAttribute('name', newName);
            } else {
              throw new _ClientError["default"]("Script data type \"".concat(type, "\" not supported"));
            }

            break;

          default:
            throw new _ClientError["default"]("Script data format not supported (".concat(data.constructor.name, " given)"));
        }
      }
    }
  }]);
  return ScriptParser;
}(_Parser2["default"]);

exports["default"] = ScriptParser;

},{"../../exception/type/ClientError.js":80,"../Parser.js":252,"./class/ClassScriptCodeParser.js":255,"./class/ClassScriptXmlParser.js":256,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],255:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Parser2 = _interopRequireDefault(require("../../Parser.js"));

var _ClassScript = _interopRequireDefault(require("../../../flow/ClassScript.js"));

var _World = _interopRequireDefault(require("../../../world/World.js"));

var _ANode = require("../../../flow/node/ANode.js");

var _ScriptHelper = _interopRequireDefault(require("../../../utils/ScriptHelper.js"));

var _NodeHelper = _interopRequireDefault(require("../../../utils/NodeHelper.js"));

var _ClientError = _interopRequireDefault(require("../../../exception/type/ClientError.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ClassScriptCodeParser = /*#__PURE__*/function (_Parser) {
  (0, _inherits2["default"])(ClassScriptCodeParser, _Parser);

  var _super = _createSuper(ClassScriptCodeParser);

  function ClassScriptCodeParser() {
    (0, _classCallCheck2["default"])(this, ClassScriptCodeParser);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ClassScriptCodeParser, null, [{
    key: "parse",

    /**
     * @override
     * @param {string} code
     * @return {AScript}
     */
    value: function parse(code) {
      var scriptCode = code.trim();
      var name = this.getClassName(scriptCode);
      var script = new _ClassScript["default"](name);

      var functionRegistry = _World["default"].get().getFunctionRegistry();

      var nodes = this.getNodes(scriptCode);
      nodes.forEach(function (node) {
        var scriptNode = _ScriptHelper["default"].createNode(functionRegistry, script, node.type, node.value);

        node.id = scriptNode.getId();
      });
      var edges = this.getEdges(script, nodes);
      edges.forEach(function (edge) {
        var nodeSource = script.findNodeById(edge.sourceId);
        var nodeTarget = script.findNodeById(edge.targetId);

        if (!nodeSource) {
          throw new _ClientError["default"]("ClassScriptCodeParser Error: Node ".concat(edge.sourceId, " not founded"));
        }

        if (!nodeTarget) {
          throw new _ClientError["default"]("ClassScriptCodeParser Error: Node ".concat(edge.targetId, " not founded"));
        }

        nodeTarget.attach(nodeSource, edge.connectionId);
      });
      return script;
    }
    /**
     * @param {string} code
     * @return {string}
     */

  }, {
    key: "getClassName",
    value: function getClassName(code) {
      var nameRegex = new RegExp("^".concat(this.KW_CLASS, "[\\s]+([a-zA-Z0-9]+)[\\s]*{.*}$"), 's');
      var nameMatch = code.match(nameRegex);
      return nameMatch[1];
    }
    /**
     * @param {string} code
     * @return {NodeScriptParser[]}
     */

  }, {
    key: "getNodes",
    value: function getNodes(code) {
      var nodes = [];
      var bodyRegex = new RegExp("^".concat(this.KW_CLASS, "[\\s]+\\w+[\\s]*{(.*)}$"), 's');
      var bodyMatch = code.match(bodyRegex);
      var body = bodyMatch[1].trim();
      var constantNodes = this.getConstantNodes(body);
      var structureNodes = this.getStructureNodes(body);
      var functionNodes = this.getFunctionNodes(body);
      var eventNodes = this.getEventNodes(body);
      var conditionNodes = this.getConditionNodes(body);
      nodes = nodes.concat(constantNodes).concat(structureNodes).concat(functionNodes).concat(eventNodes).concat(conditionNodes);
      return nodes;
    }
    /**
     * @param {AScript} script
     * @param {NodeScriptParser[]} nodes
     * @return {EdgeScriptParser[]}
     */

  }, {
    key: "getEdges",
    value: function getEdges(script, nodes) {
      var _this = this;

      return nodes.reduce(function (edges, node) {
        var targetNode = script.findNodeById(node.id);

        var targetSourceNode = _NodeHelper["default"].getSourceNode(targetNode);

        var inputs = targetSourceNode.getInputs();
        return edges.concat([].concat(_this.getConstantEdges(script, nodes, node, inputs)).concat(_this.getFunctionEdges(script, nodes, node, inputs)).concat(_this.getEventEdges(script, nodes, node, inputs)).concat(_this.getConditionEdges(script, nodes, node, inputs)).map(function (edge) {
          return _objectSpread({
            targetId: targetNode.getId()
          }, edge);
        }));
      }, []);
    }
    /**
     * @param {AScript} script
     * @param {NodeScriptParser[]} nodes
     * @param {NodeScriptParser} node
     * @param {DynamicAttribute[]} inputs
     * @return {EdgeScriptParser[]}
     */

  }, {
    key: "getConstantEdges",
    value: function getConstantEdges(script, nodes, node, inputs) {
      var edges = [];

      if (node.type === _ANode.NODE_TYPES.FUNCTION) {
        node.params.forEach(function (param, iParam) {
          var nodeParam = param.trim();
          var constantParamMatch = nodeParam.match(/^(-?\d+)$/) || nodeParam.match(/"([^"]+)"/);

          if (constantParamMatch) {
            var constantParam = constantParamMatch[1];
            var sourceName = constantParam.replace(/["']/g, '');
            var sourceNode = script.findNodeByName(sourceName);
            var connection = inputs[iParam];

            if (!connection) {
              throw new _ClientError["default"]("ClassScriptCodeParser: parameter ".concat(index, " not found for ").concat(sourceName));
            }

            edges.push({
              sourceId: sourceNode.getId(),
              connectionId: connection.getId()
            });
          }
        });
      }

      return edges;
    }
    /**
     * @param {AScript} script
     * @param {NodeScriptParser[]} nodes
     * @param {NodeScriptParser} node
     * @param {DynamicAttribute[]} inputs
     * @return {EdgeScriptParser[]}
     */

  }, {
    key: "getFunctionEdges",
    value: function getFunctionEdges(script, nodes, node, inputs) {
      var edges = [];

      if (node.type === _ANode.NODE_TYPES.FUNCTION) {
        node.params.forEach(function (param, iParam) {
          var nodeParam = param.trim();
          var variableParamMatch = !nodeParam.match(/^-?\d+$/) && !nodeParam.match(/"[^"]+"/);

          if (variableParamMatch) {
            var sourceNodeParser = nodes.find(function (pNode) {
              return pNode.name === nodeParam;
            });

            if (!sourceNodeParser) {
              throw new _ClientError["default"]("ClassScriptCodeParser: variable \"".concat(nodeParam, "\" undefined"));
            }

            var sourceId = sourceNodeParser.id;
            var connection = inputs[iParam];

            if (!connection) {
              throw new _ClientError["default"]("ClassScriptCodeParser: parameter ".concat(index, " not found for ").concat(sourceNodeParser.name));
            }

            edges.push({
              sourceId: sourceId,
              connectionId: connection.getId()
            });
          }
        });
      }

      return edges;
    }
    /**
     * @param {AScript} script
     * @param {NodeScriptParser[]} nodes
     * @param {NodeScriptParser} node
     * @param {DynamicAttribute[]} inputs
     * @return {EdgeScriptParser[]}
     */

  }, {
    key: "getEventEdges",
    value: function getEventEdges(script, nodes, node, inputs) {
      var _this2 = this;

      var edges = [];

      if (node.type === _ANode.NODE_TYPES.EVENT) {
        node.params.forEach(function (param) {
          var nodeParam = param.trim();
          var conditionRegex = new RegExp("^".concat(_this2.KW_IF, "\\s*\\(\\w+\\)"));
          var functionParamMatch = nodeParam.match(/^(\w+)\([^)]*\)$/);
          var conditionParamMatch = nodeParam.match(conditionRegex);

          if (functionParamMatch || conditionParamMatch) {
            var targetNodeParser;

            if (conditionParamMatch) {
              var conditionInstruction = conditionParamMatch[0];
              targetNodeParser = nodes.find(function (pNode) {
                return pNode.instruction === conditionInstruction;
              });
            } else {
              targetNodeParser = nodes.find(function (pNode) {
                return pNode.instruction === nodeParam;
              });
            }

            if (!targetNodeParser) {
              throw new _ClientError["default"]("ClassScriptCodeParser: instruction \"".concat(nodeParam, "\" undefined"));
            }

            var targetId = targetNodeParser.id;
            edges.push({
              targetId: targetId,
              sourceId: node.id,
              connectionId: null
            });
          }
        });
      }

      return edges;
    }
    /**
     * @param {AScript} script
     * @param {NodeScriptParser[]} nodes
     * @param {NodeScriptParser} node
     * @param {DynamicAttribute[]} inputs
     * @return {EdgeScriptParser[]}
     */

  }, {
    key: "getConditionEdges",
    value: function getConditionEdges(script, nodes, node, inputs) {
      var edges = [];

      if (node.type === _ANode.NODE_TYPES.CONDITION) {
        node.params.forEach(function (param, iParam) {
          var nodeParam = param.trim();
          var functionParamMatch = nodeParam.match(/^(\w+)\([^)]*\)$/);

          if (functionParamMatch || iParam === 0) {
            if (iParam === 0) {
              var sourceNodeParser = nodes.find(function (pNode) {
                return pNode.name === nodeParam;
              });

              if (!sourceNodeParser) {
                throw new _ClientError["default"]("ClassScriptCodeParser: variable \"".concat(nodeParam, "\" undefined"));
              }

              var sourceId = sourceNodeParser.id;
              var connection = inputs[iParam];
              edges.push({
                sourceId: sourceId,
                connectionId: connection.getId()
              });
            } else {
              var targetNodeParser = nodes.find(function (pNode) {
                return pNode.instruction === nodeParam;
              });

              if (!targetNodeParser) {
                throw new _ClientError["default"]("ClassScriptCodeParser: instruction \"".concat(nodeParam, "\" undefined"));
              }

              var targetId = targetNodeParser.id;
              edges.push({
                targetId: targetId,
                sourceId: node.id,
                connectionId: null
              });
            }
          }
        });
      }

      return edges;
    }
    /**
     * @param {string} code
     * @return {NodeScriptParser[]}
     */

  }, {
    key: "getConstantNodes",
    value: function getConstantNodes(code) {
      var constantRegex = new RegExp('(-?\\d+|"[^"]*"|\'[^\']*\')', 'g');
      var constantMatches = code.matchAll(constantRegex);
      return _.uniqWith(Array.from(constantMatches).map(function (constantMatch) {
        var constant = constantMatch[0].replace(/["']/g, '');
        return {
          id: null,
          type: _ANode.NODE_TYPES.CONSTANT,
          value: constant,
          name: constant,
          params: [],
          instruction: ''
        };
      }), function (prev, current) {
        return prev.name === current.name;
      });
    }
    /**
     * @param {string} code
     * @return {NodeScriptParser[]}
     */

  }, {
    key: "getStructureNodes",
    value: function getStructureNodes(code) {
      var structRegex = new RegExp("(".concat(this.KW_VAR, "[\\s]+(\\w+)[\\s]*=[\\s]*)*").concat(this.KW_NEW, "[\\s]+(\\w+)\\(([^)]*)\\)"), 'g');
      var structMatches = code.matchAll(structRegex);
      return Array.from(structMatches).map(function (structMatch) {
        var instruction = structMatch[0].trim();
        var name = structMatch[2];
        var struct = structMatch[3];
        var params = structMatch[4];
        return {
          id: null,
          type: _ANode.NODE_TYPES.FUNCTION,
          value: struct,
          name: name,
          params: params.split(','),
          instruction: instruction
        };
      });
    }
    /**
     * @param {string} code
     * @return {NodeScriptParser[]}
     */

  }, {
    key: "getFunctionNodes",
    value: function getFunctionNodes(code) {
      var functionRegex = new RegExp("((".concat(this.KW_VAR, "[\\s]+(\\w+)[\\s]*=[\\s]*)*(?<!").concat(this.KW_NEW, ")\\s+(\\w+)\\(([^(){}]*)\\))\\s*[^{]"), 'g');
      var functionMatches = code.matchAll(functionRegex);
      return Array.from(functionMatches).map(function (functionMatch) {
        var instruction = functionMatch[1].trim();
        var name = functionMatch[3];
        var func = functionMatch[4];
        var params = functionMatch[5];
        return {
          id: null,
          type: _ANode.NODE_TYPES.FUNCTION,
          value: func,
          name: name,
          params: params.split(','),
          instruction: instruction
        };
      });
    }
    /**
     * @param {string} code
     * @return {NodeScriptParser[]}
     */

  }, {
    key: "getEventNodes",
    value: function getEventNodes(code) {
      var eventRegex = new RegExp("(?<!".concat(this.KW_NEW, ")\\s+(\\w+)\\(\\s*\\)\\s*{(((?!\\w+\\(\\s*\\){)[^])*)}"), 'g');
      var insideBlockRegex = new RegExp('(?<!{[^{}]*)([^{}]*)', 'g');
      var eventMatches = code.matchAll(eventRegex);
      return Array.from(eventMatches).map(function (eventMatch) {
        var instruction = eventMatch[0].trim();
        var event = eventMatch[1];
        var params = eventMatch[2];
        var paramsInsideBlock = [];
        var paramsInsideBlockMatches = params.matchAll(insideBlockRegex);
        Array.from(paramsInsideBlockMatches).forEach(function (paramsInsideBlockMatch) {
          paramsInsideBlock = paramsInsideBlock.concat(paramsInsideBlockMatch[1].split(';'));
        });
        return {
          id: null,
          type: _ANode.NODE_TYPES.EVENT,
          value: event,
          name: event,
          params: paramsInsideBlock.filter(function (param) {
            return param.trim() !== '';
          }),
          instruction: instruction
        };
      });
    }
    /**
     * @param {string} code
     * @return {NodeScriptParser[]}
     */

  }, {
    key: "getConditionNodes",
    value: function getConditionNodes(code) {
      var conditionRegex = new RegExp("(".concat(this.KW_IF, "\\s*\\((\\w+)\\)){([^}]*)}"), 'g');
      var conditionMatches = code.matchAll(conditionRegex);
      return Array.from(conditionMatches).map(function (conditionMatch) {
        var instruction = conditionMatch[1].trim();
        var name = conditionMatch[1];
        var params = conditionMatch[3].trim();
        var condition = conditionMatch[2];
        return {
          id: null,
          type: _ANode.NODE_TYPES.CONDITION,
          value: 'True',
          name: name,
          params: [condition].concat((0, _toConsumableArray2["default"])(params.split(';'))),
          instruction: instruction
        };
      });
    }
    /**
     * @typedef {{
     *  id: number|null,
     *  type: string,
     *  value: string,
     *  name: string,
     *  params: string[]
     *  instruction: string
     * }} NodeScriptParser
     *
     * @typedef {{
     *  sourceId: number
     *  targetId: number
     *  connectionId: number
     * }} EdgeScriptParser
     */

  }]);
  return ClassScriptCodeParser;
}(_Parser2["default"]);

exports["default"] = ClassScriptCodeParser;
(0, _defineProperty2["default"])(ClassScriptCodeParser, "KW_CLASS", 'class');
(0, _defineProperty2["default"])(ClassScriptCodeParser, "KW_NEW", 'new');
(0, _defineProperty2["default"])(ClassScriptCodeParser, "KW_VAR", 'const');
(0, _defineProperty2["default"])(ClassScriptCodeParser, "KW_IF", 'if');

},{"../../../exception/type/ClientError.js":80,"../../../flow/ClassScript.js":96,"../../../flow/node/ANode.js":172,"../../../utils/NodeHelper.js":364,"../../../utils/ScriptHelper.js":367,"../../../world/World.js":372,"../../Parser.js":252,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/toConsumableArray":21}],256:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Parser2 = _interopRequireDefault(require("../../Parser.js"));

var _ClassScript = _interopRequireDefault(require("../../../flow/ClassScript.js"));

var _World = _interopRequireDefault(require("../../../world/World.js"));

var _ScriptHelper = _interopRequireDefault(require("../../../utils/ScriptHelper.js"));

var _ClientError = _interopRequireDefault(require("../../../exception/type/ClientError.js"));

var _Vector = _interopRequireDefault(require("../../../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ClassScriptXmlParser = /*#__PURE__*/function (_Parser) {
  (0, _inherits2["default"])(ClassScriptXmlParser, _Parser);

  var _super = _createSuper(ClassScriptXmlParser);

  function ClassScriptXmlParser() {
    (0, _classCallCheck2["default"])(this, ClassScriptXmlParser);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ClassScriptXmlParser, null, [{
    key: "parse",

    /**
     * @override
     * @param {Document} xmlDocument
     * @return {AScript}
     */
    value: function parse(xmlDocument) {
      var xmlNode = xmlDocument.documentElement;
      var name = xmlNode.getAttribute('name');
      var script = new _ClassScript["default"](name);

      var functionRegistry = _World["default"].get().getFunctionRegistry();

      var view = xmlNode.getAttribute('view');

      if (view) {
        var positionSplit = view.split(',');

        if (positionSplit.length === 3) {
          var position = new _Vector["default"]({
            x: parseFloat(positionSplit[0]),
            y: parseFloat(positionSplit[1]),
            z: parseFloat(positionSplit[2])
          });
          script.getCamera().setPosition(position);
        }
      }

      xmlNode.childNodes.forEach(function (cXmlNode) {
        var element = cXmlNode.nodeName;

        if (element === 'node') {
          var nodeType = cXmlNode.getAttribute('type');
          var nodeValue = cXmlNode.getAttribute('value');
          var nodeId = parseInt(cXmlNode.getAttribute('id'));

          var _positionSplit = cXmlNode.getAttribute('position').split(',');

          var _position = new _Vector["default"]({
            x: parseFloat(_positionSplit[0]),
            y: parseFloat(_positionSplit[1])
          });

          var node = _ScriptHelper["default"].createNode(functionRegistry, script, nodeType, nodeValue);

          node.setPosition(_position);
          script.updateNodeId(node, nodeId);
        } else if (element === 'edge') {
          var nodeSourceId = parseInt(cXmlNode.getAttribute('source'));
          var nodeTargetId = parseInt(cXmlNode.getAttribute('target'));
          var nodeConnection = cXmlNode.getAttribute('connection');
          var nodeSource = script.findNodeById(nodeSourceId);
          var nodeTarget = script.findNodeById(nodeTargetId);

          if (!nodeSource) {
            throw new _ClientError["default"]("ClassScriptXmlParser Error: Node ".concat(nodeSourceId, " not founded"));
          }

          if (!nodeTarget) {
            throw new _ClientError["default"]("ClassScriptXmlParser Error: Node ".concat(nodeTargetId, " not founded"));
          }

          nodeTarget.attach(nodeSource, nodeConnection);
        }
      });
      return script;
    }
  }]);
  return ClassScriptXmlParser;
}(_Parser2["default"]);

exports["default"] = ClassScriptXmlParser;

},{"../../../exception/type/ClientError.js":80,"../../../flow/ClassScript.js":96,"../../../utils/ScriptHelper.js":367,"../../../utils/Vector.js":370,"../../../world/World.js":372,"../../Parser.js":252,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],257:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _PhysicsData2 = _interopRequireDefault(require("../project/data/PhysicsData.js"));

var _MatterEngine = _interopRequireDefault(require("./engine/matter/MatterEngine.js"));

var _PhysicError = _interopRequireDefault(require("../exception/type/PhysicError.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Physics = /*#__PURE__*/function (_PhysicsData) {
  (0, _inherits2["default"])(Physics, _PhysicsData);

  var _super = _createSuper(Physics);

  function Physics() {
    var _this;

    (0, _classCallCheck2["default"])(this, Physics);
    _this = _super.call(this);
    _this.toRestart = false;
    _this.isRunning = false;
    _this.types = (0, _defineProperty2["default"])({}, Physics.TYPES.MATTERJS, _MatterEngine["default"]);
    return _this;
  }
  /**
   * Update physics, and train AI
   * @param {World} world
   * @param {AiEngine} aiEngine
   */


  (0, _createClass2["default"])(Physics, [{
    key: "update",
    value: function update(world, aiEngine) {
      if (this.isEnabled()) {
        if (this.toRestart) {
          this.restart(world);
        } else {
          this.updateEntities(world);
          this.updateEngine(world, aiEngine);
        }
      }
    }
    /**
     * Update entities props from Physics engine results
     * @param {World} world
     */

  }, {
    key: "updateEntities",
    value: function updateEntities(world) {
      var _this2 = this;

      var entityManager = world.getEntityManager();
      var bodyEntities = entityManager.getBodyEntities();
      var jointEntities = entityManager.getAttachEntities();
      this.physicsEngine.getBodies().map(function (body, index) {
        var entity = bodyEntities[index];

        var _entity$fromCenterPos = entity.fromCenterPosition(body.position),
            x = _entity$fromCenterPos.x,
            y = _entity$fromCenterPos.y;

        var rotation = body.angle ? body.angle % (Math.PI * 2) : 0;
        entity.setPosition(new _Vector["default"]({
          x: parseInt(x),
          y: parseInt(y)
        }));
        entity.setRotationAndGenerate(Math.round(rotation * 100) / 100);
        entity.setVelocity(body.velocity);
        entity.setAngularVelocity(body.angularVelocity);
        entityManager.haveToDie(entity, _this2.physicsEngine);
      });
      this.physicsEngine.getJoints().map(function (joint, index) {
        var entity = jointEntities[index];
        var entityA = entity.getLinkedEntityAt(0, world);
        var entityB = entity.getLinkedEntityAt(1, world);
        var pointA = entityA ? entityA.fromRelativeCenterPosition(joint.pointA) : joint.pointA;
        var pointB = entityB ? entityB.fromRelativeCenterPosition(joint.pointB) : joint.pointB;
        entity.updatePoints(pointA, pointB);
      });
    }
    /**
     * Update the World using AI and physics Engine
     * @param {World} world
     * @param {AiEngine} aiEngine
     * @TODO: updating the constraint entities crash the physics, to be revisited
     */

  }, {
    key: "updateEngine",
    value: function updateEngine(world, aiEngine) {
      var _this3 = this;

      var entityManager = world.getEntityManager();
      entityManager.getAttachEntities().forEach(function (entity) {
        _this3.physicsEngine.update(entity);
      });
      entityManager.getBodyEntities().forEach(function (entity) {
        _this3.physicsEngine.update(entity);
      });
      this.physicsEngine.updateEngine();
      aiEngine && aiEngine.update();
    }
    /**
     * @param {AttachEntity} entity
     * @param {Constraint} constraint
     */

  }, {
    key: "updateConstraint",
    value: function updateConstraint(entity, constraint) {
      if (this.isEnabled()) {
        var shape = this.physicsEngine.findShapeFromEntity(entity);

        if (shape) {
          this.physicsEngine.updateConstraint(entity, constraint);
        } else {
          throw new _PhysicError["default"]("Shape not founded for the constraint entity ".concat(entity.id));
        }
      }
    }
    /**
     * Get the body phyiscs from the given entity
     * @param {Entity} entity
     */

  }, {
    key: "getBodyFromEntity",
    value: function getBodyFromEntity(entity) {
      var shape = this.physicsEngine.findShapeFromEntity(entity);
      var bodies = this.physicsEngine.getBodies();
      var joints = this.physicsEngine.getJoints();

      if (!shape || !bodies.includes(shape) && !joints.includes(shape)) {
        throw new _PhysicError["default"]("Shape not founded for the entity ".concat(entity.id));
      }

      return shape;
    }
    /**
     * Get an entity from an ID
     * @param {World} world
     * @param {number} entityId
     */

  }, {
    key: "getEntityById",
    value: function getEntityById(world, entityId) {
      return world.getEntityManager().findById(entityId);
    }
    /**
     * Stop the engine
     */

  }, {
    key: "stop",
    value: function stop() {
      this.physicsEngine.stop();
      this.isRunning = false;
    }
    /**
     * Unload the physics for entities
     * @param {World} world
     */

  }, {
    key: "unload",
    value: function unload(world) {
      var _this4 = this;

      world.getEntityManager().entities.map(function (entity) {
        return entity.unloadPhysics(_this4.physicsEngine);
      });
    }
    /**
     * Load the physics for entities
     * @param {World} world
     */

  }, {
    key: "load",
    value: function load(world) {
      return this.before(world) && this.setup(world) && this.after(world);
    }
    /**
     * Init the phyiscs for entities before loading
     * @param {World} world
     */

  }, {
    key: "before",
    value: function before(world) {
      var _this5 = this;

      var jointEntities = world.getEntityManager().getAttachEntities();
      jointEntities.map(function (entity) {
        return entity.updateJointPosition(world, _this5.physicsEngine);
      });
      return true;
    }
    /**
     * Setup the physics for entities
     * @param {World} world
     */

  }, {
    key: "setup",
    value: function setup(world) {
      var _this6 = this;

      var entityManager = world.getEntityManager();
      var bodyEntities = entityManager.getBodyEntities();
      var attachEntities = entityManager.getAttachEntities();
      bodyEntities.map(function (entity) {
        return entity.loadPhysics(_this6.physicsEngine, world);
      });
      attachEntities.map(function (entity) {
        return entity.loadPhysics(_this6.physicsEngine, world);
      });
      return true;
    }
    /**
     * Complete the physics after setup
     * @param {World} world
     */

  }, {
    key: "after",
    value: function after(world) {
      var _this7 = this;

      var bodyEntities = world.getEntityManager().getBodyEntities();
      bodyEntities.map(function (entity) {
        return entity.updateCollisionFilters(_this7.physicsEngine);
      });
      return true;
    }
    /**
     * Run the physics
     * @param {World} world
     */

  }, {
    key: "run",
    value: function run(world) {
      if (this.isEnabled()) {
        this.unload(world);
        this.physicsEngine.init();
        this.load(world);
        this.physicsEngine.run(world);
        this.isRunning = true;
      }
    }
    /**
     * Remove an entity from physics engine
     * @param {Entity} entity
     */

  }, {
    key: "loadEntity",
    value: function loadEntity(entity) {
      if (this.isRunning) {
        entity.loadPhysics(this.physicsEngine);
      }
    }
    /**
     * Remove an entity from physics engine
     * @param {Entity} entity
     */

  }, {
    key: "unloadEntity",
    value: function unloadEntity(entity) {
      if (this.isRunning) {
        entity.unloadPhysics(this.physicsEngine);
      }
    }
    /**
     * Flag the physics to restart
     * @param {Boolean} toRestart
     */

  }, {
    key: "setToRestart",
    value: function setToRestart(toRestart) {
      this.toRestart = toRestart;
    }
    /**
     * @param {PhysicsEngine} physicsEngine
     */

  }, {
    key: "setPhysicsEngine",
    value: function setPhysicsEngine(physicsEngine) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(Physics.prototype), "setPhysicsEngine", this).call(this, physicsEngine);
      physicsEngine && this.physicsEngine.setPhysicsManager(this);
    }
    /**
     * @param {boolean} value
     */

  }, {
    key: "setIsRunning",
    value: function setIsRunning(value) {
      this.isRunning = value;
    }
    /**
     * @param {string} type
     */

  }, {
    key: "setType",
    value: function setType(type) {
      var physicsEngine = this.types[type];
      this.setPhysicsEngine(physicsEngine ? new physicsEngine() : null);
    }
    /**
     * @return {string}
     */

  }, {
    key: "getType",
    value: function getType() {
      var physicsEngine = this.getPhysicsEngine();

      for (var type in this.types) {
        if (physicsEngine instanceof this.types[type]) {
          return type;
        }
      }
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isEnabled",
    value: function isEnabled() {
      return !!this.getPhysicsEngine();
    }
    /**
     * Restart the engine
     * @param {World} world
     */

  }, {
    key: "restart",
    value: function restart(world) {
      this.stop();
      this.run(world);
      this.setToRestart(false);
    }
  }], [{
    key: "TYPES",
    get: function get() {
      return {
        MATTERJS: 'matterjs'
      };
    }
  }]);
  return Physics;
}(_PhysicsData2["default"]);

var _default = Physics;
exports["default"] = _default;

},{"../exception/type/PhysicError.js":81,"../project/data/PhysicsData.js":294,"../utils/Vector.js":370,"./engine/matter/MatterEngine.js":260,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],258:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

/**
 * @abstract
 */
var ColliderLoader = /*#__PURE__*/function () {
  function ColliderLoader() {
    (0, _classCallCheck2["default"])(this, ColliderLoader);
  }

  (0, _createClass2["default"])(ColliderLoader, null, [{
    key: "load",

    /**
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {*}
     */
    value: function load(unit, colliderComponent) {
      var bodyCollider = this.loadCollider(unit, colliderComponent);

      if (bodyCollider) {
        if (colliderComponent.isTrigger()) {
          bodyCollider.isSensor = true;
        }

        bodyCollider.label = colliderComponent.getId();
        bodyCollider.velocity = colliderComponent.getVelocity();
      }

      return bodyCollider;
    }
    /**
     * @abstract
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {*}
     */

  }, {
    key: "loadCollider",
    value: function loadCollider(unit, colliderComponent) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".loadCollider method must be implemented"));
    }
  }]);
  return ColliderLoader;
}();

exports["default"] = ColliderLoader;

},{"../../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],259:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

var _Unit = require("../../unit/Unit.js");

var _ColliderComponent = _interopRequireDefault(require("../../component/internal/ColliderComponent.js"));

var _Vector = _interopRequireDefault(require("../../utils/Vector.js"));

var _UnitHelper = _interopRequireDefault(require("../../utils/UnitHelper.js"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

/**
 * @abstract
 */
var PhysicsEngine = /*#__PURE__*/function () {
  function PhysicsEngine() {
    (0, _classCallCheck2["default"])(this, PhysicsEngine);
    (0, _defineProperty2["default"])(this, "instance", void 0);
  }

  (0, _createClass2["default"])(PhysicsEngine, [{
    key: "init",
    value: function init() {
      this.instance = this.createEngineInstance();
    }
    /**
     * @param {Unit} unit
     * @param {RigidBodyOptions} options
     */

  }, {
    key: "addBody",
    value: function addBody(unit, options) {
      this.loadBody(unit, options);
    }
    /**
     * @param {Unit} unit
     * @param {Vector} position
     * @param {Vector} force
     */

  }, {
    key: "applyForce",
    value: function applyForce(unit, position, force) {
      var body = this.tryFindBody(unit);
      this.applyForceToBody(body, position, force);
    }
    /**
     * @param {Unit} unit
     * @param {Vector} start
     * @param {Vector} end
     * @return {{body: *, bodyA: *, bodyB: *, collided: boolean}[]}
     */

  }, {
    key: "rayCast",
    value: function rayCast(unit, start, end) {
      var body = this.tryFindBody(unit);
      return this.rayCastForBody(body, start, end);
    }
    /**
     * @param {Unit} unit
     * @param {Vector} velocity
     */

  }, {
    key: "setVelocity",
    value: function setVelocity(unit, velocity) {
      var body = this.tryFindBody(unit);
      this.setVelocityToBody(body, velocity);
    }
    /**
     * @param {Unit} unit
     * @param {number} friction
     */

  }, {
    key: "setFriction",
    value: function setFriction(unit, friction) {
      var body = this.tryFindBody(unit);
      this.setFrictionToBody(body, friction);
    }
    /**
     * @param {Unit} unit
     * @return {Vector}
     */

  }, {
    key: "getVelocity",
    value: function getVelocity(unit) {
      var body = this.tryFindBody(unit);
      return new _Vector["default"](this.getVelocityByBody(body));
    }
    /**
     * @abstract
     * @param {Unit} unit
     * @return {Object}
     */

  }, {
    key: "findBody",
    value: function findBody(unit) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".findBody method must be implemented"));
    }
    /**
     * @abstract
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {{unitId: number, componentId: number, body: *}}
     */

  }, {
    key: "findBodyCollider",
    value: function findBodyCollider(unit, colliderComponent) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".findBodyCollider method must be implemented"));
    }
    /**
     * @abstract
     * @param {Unit} unit
     * @return {{unitId: number, componentId: number, body: *}[]}
     */

  }, {
    key: "findColliders",
    value: function findColliders(unit) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".findColliders method must be implemented"));
    }
    /**
     * @param {Unit} unit
     * @return {Object}
     */

  }, {
    key: "tryFindBody",
    value: function tryFindBody(unit) {
      var body = this.findBody(unit);

      if (!body) {
        throw new _ClientError["default"]("Unit ".concat(unit.getName(), " must be a rigid body"));
      }

      return body;
    }
    /**
     * @abstract
     * @param {Unit} unitA
     * @param {Unit} unitB
     * @return {boolean}
     */

  }, {
    key: "canCollide",
    value: function canCollide(unitA, unitB) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".canCollide method must be implemented"));
    }
    /**
     * @param {*} sourceBodyCollider
     * @param {*[]} targetBodyColliders
     * @return {*[]}
     */

  }, {
    key: "detectCollisions",
    value: function detectCollisions(sourceBodyCollider, targetBodyColliders) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".detectCollisions method must be implemented"));
    }
    /**
     * @abstract
     */

  }, {
    key: "update",
    value: function update() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".update method must be implemented"));
    }
    /**
     * @abstract
     * @param {*} body
     * @return {*}
     */

  }, {
    key: "getBodyPosition",
    value: function getBodyPosition(body) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getBodyPosition method must be implemented"));
    }
    /**
     * @abstract
     * @param {*} body
     * @return {*}
     */

  }, {
    key: "getBodyRotation",
    value: function getBodyRotation(body) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getBodyRotation method must be implemented"));
    }
    /**
     * @abstract
     * @param {*} body
     * @return {*[]}
     */

  }, {
    key: "getBodyColliders",
    value: function getBodyColliders(body) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getBodyColliders method must be implemented"));
    }
    /**
     * @private
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {*}
     */

  }, {
    key: "newCollider",
    value: function newCollider(unit, colliderComponent) {
      return this.getColliderLoader(colliderComponent).load(unit, colliderComponent);
    }
    /**
     * @private
     * @param {Unit} unit
     * @param {RigidBodyOptions} options
     * @return {*}
     */

  }, {
    key: "loadBody",
    value: function loadBody(unit, options) {
      var colliderComponents = unit.findComponentsByClass(_ColliderComponent["default"]).filter(function (colliderComponent) {
        return colliderComponent.isEnabled();
      });
      var existBody = this.findBody(unit);

      if (!existBody) {
        this.createBody(unit, options, colliderComponents);
      } else {
        var updateBody = this.hasDeprecatedColliders(unit, colliderComponents) || !this.hasAllColliders(unit, colliderComponents);

        if (updateBody) {
          this.deleteUnit(unit);
          this.createBody(unit, options, colliderComponents);
        }
      }
    }
    /**
     * @private
     * @param {ColliderComponent} component
     * @return {ColliderLoader}
     */

  }, {
    key: "getColliderLoader",
    value: function getColliderLoader(component) {
      var shape = component.getShape();

      switch (shape) {
        case _Unit.PrimitiveShape.RECT:
          return this.getRectColliderLoader(component);

        case _Unit.PrimitiveShape.CIRCLE:
          return this.getCircleColliderLoader(component);

        default:
          throw new _SystemError["default"]("No ColliderLoader configured for \"".concat(shape, "\""));
      }
    }
    /**
     * @param {Unit} unit
     * @param {RigidBodyOptions} options
     * @param {ColliderComponent[]} colliderComponents
     */

  }, {
    key: "createBody",
    value: function createBody(unit, options, colliderComponents) {
      var _this = this;

      var colliders = colliderComponents.map(function (colliderComponent) {
        return _this.newCollider(unit, colliderComponent);
      });

      var position = _UnitHelper["default"].toCenterPosition(unit);

      var body = this.newBody(unit, position, _.cloneDeep(colliders), options);
      this.setVelocityToBody(body, options.velocity);
      this.addToWorld(body);
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "deleteUnit",
    value: function deleteUnit(unit) {
      var body = this.findBody(unit);

      if (body) {
        this.deleteBody(body);
      }
    }
    /**
     * @param {{unit: Unit, colliderComponent: ColliderComponent}} sourceColliderUnit
     * @param {{unit: Unit, colliderComponent: ColliderComponent}[]} targetColliderUnits
     * @return {ColliderComponent[]}
     */

  }, {
    key: "getAllCollision",
    value: function getAllCollision(sourceColliderUnit, targetColliderUnits) {
      var _this2 = this;

      var targetBodyColliders = targetColliderUnits.map(function (targetColliderUnit) {
        return _this2.findBodyCollider(targetColliderUnit.unit, targetColliderUnit.colliderComponent);
      }).filter(function (bodyCollider) {
        return bodyCollider;
      });
      var sourceBodyCollider = this.findBodyCollider(sourceColliderUnit.unit, sourceColliderUnit.colliderComponent);
      var collisions = this.detectCollisions(sourceBodyCollider, targetBodyColliders);
      return collisions.map(function (collision) {
        var colliderUnit = targetColliderUnits.find(function (targetColliderUnit) {
          return _this2.isCollisionHasCollider(collision, targetColliderUnit.colliderComponent);
        });
        return colliderUnit.colliderComponent;
      });
    }
    /**
     * @abstract
     * @param {*} body
     */

  }, {
    key: "deleteBody",
    value: function deleteBody(body) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".deleteColliderBody method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {ColliderComponent} colliderComponent
     * @return {ColliderLoader}
     */

  }, {
    key: "getCircleColliderLoader",
    value: function getCircleColliderLoader(colliderComponent) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getCircleColliderLoader method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {*} body
     * @param {Vector} velocity
     */

  }, {
    key: "setVelocityToBody",
    value: function setVelocityToBody(body, velocity) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".setVelocityToBody method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {*} body
     * @param {number} friction
     */

  }, {
    key: "setFrictionToBody",
    value: function setFrictionToBody(body, friction) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".setFrictionToBody method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {*} body
     * @param {Vector} position
     * @param {Vector} force
     */

  }, {
    key: "applyForceToBody",
    value: function applyForceToBody(body, position, force) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".applyForceToBody method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {*} body
     * @param {Vector} start
     * @param {Vector} end
     * @return {{body: *, bodyA: *, bodyB: *, collided: boolean}[]}
     */

  }, {
    key: "rayCastForBody",
    value: function rayCastForBody(body, start, end) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".rayCastForBody method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {ColliderComponent} colliderComponent
     * @return {ColliderLoader}
     */

  }, {
    key: "getRectColliderLoader",
    value: function getRectColliderLoader(colliderComponent) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getRectColliderLoader method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {*} body
     * @return {Vector}
     */

  }, {
    key: "getVelocityByBody",
    value: function getVelocityByBody(body) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".getVelocityByBody method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {Unit} unit
     * @param {Vector} position
     * @param {*[]} colliders
     * @param {RigidBodyOptions} options
     * @return {*}
     */

  }, {
    key: "newBody",
    value: function newBody(unit, position, colliders, options) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".newRigidBody method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @param {*} rigidBody
     */

  }, {
    key: "addToWorld",
    value: function addToWorld(rigidBody) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".addToWorld method must be implemented"));
    }
    /**
     * @protected
     * @abstract
     * @return {*}
     */

  }, {
    key: "createEngineInstance",
    value: function createEngineInstance() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".createEngineInstance method must be implemented"));
    }
    /**
     * @abstract
     * @param {Unit} unit
     * @param {ColliderComponent[]} colliderComponents
     * @return {boolean}
     */

  }, {
    key: "hasDeprecatedColliders",
    value: function hasDeprecatedColliders(unit, colliderComponents) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".hasDeprecatedColliders method must be implemented"));
    }
    /**
     * @abstract
     * @param {Unit} unit
     * @param {ColliderComponent[]} colliderComponents
     * @return {boolean}
     */

  }, {
    key: "hasAllColliders",
    value: function hasAllColliders(unit, colliderComponents) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".hasAllColliders method must be implemented"));
    }
    /**
     * @abstract
     * @param {*} collision
     * @param {ColliderComponent} colliderComponent
     * @return {boolean}
     */

  }, {
    key: "isCollisionHasCollider",
    value: function isCollisionHasCollider(collision, colliderComponent) {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".isCollisionHasCollider method must be implemented"));
    }
    /**
     * @return {*}
     */

  }, {
    key: "getInstance",
    value: function getInstance() {
      if (!this.instance) {
        throw new _SystemError["default"]("Physics Engine \"".concat(this.constructor.name, "\" not initialized"));
      }

      return this.instance;
    }
  }]);
  return PhysicsEngine;
}();

exports["default"] = PhysicsEngine;

},{"../../component/internal/ColliderComponent.js":44,"../../exception/type/ClientError.js":80,"../../exception/type/SystemError.js":82,"../../unit/Unit.js":327,"../../utils/UnitHelper.js":369,"../../utils/Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],260:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _PhysicsEngine2 = _interopRequireDefault(require("../PhysicsEngine.js"));

var _MatterRectColliderLoader = _interopRequireDefault(require("./loader/MatterRectColliderLoader.js"));

var _MatterCircleColliderLoader = _interopRequireDefault(require("./loader/MatterCircleColliderLoader.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MatterEngine = /*#__PURE__*/function (_PhysicsEngine) {
  (0, _inherits2["default"])(MatterEngine, _PhysicsEngine);

  var _super = _createSuper(MatterEngine);

  function MatterEngine() {
    (0, _classCallCheck2["default"])(this, MatterEngine);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MatterEngine, [{
    key: "getEngine",

    /**
     * @override
     * @param {Unit} unit
     * @return {Matter}
     */
    value: function getEngine(unit) {
      return Matter;
    }
    /**
     * @override
     * @param {Matter.Body} rigidBody
     */

  }, {
    key: "addToWorld",
    value: function addToWorld(rigidBody) {
      Matter.World.add(this.getInstance().world, rigidBody);
    }
    /**
     * @override
     */

  }, {
    key: "deleteBody",
    value: function deleteBody(body) {
      Matter.World.remove(this.getInstance().world, body);
    }
    /**
     * @override
     */

  }, {
    key: "newBody",
    value: function newBody(unit, position, colliders, options) {
      var bodyOptions = {
        label: unit.getId(),
        isStatic: options.isStatic,
        isSensor: !colliders.length,
        parts: colliders //friction: 0

      };

      if (!colliders.length) {
        bodyOptions.position = position;
      }

      if (options.freezeRotation) {
        bodyOptions.inertia = Infinity;
      }

      return Matter.Body.create(bodyOptions);
    }
    /**
     * @override
     * @return {Matter}
     */

  }, {
    key: "createEngineInstance",
    value: function createEngineInstance() {
      return Matter.Engine.create();
    }
    /**
     * @override
     */

  }, {
    key: "update",
    value: function update() {
      Matter.Engine.update(this.getInstance());
    }
    /**
     * @override
     */

  }, {
    key: "getRectColliderLoader",
    value: function getRectColliderLoader(colliderComponent) {
      return _MatterRectColliderLoader["default"];
    }
    /**
     * @override
     */

  }, {
    key: "getCircleColliderLoader",
    value: function getCircleColliderLoader(colliderComponent) {
      return _MatterCircleColliderLoader["default"];
    }
    /**
     * @override
     */

  }, {
    key: "canCollide",
    value: function canCollide(unitA, unitB) {
      var bodyA = this.findBody(unitA);
      var bodyB = this.findBody(unitB);
      return Matter.Detector.canCollide(bodyA.collisionFilter, bodyB.collisionFilter);
    }
    /**
     * @override
     */

  }, {
    key: "detectCollisions",
    value: function detectCollisions(sourceBodyCollider, targetBodyColliders) {
      return Matter.Query.collides(sourceBodyCollider, targetBodyColliders);
    }
    /**
     * @override
     */

  }, {
    key: "getBodyColliders",
    value: function getBodyColliders(body) {
      return body.parts.filter(function (_, index) {
        return index !== 0;
      });
    }
    /**
     * @override
     */

  }, {
    key: "getBodyPosition",
    value: function getBodyPosition(body) {
      return body.position;
    }
    /**
     * @override
     */

  }, {
    key: "getBodyRotation",
    value: function getBodyRotation(body) {
      return body.angle ? body.angle % (Math.PI * 2) : 0;
    }
    /**
     * @override
     * @param {Matter.Body} body
     * @param {Vector} position
     * @param {Vector} force
     */

  }, {
    key: "applyForceToBody",
    value: function applyForceToBody(body, position, force) {
      Matter.Body.applyForce(body, position, force);
    }
    /**
     * @override
     * @param {Matter.Body} body
     * @param {Vector} velocity
     */

  }, {
    key: "setVelocityToBody",
    value: function setVelocityToBody(body, velocity) {
      Matter.Body.setVelocity(body, velocity);
    }
    /**
     * @override
     */

  }, {
    key: "setFrictionToBody",
    value: function setFrictionToBody(body, friction) {
      body.friction = friction;
    }
    /**
     * @override
     */

  }, {
    key: "getVelocityByBody",
    value: function getVelocityByBody(body) {
      return body.velocity;
    }
    /**
     * @override
     * @param {Matter.Body} body
     * @param {Vector} start
     * @param {Vector} end
     * @return {{body: Matter.Body, bodyA: Matter.Body, bodyB: Matter.Body, collided: boolean}[]}
     */

  }, {
    key: "rayCastForBody",
    value: function rayCastForBody(body, start, end) {
      return Matter.Query.ray(this.getBodies(), start, end).filter(function (collision) {
        return collision.parentA !== body;
      });
    }
    /**
     * @return {*[]}
     */

  }, {
    key: "getBodies",
    value: function getBodies() {
      return Matter.Composite.allBodies(this.getInstance().world);
    }
    /**
     * @override
     */

  }, {
    key: "findBody",
    value: function findBody(unit) {
      return this.getBodies().find(function (body) {
        return body.label === unit.getId();
      });
    }
    /**
     * @override
     */

  }, {
    key: "findBodyCollider",
    value: function findBodyCollider(unit, colliderComponent) {
      var body = this.findBody(unit);
      return this.getBodyColliders(body).find(function (pBody) {
        return pBody.label === colliderComponent.getId();
      });
    }
    /**
     * @override
     */

  }, {
    key: "findColliders",
    value: function findColliders(unit) {
      var body = this.findBody(unit);
      return this.getBodyColliders(body);
    }
    /**
     * @override
     */

  }, {
    key: "hasAllColliders",
    value: function hasAllColliders(unit, colliderComponents) {
      var colliderComponentIds = colliderComponents.map(function (colliderComponent) {
        return colliderComponent.getId();
      });
      var actualColliders = this.findColliders(unit);
      return actualColliders.every(function (collider) {
        return colliderComponentIds.includes(collider.label);
      });
    }
    /**
     * @override
     */

  }, {
    key: "hasDeprecatedColliders",
    value: function hasDeprecatedColliders(unit, colliderComponents) {
      var actualColliders = this.findColliders(unit);
      return colliderComponents.some(function (colliderComponent) {
        return !actualColliders.find(function (collider) {
          return collider.label === colliderComponent.getId();
        });
      });
    }
    /**
     * @override
     */

  }, {
    key: "isCollisionHasCollider",
    value: function isCollisionHasCollider(collision, colliderComponent) {
      var colliderComponentId = colliderComponent.getId();
      return colliderComponentId === collision.bodyA.label || colliderComponentId === collision.bodyB.label;
    }
  }]);
  return MatterEngine;
}(_PhysicsEngine2["default"]);

exports["default"] = MatterEngine;

},{"../PhysicsEngine.js":259,"./loader/MatterCircleColliderLoader.js":261,"./loader/MatterRectColliderLoader.js":262,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],261:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ColliderLoader2 = _interopRequireDefault(require("../../ColliderLoader.js"));

var _UnitHelper = _interopRequireDefault(require("../../../../utils/UnitHelper.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../component/internal/TransformComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MatterCircleColliderLoader = /*#__PURE__*/function (_ColliderLoader) {
  (0, _inherits2["default"])(MatterCircleColliderLoader, _ColliderLoader);

  var _super = _createSuper(MatterCircleColliderLoader);

  function MatterCircleColliderLoader() {
    (0, _classCallCheck2["default"])(this, MatterCircleColliderLoader);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MatterCircleColliderLoader, null, [{
    key: "loadCollider",

    /**
     * @override
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {Matter.Body}
     */
    value: function loadCollider(unit, colliderComponent) {
      var transformComponent = unit.getComponent(_TransformComponent["default"]);

      var colliderPosition = _UnitHelper["default"].toColliderCenterPosition(unit, colliderComponent, transformComponent.getPosition(), colliderComponent.getRotation());

      var colliderSize = _UnitHelper["default"].getColliderSize(unit, colliderComponent);

      return Matter.Bodies.circle(colliderPosition.x, colliderPosition.y, colliderSize.getWidth() / 2);
    }
  }]);
  return MatterCircleColliderLoader;
}(_ColliderLoader2["default"]);

exports["default"] = MatterCircleColliderLoader;

},{"../../../../component/internal/TransformComponent.js":53,"../../../../utils/UnitHelper.js":369,"../../ColliderLoader.js":258,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],262:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _ColliderLoader2 = _interopRequireDefault(require("../../ColliderLoader.js"));

var _UnitHelper = _interopRequireDefault(require("../../../../utils/UnitHelper.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../component/internal/TransformComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MatterRectColliderLoader = /*#__PURE__*/function (_ColliderLoader) {
  (0, _inherits2["default"])(MatterRectColliderLoader, _ColliderLoader);

  var _super = _createSuper(MatterRectColliderLoader);

  function MatterRectColliderLoader() {
    (0, _classCallCheck2["default"])(this, MatterRectColliderLoader);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MatterRectColliderLoader, null, [{
    key: "loadCollider",

    /**
     * @override
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {Matter.Body}
     */
    value: function loadCollider(unit, colliderComponent) {
      var transformComponent = unit.getComponent(_TransformComponent["default"]);

      var colliderPosition = _UnitHelper["default"].toColliderCenterPosition(unit, colliderComponent, transformComponent.getPosition(), colliderComponent.getRotation());

      var colliderSize = _UnitHelper["default"].getColliderSize(unit, colliderComponent);

      return Matter.Bodies.rectangle(colliderPosition.x, colliderPosition.y, colliderSize.getWidth(), colliderSize.getHeight());
    }
  }]);
  return MatterRectColliderLoader;
}(_ColliderLoader2["default"]);

exports["default"] = MatterRectColliderLoader;

},{"../../../../component/internal/TransformComponent.js":53,"../../../../utils/UnitHelper.js":369,"../../ColliderLoader.js":258,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],263:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TYPES = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Style = _interopRequireDefault(require("./Style.js"));

var _Size = _interopRequireDefault(require("./Size.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _DynamicAttribute = _interopRequireDefault(require("./DynamicAttribute.js"));

var _BlobData = _interopRequireDefault(require("../project/data/BlobData.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var AttributeType = /*#__PURE__*/function () {
  function AttributeType() {
    (0, _classCallCheck2["default"])(this, AttributeType);
  }

  (0, _createClass2["default"])(AttributeType, null, [{
    key: "extractPrototype",

    /**
     * @param {number|string} prototype
     * @param {Object} parentPathData
     * @return {number|Class}
     */
    value: function extractPrototype(prototype, parentPathData) {
      if (_.isString(prototype) || _.isNumber(prototype)) {
        var dynamicPrototype = this.extractDynamicPrototypeName(prototype, parentPathData);
        return this.mapPrototype(dynamicPrototype || prototype);
      }

      return prototype;
    }
    /**
     * @param {number|string} prototype
     * @param {Object} parentPathData
     * @return {number}
     */

  }, {
    key: "extractDynamicPrototypeName",
    value: function extractDynamicPrototypeName(prototype, parentPathData) {
      if (_.isObject(parentPathData)) {
        var dynamicTypeRegex = _.isString(prototype) && /^\[([a-zA-Z]+)]$/.exec(prototype);
        var dynamicType = dynamicTypeRegex && dynamicTypeRegex[1];

        if (dynamicType) {
          return parseInt(parentPathData[dynamicType]);
        }
      }
    }
    /**
     * @return {string|Class}
     */

  }, {
    key: "mapPrototype",
    value: function mapPrototype(prototype) {
      switch (prototype) {
        case TYPES.ANY:
          return 'string';

        case TYPES.STRING:
          return 'string';

        case TYPES.BOOLEAN:
          return 'boolean';

        case TYPES.NUMBER:
          return 'number';

        case TYPES.UNIT:
          return 'number';

        case TYPES.ANIMATION:
          return 'number';

        case TYPES.COMPONENT:
          return 'string';

        case TYPES.MATERIAL:
          return 'string';

        case TYPES.COLOR:
          return 'string';

        case TYPES.COMPONENT_INSTANCE:
          return 'number';

        case TYPES.AUDIO:
          return 'number';

        case TYPES.MASK_GROUP_INSTANCE:
          return 'number';

        case TYPES.RANGE:
          return 'number';

        case TYPES.MESH:
          return _BlobData["default"];

        case TYPES.STYLE:
          return _Style["default"];

        case TYPES.SIZE:
          return _Size["default"];

        case TYPES.VECTOR:
          return _Vector["default"];

        case TYPES.DYNAMIC_ATTRIBUTE:
          return _DynamicAttribute["default"];

        default:
          if (this.isArrayType(prototype)) {
            return Array;
          }

          throw new _SystemError["default"]("AttributeType not supported (".concat(prototype, ")"));
      }
    }
    /**
     * @param {number} type
     * @return {boolean}
     */

  }, {
    key: "isArrayType",
    value: function isArrayType(type) {
      return this.has(type, TYPES.ARRAY);
    }
    /**
     * @param {number} type
     * @return {number}
     */

  }, {
    key: "getArrayElementType",
    value: function getArrayElementType(type) {
      for (var maskType in TYPES) {
        var mask = TYPES[maskType];

        if (mask !== TYPES.ARRAY && this.has(type, mask)) {
          return mask;
        }
      }
    }
    /**
     * @param {number|string} type
     * @param {number} typeMask
     * @return {boolean}
     */

  }, {
    key: "has",
    value: function has(type, typeMask) {
      return (parseInt(type) & typeMask) === typeMask;
    }
    /**
     * @param {number|string} type
     * @param {number} typeMask
     * @return {boolean}
     */

  }, {
    key: "is",
    value: function is(type, typeMask) {
      return parseInt(type) === typeMask;
    }
  }]);
  return AttributeType;
}();
/**
 * [category][type for each category]
 * [000000][00000000000000000000]
 * Define attribute types :
 * 000001: Primitive
 * 000010: Advanced Primitive
 * 000100: Simple Object
 * 001000: Arrays
 * 010000: Advanced Object (Blob, ...)
 * @type {Object}
 */


exports["default"] = AttributeType;
var TYPES = {
  ANY: 1048577,
  STRING: 1048578,
  BOOLEAN: 1048580,
  NUMBER: 1048584,
  UNIT: 1048592,
  ANIMATION: 1048608,
  COMPONENT: 1048640,
  COMPONENT_INSTANCE: 1048704,
  MASK_GROUP_INSTANCE: 1048832,
  MATERIAL: 1049088,
  COLOR: 1049600,
  AUDIO: 1050624,
  RANGE: 2097153,
  STYLE: 4194306,
  SIZE: 4194308,
  VECTOR: 4194312,
  DYNAMIC_ATTRIBUTE: 4194320,
  ARRAY: 8388608,
  MESH: 16777217
};
exports.TYPES = TYPES;

},{"../exception/type/SystemError.js":82,"../project/data/BlobData.js":280,"../utils/Vector.js":370,"./DynamicAttribute.js":265,"./Size.js":268,"./Style.js":269,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],264:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

/**
 * @class {DataContext}
 */
var DataContext =
/**
 * @param {number} unitId
 * @param {Vector} center
 * @param {OffscreenCanvasRenderingContext2D} context
 * @param {Size} scaleSize
 * @param {Camera} camera
 * @param {World} world
 */
function DataContext(unitId, center, context, scaleSize, camera, world) {
  (0, _classCallCheck2["default"])(this, DataContext);
  this.unitId = unitId;
  this.center = center;
  this.context = context;
  this.scaleSize = scaleSize;
  this.camera = camera;
  this.world = world;
};

exports["default"] = DataContext;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/interopRequireDefault":12}],265:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Maths = _interopRequireDefault(require("../utils/Maths.js"));

var DynamicAttribute = /*#__PURE__*/function () {
  /**
   * @type {number}
   */

  /**
   * @type {string}
   */

  /**
   * @type {number}
   */

  /**
   * @type {*}
   */

  /**
   * @type {*}
   */

  /**
   * @param {string} attrName
   * @param {number|string} attrType
   * @param {*} attrValue
   * @param {*} attrRule
   */
  function DynamicAttribute(attrName, attrType, attrValue, attrRule) {
    (0, _classCallCheck2["default"])(this, DynamicAttribute);
    (0, _defineProperty2["default"])(this, "id", void 0);
    (0, _defineProperty2["default"])(this, "attrName", void 0);
    (0, _defineProperty2["default"])(this, "attrType", void 0);
    (0, _defineProperty2["default"])(this, "attrValue", void 0);
    (0, _defineProperty2["default"])(this, "attrRule", void 0);
    this.id = _Maths["default"].generateId();
    this.setAttrName(attrName);
    this.setAttrType(attrType);
    this.setAttrValue(attrValue);
    this.setAttrRule(attrRule);
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(DynamicAttribute, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setAttrName",
    value: function setAttrName(name) {
      this.attrName = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getAttrName",
    value: function getAttrName() {
      return this.attrName;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return '';
    }
    /**
     * @param {string|number} type
     */

  }, {
    key: "setAttrType",
    value: function setAttrType(type) {
      this.attrType = parseInt(type);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getAttrType",
    value: function getAttrType() {
      return this.attrType;
    }
    /**
     * @param {*} value
     */

  }, {
    key: "setAttrValue",
    value: function setAttrValue(value) {
      this.attrValue = value;
    }
    /**
     * @return {*}
     */

  }, {
    key: "getAttrValue",
    value: function getAttrValue() {
      return this.attrValue;
    }
    /**
     * @param {*} value
     */

  }, {
    key: "setAttrRule",
    value: function setAttrRule(value) {
      this.attrRule = value;
    }
    /**
     * @return {*}
     */

  }, {
    key: "getAttrRule",
    value: function getAttrRule() {
      return this.attrRule;
    }
    /**
     * @param {*[]} values
     */

  }, {
    key: "concatAttrValue",
    value: function concatAttrValue(values) {
      this.setAttrValue(values);
    }
  }]);
  return DynamicAttribute;
}();

exports["default"] = DynamicAttribute;

},{"../utils/Maths.js":363,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],266:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _NodeInputData2 = _interopRequireDefault(require("../project/data/NodeInputData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NodeInput = /*#__PURE__*/function (_NodeInputData) {
  (0, _inherits2["default"])(NodeInput, _NodeInputData);

  var _super = _createSuper(NodeInput);

  function NodeInput() {
    var _this;

    (0, _classCallCheck2["default"])(this, NodeInput);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "selected", void 0);
    return _this;
  }

  (0, _createClass2["default"])(NodeInput, [{
    key: "setSelected",

    /**
     * @param {boolean} selected
     */
    value: function setSelected(selected) {
      this.selected = selected;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getSelected",
    value: function getSelected() {
      return this.selected;
    }
  }, {
    key: "select",
    value: function select() {
      this.setSelected(true);
    }
  }, {
    key: "unselect",
    value: function unselect() {
      this.setSelected(false);
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isSelected",
    value: function isSelected() {
      return this.getSelected();
    }
  }]);
  return NodeInput;
}(_NodeInputData2["default"]);

exports["default"] = NodeInput;

},{"../project/data/NodeInputData.js":293,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],267:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var RigidBodyOptions =
/**
 * @type {boolean}
 */

/**
 * @type {boolean}
 */

/**
 * @type {Vector}
 */
function RigidBodyOptions() {
  (0, _classCallCheck2["default"])(this, RigidBodyOptions);
  (0, _defineProperty2["default"])(this, "isStatic", void 0);
  (0, _defineProperty2["default"])(this, "freezeRotation", void 0);
  (0, _defineProperty2["default"])(this, "velocity", void 0);
  this.velocity = new _Vector["default"]();
};

exports["default"] = RigidBodyOptions;

},{"../utils/Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],268:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * @class {Size}
 */
var Size = /*#__PURE__*/function () {
  /**
   * @param {number|{width: number, height: number}} size
   */
  function Size(size) {
    (0, _classCallCheck2["default"])(this, Size);
    var width = 0,
        height = 0;

    if ((0, _typeof2["default"])(size) !== 'object') {
      width = size;
      height = size;
    } else if (size) {
      width = size.width || width;
      height = size.height || height;
    }

    this.width = width;
    this.height = height;
  }
  /**
   * @param {number|string} width
   */


  (0, _createClass2["default"])(Size, [{
    key: "setWidth",
    value: function setWidth(width) {
      this.width = parseInt(width);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getWidth",
    value: function getWidth() {
      return this.width;
    }
    /**
     * @param {number|string} height
     */

  }, {
    key: "setHeight",
    value: function setHeight(height) {
      this.height = parseInt(height);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getHeight",
    value: function getHeight() {
      return this.height;
    }
  }]);
  return Size;
}();

var _default = Size;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/typeof":22}],269:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

/**
 * @class {Style}
 */
var Style = /*#__PURE__*/function () {
  function Style() {
    (0, _classCallCheck2["default"])(this, Style);
    (0, _defineProperty2["default"])(this, "color", void 0);
    (0, _defineProperty2["default"])(this, "colorOpacity", 1);
    (0, _defineProperty2["default"])(this, "fillColor", void 0);
    (0, _defineProperty2["default"])(this, "fillColorOpacity", 1);
    (0, _defineProperty2["default"])(this, "opacity", void 0);
    (0, _defineProperty2["default"])(this, "borderSize", void 0);
  }

  (0, _createClass2["default"])(Style, [{
    key: "setColor",

    /**
     * @param {string} color
     */
    value: function setColor(color) {
      this.color = color;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getColor",
    value: function getColor() {
      return this.color;
    }
    /**
     * @param {number} colorOpacity
     */

  }, {
    key: "setColorOpacity",
    value: function setColorOpacity(colorOpacity) {
      this.colorOpacity = colorOpacity;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getColorOpacity",
    value: function getColorOpacity() {
      return this.colorOpacity;
    }
    /**
     * @param {string} fillColor
     */

  }, {
    key: "setFillColor",
    value: function setFillColor(fillColor) {
      this.fillColor = fillColor;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getFillColor",
    value: function getFillColor() {
      return this.fillColor;
    }
    /**
     * @param {number} fillColorOpacity
     */

  }, {
    key: "setFillColorOpacity",
    value: function setFillColorOpacity(fillColorOpacity) {
      this.fillColorOpacity = fillColorOpacity;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getFillColorOpacity",
    value: function getFillColorOpacity() {
      return this.fillColorOpacity;
    }
    /**
     * @param {number} opacity
     */

  }, {
    key: "setOpacity",
    value: function setOpacity(opacity) {
      this.opacity = opacity;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getOpacity",
    value: function getOpacity() {
      return this.opacity;
    }
    /**
     * @param {number} borderSize
     */

  }, {
    key: "setBorderSize",
    value: function setBorderSize(borderSize) {
      this.borderSize = borderSize;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getBorderSize",
    value: function getBorderSize() {
      return this.borderSize;
    }
  }]);
  return Style;
}();

var _default = Style;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],270:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _PreferenceData2 = _interopRequireDefault(require("../project/data/PreferenceData.js"));

var _GameInputPreference = _interopRequireDefault(require("./gameInput/GameInputPreference.js"));

var _MaskGroupPreference = _interopRequireDefault(require("./maskgroup/MaskGroupPreference.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Preference = /*#__PURE__*/function (_PreferenceData) {
  (0, _inherits2["default"])(Preference, _PreferenceData);

  var _super = _createSuper(Preference);

  function Preference() {
    var _this;

    (0, _classCallCheck2["default"])(this, Preference);
    _this = _super.call(this);
    _this.gameInput = new _GameInputPreference["default"]();
    _this.maskGroup = new _MaskGroupPreference["default"]();
    return _this;
  }

  (0, _createClass2["default"])(Preference, [{
    key: "init",
    value: function init() {
      this.getGameInput().init();
      this.getMaskGroup().init();
    }
  }]);
  return Preference;
}(_PreferenceData2["default"]);

exports["default"] = Preference;

},{"../project/data/PreferenceData.js":295,"./gameInput/GameInputPreference.js":272,"./maskgroup/MaskGroupPreference.js":274,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],271:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GAME_INPUTS = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _GameInputData2 = _interopRequireDefault(require("../../project/data/GameInputData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GameInput = /*#__PURE__*/function (_GameInputData) {
  (0, _inherits2["default"])(GameInput, _GameInputData);

  var _super = _createSuper(GameInput);

  function GameInput() {
    (0, _classCallCheck2["default"])(this, GameInput);
    return _super.apply(this, arguments);
  }

  return GameInput;
}(_GameInputData2["default"]);

exports["default"] = GameInput;
var GAME_INPUTS = {
  RIGHT: 'right',
  LEFT: 'left',
  UP: 'up',
  DOWN: 'down',
  JUMP: 'jump',
  ATTACK: 'attack'
};
exports.GAME_INPUTS = GAME_INPUTS;

},{"../../project/data/GameInputData.js":288,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],272:[function(require,module,exports){
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _GameInputPreferenceData = _interopRequireDefault(require("../../project/data/GameInputPreferenceData.js"));

var _GameInput = _interopRequireWildcard(require("./GameInput.js"));

var _DynamicAttribute = _interopRequireDefault(require("../../pobject/DynamicAttribute.js"));

var _AttributeType = require("../../pobject/AttributeType.js");

var _Keyboard = require("../../core/Keyboard.js");

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GameInputPreference = /*#__PURE__*/function (_GameInputPreferenceD) {
  (0, _inherits2["default"])(GameInputPreference, _GameInputPreferenceD);

  var _super = _createSuper(GameInputPreference);

  function GameInputPreference() {
    (0, _classCallCheck2["default"])(this, GameInputPreference);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GameInputPreference, [{
    key: "init",
    value: function init() {
      var inputs = [new _GameInput["default"](_GameInput.GAME_INPUTS.RIGHT, 'D', new _DynamicAttribute["default"]('value', _AttributeType.TYPES.NUMBER, 1)), new _GameInput["default"](_GameInput.GAME_INPUTS.LEFT, 'Q', new _DynamicAttribute["default"]('value', _AttributeType.TYPES.NUMBER, -1)), new _GameInput["default"](_GameInput.GAME_INPUTS.UP, 'Z', new _DynamicAttribute["default"]('value', _AttributeType.TYPES.NUMBER, -1)), new _GameInput["default"](_GameInput.GAME_INPUTS.DOWN, 'S', new _DynamicAttribute["default"]('value', _AttributeType.TYPES.NUMBER, 1)), new _GameInput["default"](_GameInput.GAME_INPUTS.JUMP, 'SPACE', new _DynamicAttribute["default"]('value', _AttributeType.TYPES.NUMBER, 1)), new _GameInput["default"](_GameInput.GAME_INPUTS.ATTACK, 'P', new _DynamicAttribute["default"]('value', _AttributeType.TYPES.NUMBER, 1))];
      this.concatInputs(inputs);
    }
    /**
     * @param {string} name
     * @return {GameInput}
     */

  }, {
    key: "get",
    value: function get(name) {
      return this.getInputs().find(function (input) {
        return input.getName() === name;
      });
    }
    /**
     * @param {string} name
     * @return {number}
     */

  }, {
    key: "getKeyCode",
    value: function getKeyCode(name) {
      var input = this.get(name);

      if (input) {
        return _Keyboard.KeyCode[input.getKey()];
      }

      throw new _ClientError["default"]("Key for Input \"".concat(name, "\" not configured"));
    }
  }]);
  return GameInputPreference;
}(_GameInputPreferenceData["default"]);

exports["default"] = GameInputPreference;

},{"../../core/Keyboard.js":73,"../../exception/type/ClientError.js":80,"../../pobject/AttributeType.js":263,"../../pobject/DynamicAttribute.js":265,"../../project/data/GameInputPreferenceData.js":289,"./GameInput.js":271,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/interopRequireWildcard":13,"@babel/runtime/helpers/possibleConstructorReturn":18}],273:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _MaskGroupData2 = _interopRequireDefault(require("../../project/data/MaskGroupData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MaskGroup = /*#__PURE__*/function (_MaskGroupData) {
  (0, _inherits2["default"])(MaskGroup, _MaskGroupData);

  var _super = _createSuper(MaskGroup);

  function MaskGroup() {
    (0, _classCallCheck2["default"])(this, MaskGroup);
    return _super.apply(this, arguments);
  }

  return MaskGroup;
}(_MaskGroupData2["default"]);

exports["default"] = MaskGroup;

},{"../../project/data/MaskGroupData.js":290,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],274:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _MaskGroupPreferenceData = _interopRequireDefault(require("../../project/data/MaskGroupPreferenceData.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MaskGroupPreference = /*#__PURE__*/function (_MaskGroupPreferenceD) {
  (0, _inherits2["default"])(MaskGroupPreference, _MaskGroupPreferenceD);

  var _super = _createSuper(MaskGroupPreference);

  function MaskGroupPreference() {
    (0, _classCallCheck2["default"])(this, MaskGroupPreference);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MaskGroupPreference, [{
    key: "init",
    value: function init() {
      this.tryAddMask('Enemy');
    }
  }]);
  return MaskGroupPreference;
}(_MaskGroupPreferenceData["default"]);

exports["default"] = MaskGroupPreference;

},{"../../project/data/MaskGroupPreferenceData.js":291,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],275:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ANodeData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(ANodeData, _Data);

  var _super = _createSuper(ANodeData);

  /**
   * @type {number}
   */

  /**
   * @type {string}
   */

  /**
   * @type {NodeInput[]}
   */
  function ANodeData() {
    var _this;

    (0, _classCallCheck2["default"])(this, ANodeData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "sourceName", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "inputs", void 0);
    _this.id = _Maths["default"].generateId();
    _this.inputs = [];
    return _this;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(ANodeData, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getSourceName",
    value: function getSourceName() {
      return this.sourceName;
    }
    /**
     * @param {string} sourceName
     */

  }, {
    key: "setSourceName",
    value: function setSourceName(sourceName) {
      this.sourceName = sourceName;
    }
    /**
     * @return {NodeInput[]}
     */

  }, {
    key: "getInputs",
    value: function getInputs() {
      return this.inputs;
    }
    /**
     * @param {NodeInput[]} inputs
     */

  }, {
    key: "setInputs",
    value: function setInputs(inputs) {
      this.inputs = inputs;
    }
    /**
     * @param {NodeInput[]} inputs
     */

  }, {
    key: "concatInputs",
    value: function concatInputs(inputs) {
      this.setInputs(inputs);
    }
  }]);
  return ANodeData;
}(_Data2["default"]);

exports["default"] = ANodeData;

},{"../../utils/Maths.js":363,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],276:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.STATUS = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AScriptData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(AScriptData, _Data);

  var _super = _createSuper(AScriptData);

  /**
   * @type {number}
   */

  /**
   * @type {ANode[]}
   */

  /**
   * @type {string}
   */

  /**
   * @type {string}
   */

  /**
   * @type {Camera}
   */

  /**
   * @param {string} name
   */
  function AScriptData() {
    var _this;

    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    (0, _classCallCheck2["default"])(this, AScriptData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "nodes", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "status", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "camera", void 0);
    _this.id = _Maths["default"].generateId();
    _this.name = name;
    _this.nodes = [];
    _this.status = STATUS.NEW;
    return _this;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(AScriptData, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {string} status
     */

  }, {
    key: "setStatus",
    value: function setStatus(status) {
      this.status = status;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getStatus",
    value: function getStatus() {
      return this.status;
    }
    /**
     * @return {ANode[]}
     */

  }, {
    key: "getNodes",
    value: function getNodes() {
      return this.nodes;
    }
    /**
     * @param {ANode[]} nodes
     */

  }, {
    key: "setNodes",
    value: function setNodes(nodes) {
      this.nodes = nodes;
    }
    /**
     * @param {ANode[]} nodes
     */

  }, {
    key: "concatNodes",
    value: function concatNodes(nodes) {
      this.setNodes(nodes);
    }
    /**
     * @param {Camera} camera
     */

  }, {
    key: "setCamera",
    value: function setCamera(camera) {
      this.camera = camera;
    }
    /**
     * @return {Camera}
     */

  }, {
    key: "getCamera",
    value: function getCamera() {
      return this.camera;
    }
  }]);
  return AScriptData;
}(_Data2["default"]);

exports["default"] = AScriptData;
var STATUS = {
  NEW: '',
  COMPILED: 'compiled',
  ERROR: 'error'
};
exports.STATUS = STATUS;

},{"../../utils/Maths.js":363,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],277:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 * @extends {Data}
 */
var AssetData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(AssetData, _Data);

  var _super = _createSuper(AssetData);

  function AssetData() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "type", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "folderId", void 0);
    return _this;
  }

  (0, _createClass2["default"])(AssetData, [{
    key: "setId",

    /**
     * @param {number} id
     */
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {AssetType} type
     */

  }, {
    key: "setType",
    value: function setType(type) {
      this.type = type;
    }
    /**
     * @return {AssetType}
     */

  }, {
    key: "getType",
    value: function getType() {
      return this.type;
    }
    /**
     * @param {number|string} folderId
     */

  }, {
    key: "setFolderId",
    value: function setFolderId(folderId) {
      this.folderId = parseInt(folderId);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getFolderId",
    value: function getFolderId() {
      return this.folderId;
    }
  }]);
  return AssetData;
}(_Data2["default"]);

var _default = AssetData;
exports["default"] = _default;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],278:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetTypeData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(AssetTypeData, _Data);

  var _super = _createSuper(AssetTypeData);

  function AssetTypeData() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetTypeData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "dataUrl", void 0);
    return _this;
  }

  (0, _createClass2["default"])(AssetTypeData, [{
    key: "setDataUrl",

    /**
     * @param {string} dataUrl
     */
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(dataUrl) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.dataUrl = dataUrl;

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function setDataUrl(_x) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
    /**
     * @return {string}
     */

  }, {
    key: "getDataUrl",
    value: function () {
      var _getDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                return _context2.abrupt("return", this.dataUrl);

              case 1:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function getDataUrl() {
        return _getDataUrl.apply(this, arguments);
      }

      return getDataUrl;
    }()
  }]);
  return AssetTypeData;
}(_Data2["default"]);

exports["default"] = AssetTypeData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],279:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {AssetsManagerData}
 * @extends {Data}
 */
var AssetsManagerData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(AssetsManagerData, _Data);

  var _super = _createSuper(AssetsManagerData);

  function AssetsManagerData() {
    var _this;

    (0, _classCallCheck2["default"])(this, AssetsManagerData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "assets", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "folders", void 0);
    _this.assets = [];
    _this.folders = [];
    return _this;
  }
  /**
   * @return {Asset[]}
   */


  (0, _createClass2["default"])(AssetsManagerData, [{
    key: "getAssets",
    value: function getAssets() {
      return this.assets;
    }
    /**
     * @param {Asset[]} assets
     */

  }, {
    key: "setAssets",
    value: function setAssets(assets) {
      this.assets = assets;
    }
    /**
     * @return {Folder[]}
     */

  }, {
    key: "getFolders",
    value: function getFolders() {
      return this.folders;
    }
    /**
     * @param {Folder[]} folders
     */

  }, {
    key: "setFolders",
    value: function setFolders(folders) {
      this.folders = folders;
    }
    /**
     * @param {Asset[]} assets
     */

  }, {
    key: "concatAssets",
    value: function concatAssets(assets) {
      this.setAssets(assets);
    }
    /**
     * @param {Folder[]} folders
     */

  }, {
    key: "concatFolders",
    value: function concatFolders(folders) {
      this.concat(this.folders, folders, function (tItem, sItem) {
        return tItem.getName() === sItem.getName();
      });
    }
  }]);
  return AssetsManagerData;
}(_Data2["default"]);

exports["default"] = AssetsManagerData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],280:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var BlobData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(BlobData, _Data);

  var _super = _createSuper(BlobData);

  function BlobData() {
    var _this;

    (0, _classCallCheck2["default"])(this, BlobData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "size", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "position", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "dataUrl", void 0);
    return _this;
  }

  (0, _createClass2["default"])(BlobData, [{
    key: "setSize",

    /**
     * @param {Size} size
     */
    value: function setSize(size) {
      this.size = size;
    }
    /**
     * @return {Size}
     */

  }, {
    key: "getSize",
    value: function getSize() {
      return this.size;
    }
    /**
     * @param {Vector} position
     */

  }, {
    key: "setPosition",
    value: function setPosition(position) {
      this.position = position;
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getPosition",
    value: function getPosition() {
      return this.position;
    }
    /**
     * @param {string} dataUrl
     */

  }, {
    key: "setDataUrl",
    value: function () {
      var _setDataUrl = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(dataUrl) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.dataUrl = dataUrl;

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function setDataUrl(_x) {
        return _setDataUrl.apply(this, arguments);
      }

      return setDataUrl;
    }()
    /**
     * @return {string}
     */

  }, {
    key: "getDataUrl",
    value: function getDataUrl() {
      return this.dataUrl;
    }
  }]);
  return BlobData;
}(_Data2["default"]);

var _default = BlobData;
exports["default"] = _default;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/regenerator":26}],281:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {CameraData}
 * @extends {Data}
 */
var CameraData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(CameraData, _Data);

  var _super = _createSuper(CameraData);

  function CameraData() {
    var _this;

    (0, _classCallCheck2["default"])(this, CameraData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "position", void 0);
    return _this;
  }

  (0, _createClass2["default"])(CameraData, [{
    key: "setPosition",

    /**
     * @param {Vector} position
     */
    value: function setPosition(position) {
      this.position = position;
    }
    /**
     * @return {Vector}
     */

  }, {
    key: "getPosition",
    value: function getPosition() {
      return this.position;
    }
    /**
     * @param {string|number} x
     */

  }, {
    key: "setPositionX",
    value: function setPositionX(x) {
      this.position.x = parseFloat(x);
    }
    /**
     * @param {string|number} y
     */

  }, {
    key: "setPositionY",
    value: function setPositionY(y) {
      this.position.y = parseFloat(y);
    }
    /**
     * @param {string|number} z
     */

  }, {
    key: "setPositionZ",
    value: function setPositionZ(z) {
      this.position.z = parseFloat(z);
    }
    /**
     * @return {number}
     */

  }, {
    key: "getPositionX",
    value: function getPositionX() {
      return this.position.x;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getPositionY",
    value: function getPositionY() {
      return this.position.y;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getPositionZ",
    value: function getPositionZ() {
      return this.position.z;
    }
  }]);
  return CameraData;
}(_Data2["default"]);

var _default = CameraData;
exports["default"] = _default;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],282:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ComponentData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(ComponentData, _Data);

  var _super = _createSuper(ComponentData);

  /**
   * @type {DynamicAttribute[]}
   */
  function ComponentData(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, ComponentData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "attributes", void 0);
    _this.id = _Maths["default"].generateId();
    _this.name = name || 'Custom Component';
    _this.attributes = [];
    return _this;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(ComponentData, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isUnique",
    value: function isUnique() {
      return true;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isHidden",
    value: function isHidden() {
      return false;
    }
    /**
     * @protected
     * @param {DynamicAttribute[]} attributes
     */

  }, {
    key: "setAttributes",
    value: function setAttributes(attributes) {
      this.attributes = attributes;
    }
    /**
     * @return {DynamicAttribute[]}
     */

  }, {
    key: "getAttributes",
    value: function getAttributes() {
      return this.attributes;
    }
    /**
     * @param {DynamicAttribute[]} attributes
     */

  }, {
    key: "concatAttributes",
    value: function concatAttributes(attributes) {
      this.concat(this.attributes, attributes, function (tItem, sItem) {
        return tItem.getAttrName() === sItem.getAttrName();
      }, function (attribute) {
        return ['attrRule', 'attrType'].includes(attribute);
      });
    }
  }]);
  return ComponentData;
}(_Data2["default"]);

exports["default"] = ComponentData;

},{"../../utils/Maths.js":363,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],283:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ContentData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(ContentData, _Data);

  var _super = _createSuper(ContentData);

  /**
   * @type {number}
   */

  /**
   * @type {number}
   */

  /**
   * @param {number} dataContentId
   */
  function ContentData(dataContentId) {
    var _this;

    (0, _classCallCheck2["default"])(this, ContentData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "dataContentId", void 0);
    _this.id = _Maths["default"].generateId();
    _this.dataContentId = dataContentId;
    return _this;
  }
  /**
   * @return {number}
   */


  (0, _createClass2["default"])(ContentData, [{
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {number} id
     */

  }, {
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getDataContentId",
    value: function getDataContentId() {
      return this.dataContentId;
    }
    /**
     * @param {number} dataContentId
     */

  }, {
    key: "setDataContentId",
    value: function setDataContentId(dataContentId) {
      this.dataContentId = dataContentId;
    }
  }]);
  return ContentData;
}(_Data2["default"]);

exports["default"] = ContentData;

},{"../../utils/Maths.js":363,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],284:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

/**
 * @class {Data}
 */
var Data = /*#__PURE__*/function () {
  function Data() {
    (0, _classCallCheck2["default"])(this, Data);
    (0, _defineProperty2["default"])(this, "dataId", void 0);
  }

  (0, _createClass2["default"])(Data, [{
    key: "setDataId",

    /**
     * Generated when serializing object
     * @param {number|null} id
     */
    value: function setDataId(id) {
      this.dataId = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getDataId",
    value: function getDataId() {
      return this.dataId;
    }
    /**
     * Exportable data will be added to the exported object (ex: world)
     * @return {boolean}
     */

  }, {
    key: "isExportable",
    value: function isExportable() {
      return true;
    }
    /**
     * @param {Object[]} target
     * @param {Object[]} source
     * @param {Function} criteria
     * @param {Function} exclude
     */

  }, {
    key: "concat",
    value: function concat(target, source, criteria, exclude) {
      if (target && source) {
        source.forEach(function (sItem) {
          var existIndex = target.findIndex(function (tItem) {
            return criteria(tItem, sItem);
          });

          if (existIndex >= 0) {
            if (exclude) {
              var currentTarget = target[existIndex];

              for (var attribute in currentTarget) {
                if (!exclude(attribute)) {
                  currentTarget[attribute] = _.cloneDeep(sItem[attribute]);
                }
              }
            } else {
              target[existIndex] = _.cloneDeep(sItem);
            }
          } else {
            target.push(_.cloneDeep(sItem));
          }
        });
      }
    }
  }]);
  return Data;
}();

(0, _defineProperty2["default"])(Data, "instance", void 0);
var _default = Data;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],285:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _Camera = _interopRequireDefault(require("../../core/Camera.js"));

var _Physics = _interopRequireDefault(require("../../physics/Physics.js"));

var _AssetsManager = _interopRequireDefault(require("../../manager/AssetsManager.js"));

var _Asset = _interopRequireDefault(require("../../asset/Asset.js"));

var _Folder = _interopRequireDefault(require("../../asset/Folder.js"));

var _Mesh = _interopRequireDefault(require("../../core/Mesh.js"));

var _UnitManager = _interopRequireDefault(require("../../manager/UnitManager.js"));

var _EmptyUnit = _interopRequireDefault(require("../../unit/type/EmptyUnit.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../component/internal/gui/property/GUIPropertyComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

var _MoveXUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/move/MoveXUnitInstant.js"));

var _MoveYUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/move/MoveYUnitInstant.js"));

var _MoveFreeUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/move/MoveFreeUnitInstant.js"));

var _GridUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/grid/GridUnitInstant.js"));

var _AssetUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/asset/AssetUnitInstant.js"));

var _GridXUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/grid/GridXUnitInstant.js"));

var _GridYUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/grid/GridYUnitInstant.js"));

var _CameraUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/camera/CameraUnitInstant.js"));

var _DynamicAttribute = _interopRequireDefault(require("../../pobject/DynamicAttribute.js"));

var _CameraComponent = _interopRequireDefault(require("../../component/internal/CameraComponent.js"));

var _SelectionUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/edit/SelectionUnitInstant.js"));

var _StyleComponent = _interopRequireDefault(require("../../component/internal/StyleComponent.js"));

var _ScriptManager = _interopRequireDefault(require("../../manager/ScriptManager.js"));

var _ClassScript = _interopRequireDefault(require("../../flow/ClassScript.js"));

var _EventNode = _interopRequireDefault(require("../../flow/node/EventNode.js"));

var _FunctionNode = _interopRequireDefault(require("../../flow/node/FunctionNode.js"));

var _ConstantNode = _interopRequireDefault(require("../../flow/node/ConstantNode.js"));

var _AssetScriptXml = _interopRequireDefault(require("../../asset/types/script/AssetScriptXml.js"));

var _AssetImage = _interopRequireDefault(require("../../asset/types/image/AssetImage.js"));

var _FunctionRegistry = _interopRequireDefault(require("../../registry/FunctionRegistry.js"));

var _AFunction = _interopRequireDefault(require("../../flow/function/AFunction.js"));

var _OnMouseClickEvent = _interopRequireDefault(require("../../flow/event/native/OnMouseClickEvent.js"));

var _LogFunction = _interopRequireDefault(require("../../flow/function/native/basic/LogFunction.js"));

var _AddFunction = _interopRequireDefault(require("../../flow/function/native/basic/AddFunction.js"));

var _AConstant = _interopRequireDefault(require("../../flow/constant/AConstant.js"));

var _AEmptyStackFunction = _interopRequireDefault(require("../../flow/function/AEmptyStackFunction.js"));

var _OnKeyDownEvent = _interopRequireDefault(require("../../flow/event/native/OnKeyDownEvent.js"));

var _TrueCondition = _interopRequireDefault(require("../../flow/condition/TrueCondition.js"));

var _ConditionNode = _interopRequireDefault(require("../../flow/node/ConditionNode.js"));

var _LessThanFunction = _interopRequireDefault(require("../../flow/function/native/basic/LessThanFunction.js"));

var _IsKeyDownFunction = _interopRequireDefault(require("../../flow/function/native/basic/IsKeyDownFunction.js"));

var _NodeInput = _interopRequireDefault(require("../../pobject/NodeInput.js"));

var _UnitNode = _interopRequireDefault(require("../../flow/node/UnitNode.js"));

var _AUnit = _interopRequireDefault(require("../../flow/unit/AUnit.js"));

var _GetWorldPositionFunction = _interopRequireDefault(require("../../flow/function/native/unit/GetWorldPositionFunction.js"));

var _VectorFunction = _interopRequireDefault(require("../../flow/function/native/structure/VectorFunction.js"));

var _SetWorldPositionFunction = _interopRequireDefault(require("../../flow/function/native/unit/SetWorldPositionFunction.js"));

var _AssetScriptCode = _interopRequireDefault(require("../../asset/types/script/AssetScriptCode.js"));

var _GetUnitFunction = _interopRequireDefault(require("../../flow/function/native/unit/GetUnitFunction.js"));

var _ScaleXUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/scale/ScaleXUnitInstant.js"));

var _ScaleYUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/scale/ScaleYUnitInstant.js"));

var _RotateZUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/rotate/RotateZUnitInstant.js"));

var _ScaleFreeUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/scale/ScaleFreeUnitInstant.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

var _TabManager = _interopRequireDefault(require("../../manager/TabManager.js"));

var _Tab = _interopRequireDefault(require("../../content/Tab.js"));

var _EditScriptCodeContent = _interopRequireDefault(require("../../content/script/EditScriptCodeContent.js"));

var _EditGraphScriptContent = _interopRequireDefault(require("../../content/script/EditGraphScriptContent.js"));

var _KeyCodeNode = _interopRequireDefault(require("../../flow/node/KeyCodeNode.js"));

var _AKeyCode = _interopRequireDefault(require("../../flow/keycode/AKeyCode.js"));

var _Preference = _interopRequireDefault(require("../../preference/Preference.js"));

var _GameInputPreference = _interopRequireDefault(require("../../preference/gameInput/GameInputPreference.js"));

var _GameInput = _interopRequireDefault(require("../../preference/gameInput/GameInput.js"));

var _OnInputXAxisEvent = _interopRequireDefault(require("../../flow/event/native/OnInputXAxisEvent.js"));

var _GetInputXAxisFunction = _interopRequireDefault(require("../../flow/function/native/input/GetInputXAxisFunction.js"));

var _ComponentRegistry = _interopRequireDefault(require("../../registry/ComponentRegistry.js"));

var _RigidBodyComponent = _interopRequireDefault(require("../../component/internal/RigidBodyComponent.js"));

var _RectColliderComponent = _interopRequireDefault(require("../../component/internal/RectColliderComponent.js"));

var _RectUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/primitive/RectUnitInstant.js"));

var _CircleColliderComponent = _interopRequireDefault(require("../../component/internal/CircleColliderComponent.js"));

var _CircleUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/primitive/CircleUnitInstant.js"));

var _MoveXAxisFunction = _interopRequireDefault(require("../../flow/function/native/physics/MoveXAxisFunction.js"));

var _MultiplyFunction = _interopRequireDefault(require("../../flow/function/native/basic/MultiplyFunction.js"));

var _OnInputYAxisEvent = _interopRequireDefault(require("../../flow/event/native/OnInputYAxisEvent.js"));

var _OnInputJumpEvent = _interopRequireDefault(require("../../flow/event/native/OnInputJumpEvent.js"));

var _ApplyForceFunction = _interopRequireDefault(require("../../flow/function/native/physics/ApplyForceFunction.js"));

var _GetVelocityXFunction = _interopRequireDefault(require("../../flow/function/native/physics/GetVelocityXFunction.js"));

var _GetVelocityYFunction = _interopRequireDefault(require("../../flow/function/native/physics/GetVelocityYFunction.js"));

var _GreaterThanFunction = _interopRequireDefault(require("../../flow/function/native/basic/GreaterThanFunction.js"));

var _EqualToFunction = _interopRequireDefault(require("../../flow/function/native/basic/EqualToFunction.js"));

var _NotEqualToFunction = _interopRequireDefault(require("../../flow/function/native/basic/NotEqualToFunction.js"));

var _ScriptComponent = _interopRequireDefault(require("../../component/internal/ScriptComponent.js"));

var _AStringVariable = _interopRequireDefault(require("../../flow/variable/AStringVariable.js"));

var _EditAnimationContent = _interopRequireDefault(require("../../content/animation/EditAnimationContent.js"));

var _AssetAnimationXml = _interopRequireDefault(require("../../asset/types/animation/AssetAnimationXml.js"));

var _AssetAnimationScriptXml = _interopRequireDefault(require("../../asset/types/animation/AssetAnimationScriptXml.js"));

var _AAnimation = _interopRequireDefault(require("../../flow/animation/AAnimation.js"));

var _OnAnimationStartEvent = _interopRequireDefault(require("../../flow/event/native/OnAnimationStartEvent.js"));

var _AnimationNode = _interopRequireDefault(require("../../flow/node/AnimationNode.js"));

var _AnimationComponent = _interopRequireDefault(require("../../component/internal/AnimationComponent.js"));

var _StartAnimationFunction = _interopRequireDefault(require("../../flow/function/native/animation/StartAnimationFunction.js"));

var _SetFunction = _interopRequireDefault(require("../../flow/function/native/component/SetFunction.js"));

var _OnUpdateEvent = _interopRequireDefault(require("../../flow/event/native/OnUpdateEvent.js"));

var _GetFunction = _interopRequireDefault(require("../../flow/function/native/component/GetFunction.js"));

var _GreaterThanOrEqualFunction = _interopRequireDefault(require("../../flow/function/native/basic/GreaterThanOrEqualFunction.js"));

var _FalseCondition = _interopRequireDefault(require("../../flow/condition/FalseCondition.js"));

var _AndFunction = _interopRequireDefault(require("../../flow/function/native/basic/AndFunction.js"));

var _OrFunction = _interopRequireDefault(require("../../flow/function/native/basic/OrFunction.js"));

var _NotFunction = _interopRequireDefault(require("../../flow/function/native/basic/NotFunction.js"));

var _RoundFunction = _interopRequireDefault(require("../../flow/function/native/basic/RoundFunction.js"));

var _IsGroundedFunction = _interopRequireDefault(require("../../flow/function/native/physics/IsGroundedFunction.js"));

var _OnAnyAnimationStartEvent = _interopRequireDefault(require("../../flow/event/native/OnAnyAnimationStartEvent.js"));

var _OnInputAttackEvent = _interopRequireDefault(require("../../flow/event/native/OnInputAttackEvent.js"));

var _StopAnimationFunction = _interopRequireDefault(require("../../flow/function/native/animation/StopAnimationFunction.js"));

var _IsAnimationPlayingFunction = _interopRequireDefault(require("../../flow/function/native/animation/IsAnimationPlayingFunction.js"));

var _HasCurrentAnimationFunction = _interopRequireDefault(require("../../flow/function/native/animation/HasCurrentAnimationFunction.js"));

var _GetCurrentAnimationFunction = _interopRequireDefault(require("../../flow/function/native/animation/GetCurrentAnimationFunction.js"));

var _ANumberVariable = _interopRequireDefault(require("../../flow/variable/ANumberVariable.js"));

var _AReference = _interopRequireDefault(require("../../flow/reference/AReference.js"));

var _ReferenceNode = _interopRequireDefault(require("../../flow/node/ReferenceNode.js"));

var _ASelf = _interopRequireDefault(require("../../flow/unit/ASelf.js"));

var _SelfNode = _interopRequireDefault(require("../../flow/node/SelfNode.js"));

var _IsAnimationEndedFunction = _interopRequireDefault(require("../../flow/function/native/animation/IsAnimationEndedFunction.js"));

var _AToggleVariable = _interopRequireDefault(require("../../flow/variable/AToggleVariable.js"));

var _ToggleVariableNode = _interopRequireDefault(require("../../flow/node/variable/ToggleVariableNode.js"));

var _GetInputYAxisFunction = _interopRequireDefault(require("../../flow/function/native/input/GetInputYAxisFunction.js"));

var _ABooleanVariable = _interopRequireDefault(require("../../flow/variable/ABooleanVariable.js"));

var _ScaleMeshFunction = _interopRequireDefault(require("../../flow/function/native/mesh/ScaleMeshFunction.js"));

var _AbsFunction = _interopRequireDefault(require("../../flow/function/native/basic/AbsFunction.js"));

var _AComponentVariable = _interopRequireDefault(require("../../flow/variable/AComponentVariable.js"));

var _GetInstanceFunction = _interopRequireDefault(require("../../flow/function/native/component/GetInstanceFunction.js"));

var _SetInstanceFunction = _interopRequireDefault(require("../../flow/function/native/component/SetInstanceFunction.js"));

var _MaskGroupPreference = _interopRequireDefault(require("../../preference/maskgroup/MaskGroupPreference.js"));

var _GetAllCollisionFunction = _interopRequireDefault(require("../../flow/function/native/physics/GetAllCollisionFunction.js"));

var _AMaskGroupVariable = _interopRequireDefault(require("../../flow/variable/AMaskGroupVariable.js"));

var _MaskGroup = _interopRequireDefault(require("../../preference/maskgroup/MaskGroup.js"));

var _ALoop = _interopRequireDefault(require("../../flow/loop/ALoop.js"));

var _ArrayFunction = _interopRequireDefault(require("../../flow/function/native/structure/ArrayFunction.js"));

var _GetValueFunction = _interopRequireDefault(require("../../flow/function/native/object/GetValueFunction.js"));

var _IsArrayEmptyFunction = _interopRequireDefault(require("../../flow/function/native/array/IsArrayEmptyFunction.js"));

var _GetUnitByComponentFunction = _interopRequireDefault(require("../../flow/function/native/component/GetUnitByComponentFunction.js"));

var _GetComponentFunction = _interopRequireDefault(require("../../flow/function/native/unit/GetComponentFunction.js"));

var _SubtractFunction = _interopRequireDefault(require("../../flow/function/native/basic/SubtractFunction.js"));

var _GetTimeFunction = _interopRequireDefault(require("../../flow/function/native/time/GetTimeFunction.js"));

var _GetVarFunction = _interopRequireDefault(require("../../flow/function/native/component/GetVarFunction.js"));

var _SetVarFunction = _interopRequireDefault(require("../../flow/function/native/component/SetVarFunction.js"));

var _DivideFunction = _interopRequireDefault(require("../../flow/function/native/basic/DivideFunction.js"));

var _AddVectorFunction = _interopRequireDefault(require("../../flow/function/native/basic/AddVectorFunction.js"));

var _IsUpdateTimeFunction = _interopRequireDefault(require("../../flow/function/native/time/IsUpdateTimeFunction.js"));

var _MaterialRegistry = _interopRequireDefault(require("../../registry/MaterialRegistry.js"));

var _DefaultMaterial = _interopRequireDefault(require("../../material/DefaultMaterial.js"));

var _LightPointUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/light/LightPointUnitInstant.js"));

var _LightPointComponent = _interopRequireDefault(require("../../component/internal/LightPointComponent.js"));

var _LightMaterial = _interopRequireDefault(require("../../material/LightMaterial.js"));

var _LightGlobalUnitInstant = _interopRequireDefault(require("../../unit/instant/type/internal/light/LightGlobalUnitInstant.js"));

var _LightGlobalComponent = _interopRequireDefault(require("../../component/internal/LightGlobalComponent.js"));

var _AssetAudio = _interopRequireDefault(require("../../asset/types/Audio/AssetAudio.js"));

var _PlayAudioFunction = _interopRequireDefault(require("../../flow/function/native/audio/PlayAudioFunction.js"));

var _IsAudioPlayingFunction = _interopRequireDefault(require("../../flow/function/native/audio/IsAudioPlayingFunction.js"));

/**
 * @class {DataSchema}
 * Used to protect loading data when importing a project
 * the dataId will be generated when the project is saved, and used to instantiate data and check the validity
 */
var DataSchema = /*#__PURE__*/function () {
  function DataSchema() {
    (0, _classCallCheck2["default"])(this, DataSchema);
  }

  (0, _createClass2["default"])(DataSchema, null, [{
    key: "getId",

    /**
     * Class to be excluded during serialization
     */

    /**
     * Class to be excluded during serialization for exported game
     */

    /**
     * @param {Class} type
     * @return {number}
     */
    value: function getId(type) {
      var schemaType = this.schema.find(function (vSchema) {
        return vSchema.type === type;
      });

      if (!schemaType) {
        throw new _SystemError["default"]("Type ".concat(type.name, " not found in DataSchema!"));
      }

      return schemaType.id;
    }
    /**
     * @param {*} type
     * @param {boolean} isForGame
     * @return {boolean}
     */

  }, {
    key: "isExcluded",
    value: function isExcluded(type) {
      var isForGame = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      return this.exclude.includes(type) || isForGame && this.excludeGame.includes(type);
    }
    /**
     * @param {number|string} pDataId
     * @param {Data} prototype
     * @return {Data}
     */

  }, {
    key: "newInstance",
    value: function newInstance(pDataId, prototype) {
      var dataId = parseInt(pDataId);
      if (!dataId) return null;
      var schemaType = this.schema.find(function (vSchema) {
        return vSchema.id === dataId;
      });

      if (!schemaType) {
        throw new _SystemError["default"]("ID ".concat(dataId, " not found in DataSchema!"));
      }

      var type = schemaType.type;

      if (type !== prototype && !(type.prototype instanceof prototype)) {
        throw new _SystemError["default"]("Type ".concat(type.name, " attached to ID ").concat(dataId, " not match the given prototype ").concat(prototype.name, " !"));
      }

      return new type();
    }
  }]);
  return DataSchema;
}();

(0, _defineProperty2["default"])(DataSchema, "schema", [{
  id: 10,
  type: _World["default"]
}, {
  id: 20,
  type: _UnitManager["default"]
}, {
  id: 4,
  type: _Camera["default"]
}, {
  id: 5,
  type: _Physics["default"]
}, {
  id: 16,
  type: _AssetsManager["default"]
}, {
  id: 17,
  type: _Asset["default"]
}, {
  id: 23,
  type: _Folder["default"]
}, {
  id: 24,
  type: _Mesh["default"]
}, {
  id: 25,
  type: _DynamicAttribute["default"]
}, {
  id: 30,
  type: _EmptyUnit["default"]
}, {
  id: 40,
  type: _MeshComponent["default"]
}, {
  id: 50,
  type: _TransformComponent["default"]
}, {
  id: 60,
  type: _AssetUnitInstant["default"]
}, {
  id: 70,
  type: _CameraUnitInstant["default"]
}, {
  id: 80,
  type: _CameraComponent["default"]
}, {
  id: 90,
  type: _StyleComponent["default"]
}, {
  id: 100,
  type: _ScriptManager["default"]
}, {
  id: 110,
  type: _ClassScript["default"]
}, {
  id: 120,
  type: _EventNode["default"]
}, {
  id: 130,
  type: _FunctionNode["default"]
}, {
  id: 140,
  type: _ConstantNode["default"]
}, {
  id: 150,
  type: _AssetScriptXml["default"]
}, {
  id: 160,
  type: _AssetImage["default"]
}, {
  id: 170,
  type: _FunctionRegistry["default"]
}, {
  id: 180,
  type: _AFunction["default"]
}, {
  id: 190,
  type: _OnMouseClickEvent["default"]
}, {
  id: 200,
  type: _LogFunction["default"]
}, {
  id: 210,
  type: _AddFunction["default"]
}, {
  id: 220,
  type: _AConstant["default"]
}, {
  id: 230,
  type: _AEmptyStackFunction["default"]
}, {
  id: 240,
  type: _OnKeyDownEvent["default"]
}, {
  id: 250,
  type: _TrueCondition["default"]
}, {
  id: 260,
  type: _ConditionNode["default"]
}, {
  id: 270,
  type: _LessThanFunction["default"]
}, {
  id: 280,
  type: _IsKeyDownFunction["default"]
}, {
  id: 290,
  type: _NodeInput["default"]
}, {
  id: 300,
  type: _UnitNode["default"]
}, {
  id: 310,
  type: _AUnit["default"]
}, {
  id: 320,
  type: _GetWorldPositionFunction["default"]
}, {
  id: 330,
  type: _VectorFunction["default"]
}, {
  id: 340,
  type: _SetWorldPositionFunction["default"]
}, {
  id: 350,
  type: _AssetScriptCode["default"]
}, {
  id: 360,
  type: _GetUnitFunction["default"]
}, {
  id: 370,
  type: _TabManager["default"]
}, {
  id: 380,
  type: _Tab["default"]
}, {
  id: 390,
  type: _EditScriptCodeContent["default"]
}, {
  id: 400,
  type: _EditGraphScriptContent["default"]
}, {
  id: 410,
  type: _KeyCodeNode["default"]
}, {
  id: 420,
  type: _AKeyCode["default"]
}, {
  id: 430,
  type: _Preference["default"]
}, {
  id: 440,
  type: _GameInputPreference["default"]
}, {
  id: 450,
  type: _GameInput["default"]
}, {
  id: 460,
  type: _OnInputXAxisEvent["default"]
}, {
  id: 470,
  type: _GetInputXAxisFunction["default"]
}, {
  id: 480,
  type: _ComponentRegistry["default"]
}, {
  id: 490,
  type: _RigidBodyComponent["default"]
}, {
  id: 500,
  type: _RectColliderComponent["default"]
}, {
  id: 510,
  type: _CircleColliderComponent["default"]
}, {
  id: 520,
  type: _MoveXAxisFunction["default"]
}, {
  id: 530,
  type: _MultiplyFunction["default"]
}, {
  id: 540,
  type: _OnInputYAxisEvent["default"]
}, {
  id: 550,
  type: _OnInputJumpEvent["default"]
}, {
  id: 560,
  type: _ApplyForceFunction["default"]
}, {
  id: 570,
  type: _GetVelocityXFunction["default"]
}, {
  id: 580,
  type: _GetVelocityYFunction["default"]
}, {
  id: 590,
  type: _GreaterThanFunction["default"]
}, {
  id: 600,
  type: _EqualToFunction["default"]
}, {
  id: 610,
  type: _NotEqualToFunction["default"]
}, {
  id: 620,
  type: _ScriptComponent["default"]
}, {
  id: 630,
  type: _AStringVariable["default"]
}, {
  id: 640,
  type: _EditAnimationContent["default"]
}, {
  id: 650,
  type: _AssetAnimationXml["default"]
}, {
  id: 660,
  type: _AssetAnimationScriptXml["default"]
}, {
  id: 670,
  type: _AAnimation["default"]
}, {
  id: 680,
  type: _OnAnimationStartEvent["default"]
}, {
  id: 690,
  type: _AnimationNode["default"]
}, {
  id: 700,
  type: _AnimationComponent["default"]
}, {
  id: 701,
  type: _GUIPropertyComponent["default"]
}, {
  id: 720,
  type: _StartAnimationFunction["default"]
}, {
  id: 730,
  type: _SetFunction["default"]
}, {
  id: 740,
  type: _OnUpdateEvent["default"]
}, {
  id: 750,
  type: _GetFunction["default"]
}, {
  id: 760,
  type: _GreaterThanOrEqualFunction["default"]
}, {
  id: 770,
  type: _FalseCondition["default"]
}, {
  id: 780,
  type: _AndFunction["default"]
}, {
  id: 790,
  type: _OrFunction["default"]
}, {
  id: 800,
  type: _NotFunction["default"]
}, {
  id: 810,
  type: _RoundFunction["default"]
}, {
  id: 820,
  type: _IsGroundedFunction["default"]
}, {
  id: 830,
  type: _OnAnyAnimationStartEvent["default"]
}, {
  id: 840,
  type: _OnInputAttackEvent["default"]
}, {
  id: 850,
  type: _StopAnimationFunction["default"]
}, {
  id: 860,
  type: _IsAnimationPlayingFunction["default"]
}, {
  id: 870,
  type: _HasCurrentAnimationFunction["default"]
}, {
  id: 880,
  type: _GetCurrentAnimationFunction["default"]
}, {
  id: 890,
  type: _ANumberVariable["default"]
}, {
  id: 900,
  type: _AReference["default"]
}, {
  id: 910,
  type: _ReferenceNode["default"]
}, {
  id: 920,
  type: _ASelf["default"]
}, {
  id: 930,
  type: _SelfNode["default"]
}, {
  id: 940,
  type: _IsAnimationEndedFunction["default"]
}, {
  id: 950,
  type: _AToggleVariable["default"]
}, {
  id: 960,
  type: _ToggleVariableNode["default"]
}, {
  id: 970,
  type: _GetInputYAxisFunction["default"]
}, {
  id: 980,
  type: _ABooleanVariable["default"]
}, {
  id: 990,
  type: _ScaleMeshFunction["default"]
}, {
  id: 1000,
  type: _AbsFunction["default"]
}, {
  id: 1010,
  type: _AComponentVariable["default"]
}, {
  id: 1020,
  type: _GetInstanceFunction["default"]
}, {
  id: 1030,
  type: _SetInstanceFunction["default"]
}, {
  id: 1040,
  type: _MaskGroupPreference["default"]
}, {
  id: 1050,
  type: _GetAllCollisionFunction["default"]
}, {
  id: 1060,
  type: _AMaskGroupVariable["default"]
}, {
  id: 1070,
  type: _MaskGroup["default"]
}, {
  id: 1080,
  type: _ALoop["default"]
}, {
  id: 1090,
  type: _ArrayFunction["default"]
}, {
  id: 1100,
  type: _GetValueFunction["default"]
}, {
  id: 1100,
  type: _IsArrayEmptyFunction["default"]
}, {
  id: 1110,
  type: _GetUnitByComponentFunction["default"]
}, {
  id: 1120,
  type: _GetComponentFunction["default"]
}, {
  id: 1130,
  type: _SubtractFunction["default"]
}, {
  id: 1140,
  type: _GetTimeFunction["default"]
}, {
  id: 1150,
  type: _GetVarFunction["default"]
}, {
  id: 1160,
  type: _SetVarFunction["default"]
}, {
  id: 1170,
  type: _DivideFunction["default"]
}, {
  id: 1180,
  type: _AddVectorFunction["default"]
}, {
  id: 1190,
  type: _IsUpdateTimeFunction["default"]
}, {
  id: 1200,
  type: _MaterialRegistry["default"]
}, {
  id: 1210,
  type: _DefaultMaterial["default"]
}, {
  id: 1220,
  type: _LightPointUnitInstant["default"]
}, {
  id: 1230,
  type: _LightPointComponent["default"]
}, {
  id: 1240,
  type: _LightMaterial["default"]
}, {
  id: 1250,
  type: _LightGlobalUnitInstant["default"]
}, {
  id: 1260,
  type: _LightGlobalComponent["default"]
}, {
  id: 1270,
  type: _AssetAudio["default"]
}, {
  id: 1280,
  type: _PlayAudioFunction["default"]
}, {
  id: 1290,
  type: _IsAudioPlayingFunction["default"]
}]);
(0, _defineProperty2["default"])(DataSchema, "exclude", [_MoveXUnitInstant["default"], _MoveYUnitInstant["default"], _MoveFreeUnitInstant["default"], _GridUnitInstant["default"], _GridXUnitInstant["default"], _GridYUnitInstant["default"], _SelectionUnitInstant["default"], _ScaleXUnitInstant["default"], _ScaleYUnitInstant["default"], _ScaleFreeUnitInstant["default"], _RotateZUnitInstant["default"], _RectUnitInstant["default"], _CircleUnitInstant["default"]]);
(0, _defineProperty2["default"])(DataSchema, "excludeGame", [_GUIPropertyComponent["default"], _AssetScriptXml["default"], _AssetScriptCode["default"], _AssetAnimationScriptXml["default"], _ClassScript["default"], _TabManager["default"]]);
var _default = DataSchema;
exports["default"] = _default;

},{"../../asset/Asset.js":30,"../../asset/Folder.js":31,"../../asset/types/Audio/AssetAudio.js":33,"../../asset/types/animation/AssetAnimationScriptXml.js":34,"../../asset/types/animation/AssetAnimationXml.js":35,"../../asset/types/image/AssetImage.js":36,"../../asset/types/script/AssetScriptCode.js":38,"../../asset/types/script/AssetScriptXml.js":39,"../../component/internal/AnimationComponent.js":41,"../../component/internal/CameraComponent.js":42,"../../component/internal/CircleColliderComponent.js":43,"../../component/internal/LightGlobalComponent.js":46,"../../component/internal/LightPointComponent.js":47,"../../component/internal/MeshComponent.js":48,"../../component/internal/RectColliderComponent.js":49,"../../component/internal/RigidBodyComponent.js":50,"../../component/internal/ScriptComponent.js":51,"../../component/internal/StyleComponent.js":52,"../../component/internal/TransformComponent.js":53,"../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../content/Tab.js":63,"../../content/animation/EditAnimationContent.js":64,"../../content/script/EditGraphScriptContent.js":65,"../../content/script/EditScriptCodeContent.js":66,"../../core/Camera.js":69,"../../core/Mesh.js":74,"../../exception/type/SystemError.js":82,"../../flow/ClassScript.js":96,"../../flow/animation/AAnimation.js":97,"../../flow/condition/FalseCondition.js":102,"../../flow/condition/TrueCondition.js":103,"../../flow/constant/AConstant.js":104,"../../flow/event/native/OnAnimationStartEvent.js":106,"../../flow/event/native/OnAnyAnimationStartEvent.js":107,"../../flow/event/native/OnInputAttackEvent.js":108,"../../flow/event/native/OnInputJumpEvent.js":109,"../../flow/event/native/OnInputXAxisEvent.js":110,"../../flow/event/native/OnInputYAxisEvent.js":111,"../../flow/event/native/OnKeyDownEvent.js":112,"../../flow/event/native/OnMouseClickEvent.js":113,"../../flow/event/native/OnUpdateEvent.js":114,"../../flow/function/AEmptyStackFunction.js":115,"../../flow/function/AFunction.js":116,"../../flow/function/native/animation/GetCurrentAnimationFunction.js":119,"../../flow/function/native/animation/HasCurrentAnimationFunction.js":120,"../../flow/function/native/animation/IsAnimationEndedFunction.js":121,"../../flow/function/native/animation/IsAnimationPlayingFunction.js":122,"../../flow/function/native/animation/StartAnimationFunction.js":123,"../../flow/function/native/animation/StopAnimationFunction.js":124,"../../flow/function/native/array/IsArrayEmptyFunction.js":125,"../../flow/function/native/audio/IsAudioPlayingFunction.js":126,"../../flow/function/native/audio/PlayAudioFunction.js":127,"../../flow/function/native/basic/AbsFunction.js":128,"../../flow/function/native/basic/AddFunction.js":129,"../../flow/function/native/basic/AddVectorFunction.js":130,"../../flow/function/native/basic/AndFunction.js":131,"../../flow/function/native/basic/DivideFunction.js":132,"../../flow/function/native/basic/EqualToFunction.js":133,"../../flow/function/native/basic/GreaterThanFunction.js":134,"../../flow/function/native/basic/GreaterThanOrEqualFunction.js":135,"../../flow/function/native/basic/IsKeyDownFunction.js":136,"../../flow/function/native/basic/LessThanFunction.js":137,"../../flow/function/native/basic/LogFunction.js":138,"../../flow/function/native/basic/MultiplyFunction.js":139,"../../flow/function/native/basic/NotEqualToFunction.js":140,"../../flow/function/native/basic/NotFunction.js":141,"../../flow/function/native/basic/OrFunction.js":142,"../../flow/function/native/basic/RoundFunction.js":143,"../../flow/function/native/basic/SubtractFunction.js":144,"../../flow/function/native/component/GetFunction.js":145,"../../flow/function/native/component/GetInstanceFunction.js":146,"../../flow/function/native/component/GetUnitByComponentFunction.js":147,"../../flow/function/native/component/GetVarFunction.js":148,"../../flow/function/native/component/SetFunction.js":149,"../../flow/function/native/component/SetInstanceFunction.js":150,"../../flow/function/native/component/SetVarFunction.js":151,"../../flow/function/native/input/GetInputXAxisFunction.js":152,"../../flow/function/native/input/GetInputYAxisFunction.js":153,"../../flow/function/native/mesh/ScaleMeshFunction.js":154,"../../flow/function/native/object/GetValueFunction.js":155,"../../flow/function/native/physics/ApplyForceFunction.js":156,"../../flow/function/native/physics/GetAllCollisionFunction.js":157,"../../flow/function/native/physics/GetVelocityXFunction.js":158,"../../flow/function/native/physics/GetVelocityYFunction.js":159,"../../flow/function/native/physics/IsGroundedFunction.js":160,"../../flow/function/native/physics/MoveXAxisFunction.js":161,"../../flow/function/native/structure/ArrayFunction.js":162,"../../flow/function/native/structure/VectorFunction.js":163,"../../flow/function/native/time/GetTimeFunction.js":164,"../../flow/function/native/time/IsUpdateTimeFunction.js":165,"../../flow/function/native/unit/GetComponentFunction.js":166,"../../flow/function/native/unit/GetUnitFunction.js":167,"../../flow/function/native/unit/GetWorldPositionFunction.js":168,"../../flow/function/native/unit/SetWorldPositionFunction.js":169,"../../flow/keycode/AKeyCode.js":170,"../../flow/loop/ALoop.js":171,"../../flow/node/AnimationNode.js":173,"../../flow/node/ConditionNode.js":175,"../../flow/node/ConstantNode.js":176,"../../flow/node/EventNode.js":177,"../../flow/node/FunctionNode.js":178,"../../flow/node/KeyCodeNode.js":179,"../../flow/node/ReferenceNode.js":181,"../../flow/node/SelfNode.js":182,"../../flow/node/UnitNode.js":183,"../../flow/node/variable/ToggleVariableNode.js":190,"../../flow/reference/AReference.js":192,"../../flow/unit/ASelf.js":193,"../../flow/unit/AUnit.js":194,"../../flow/variable/ABooleanVariable.js":196,"../../flow/variable/AComponentVariable.js":197,"../../flow/variable/AMaskGroupVariable.js":198,"../../flow/variable/ANumberVariable.js":199,"../../flow/variable/AStringVariable.js":200,"../../flow/variable/AToggleVariable.js":201,"../../manager/AssetsManager.js":230,"../../manager/ScriptManager.js":234,"../../manager/TabManager.js":235,"../../manager/UnitManager.js":236,"../../material/DefaultMaterial.js":237,"../../material/LightMaterial.js":238,"../../physics/Physics.js":257,"../../pobject/DynamicAttribute.js":265,"../../pobject/NodeInput.js":266,"../../preference/Preference.js":270,"../../preference/gameInput/GameInput.js":271,"../../preference/gameInput/GameInputPreference.js":272,"../../preference/maskgroup/MaskGroup.js":273,"../../preference/maskgroup/MaskGroupPreference.js":274,"../../registry/ComponentRegistry.js":303,"../../registry/FunctionRegistry.js":304,"../../registry/MaterialRegistry.js":305,"../../unit/instant/type/internal/asset/AssetUnitInstant.js":331,"../../unit/instant/type/internal/camera/CameraUnitInstant.js":332,"../../unit/instant/type/internal/edit/SelectionUnitInstant.js":333,"../../unit/instant/type/internal/grid/GridUnitInstant.js":336,"../../unit/instant/type/internal/grid/GridXUnitInstant.js":337,"../../unit/instant/type/internal/grid/GridYUnitInstant.js":338,"../../unit/instant/type/internal/light/LightGlobalUnitInstant.js":339,"../../unit/instant/type/internal/light/LightPointUnitInstant.js":340,"../../unit/instant/type/internal/move/MoveFreeUnitInstant.js":341,"../../unit/instant/type/internal/move/MoveXUnitInstant.js":342,"../../unit/instant/type/internal/move/MoveYUnitInstant.js":343,"../../unit/instant/type/internal/primitive/CircleUnitInstant.js":344,"../../unit/instant/type/internal/primitive/RectUnitInstant.js":345,"../../unit/instant/type/internal/rotate/RotateZUnitInstant.js":346,"../../unit/instant/type/internal/scale/ScaleFreeUnitInstant.js":347,"../../unit/instant/type/internal/scale/ScaleXUnitInstant.js":348,"../../unit/instant/type/internal/scale/ScaleYUnitInstant.js":349,"../../unit/type/EmptyUnit.js":351,"../../world/World.js":372,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],286:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 * @extends {Data}
 */
var FolderData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(FolderData, _Data);

  var _super = _createSuper(FolderData);

  function FolderData() {
    var _this;

    (0, _classCallCheck2["default"])(this, FolderData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "folderId", void 0);
    return _this;
  }

  (0, _createClass2["default"])(FolderData, [{
    key: "setId",

    /**
     * @param {number} id
     */
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number|null}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {number} folderId
     */

  }, {
    key: "setFolderId",
    value: function setFolderId(folderId) {
      this.folderId = folderId;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getFolderId",
    value: function getFolderId() {
      return this.folderId;
    }
  }]);
  return FolderData;
}(_Data2["default"]);

exports["default"] = FolderData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],287:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var FunctionData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(FunctionData, _Data);

  var _super = _createSuper(FunctionData);

  /**
   * @type {number}
   */

  /**
   * @type {string}
   */

  /**
   * @type {DynamicAttribute[]}
   */

  /**
   * @type {DynamicAttribute}
   */

  /**
   * @type {StackOperation[]}
   */

  /**
   * @param {string} name
   */
  function FunctionData(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, FunctionData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "inputs", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "output", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "stack", void 0);
    _this.id = _Maths["default"].generateId();
    _this.name = name;
    _this.inputs = [];
    _this.stack = [];
    _this.output = null;
    return _this;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(FunctionData, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @return {DynamicAttribute[]}
     */

  }, {
    key: "getInputs",
    value: function getInputs() {
      return this.inputs;
    }
    /**
     * @param {DynamicAttribute[]} inputs
     */

  }, {
    key: "setInputs",
    value: function setInputs(inputs) {
      this.inputs = inputs;
    }
    /**
     * @return {StackOperation[]}
     */

  }, {
    key: "getStack",
    value: function getStack() {
      return this.stack;
    }
    /**
     * @param {StackOperation[]} stack
     */

  }, {
    key: "setStack",
    value: function setStack(stack) {
      this.stack = stack;
    }
    /**
     * @return {DynamicAttribute}
     */

  }, {
    key: "getOutput",
    value: function getOutput() {
      return this.output;
    }
    /**
     * @param {DynamicAttribute} output
     */

  }, {
    key: "setOutput",
    value: function setOutput(output) {
      this.output = output;
    }
    /**
     * @param {DynamicAttribute[]} inputs
     */

  }, {
    key: "concatInputs",
    value: function concatInputs(inputs) {
      this.setInputs(inputs);
    }
    /**
     * @param {StackOperation[]} stack
     */

  }, {
    key: "concatStack",
    value: function concatStack(stack) {
      this.setStack(stack);
    }
  }]);
  return FunctionData;
}(_Data2["default"]);

exports["default"] = FunctionData;

},{"../../utils/Maths.js":363,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],288:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GameInputData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(GameInputData, _Data);

  var _super = _createSuper(GameInputData);

  /**
   * @type {string}
   */

  /**
   * @type {string}
   */

  /**
   * @type {DynamicAttribute}
   */

  /**
   * @param {string} name
   * @param {string} key
   * @param {DynamicAttribute} value
   */
  function GameInputData(name, key, value) {
    var _this;

    (0, _classCallCheck2["default"])(this, GameInputData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "key", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "value", void 0);
    _this.name = name;
    _this.key = key;
    _this.value = value;
    return _this;
  }
  /**
   * @param {string} name
   */


  (0, _createClass2["default"])(GameInputData, [{
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @param {string} key
     */

  }, {
    key: "setKey",
    value: function setKey(key) {
      this.key = key;
    }
    /**
     * @param {DynamicAttribute} value
     */

  }, {
    key: "setValue",
    value: function setValue(value) {
      this.value = value;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getKey",
    value: function getKey() {
      return this.key;
    }
    /**
     * @return {DynamicAttribute}
     */

  }, {
    key: "getValue",
    value: function getValue() {
      return this.value;
    }
  }]);
  return GameInputData;
}(_Data2["default"]);

exports["default"] = GameInputData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],289:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GameInputPreferenceData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(GameInputPreferenceData, _Data);

  var _super = _createSuper(GameInputPreferenceData);

  /**
   * @type {GameInput[]}
   */
  function GameInputPreferenceData() {
    var _this;

    (0, _classCallCheck2["default"])(this, GameInputPreferenceData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "inputs", void 0);
    _this.inputs = [];
    return _this;
  }
  /**
   * @param {GameInput[]} inputs
   */


  (0, _createClass2["default"])(GameInputPreferenceData, [{
    key: "setInputs",
    value: function setInputs(inputs) {
      this.inputs = inputs;
    }
    /**
     * @return {GameInput[]}
     */

  }, {
    key: "getInputs",
    value: function getInputs() {
      return this.inputs;
    }
    /**
     * @param {GameInput[]} inputs
     */

  }, {
    key: "concatInputs",
    value: function concatInputs(inputs) {
      this.concat(this.inputs, inputs, function (tItem, sItem) {
        return tItem.getName() === sItem.getName();
      });
    }
  }]);
  return GameInputPreferenceData;
}(_Data2["default"]);

exports["default"] = GameInputPreferenceData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],290:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MaskGroupData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(MaskGroupData, _Data);

  var _super = _createSuper(MaskGroupData);

  /**
   * @type {number}
   */

  /**
   * @type {string}
   */

  /**
   * @param {string} name
   */
  function MaskGroupData(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, MaskGroupData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    _this.id = _Maths["default"].generateId();
    _this.name = name;
    return _this;
  }
  /**
   * @return {number}
   */


  (0, _createClass2["default"])(MaskGroupData, [{
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {number} id
     */

  }, {
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
  }]);
  return MaskGroupData;
}(_Data2["default"]);

exports["default"] = MaskGroupData;

},{"../../utils/Maths.js":363,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],291:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _MaskGroup = _interopRequireDefault(require("../../preference/maskgroup/MaskGroup.js"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MaskGroupPreferenceData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(MaskGroupPreferenceData, _Data);

  var _super = _createSuper(MaskGroupPreferenceData);

  /**
   * @type {MaskGroup[]}
   */
  function MaskGroupPreferenceData() {
    var _this;

    (0, _classCallCheck2["default"])(this, MaskGroupPreferenceData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "masks", void 0);
    _this.masks = [];
    return _this;
  }
  /**
   * @param {MaskGroup[]} masks
   */


  (0, _createClass2["default"])(MaskGroupPreferenceData, [{
    key: "setMasks",
    value: function setMasks(masks) {
      this.masks = masks;
    }
    /**
     * @param {string} name
     * @return {MaskGroup}
     */

  }, {
    key: "addMask",
    value: function addMask(name) {
      if (this.findByName(name)) {
        throw new _ClientError["default"]("Mask Group \"".concat(name, "\" already created"));
      }

      return this.add(name);
    }
    /**
     * @param {string} name
     * @return {MaskGroup}
     */

  }, {
    key: "tryAddMask",
    value: function tryAddMask(name) {
      if (!this.findByName(name)) {
        return this.add(name);
      }
    }
    /**
     * @private
     * @param {string} name
     * @return {MaskGroup}
     */

  }, {
    key: "add",
    value: function add(name) {
      var maskGroup = new _MaskGroup["default"](name);
      this.masks.push(maskGroup);
      return maskGroup;
    }
    /**
     * @param {number} id
     * @return {MaskGroup}
     */

  }, {
    key: "find",
    value: function find(id) {
      return this.masks.find(function (mask) {
        return mask.getId() === id;
      });
    }
    /**
     * @param {string} name
     * @return {MaskGroup}
     */

  }, {
    key: "findByName",
    value: function findByName(name) {
      return this.masks.find(function (mask) {
        return mask.getName() === name;
      });
    }
    /**
     * @return {MaskGroup[]}
     */

  }, {
    key: "getMasks",
    value: function getMasks() {
      return this.masks;
    }
    /**
     * @param {MaskGroup[]} masks
     */

  }, {
    key: "concatMasks",
    value: function concatMasks(masks) {
      this.concat(this.masks, masks, function (tItem, sItem) {
        return tItem.getName() === sItem.getName();
      });
    }
  }]);
  return MaskGroupPreferenceData;
}(_Data2["default"]);

exports["default"] = MaskGroupPreferenceData;

},{"../../exception/type/ClientError.js":80,"../../preference/maskgroup/MaskGroup.js":273,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],292:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MaterialData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(MaterialData, _Data);

  var _super = _createSuper(MaterialData);

  function MaterialData() {
    var _this;

    (0, _classCallCheck2["default"])(this, MaterialData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    return _this;
  }

  (0, _createClass2["default"])(MaterialData, [{
    key: "setId",

    /**
     * @param {number} id
     */
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {string} name
     * @return {string}
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
  }]);
  return MaterialData;
}(_Data2["default"]);

exports["default"] = MaterialData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],293:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NodeInputData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(NodeInputData, _Data);

  var _super = _createSuper(NodeInputData);

  /**
   * @type {number}
   */

  /**
   * @type {number}
   */

  /**
   * @type {number}
   */

  /**
   * @type {string}
   */
  function NodeInputData() {
    var _this;

    (0, _classCallCheck2["default"])(this, NodeInputData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "sourceNodeId", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "nodeId", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "targetName", void 0);
    _this.id = _Maths["default"].generateId();
    return _this;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(NodeInputData, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return '';
    }
    /**
     * @return {number}
     */

  }, {
    key: "getSourceNodeId",
    value: function getSourceNodeId() {
      return this.sourceNodeId;
    }
    /**
     * @param {number} sourceNodeId
     */

  }, {
    key: "setSourceNodeId",
    value: function setSourceNodeId(sourceNodeId) {
      this.sourceNodeId = sourceNodeId;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getNodeId",
    value: function getNodeId() {
      return this.nodeId;
    }
    /**
     * @param {number} nodeId
     */

  }, {
    key: "setNodeId",
    value: function setNodeId(nodeId) {
      this.nodeId = nodeId;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getTargetName",
    value: function getTargetName() {
      return this.targetName;
    }
    /**
     * @param {string} targetName
     */

  }, {
    key: "setTargetName",
    value: function setTargetName(targetName) {
      this.targetName = targetName;
    }
  }]);
  return NodeInputData;
}(_Data2["default"]);

exports["default"] = NodeInputData;

},{"../../utils/Maths.js":363,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],294:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {PhysicsData}
 * @extends {Data}
 */
var PhysicsData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(PhysicsData, _Data);

  var _super = _createSuper(PhysicsData);

  function PhysicsData() {
    var _this;

    (0, _classCallCheck2["default"])(this, PhysicsData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "physicsEngine", void 0);
    return _this;
  }

  (0, _createClass2["default"])(PhysicsData, [{
    key: "setPhysicsEngine",

    /**
     * @param {PhysicsEngine} physicsEngine
     */
    value: function setPhysicsEngine(physicsEngine) {
      this.physicsEngine = physicsEngine;
    }
    /**
     * @return {PhysicsEngine}
     */

  }, {
    key: "getPhysicsEngine",
    value: function getPhysicsEngine() {
      return this.physicsEngine;
    }
  }]);
  return PhysicsData;
}(_Data2["default"]);

exports["default"] = PhysicsData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],295:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var PreferenceData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(PreferenceData, _Data);

  var _super = _createSuper(PreferenceData);

  function PreferenceData() {
    var _this;

    (0, _classCallCheck2["default"])(this, PreferenceData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "gameInput", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "maskGroup", void 0);
    return _this;
  }

  (0, _createClass2["default"])(PreferenceData, [{
    key: "setGameInput",

    /**
     * @param {GameInputPreference} gameInput
     */
    value: function setGameInput(gameInput) {
      this.gameInput = gameInput;
    }
    /**
     * @return {GameInputPreference}
     */

  }, {
    key: "getGameInput",
    value: function getGameInput() {
      return this.gameInput;
    }
    /**
     * @param {MaskGroupPreference} maskGroup
     */

  }, {
    key: "setMaskGroup",
    value: function setMaskGroup(maskGroup) {
      this.maskGroup = maskGroup;
    }
    /**
     * @return {MaskGroupPreference}
     */

  }, {
    key: "getMaskGroup",
    value: function getMaskGroup() {
      return this.maskGroup;
    }
  }]);
  return PreferenceData;
}(_Data2["default"]);

exports["default"] = PreferenceData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],296:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RegistryData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(RegistryData, _Data);

  var _super = _createSuper(RegistryData);

  /**
   * @protected
   */

  /**
   * @protected
   */

  /**
   * @param {string} name
   */
  function RegistryData(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, RegistryData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "registry", void 0);
    _this.name = name;
    _this.registry = [];
    return _this;
  }
  /**
   * @param {string} name
   */


  (0, _createClass2["default"])(RegistryData, [{
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {*[]} registry
     */

  }, {
    key: "setRegistry",
    value: function setRegistry(registry) {
      this.registry = registry;
    }
    /**
     * @return {*[]}
     */

  }, {
    key: "getRegistry",
    value: function getRegistry() {
      return this.registry;
    }
    /**
     * @param {*[]} registry
     */

  }, {
    key: "concatRegistry",
    value: function concatRegistry(registry) {
      this.concat(this.registry, registry, function (tItem, sItem) {
        return tItem.getName() === sItem.getName();
      });
    }
  }]);
  return RegistryData;
}(_Data2["default"]);

exports["default"] = RegistryData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],297:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @extends {Data}
 */
var ScriptManagerData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(ScriptManagerData, _Data);

  var _super = _createSuper(ScriptManagerData);

  /**
   * @type {AScript[]}
   */
  function ScriptManagerData() {
    var _this;

    (0, _classCallCheck2["default"])(this, ScriptManagerData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "scripts", void 0);
    _this.scripts = [];
    return _this;
  }
  /**
   * @return {AScript[]}
   */


  (0, _createClass2["default"])(ScriptManagerData, [{
    key: "getScripts",
    value: function getScripts() {
      return this.scripts;
    }
    /**
     * @param {AScript[]} scripts
     */

  }, {
    key: "setScripts",
    value: function setScripts(scripts) {
      this.scripts = scripts;
    }
    /**
     * @param {AScript[]} scripts
     */

  }, {
    key: "concatScripts",
    value: function concatScripts(scripts) {
      this.setScripts(scripts);
    }
  }]);
  return ScriptManagerData;
}(_Data2["default"]);

exports["default"] = ScriptManagerData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],298:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TabData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(TabData, _Data);

  var _super = _createSuper(TabData);

  function TabData() {
    var _this;

    (0, _classCallCheck2["default"])(this, TabData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "selected", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "content", void 0);
    return _this;
  }

  (0, _createClass2["default"])(TabData, [{
    key: "getId",

    /**
     * @return {number}
     */
    value: function getId() {
      return this.id;
    }
    /**
     * @param {number} id
     */

  }, {
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {ContentData}
     */

  }, {
    key: "getContent",
    value: function getContent() {
      return this.content;
    }
    /**
     * @param {ContentData} content
     */

  }, {
    key: "setContent",
    value: function setContent(content) {
      this.content = content;
    }
    /**
     * @param {boolean} selected
     */

  }, {
    key: "setSelected",
    value: function setSelected(selected) {
      this.selected = selected;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getSelected",
    value: function getSelected() {
      return this.selected;
    }
  }]);
  return TabData;
}(_Data2["default"]);

exports["default"] = TabData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],299:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TabManagerData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(TabManagerData, _Data);

  var _super = _createSuper(TabManagerData);

  function TabManagerData() {
    var _this;

    (0, _classCallCheck2["default"])(this, TabManagerData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "tabs", void 0);
    return _this;
  }

  (0, _createClass2["default"])(TabManagerData, [{
    key: "getTabs",

    /**
     * @return {Tab[]}
     */
    value: function getTabs() {
      return this.tabs;
    }
    /**
     * @param {Tab[]} tabs
     */

  }, {
    key: "setTabs",
    value: function setTabs(tabs) {
      this.tabs = tabs;
    }
  }, {
    key: "concatTabs",
    value: function concatTabs(tabs) {
      this.setTabs(tabs);
    }
  }]);
  return TabManagerData;
}(_Data2["default"]);

exports["default"] = TabManagerData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],300:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _ComponentData = _interopRequireDefault(require("./ComponentData.js"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _Maths = _interopRequireDefault(require("../../utils/Maths.js"));

var _ClientError = _interopRequireDefault(require("../../exception/type/ClientError.js"));

var _CommonUtil = _interopRequireDefault(require("../../utils/CommonUtil.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var UnitData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(UnitData, _Data);

  var _super = _createSuper(UnitData);

  /**
   * @type {number}
   */

  /**
   * @type {string}
   */

  /**
   * @type {number}
   */

  /**
   * @type {ComponentData[]}
   */
  function UnitData(name) {
    var _this;

    (0, _classCallCheck2["default"])(this, UnitData);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "id", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "name", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "maskGroupId", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "components", void 0);
    _this.id = _Maths["default"].generateId();
    _this.name = name || 'Custom Component';
    _this.components = [];
    return _this;
  }
  /**
   * @param {number} id
   */


  (0, _createClass2["default"])(UnitData, [{
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @param {number} maskGroupId
     */

  }, {
    key: "setMaskGroupId",
    value: function setMaskGroupId(maskGroupId) {
      this.maskGroupId = maskGroupId;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getMaskGroupId",
    value: function getMaskGroupId() {
      return this.maskGroupId;
    }
    /**
     * @param {string} name
     */

  }, {
    key: "setName",
    value: function setName(name) {
      this.name = name;
    }
    /**
     * @return {string}
     */

  }, {
    key: "getName",
    value: function getName() {
      return this.name;
    }
    /**
     * @param {ComponentData[]} components
     */

  }, {
    key: "setComponents",
    value: function setComponents(components) {
      this.components = components;
    }
    /**
     * @return {ComponentData[]}
     */

  }, {
    key: "getComponents",
    value: function getComponents() {
      return this.components;
    }
    /**
     * @template T
     * @param {T} type
     * @return {T}
     */

  }, {
    key: "getComponent",
    value: function getComponent(type) {
      if (!(type.prototype instanceof _ComponentData["default"])) {
        throw new _ClientError["default"]("Component type must be instance of ComponentData (".concat(type.name, " given)"));
      }

      if (!type.prototype.isUnique()) {
        throw new _ClientError["default"]("Component type ".concat(type.name, " is not unique (use findComponentsByClass instead)"));
      }

      return this.getComponents().find(function (component) {
        return component.constructor === type;
      });
    }
    /**
     * @template T
     * @param {T} type
     * @return {T}
     */

  }, {
    key: "findComponentByClass",
    value: function findComponentByClass(type) {
      return this.getComponents().find(function (component) {
        return component instanceof type;
      });
    }
    /**
     * @template T
     * @param {T} type
     * @return {T[]}
     */

  }, {
    key: "findComponentsByClass",
    value: function findComponentsByClass(type) {
      return this.getComponents().filter(function (component) {
        return component instanceof type;
      });
    }
    /**
     * @param {ComponentData[]} componentClasses
     * @return {boolean}
     */

  }, {
    key: "hasComponentsByClasses",
    value: function hasComponentsByClasses(componentClasses) {
      for (var iComponentClass in componentClasses) {
        var componentClass = componentClasses[iComponentClass];

        if (componentClasses.hasOwnProperty(iComponentClass) && !this.findComponentsByClass(componentClass).length) {
          return false;
        }
      }

      return true;
    }
    /**
     * @param {ComponentData[]} componentClasses
     * @return {boolean}
     */

  }, {
    key: "hasAnyComponentsByClasses",
    value: function hasAnyComponentsByClasses(componentClasses) {
      for (var iComponentClass in componentClasses) {
        var componentClass = componentClasses[iComponentClass];

        if (componentClasses.hasOwnProperty(iComponentClass) && this.findComponentsByClass(componentClass).length) {
          return true;
        }
      }

      return false;
    }
    /**
     * @param {ComponentData[]} componentClasses
     * @return {boolean}
     */

  }, {
    key: "hasComponents",
    value: function hasComponents(componentClasses) {
      for (var iComponentClass in componentClasses) {
        var componentClass = componentClasses[iComponentClass];

        if (componentClasses.hasOwnProperty(iComponentClass) && !this.getComponent(componentClass)) {
          return false;
        }
      }

      return true;
    }
    /**
     * @param {ComponentData[]} componentClasses
     * @return {boolean}
     */

  }, {
    key: "hasEnabledComponents",
    value: function hasEnabledComponents(componentClasses) {
      for (var iComponentClass in componentClasses) {
        var componentClass = componentClasses[iComponentClass];

        if (componentClasses.hasOwnProperty(iComponentClass)) {
          var component = this.getComponent(componentClass);

          if (!component || !component.isEnabled()) {
            return false;
          }
        }
      }

      return true;
    }
    /**
     * @param {ComponentData[]} componentClasses
     * @return {boolean}
     */

  }, {
    key: "hasAnyComponents",
    value: function hasAnyComponents(componentClasses) {
      for (var iComponentClass in componentClasses) {
        var componentClass = componentClasses[iComponentClass];

        if (componentClasses.hasOwnProperty(iComponentClass) && this.getComponent(componentClass)) {
          return true;
        }
      }

      return false;
    }
    /**
     * @template T
     * @param {T} componentClass
     * @return {T}
     */

  }, {
    key: "createComponent",
    value: function createComponent(componentClass) {
      var _this2 = this;

      if (!componentClass.prototype.isUnique() || !this.getComponent(componentClass)) {
        var component = new componentClass();

        _CommonUtil["default"].setupName(component, component.getName(), function (name) {
          return component.setName(name);
        }, function (name) {
          return _this2.findComponentByName(name);
        });

        this.components.push(component);
        return component;
      } else {
        throw new _ClientError["default"]("Component ".concat(componentClass.name, " already created!"));
      }
    }
    /**
     * @param {Component[]} componentClasses
     * @return {Component[]}
     */

  }, {
    key: "createComponents",
    value: function createComponents(componentClasses) {
      var _this3 = this;

      return componentClasses.map(function (componentClass) {
        return _this3.createComponent(componentClass);
      });
    }
    /**
     * @param {number} componentId
     */

  }, {
    key: "deleteComponent",
    value: function deleteComponent(componentId) {
      var iComponent = this.findIndexComponentById(componentId);
      this.components.splice(iComponent, 1);
    }
    /**
     * @param {number} componentId
     * @return {number}
     */

  }, {
    key: "findIndexComponentById",
    value: function findIndexComponentById(componentId) {
      return this.components.findIndex(function (component) {
        return component.id === componentId;
      });
    }
    /**
     * @param {number} componentId
     * @return {Component}
     */

  }, {
    key: "findComponentById",
    value: function findComponentById(componentId) {
      return this.components.find(function (component) {
        return component.id === componentId;
      });
    }
    /**
     * @param {string} name
     * @return {Component}
     */

  }, {
    key: "findComponentByName",
    value: function findComponentByName(name) {
      return this.components.find(function (component) {
        return component.getName() === name;
      });
    }
    /**
     * @param {ComponentData[]} components
     */

  }, {
    key: "concatComponents",
    value: function concatComponents(components) {
      this.concat(this.components, components, function (tItem, sItem) {
        return tItem.getName() === sItem.getName();
      });
    }
  }]);
  return UnitData;
}(_Data2["default"]);

exports["default"] = UnitData;

},{"../../exception/type/ClientError.js":80,"../../utils/CommonUtil.js":356,"../../utils/Maths.js":363,"./ComponentData.js":282,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],301:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @extends {Data}
 */
var UnitManagerData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(UnitManagerData, _Data);

  var _super = _createSuper(UnitManagerData);

  function UnitManagerData() {
    var _this;

    (0, _classCallCheck2["default"])(this, UnitManagerData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "units", void 0);
    return _this;
  }

  (0, _createClass2["default"])(UnitManagerData, [{
    key: "setUnits",

    /**
     * @param {Unit[]} units
     */
    value: function setUnits(units) {
      this.units = units;
    }
    /**
     * @return {Unit[]}
     */

  }, {
    key: "getUnits",
    value: function getUnits() {
      return this.units;
    }
    /**
     * @param {Unit[]} units
     */

  }, {
    key: "concatUnits",
    value: function concatUnits(units) {
      this.setUnits(units);
    }
  }]);
  return UnitManagerData;
}(_Data2["default"]);

exports["default"] = UnitManagerData;

},{"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],302:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Data2 = _interopRequireDefault(require("./Data.js"));

var _SystemError = _interopRequireDefault(require("../../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {WorldData}
 * @extends {Data}
 *
 * @property {Camera} camera
 */
var WorldData = /*#__PURE__*/function (_Data) {
  (0, _inherits2["default"])(WorldData, _Data);

  var _super = _createSuper(WorldData);

  function WorldData() {
    var _this;

    (0, _classCallCheck2["default"])(this, WorldData);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "unitManager", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "tabManager", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "preference", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "functionRegistry", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "componentRegistry", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "materialRegistry", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "camera", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "assetsManager", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "cameraUnitId", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "resolution", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "showGrid", void 0);
    return _this;
  }

  (0, _createClass2["default"])(WorldData, [{
    key: "set",

    /**
     * @param {World} data
     */
    value: function set(data) {
      var _this2 = this;

      if (data instanceof WorldData) {
        Object.getOwnPropertyNames(this).map(function (prop) {
          return _this2[prop] = data[prop];
        });
        this.reload();
      } else {
        throw new _SystemError["default"]('Cannot set the new world, data must be instance of World class');
      }
    }
  }, {
    key: "reload",
    value: function reload() {
      throw new _SystemError["default"]('World.reload must be implemented!');
    }
    /**
     * @param {UnitManagerData} unitManager
     */

  }, {
    key: "setUnitManager",
    value: function setUnitManager(unitManager) {
      this.unitManager = unitManager;
    }
    /**
     * @param {TabManagerData} tabManager
     */

  }, {
    key: "setTabManager",
    value: function setTabManager(tabManager) {
      this.tabManager = tabManager;
    }
    /**
     * @param {Preference} preference
     */

  }, {
    key: "setPreference",
    value: function setPreference(preference) {
      this.preference = preference;
    }
    /**
     * @param {FunctionRegistry} functionRegistry
     */

  }, {
    key: "setFunctionRegistry",
    value: function setFunctionRegistry(functionRegistry) {
      this.functionRegistry = functionRegistry;
    }
    /**
     * @param {ComponentRegistry} componentRegistry
     */

  }, {
    key: "setComponentRegistry",
    value: function setComponentRegistry(componentRegistry) {
      this.componentRegistry = componentRegistry;
    }
    /**
     * @param {MaterialRegistry} materialRegistry
     */

  }, {
    key: "setMaterialRegistry",
    value: function setMaterialRegistry(materialRegistry) {
      this.materialRegistry = materialRegistry;
    }
    /**
     * @param {CameraData} camera
     */

  }, {
    key: "setCamera",
    value: function setCamera(camera) {
      this.camera = camera;
    }
    /**
     * @param {TerrainManagerData} terrainManager
     */

  }, {
    key: "setTerrainManager",
    value: function setTerrainManager(terrainManager) {
      this.terrainManager = terrainManager;
    }
    /**
     * @param {AssetsManagerData} assetsManager
     */

  }, {
    key: "setAssetsManager",
    value: function setAssetsManager(assetsManager) {
      this.assetsManager = assetsManager;
    }
    /**
     * @return {UnitManager}
     */

  }, {
    key: "getUnitManager",
    value: function getUnitManager() {
      return this.unitManager;
    }
    /**
     * @return {TabManager}
     */

  }, {
    key: "getTabManager",
    value: function getTabManager() {
      return this.tabManager;
    }
    /**
     * @return {Preference}
     */

  }, {
    key: "getPreference",
    value: function getPreference() {
      return this.preference;
    }
    /**
     * @return {TerrainManager}
     */

  }, {
    key: "getTerrainManager",
    value: function getTerrainManager() {
      return this.terrainManager;
    }
    /**
     * @return {AssetsManager}
     */

  }, {
    key: "getAssetsManager",
    value: function getAssetsManager() {
      return this.assetsManager;
    }
    /**
     * @return {FunctionRegistry}
     */

  }, {
    key: "getFunctionRegistry",
    value: function getFunctionRegistry() {
      return this.functionRegistry;
    }
    /**
     * @return {ComponentRegistry}
     */

  }, {
    key: "getComponentRegistry",
    value: function getComponentRegistry() {
      return this.componentRegistry;
    }
    /**
     * @return {MaterialRegistry}
     */

  }, {
    key: "getMaterialRegistry",
    value: function getMaterialRegistry() {
      return this.materialRegistry;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getCameraUnitId",
    value: function getCameraUnitId() {
      return this.cameraUnitId;
    }
    /**
     * @param {number} id
     */

  }, {
    key: "setCameraUnitId",
    value: function setCameraUnitId(id) {
      this.cameraUnitId = id;
    }
    /**
     * Get the principal camera (active)
     * @return {Camera}
     */

  }, {
    key: "getCamera",
    value: function getCamera() {
      return this.camera;
    }
    /**
     * @return {Size}
     */

  }, {
    key: "getResolution",
    value: function getResolution() {
      return this.resolution;
    }
    /**
     * @param {Size} resolution
     */

  }, {
    key: "setResolution",
    value: function setResolution(resolution) {
      this.resolution = resolution;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "getShowGrid",
    value: function getShowGrid() {
      return this.showGrid;
    }
    /**
     * @param {boolean} showGrid
     */

  }, {
    key: "setShowGrid",
    value: function setShowGrid(showGrid) {
      this.showGrid = showGrid;
    }
  }], [{
    key: "new",
    value: function _new() {
      this.instance = new this();
    }
  }]);
  return WorldData;
}(_Data2["default"]);

(0, _defineProperty2["default"])(WorldData, "instance", void 0);
var _default = WorldData;
exports["default"] = _default;

},{"../../exception/type/SystemError.js":82,"./Data.js":284,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],303:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Registry2 = _interopRequireDefault(require("./Registry.js"));

var _RigidBodyComponent = _interopRequireDefault(require("../component/internal/RigidBodyComponent.js"));

var _RectColliderComponent = _interopRequireDefault(require("../component/internal/RectColliderComponent.js"));

var _CircleColliderComponent = _interopRequireDefault(require("../component/internal/CircleColliderComponent.js"));

var _AnimationComponent = _interopRequireDefault(require("../component/internal/AnimationComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ComponentRegistry = /*#__PURE__*/function (_Registry) {
  (0, _inherits2["default"])(ComponentRegistry, _Registry);

  var _super = _createSuper(ComponentRegistry);

  function ComponentRegistry() {
    (0, _classCallCheck2["default"])(this, ComponentRegistry);
    return _super.call(this, 'component');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(ComponentRegistry, [{
    key: "init",
    value: function init() {
      this.concatRegistry([new _RigidBodyComponent["default"](), new _RectColliderComponent["default"](), new _CircleColliderComponent["default"](), new _AnimationComponent["default"](), new _TransformComponent["default"](), new _MeshComponent["default"]()]);
    }
    /**
     * @param {Component} instance
     */

  }, {
    key: "register",
    value: function register(instance) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(ComponentRegistry.prototype), "register", this).call(this, instance);
    }
    /**
     * @param {string} name
     * @return {Component}
     */

  }, {
    key: "getInstance",
    value: function getInstance(name) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(ComponentRegistry.prototype), "getInstance", this).call(this, name);
    }
    /**
     * @param {number} id
     * @return {Component}
     */

  }, {
    key: "getInstanceById",
    value: function getInstanceById(id) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(ComponentRegistry.prototype), "getInstanceById", this).call(this, id);
    }
    /**
     * @param {string} className
     * @return {Component[]}
     */

  }, {
    key: "getInstancesByClass",
    value: function getInstancesByClass(className) {
      return this.getInstances().filter(function (instance) {
        return instance.isInstanceOfClass(className);
      });
    }
    /**
     * @param {string} className
     */

  }, {
    key: "removeInstancesByClass",
    value: function removeInstancesByClass(className) {
      _.remove(this.getInstances(), function (instance) {
        return instance.isInstanceOfClass(className);
      });
    }
    /**
     * @return {Component[]}
     */

  }, {
    key: "getInstances",
    value: function getInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(ComponentRegistry.prototype), "getInstances", this).call(this);
    }
  }]);
  return ComponentRegistry;
}(_Registry2["default"]);

exports["default"] = ComponentRegistry;

},{"../component/internal/AnimationComponent.js":41,"../component/internal/CircleColliderComponent.js":43,"../component/internal/MeshComponent.js":48,"../component/internal/RectColliderComponent.js":49,"../component/internal/RigidBodyComponent.js":50,"../component/internal/TransformComponent.js":53,"./Registry.js":306,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],304:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Registry2 = _interopRequireDefault(require("./Registry.js"));

var _AEvent = _interopRequireDefault(require("../flow/event/AEvent.js"));

var _AConstant = _interopRequireDefault(require("../flow/constant/AConstant.js"));

var _ACondition = _interopRequireDefault(require("../flow/condition/ACondition.js"));

var _AUnit = _interopRequireDefault(require("../flow/unit/AUnit.js"));

var _AKeyCode = _interopRequireDefault(require("../flow/keycode/AKeyCode.js"));

var _OnMouseClickEvent = _interopRequireDefault(require("../flow/event/native/OnMouseClickEvent.js"));

var _OnKeyDownEvent = _interopRequireDefault(require("../flow/event/native/OnKeyDownEvent.js"));

var _OnInputXAxisEvent = _interopRequireDefault(require("../flow/event/native/OnInputXAxisEvent.js"));

var _TrueCondition = _interopRequireDefault(require("../flow/condition/TrueCondition.js"));

var _LogFunction = _interopRequireDefault(require("../flow/function/native/basic/LogFunction.js"));

var _AddFunction = _interopRequireDefault(require("../flow/function/native/basic/AddFunction.js"));

var _LessThanFunction = _interopRequireDefault(require("../flow/function/native/basic/LessThanFunction.js"));

var _IsKeyDownFunction = _interopRequireDefault(require("../flow/function/native/basic/IsKeyDownFunction.js"));

var _GetInputXAxisFunction = _interopRequireDefault(require("../flow/function/native/input/GetInputXAxisFunction.js"));

var _GetWorldPositionFunction = _interopRequireDefault(require("../flow/function/native/unit/GetWorldPositionFunction.js"));

var _SetWorldPositionFunction = _interopRequireDefault(require("../flow/function/native/unit/SetWorldPositionFunction.js"));

var _GetUnitFunction = _interopRequireDefault(require("../flow/function/native/unit/GetUnitFunction.js"));

var _VectorFunction = _interopRequireDefault(require("../flow/function/native/structure/VectorFunction.js"));

var _MoveXAxisFunction = _interopRequireDefault(require("../flow/function/native/physics/MoveXAxisFunction.js"));

var _MultiplyFunction = _interopRequireDefault(require("../flow/function/native/basic/MultiplyFunction.js"));

var _OnInputYAxisEvent = _interopRequireDefault(require("../flow/event/native/OnInputYAxisEvent.js"));

var _OnInputJumpEvent = _interopRequireDefault(require("../flow/event/native/OnInputJumpEvent.js"));

var _ApplyForceFunction = _interopRequireDefault(require("../flow/function/native/physics/ApplyForceFunction.js"));

var _GetVelocityXFunction = _interopRequireDefault(require("../flow/function/native/physics/GetVelocityXFunction.js"));

var _GetVelocityYFunction = _interopRequireDefault(require("../flow/function/native/physics/GetVelocityYFunction.js"));

var _GreaterThanFunction = _interopRequireDefault(require("../flow/function/native/basic/GreaterThanFunction.js"));

var _EqualToFunction = _interopRequireDefault(require("../flow/function/native/basic/EqualToFunction.js"));

var _NotEqualToFunction = _interopRequireDefault(require("../flow/function/native/basic/NotEqualToFunction.js"));

var _AVariable = _interopRequireDefault(require("../flow/variable/AVariable.js"));

var _OnAnimationStartEvent = _interopRequireDefault(require("../flow/event/native/OnAnimationStartEvent.js"));

var _AAnimation = _interopRequireDefault(require("../flow/animation/AAnimation.js"));

var _StartAnimationFunction = _interopRequireDefault(require("../flow/function/native/animation/StartAnimationFunction.js"));

var _AComponent = _interopRequireDefault(require("../flow/component/AComponent.js"));

var _SetFunction = _interopRequireDefault(require("../flow/function/native/component/SetFunction.js"));

var _OnUpdateEvent = _interopRequireDefault(require("../flow/event/native/OnUpdateEvent.js"));

var _GetFunction = _interopRequireDefault(require("../flow/function/native/component/GetFunction.js"));

var _GreaterThanOrEqualFunction = _interopRequireDefault(require("../flow/function/native/basic/GreaterThanOrEqualFunction.js"));

var _FalseCondition = _interopRequireDefault(require("../flow/condition/FalseCondition.js"));

var _AndFunction = _interopRequireDefault(require("../flow/function/native/basic/AndFunction.js"));

var _OrFunction = _interopRequireDefault(require("../flow/function/native/basic/OrFunction.js"));

var _NotFunction = _interopRequireDefault(require("../flow/function/native/basic/NotFunction.js"));

var _RoundFunction = _interopRequireDefault(require("../flow/function/native/basic/RoundFunction.js"));

var _IsGroundedFunction = _interopRequireDefault(require("../flow/function/native/physics/IsGroundedFunction.js"));

var _OnAnyAnimationStartEvent = _interopRequireDefault(require("../flow/event/native/OnAnyAnimationStartEvent.js"));

var _OnInputAttackEvent = _interopRequireDefault(require("../flow/event/native/OnInputAttackEvent.js"));

var _StopAnimationFunction = _interopRequireDefault(require("../flow/function/native/animation/StopAnimationFunction.js"));

var _IsAnimationPlayingFunction = _interopRequireDefault(require("../flow/function/native/animation/IsAnimationPlayingFunction.js"));

var _HasCurrentAnimationFunction = _interopRequireDefault(require("../flow/function/native/animation/HasCurrentAnimationFunction.js"));

var _GetCurrentAnimationFunction = _interopRequireDefault(require("../flow/function/native/animation/GetCurrentAnimationFunction.js"));

var _IsAnimationEndedFunction = _interopRequireDefault(require("../flow/function/native/animation/IsAnimationEndedFunction.js"));

var _GetInputYAxisFunction = _interopRequireDefault(require("../flow/function/native/input/GetInputYAxisFunction.js"));

var _ScaleMeshFunction = _interopRequireDefault(require("../flow/function/native/mesh/ScaleMeshFunction.js"));

var _AbsFunction = _interopRequireDefault(require("../flow/function/native/basic/AbsFunction.js"));

var _GetInstanceFunction = _interopRequireDefault(require("../flow/function/native/component/GetInstanceFunction.js"));

var _SetInstanceFunction = _interopRequireDefault(require("../flow/function/native/component/SetInstanceFunction.js"));

var _GetAllCollisionFunction = _interopRequireDefault(require("../flow/function/native/physics/GetAllCollisionFunction.js"));

var _ALoop = _interopRequireDefault(require("../flow/loop/ALoop.js"));

var _ArrayFunction = _interopRequireDefault(require("../flow/function/native/structure/ArrayFunction.js"));

var _GetValueFunction = _interopRequireDefault(require("../flow/function/native/object/GetValueFunction.js"));

var _IsArrayEmptyFunction = _interopRequireDefault(require("../flow/function/native/array/IsArrayEmptyFunction.js"));

var _GetUnitByComponentFunction = _interopRequireDefault(require("../flow/function/native/component/GetUnitByComponentFunction.js"));

var _GetComponentFunction = _interopRequireDefault(require("../flow/function/native/unit/GetComponentFunction.js"));

var _SubtractFunction = _interopRequireDefault(require("../flow/function/native/basic/SubtractFunction.js"));

var _GetTimeFunction = _interopRequireDefault(require("../flow/function/native/time/GetTimeFunction.js"));

var _GetVarFunction = _interopRequireDefault(require("../flow/function/native/component/GetVarFunction.js"));

var _SetVarFunction = _interopRequireDefault(require("../flow/function/native/component/SetVarFunction.js"));

var _DivideFunction = _interopRequireDefault(require("../flow/function/native/basic/DivideFunction.js"));

var _AddVectorFunction = _interopRequireDefault(require("../flow/function/native/basic/AddVectorFunction.js"));

var _IsUpdateTimeFunction = _interopRequireDefault(require("../flow/function/native/time/IsUpdateTimeFunction.js"));

var _PlayAudioFunction = _interopRequireDefault(require("../flow/function/native/audio/PlayAudioFunction.js"));

var _IsAudioPlayingFunction = _interopRequireDefault(require("../flow/function/native/audio/IsAudioPlayingFunction.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var FunctionRegistry = /*#__PURE__*/function (_Registry) {
  (0, _inherits2["default"])(FunctionRegistry, _Registry);

  var _super = _createSuper(FunctionRegistry);

  function FunctionRegistry() {
    (0, _classCallCheck2["default"])(this, FunctionRegistry);
    return _super.call(this, 'function');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(FunctionRegistry, [{
    key: "init",
    value: function init() {
      this.concatRegistry([// Event
      new _OnMouseClickEvent["default"](), new _OnKeyDownEvent["default"](), new _OnInputXAxisEvent["default"](), new _OnInputYAxisEvent["default"](), new _OnInputJumpEvent["default"](), new _OnAnimationStartEvent["default"](), new _OnAnyAnimationStartEvent["default"](), new _OnUpdateEvent["default"](), new _OnInputAttackEvent["default"](), // Condition
      new _TrueCondition["default"](), new _FalseCondition["default"](), // Function
      new _LogFunction["default"](), new _AddFunction["default"](), new _LessThanFunction["default"](), new _GreaterThanFunction["default"](), new _GreaterThanOrEqualFunction["default"](), new _IsKeyDownFunction["default"](), new _GetInputXAxisFunction["default"](), new _GetInputYAxisFunction["default"](), new _MultiplyFunction["default"](), new _EqualToFunction["default"](), new _NotEqualToFunction["default"](), new _AndFunction["default"](), new _OrFunction["default"](), new _NotFunction["default"](), new _RoundFunction["default"](), new _AbsFunction["default"](), new _SubtractFunction["default"](), new _DivideFunction["default"](), new _AddVectorFunction["default"](), //Loop
      new _ALoop["default"](), //Unit
      new _GetWorldPositionFunction["default"](), new _SetWorldPositionFunction["default"](), new _GetUnitFunction["default"](), new _GetComponentFunction["default"](), //Animation
      new _StartAnimationFunction["default"](), new _StopAnimationFunction["default"](), new _IsAnimationPlayingFunction["default"](), new _HasCurrentAnimationFunction["default"](), new _GetCurrentAnimationFunction["default"](), new _IsAnimationEndedFunction["default"](), //Component
      new _SetFunction["default"](), new _GetFunction["default"](), new _GetInstanceFunction["default"](), new _SetInstanceFunction["default"](), new _GetUnitByComponentFunction["default"](), new _GetVarFunction["default"](), new _SetVarFunction["default"](), //Audio
      new _PlayAudioFunction["default"](), new _IsAudioPlayingFunction["default"](), //Object
      new _GetValueFunction["default"](), //Array
      new _IsArrayEmptyFunction["default"](), //Time
      new _GetTimeFunction["default"](), new _IsUpdateTimeFunction["default"](), //Physics
      new _MoveXAxisFunction["default"](), new _ApplyForceFunction["default"](), new _GetVelocityXFunction["default"](), new _GetVelocityYFunction["default"](), new _IsGroundedFunction["default"](), new _ScaleMeshFunction["default"](), new _GetAllCollisionFunction["default"](), //Structure
      new _VectorFunction["default"](), new _ArrayFunction["default"]()]);
    }
    /**
     * @param {AFunction} instance
     */

  }, {
    key: "register",
    value: function register(instance) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "register", this).call(this, instance);
    }
    /**
     * @param {AFunction} instance
     */

  }, {
    key: "tryRegister",
    value: function tryRegister(instance) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "tryRegister", this).call(this, instance);
    }
    /**
     * @param {string} name
     * @return {AFunction}
     */

  }, {
    key: "tryGetInstance",
    value: function tryGetInstance(name) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "tryGetInstance", this).call(this, name);
    }
    /**
     * @param {string} name
     * @return {AFunction}
     */

  }, {
    key: "getInstance",
    value: function getInstance(name) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstance", this).call(this, name);
    }
    /**
     * @override
     * @param {Class} className
     * @return {AFunction[]}
     */

  }, {
    key: "getClassInstance",
    value: function getClassInstance(className) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getClassInstance", this).call(this, className);
    }
    /**
     * @param {number} id
     * @return {AFunction}
     */

  }, {
    key: "getInstanceById",
    value: function getInstanceById(id) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstanceById", this).call(this, id);
    }
    /**
     * @param {string} className
     * @return {AFunction[]}
     */

  }, {
    key: "getInstancesByClass",
    value: function getInstancesByClass(className) {
      return this.getInstances().filter(function (instance) {
        return instance.isInstanceOfClass(className);
      });
    }
    /**
     * @param {string} className
     */

  }, {
    key: "removeInstancesByClass",
    value: function removeInstancesByClass(className) {
      _.remove(this.getInstances(), function (instance) {
        return instance.isInstanceOfClass(className);
      });
    }
    /**
     * @return {AFunction[]}
     */

  }, {
    key: "getInstances",
    value: function getInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstances", this).call(this);
    }
    /**
     * @return {AFunction[]}
     */

  }, {
    key: "getOtherInstances",
    value: function getOtherInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstances", this).call(this).filter(function (instance) {
        return !(instance instanceof _AEvent["default"]) && !(instance instanceof _AConstant["default"]) && !(instance instanceof _ACondition["default"]) && !(instance instanceof _ALoop["default"]) && !(instance instanceof _AUnit["default"]) && !(instance instanceof _AAnimation["default"]) && !(instance instanceof _AKeyCode["default"]) && !(instance instanceof _AVariable["default"]) && !(instance instanceof _AComponent["default"]);
      });
    }
    /**
     * @return {AEvent[]}
     */

  }, {
    key: "getEventInstances",
    value: function getEventInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstances", this).call(this).filter(function (instance) {
        return instance instanceof _AEvent["default"];
      });
    }
    /**
     * @return {AConstant[]}
     */

  }, {
    key: "getConstantInstances",
    value: function getConstantInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstances", this).call(this).filter(function (instance) {
        return instance instanceof _AConstant["default"];
      });
    }
    /**
     * @return {ACondition[]}
     */

  }, {
    key: "getConditionInstances",
    value: function getConditionInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstances", this).call(this).filter(function (instance) {
        return instance instanceof _ACondition["default"];
      });
    }
    /**
     * @return {AVariable[]}
     */

  }, {
    key: "getVariableInstances",
    value: function getVariableInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(FunctionRegistry.prototype), "getInstances", this).call(this).filter(function (instance) {
        return instance instanceof _AVariable["default"];
      });
    }
  }]);
  return FunctionRegistry;
}(_Registry2["default"]);

exports["default"] = FunctionRegistry;

},{"../flow/animation/AAnimation.js":97,"../flow/component/AComponent.js":100,"../flow/condition/ACondition.js":101,"../flow/condition/FalseCondition.js":102,"../flow/condition/TrueCondition.js":103,"../flow/constant/AConstant.js":104,"../flow/event/AEvent.js":105,"../flow/event/native/OnAnimationStartEvent.js":106,"../flow/event/native/OnAnyAnimationStartEvent.js":107,"../flow/event/native/OnInputAttackEvent.js":108,"../flow/event/native/OnInputJumpEvent.js":109,"../flow/event/native/OnInputXAxisEvent.js":110,"../flow/event/native/OnInputYAxisEvent.js":111,"../flow/event/native/OnKeyDownEvent.js":112,"../flow/event/native/OnMouseClickEvent.js":113,"../flow/event/native/OnUpdateEvent.js":114,"../flow/function/native/animation/GetCurrentAnimationFunction.js":119,"../flow/function/native/animation/HasCurrentAnimationFunction.js":120,"../flow/function/native/animation/IsAnimationEndedFunction.js":121,"../flow/function/native/animation/IsAnimationPlayingFunction.js":122,"../flow/function/native/animation/StartAnimationFunction.js":123,"../flow/function/native/animation/StopAnimationFunction.js":124,"../flow/function/native/array/IsArrayEmptyFunction.js":125,"../flow/function/native/audio/IsAudioPlayingFunction.js":126,"../flow/function/native/audio/PlayAudioFunction.js":127,"../flow/function/native/basic/AbsFunction.js":128,"../flow/function/native/basic/AddFunction.js":129,"../flow/function/native/basic/AddVectorFunction.js":130,"../flow/function/native/basic/AndFunction.js":131,"../flow/function/native/basic/DivideFunction.js":132,"../flow/function/native/basic/EqualToFunction.js":133,"../flow/function/native/basic/GreaterThanFunction.js":134,"../flow/function/native/basic/GreaterThanOrEqualFunction.js":135,"../flow/function/native/basic/IsKeyDownFunction.js":136,"../flow/function/native/basic/LessThanFunction.js":137,"../flow/function/native/basic/LogFunction.js":138,"../flow/function/native/basic/MultiplyFunction.js":139,"../flow/function/native/basic/NotEqualToFunction.js":140,"../flow/function/native/basic/NotFunction.js":141,"../flow/function/native/basic/OrFunction.js":142,"../flow/function/native/basic/RoundFunction.js":143,"../flow/function/native/basic/SubtractFunction.js":144,"../flow/function/native/component/GetFunction.js":145,"../flow/function/native/component/GetInstanceFunction.js":146,"../flow/function/native/component/GetUnitByComponentFunction.js":147,"../flow/function/native/component/GetVarFunction.js":148,"../flow/function/native/component/SetFunction.js":149,"../flow/function/native/component/SetInstanceFunction.js":150,"../flow/function/native/component/SetVarFunction.js":151,"../flow/function/native/input/GetInputXAxisFunction.js":152,"../flow/function/native/input/GetInputYAxisFunction.js":153,"../flow/function/native/mesh/ScaleMeshFunction.js":154,"../flow/function/native/object/GetValueFunction.js":155,"../flow/function/native/physics/ApplyForceFunction.js":156,"../flow/function/native/physics/GetAllCollisionFunction.js":157,"../flow/function/native/physics/GetVelocityXFunction.js":158,"../flow/function/native/physics/GetVelocityYFunction.js":159,"../flow/function/native/physics/IsGroundedFunction.js":160,"../flow/function/native/physics/MoveXAxisFunction.js":161,"../flow/function/native/structure/ArrayFunction.js":162,"../flow/function/native/structure/VectorFunction.js":163,"../flow/function/native/time/GetTimeFunction.js":164,"../flow/function/native/time/IsUpdateTimeFunction.js":165,"../flow/function/native/unit/GetComponentFunction.js":166,"../flow/function/native/unit/GetUnitFunction.js":167,"../flow/function/native/unit/GetWorldPositionFunction.js":168,"../flow/function/native/unit/SetWorldPositionFunction.js":169,"../flow/keycode/AKeyCode.js":170,"../flow/loop/ALoop.js":171,"../flow/unit/AUnit.js":194,"../flow/variable/AVariable.js":202,"./Registry.js":306,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],305:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Registry2 = _interopRequireDefault(require("./Registry.js"));

var _DefaultMaterial = _interopRequireDefault(require("../material/DefaultMaterial.js"));

var _LightMaterial = _interopRequireDefault(require("../material/LightMaterial.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MaterialRegistry = /*#__PURE__*/function (_Registry) {
  (0, _inherits2["default"])(MaterialRegistry, _Registry);

  var _super = _createSuper(MaterialRegistry);

  function MaterialRegistry() {
    (0, _classCallCheck2["default"])(this, MaterialRegistry);
    return _super.call(this, 'material');
  }
  /**
   * @override
   */


  (0, _createClass2["default"])(MaterialRegistry, [{
    key: "init",
    value: function init() {
      this.concatRegistry([new _DefaultMaterial["default"](), new _LightMaterial["default"]()]);
    }
    /**
     * @return {Material}
     */

  }, {
    key: "getDefault",
    value: function getDefault() {
      return this.getInstances()[0];
    }
    /**
     * @param {Material} instance
     */

  }, {
    key: "register",
    value: function register(instance) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(MaterialRegistry.prototype), "register", this).call(this, instance);
    }
    /**
     * @param {string} name
     * @return {Material}
     */

  }, {
    key: "getInstance",
    value: function getInstance(name) {
      if (!name) {
        return this.getDefault();
      }

      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MaterialRegistry.prototype), "getInstance", this).call(this, name);
    }
    /**
     * @param {number} id
     * @return {Material}
     */

  }, {
    key: "getInstanceById",
    value: function getInstanceById(id) {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MaterialRegistry.prototype), "getInstanceById", this).call(this, id);
    }
    /**
     * @return {Material[]}
     */

  }, {
    key: "getInstances",
    value: function getInstances() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MaterialRegistry.prototype), "getInstances", this).call(this);
    }
  }]);
  return MaterialRegistry;
}(_Registry2["default"]);

exports["default"] = MaterialRegistry;

},{"../material/DefaultMaterial.js":237,"../material/LightMaterial.js":238,"./Registry.js":306,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],306:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _RegistryData2 = _interopRequireDefault(require("../project/data/RegistryData.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @abstract
 */
var Registry = /*#__PURE__*/function (_RegistryData) {
  (0, _inherits2["default"])(Registry, _RegistryData);

  var _super = _createSuper(Registry);

  function Registry() {
    (0, _classCallCheck2["default"])(this, Registry);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(Registry, [{
    key: "init",

    /**
     * @abstract
     */
    value: function init() {
      throw new _SystemError["default"]("".concat(this.constructor.name, ".init must be implemented"));
    }
    /**
     * @param {*} instance
     */

  }, {
    key: "register",
    value: function register(instance) {
      var existInstance = this.getInstance(instance.getName());

      if (existInstance) {
        var indexInstance = this.findIndexInstance(existInstance);
        this.registry[indexInstance] = instance;
      } else {
        this.registry.push(instance);
      }
    }
    /**
     * @param {*} instance
     */

  }, {
    key: "tryRegister",
    value: function tryRegister(instance) {
      if (this.getInstance(instance.getName())) {
        throw new _ClientError["default"]("".concat(this.name, " with name ").concat(instance.getName(), " is already registered"));
      }

      this.register(instance);
    }
    /**
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "getInstance",
    value: function getInstance(name) {
      return this.registry.find(function (item) {
        return item.getName() === name;
      });
    }
    /**
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "tryGetInstance",
    value: function tryGetInstance(name) {
      var instance = this.getInstance(name);

      if (!instance) {
        throw new _ClientError["default"]("Instance with name \"".concat(name, "\" not registered"));
      }

      return instance;
    }
    /**
     * @param {number} id
     * @return {*}
     */

  }, {
    key: "getInstanceById",
    value: function getInstanceById(id) {
      return this.registry.find(function (item) {
        return item.getId() === id;
      });
    }
    /**
     * @param {Class} className
     * @return {*[]}
     */

  }, {
    key: "getClassInstance",
    value: function getClassInstance(className) {
      return this.registry.filter(function (item) {
        return item instanceof className;
      });
    }
    /**
     * @private
     * @param {*} instance
     */

  }, {
    key: "findIndexInstance",
    value: function findIndexInstance(instance) {
      return this.registry.findIndex(function (item) {
        return item === instance;
      });
    }
    /**
     * @return {*[]}
     */

  }, {
    key: "getInstances",
    value: function getInstances() {
      return this.registry;
    }
  }]);
  return Registry;
}(_RegistryData2["default"]);

exports["default"] = Registry;

},{"../exception/type/ClientError.js":80,"../exception/type/SystemError.js":82,"../project/data/RegistryData.js":296,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],307:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Renderer2 = _interopRequireDefault(require("./Renderer.js"));

var _Constant = require("../core/Constant.js");

var _Context = require("../core/Context.js");

var _Window = _interopRequireDefault(require("../core/Window.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * ObjectRenderer class
 * Manager the renderer for entities
 * @extends {Renderer}
 */
var MeshRenderer = /*#__PURE__*/function (_Renderer) {
  (0, _inherits2["default"])(MeshRenderer, _Renderer);

  var _super = _createSuper(MeshRenderer);

  function MeshRenderer() {
    var _this;

    (0, _classCallCheck2["default"])(this, MeshRenderer);
    _this = _super.call(this);
    /**
     * @type {{mesh: Mesh, position: Vector}[]}
     */

    _this.meshes = [];

    _this.initCanvas();

    return _this;
  }

  (0, _createClass2["default"])(MeshRenderer, [{
    key: "initCanvas",
    value: function initCanvas() {
      var _Window$get = _Window["default"].get(),
          size = _Window$get.size;

      this.canvas = new OffscreenCanvas(size.width, size.height);
      this.context = this.canvas.getContext(_Constant.CANVAS_CONTEXT_TYPE);
    }
    /**
     * @override
     */

  }, {
    key: "draw",
    value: function draw(mesh, position, camera) {
      this.add(mesh, position, camera);
    }
    /**
     * @override
     */

  }, {
    key: "clear",
    value: function clear() {
      var _Window$get2 = _Window["default"].get(),
          size = _Window$get2.size;

      _Context.objectContext.canvas.width = size.width;
      this.context.canvas.width = size.width;
    }
    /**
     * Render the meshes to the screen
     * @todo Optimize this to not delete all meshes (rerender just entities updated)
     */

  }, {
    key: "render",
    value: function render() {
      this.clear();

      for (var iMesh in this.meshes) {
        if (this.meshes.hasOwnProperty(iMesh)) {
          var _this$meshes$iMesh = this.meshes[iMesh],
              mesh = _this$meshes$iMesh.mesh,
              position = _this$meshes$iMesh.position,
              camera = _this$meshes$iMesh.camera;

          var _camera$toCameraScale = camera.toCameraScale(camera.toCanvasCoord(position)),
              x = _camera$toCameraScale.x,
              y = _camera$toCameraScale.y;

          _Context.objectContext.drawImage(mesh.context.canvas, x, y);
        }
      }

      this.meshes = [];
    }
    /**
     * @param {Mesh} mesh
     * @param {Vector} position
     * @param {Camera} camera
     */

  }, {
    key: "add",
    value: function add(mesh, position, camera) {
      this.meshes.push({
        mesh: mesh,
        position: position,
        camera: camera
      });
    }
    /**
     * @return {MeshRenderer}
     */

  }], [{
    key: "get",
    value: function get() {
      return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MeshRenderer), "get", this).call(this);
    }
  }]);
  return MeshRenderer;
}(_Renderer2["default"]);

var _default = MeshRenderer;
exports["default"] = _default;

},{"../core/Constant.js":70,"../core/Context.js":71,"../core/Window.js":78,"./Renderer.js":308,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],308:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

/**
 * @abstract
 * Renderer class
 * Render elements (entities, menus, ...) to the screen
 */
var Renderer = /*#__PURE__*/function () {
  function Renderer() {
    (0, _classCallCheck2["default"])(this, Renderer);
  }

  (0, _createClass2["default"])(Renderer, [{
    key: "draw",

    /**
     * @type {Renderer}
     */

    /**
     * @abstract
     * @param {Mesh} mesh
     * @param {Vector} position
     * @param {Camera} camera
     */
    value: function draw(mesh, position, camera) {
      throw new TypeError('Renderer.draw must be implemented');
    }
    /**
     * @abstract
     */

  }, {
    key: "clear",
    value: function clear() {
      throw new TypeError('Renderer.clear must be implemented');
    }
    /**
     * @abstract
     * Render the meshes to the screen (layout, entities, ...)
     * @param {Camera|Menu} object
     */

  }, {
    key: "render",
    value: function render(object) {
      throw new TypeError('Renderer.render must be implemented');
    }
    /**
     * @return {*}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return Renderer;
}();

(0, _defineProperty2["default"])(Renderer, "instance", void 0);
var _default = Renderer;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],309:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var _Window = _interopRequireDefault(require("../core/Window.js"));

/**
 * Runner is a component responsible for deciding what to do when a application state is defined
 * @class {Runner}
 * @abstract
 */
var Runner = /*#__PURE__*/function () {
  function Runner() {
    (0, _classCallCheck2["default"])(this, Runner);

    if (this.constructor === Runner) {
      throw new _SystemError["default"]('Abstract class Runner cannot be instantiated directly');
    }
  }
  /**
   * Define when the runner can be handle by the eventHandler
   * @abstract
   * @param {Window} window
   * @return {boolean}
   */


  (0, _createClass2["default"])(Runner, [{
    key: "isHandle",
    value: function isHandle(window) {
      throw new _SystemError["default"]('"Runner.isHandle" method must be implemented');
    }
    /**
     * @param {...any} params
     */

  }, {
    key: "run",
    value: function run() {
      if (this.isHandle(_Window["default"].get())) {
        this.execute.apply(this, arguments);
      }
    }
    /**
     * @abstract
     * Execute actions.
     */

  }, {
    key: "execute",
    value: function execute() {
      throw new _SystemError["default"]('"Runner.execute" method must be implemented');
    }
  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return Runner;
}();

var _default = Runner;
exports["default"] = _default;

},{"../core/Window.js":78,"../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],310:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Runner2 = _interopRequireDefault(require("../Runner.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _CameraComponent = _interopRequireDefault(require("../../component/internal/CameraComponent.js"));

var _CameraHelper = _interopRequireDefault(require("../../utils/CameraHelper.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var CameraRunner = /*#__PURE__*/function (_Runner) {
  (0, _inherits2["default"])(CameraRunner, _Runner);

  var _super = _createSuper(CameraRunner);

  function CameraRunner() {
    (0, _classCallCheck2["default"])(this, CameraRunner);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(CameraRunner, [{
    key: "isHandle",

    /**
     * @override
     */
    value: function isHandle(window) {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var world = _World["default"].get();

      var camera = world.getCamera();
      var cameraUnit = camera.getUnit(world.getUnitManager());

      if (cameraUnit) {
        var cameraComponent = cameraUnit.getComponent(_CameraComponent["default"]);
        var unitFollow = world.getUnitManager().findUnitById(cameraComponent.getUnitFollow());

        if (unitFollow) {
          var transformComponent = cameraUnit.getComponent(_TransformComponent["default"]);

          _CameraHelper["default"].follow(camera, transformComponent.getPosition());
        }
      }
    }
  }]);
  return CameraRunner;
}(_Runner2["default"]);

exports["default"] = CameraRunner;

},{"../../component/internal/CameraComponent.js":42,"../../component/internal/TransformComponent.js":53,"../../utils/CameraHelper.js":353,"../../world/World.js":372,"../Runner.js":309,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],311:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Runner2 = _interopRequireDefault(require("../Runner.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _GUIColliderComponent = _interopRequireDefault(require("../../component/internal/gui/collider/GUIColliderComponent.js"));

var _ColliderComponent = _interopRequireDefault(require("../../component/internal/ColliderComponent.js"));

var _UnitHelper = _interopRequireDefault(require("../../utils/UnitHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ColliderDebugRunner = /*#__PURE__*/function (_Runner) {
  (0, _inherits2["default"])(ColliderDebugRunner, _Runner);

  var _super = _createSuper(ColliderDebugRunner);

  function ColliderDebugRunner() {
    (0, _classCallCheck2["default"])(this, ColliderDebugRunner);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ColliderDebugRunner, [{
    key: "isHandle",

    /**
     * @type {ColliderDebugRunner}
     */

    /**
     * @override
     */
    value: function isHandle(window) {
      return true;
    }
    /**
     * @override
     * @param {number} deltaTime
     */

  }, {
    key: "execute",
    value: function execute(deltaTime) {
      var world = _World["default"].get();

      var unitManager = world.getUnitManager();
      var colliderComponentClasses = [_GUIColliderComponent["default"]];
      unitManager.getUnitsHasAnyComponents(colliderComponentClasses).forEach(function (unit) {
        return unitManager.deleteUnit(unit);
      });
      var units = unitManager.findUnitsByComponentClasses([_ColliderComponent["default"]]);
      units.forEach(function (unit) {
        _UnitHelper["default"].createGUICollider(unit, world);
      });
    }
  }]);
  return ColliderDebugRunner;
}(_Runner2["default"]);

exports["default"] = ColliderDebugRunner;
(0, _defineProperty2["default"])(ColliderDebugRunner, "instance", null);

},{"../../component/internal/ColliderComponent.js":44,"../../component/internal/gui/collider/GUIColliderComponent.js":55,"../../utils/UnitHelper.js":369,"../../world/World.js":372,"../Runner.js":309,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],312:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GameExecutorRunner = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Runner2 = _interopRequireDefault(require("../Runner.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _ExecutorRegistry = _interopRequireDefault(require("../../executor/ExecutorRegistry.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GameExecutorRunner = /*#__PURE__*/function (_Runner) {
  (0, _inherits2["default"])(GameExecutorRunner, _Runner);

  var _super = _createSuper(GameExecutorRunner);

  function GameExecutorRunner() {
    (0, _classCallCheck2["default"])(this, GameExecutorRunner);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GameExecutorRunner, [{
    key: "isHandle",

    /**
     * @type {GameRenderRunner}
     */

    /**
     * @override
     */
    value: function isHandle(window) {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute(deltaTime) {
      var world = _World["default"].get();

      var units = world.getUnitManager().getUnits();
      var camera = world.getCamera();
      var lights = world.getLightsNotGenerated();
      units.forEach(function (unit) {
        _ExecutorRegistry["default"].get().execute(unit, {
          camera: camera,
          deltaTime: deltaTime,
          lights: lights
        });
      });
    }
  }]);
  return GameExecutorRunner;
}(_Runner2["default"]);

exports.GameExecutorRunner = GameExecutorRunner;
(0, _defineProperty2["default"])(GameExecutorRunner, "instance", null);

},{"../../executor/ExecutorRegistry.js":83,"../../world/World.js":372,"../Runner.js":309,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],313:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Runner2 = _interopRequireDefault(require("../Runner.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _LightComponent = _interopRequireDefault(require("../../component/internal/LightComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LightRunner = /*#__PURE__*/function (_Runner) {
  (0, _inherits2["default"])(LightRunner, _Runner);

  var _super = _createSuper(LightRunner);

  function LightRunner() {
    (0, _classCallCheck2["default"])(this, LightRunner);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(LightRunner, [{
    key: "isHandle",

    /**
     * @override
     */
    value: function isHandle(window) {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var world = _World["default"].get();

      world.getLightsNotGenerated().forEach(function (unit) {
        var lightComponent = unit.findComponentsByClass(_LightComponent["default"])[0];
        lightComponent.setGenerated(true);
      });
    }
  }]);
  return LightRunner;
}(_Runner2["default"]);

exports["default"] = LightRunner;

},{"../../component/internal/LightComponent.js":45,"../../world/World.js":372,"../Runner.js":309,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],314:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PhysicsRunner = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Runner2 = _interopRequireDefault(require("../Runner.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _RigidBodyComponent = _interopRequireDefault(require("../../component/internal/RigidBodyComponent.js"));

var _ColliderComponent = _interopRequireDefault(require("../../component/internal/ColliderComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var PhysicsRunner = /*#__PURE__*/function (_Runner) {
  (0, _inherits2["default"])(PhysicsRunner, _Runner);

  var _super = _createSuper(PhysicsRunner);

  function PhysicsRunner() {
    (0, _classCallCheck2["default"])(this, PhysicsRunner);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(PhysicsRunner, [{
    key: "isHandle",

    /**
     * @type {PhysicsRunner}
     */

    /**
     * @override
     */
    value: function isHandle(window) {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var world = _World["default"].get();

      var physicsManager = world.getPhysicsManager();
      world.getUnitManager().findUnitsByAnyComponentClasses([_RigidBodyComponent["default"], _ColliderComponent["default"]]).forEach(function (unit) {
        return physicsManager.update(unit);
      });
      physicsManager.updateEngine();
    }
  }]);
  return PhysicsRunner;
}(_Runner2["default"]);

exports.PhysicsRunner = PhysicsRunner;
(0, _defineProperty2["default"])(PhysicsRunner, "instance", null);

},{"../../component/internal/ColliderComponent.js":44,"../../component/internal/RigidBodyComponent.js":50,"../../world/World.js":372,"../Runner.js":309,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],315:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GameRenderRunner = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Runner2 = _interopRequireDefault(require("../Runner.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

var _MeshRenderer = _interopRequireDefault(require("../../renderer/MeshRenderer.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GameRenderRunner = /*#__PURE__*/function (_Runner) {
  (0, _inherits2["default"])(GameRenderRunner, _Runner);

  var _super = _createSuper(GameRenderRunner);

  function GameRenderRunner() {
    (0, _classCallCheck2["default"])(this, GameRenderRunner);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GameRenderRunner, [{
    key: "isHandle",

    /**
     * @type {GameRenderRunner}
     */

    /**
     * @override
     */
    value: function isHandle(window) {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      _World["default"].get().draw(_MeshRenderer["default"].get());
    }
  }]);
  return GameRenderRunner;
}(_Runner2["default"]);

exports.GameRenderRunner = GameRenderRunner;
(0, _defineProperty2["default"])(GameRenderRunner, "instance", null);

},{"../../renderer/MeshRenderer.js":307,"../../world/World.js":372,"../Runner.js":309,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],316:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Runner2 = _interopRequireDefault(require("../Runner.js"));

var _World = _interopRequireDefault(require("../../world/World.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var WorldInitializeRunner = /*#__PURE__*/function (_Runner) {
  (0, _inherits2["default"])(WorldInitializeRunner, _Runner);

  var _super = _createSuper(WorldInitializeRunner);

  function WorldInitializeRunner() {
    (0, _classCallCheck2["default"])(this, WorldInitializeRunner);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(WorldInitializeRunner, [{
    key: "isHandle",

    /**
     * @override
     */
    value: function isHandle(window) {
      return true;
    }
    /**
     * @override
     */

  }, {
    key: "execute",
    value: function execute() {
      var world = _World["default"].get();

      if (!world.isInitialized()) {
        world.doInit();
      }
    }
  }]);
  return WorldInitializeRunner;
}(_Runner2["default"]);

exports["default"] = WorldInitializeRunner;

},{"../../world/World.js":372,"../Runner.js":309,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],317:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _SchemaMeta = _interopRequireDefault(require("./SchemaMeta.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

/**
 * @class {Schema}
 */
var Schema = /*#__PURE__*/function () {
  function Schema() {
    (0, _classCallCheck2["default"])(this, Schema);
  }

  (0, _createClass2["default"])(Schema, null, [{
    key: "getMeta",

    /**
     * @param {string} prefix
     * @param {SchemaMeta} rootMeta
     * @returns {SchemaMeta}
     */
    value: function getMeta() {
      var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var rootMeta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      !rootMeta && (rootMeta = _SchemaMeta["default"]);
      var resultMeta = {};

      for (var eMetaData in rootMeta) {
        if (rootMeta.hasOwnProperty(eMetaData)) {
          var _rootMeta$eMetaData = rootMeta[eMetaData],
              type = _rootMeta$eMetaData.type,
              meta = _rootMeta$eMetaData.meta,
              prototype = _rootMeta$eMetaData.prototype;
          var metaPrefix = "".concat(prefix).concat(eMetaData);
          resultMeta[metaPrefix] = {
            prototype: prototype || this.getPrototypeOf(type),
            type: type || prototype
          };
          var subMeta = meta;

          if (subMeta) {
            resultMeta = Object.assign(resultMeta, this.getMeta("".concat(metaPrefix, "."), subMeta));
          }
        }
      }

      return resultMeta;
    }
    /**
     * Get the prototype from the given type
     * @param {Class|number} type
     * @return {Class|string|null}
     */

  }, {
    key: "getPrototypeOf",
    value: function getPrototypeOf(type) {
      var prototype = type;

      if (!_.isNumber(type) && !_.isString(type) && type !== Array) {
        prototype = this.findDataPrototypeOf(type);

        if (!prototype) {
          throw new _SystemError["default"]("".concat(type.name, " must extends Data type class!"));
        }
      }

      return prototype;
    }
    /**
     * Find parent Data class
     * @param {Class} type
     * @return {Class|null}
     */

  }, {
    key: "findDataPrototypeOf",
    value: function findDataPrototypeOf(type) {
      var prototype = Object.getPrototypeOf(type);

      if (prototype && prototype.name) {
        if (prototype.name.match(/^[a-zA-Z]+Data$/)) {
          return prototype;
        } else {
          return this.findDataPrototypeOf(prototype);
        }
      }

      return null;
    }
    /**
     * @param {string} path
     * @return {string}
     */

  }, {
    key: "getParentPath",
    value: function getParentPath(path) {
      var arrPath = path.split('.');

      if (arrPath.length) {
        arrPath.splice(arrPath.length - 1, 1);
        return arrPath.join('.');
      }
    }
    /**
     * @param {string} path
     * @return {string}
     */

  }, {
    key: "getPathKey",
    value: function getPathKey(path) {
      var arrPath = path.split('.');

      if (arrPath.length) {
        return arrPath[arrPath.length - 1];
      }
    }
  }]);
  return Schema;
}();

var _default = Schema;
exports["default"] = _default;

},{"../exception/type/SystemError.js":82,"./SchemaMeta.js":318,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],318:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.PrefSchema = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _World = _interopRequireDefault(require("../world/World.js"));

var _AssetsManager = _interopRequireDefault(require("../manager/AssetsManager.js"));

var _Camera = _interopRequireDefault(require("../core/Camera.js"));

var _Asset = _interopRequireDefault(require("../asset/Asset.js"));

var _Folder = _interopRequireDefault(require("../asset/Folder.js"));

var _AssetType = _interopRequireDefault(require("../asset/types/AssetType.js"));

var _Unit = _interopRequireDefault(require("../unit/Unit.js"));

var _UnitManager = _interopRequireDefault(require("../manager/UnitManager.js"));

var _Component = _interopRequireDefault(require("../component/Component.js"));

var _AttributeType = require("../pobject/AttributeType.js");

var _FunctionRegistry = _interopRequireDefault(require("../registry/FunctionRegistry.js"));

var _AFunction = _interopRequireDefault(require("../flow/function/AFunction.js"));

var _StackOperation = _interopRequireDefault(require("../operation/StackOperation.js"));

var _TabManager = _interopRequireDefault(require("../manager/TabManager.js"));

var _Tab = _interopRequireDefault(require("../content/Tab.js"));

var _Content = _interopRequireDefault(require("../content/Content.js"));

var _Preference = _interopRequireDefault(require("../preference/Preference.js"));

var _GameInputPreference = _interopRequireDefault(require("../preference/gameInput/GameInputPreference.js"));

var _GameInput = _interopRequireDefault(require("../preference/gameInput/GameInput.js"));

var _ComponentRegistry = _interopRequireDefault(require("../registry/ComponentRegistry.js"));

var _MaskGroupPreference = _interopRequireDefault(require("../preference/maskgroup/MaskGroupPreference.js"));

var _MaskGroup = _interopRequireDefault(require("../preference/maskgroup/MaskGroup.js"));

var _MaterialRegistry = _interopRequireDefault(require("../registry/MaterialRegistry.js"));

var _Material = _interopRequireDefault(require("../material/Material.js"));

var _PrefSchema;

/**
 * Define the schema of project data.
 * Used to serialize/deserialize all data when saving/loading the project.
 * the schema of each data can be defined using type or prototype properties :
 *      - Type: the type can be a string (like TYPES.NUMBER), Array, or a Class of Data type.
 *              if type defined as Data, the Data parent class will be used for serializing,
 *              and the type for deserializing
 *      - Prototype: the prototype can be a string, Array or any Class
 *                   if prototype is specified, it will be used for serializing and deserializing
 */
var PrefSchema = (_PrefSchema = {}, (0, _defineProperty2["default"])(_PrefSchema, _AttributeType.TYPES.VECTOR, {
  x: {
    type: _AttributeType.TYPES.NUMBER
  },
  y: {
    type: _AttributeType.TYPES.NUMBER
  },
  z: {
    type: _AttributeType.TYPES.NUMBER
  }
}), (0, _defineProperty2["default"])(_PrefSchema, _AttributeType.TYPES.SIZE, {
  width: {
    type: _AttributeType.TYPES.NUMBER
  },
  height: {
    type: _AttributeType.TYPES.NUMBER
  }
}), (0, _defineProperty2["default"])(_PrefSchema, _AttributeType.TYPES.MESH, {
  dataId: {
    type: _AttributeType.TYPES.NUMBER
  },
  size: {
    type: _AttributeType.TYPES.SIZE
  },
  position: {
    type: _AttributeType.TYPES.VECTOR
  },
  dataUrl: {
    type: _AttributeType.TYPES.STRING
  }
}), (0, _defineProperty2["default"])(_PrefSchema, _AttributeType.TYPES.STYLE, {
  color: {
    type: _AttributeType.TYPES.STRING
  },
  colorOpacity: {
    type: _AttributeType.TYPES.NUMBER
  },
  fillColor: {
    type: _AttributeType.TYPES.STRING
  },
  fillColorOpacity: {
    type: _AttributeType.TYPES.NUMBER
  },
  borderSize: {
    type: _AttributeType.TYPES.NUMBER
  },
  opacity: {
    type: _AttributeType.TYPES.NUMBER
  }
}), (0, _defineProperty2["default"])(_PrefSchema, _AttributeType.TYPES.DYNAMIC_ATTRIBUTE, {
  id: {
    type: _AttributeType.TYPES.NUMBER
  },
  attrName: {
    type: _AttributeType.TYPES.STRING
  },
  attrType: {
    type: _AttributeType.TYPES.NUMBER
  },
  attrRule: {
    type: _AttributeType.TYPES.ANY
  },
  attrValue: {
    type: '[attrType]'
  }
}), _PrefSchema);
exports.PrefSchema = PrefSchema;
var _default = {
  world: {
    type: _World["default"],
    meta: {
      dataId: {
        type: _AttributeType.TYPES.NUMBER
      },
      mouseConstraintId: {
        type: _AttributeType.TYPES.NUMBER
      },
      cameraUnitId: {
        type: _AttributeType.TYPES.NUMBER
      },
      showGrid: {
        type: _AttributeType.TYPES.BOOLEAN
      },
      unitManager: {
        type: _UnitManager["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          units: {
            type: Array,
            meta: {
              element: {
                type: _Unit["default"],
                meta: {
                  dataId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  id: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  maskGroupId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  name: {
                    type: _AttributeType.TYPES.STRING
                  },
                  components: {
                    type: Array,
                    meta: {
                      element: {
                        type: _Component["default"],
                        meta: {
                          dataId: {
                            type: _AttributeType.TYPES.NUMBER
                          },
                          id: {
                            type: _AttributeType.TYPES.NUMBER
                          },
                          name: {
                            type: _AttributeType.TYPES.STRING
                          },
                          attributes: {
                            type: _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.DYNAMIC_ATTRIBUTE
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      componentRegistry: {
        type: _ComponentRegistry["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          name: {
            type: _AttributeType.TYPES.STRING
          },
          registry: {
            type: Array,
            meta: {
              element: {
                type: _Component["default"],
                meta: {
                  dataId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  id: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  name: {
                    type: _AttributeType.TYPES.STRING
                  },
                  attributes: {
                    type: _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.DYNAMIC_ATTRIBUTE
                  }
                }
              }
            }
          }
        }
      },
      materialRegistry: {
        type: _MaterialRegistry["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          name: {
            type: _AttributeType.TYPES.STRING
          },
          registry: {
            type: Array,
            meta: {
              element: {
                type: _Material["default"],
                meta: {
                  dataId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  id: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  name: {
                    type: _AttributeType.TYPES.STRING
                  }
                }
              }
            }
          }
        }
      },
      functionRegistry: {
        type: _FunctionRegistry["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          name: {
            type: _AttributeType.TYPES.STRING
          },
          registry: {
            type: Array,
            meta: {
              element: {
                type: _AFunction["default"],
                meta: {
                  dataId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  id: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  name: {
                    type: _AttributeType.TYPES.STRING
                  },
                  stack: {
                    type: Array,
                    meta: {
                      element: {
                        prototype: _StackOperation["default"],
                        meta: {
                          operation: {
                            type: _AttributeType.TYPES.STRING
                          },
                          args: {
                            type: _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.STRING
                          }
                        }
                      }
                    }
                  },
                  inputs: {
                    type: _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.DYNAMIC_ATTRIBUTE
                  },
                  output: {
                    prototype: _AttributeType.TYPES.DYNAMIC_ATTRIBUTE
                  }
                }
              }
            }
          }
        }
      },
      tabManager: {
        type: _TabManager["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          tabs: {
            type: Array,
            meta: {
              element: {
                type: _Tab["default"],
                meta: {
                  dataId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  id: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  name: {
                    type: _AttributeType.TYPES.STRING
                  },
                  selected: {
                    type: _AttributeType.TYPES.BOOLEAN
                  },
                  content: {
                    type: _Content["default"],
                    meta: {
                      dataId: {
                        type: _AttributeType.TYPES.NUMBER
                      },
                      id: {
                        type: _AttributeType.TYPES.NUMBER
                      },
                      dataContentId: {
                        type: _AttributeType.TYPES.NUMBER
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      preference: {
        type: _Preference["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          gameInput: {
            type: _GameInputPreference["default"],
            meta: {
              dataId: {
                type: _AttributeType.TYPES.NUMBER
              },
              inputs: {
                type: Array,
                meta: {
                  element: {
                    type: _GameInput["default"],
                    meta: {
                      dataId: {
                        type: _AttributeType.TYPES.NUMBER
                      },
                      name: {
                        type: _AttributeType.TYPES.STRING
                      },
                      key: {
                        type: _AttributeType.TYPES.STRING
                      },
                      value: {
                        type: _AttributeType.TYPES.DYNAMIC_ATTRIBUTE
                      }
                    }
                  }
                }
              }
            }
          },
          maskGroup: {
            type: _MaskGroupPreference["default"],
            meta: {
              dataId: {
                type: _AttributeType.TYPES.NUMBER
              },
              masks: {
                type: Array,
                meta: {
                  element: {
                    type: _MaskGroup["default"],
                    meta: {
                      dataId: {
                        type: _AttributeType.TYPES.NUMBER
                      },
                      id: {
                        type: _AttributeType.TYPES.NUMBER
                      },
                      name: {
                        type: _AttributeType.TYPES.STRING
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      camera: {
        type: _Camera["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          position: {
            prototype: _AttributeType.TYPES.VECTOR
          }
        }
      },
      resolution: {
        prototype: _AttributeType.TYPES.SIZE
      },
      assetsManager: {
        type: _AssetsManager["default"],
        meta: {
          dataId: {
            type: _AttributeType.TYPES.NUMBER
          },
          assets: {
            type: Array,
            meta: {
              element: {
                type: _Asset["default"],
                meta: {
                  dataId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  id: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  folderId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  name: {
                    type: _AttributeType.TYPES.STRING
                  },
                  type: {
                    type: _AssetType["default"],
                    meta: {
                      dataId: {
                        type: _AttributeType.TYPES.NUMBER
                      },
                      dataUrl: {
                        type: _AttributeType.TYPES.STRING
                      }
                    }
                  }
                }
              }
            }
          },
          folders: {
            type: Array,
            meta: {
              element: {
                type: _Folder["default"],
                meta: {
                  dataId: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  id: {
                    type: _AttributeType.TYPES.NUMBER
                  },
                  name: {
                    type: _AttributeType.TYPES.STRING
                  },
                  folderId: {
                    type: _AttributeType.TYPES.NUMBER
                  }
                }
              }
            }
          }
        }
      }
    }
  }
};
exports["default"] = _default;

},{"../asset/Asset.js":30,"../asset/Folder.js":31,"../asset/types/AssetType.js":32,"../component/Component.js":40,"../content/Content.js":62,"../content/Tab.js":63,"../core/Camera.js":69,"../flow/function/AFunction.js":116,"../manager/AssetsManager.js":230,"../manager/TabManager.js":235,"../manager/UnitManager.js":236,"../material/Material.js":239,"../operation/StackOperation.js":241,"../pobject/AttributeType.js":263,"../preference/Preference.js":270,"../preference/gameInput/GameInput.js":271,"../preference/gameInput/GameInputPreference.js":272,"../preference/maskgroup/MaskGroup.js":273,"../preference/maskgroup/MaskGroupPreference.js":274,"../registry/ComponentRegistry.js":303,"../registry/FunctionRegistry.js":304,"../registry/MaterialRegistry.js":305,"../unit/Unit.js":327,"../world/World.js":372,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],319:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _Schema = _interopRequireDefault(require("./Schema.js"));

var _PrimitiveHelper = _interopRequireDefault(require("../utils/PrimitiveHelper.js"));

var _ObjectHelper = _interopRequireDefault(require("../utils/ObjectHelper.js"));

var _DataHelper = _interopRequireDefault(require("../utils/DataHelper.js"));

var _AttributeType = _interopRequireDefault(require("../pobject/AttributeType.js"));

var _SchemaMeta = require("./SchemaMeta.js");

var _Data = _interopRequireDefault(require("../project/data/Data.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var SchemaValidator = /*#__PURE__*/function () {
  function SchemaValidator() {
    (0, _classCallCheck2["default"])(this, SchemaValidator);
    this.schema = _Schema["default"].getMeta();
  }
  /**
   * @param {string} path
   * @param {Object|Array} data
   * @param {boolean} forGame
   * @param {Object|Array} parentPathData
   * @return {*}
   */


  (0, _createClass2["default"])(SchemaValidator, [{
    key: "validate",
    value: function () {
      var _validate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(path, data, forGame) {
        var parentPathData,
            pathPrototype,
            pathDynamicPrototypeName,
            dataValidated,
            props,
            iProp,
            prop,
            childPath,
            childDataValidated,
            _args = arguments;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                parentPathData = _args.length > 3 && _args[3] !== undefined ? _args[3] : null;
                pathPrototype = this.getPathPrototype(path, parentPathData);
                pathDynamicPrototypeName = this.getPathDynamicPrototypeName(path, parentPathData);
                _context.next = 5;
                return this.validateByPrototype(data, pathPrototype, forGame);

              case 5:
                dataValidated = _context.sent;

                if (!(!_.isString(pathPrototype) && dataValidated !== null && dataValidated !== undefined)) {
                  _context.next = 28;
                  break;
                }

                props = _ObjectHelper["default"].getProperties(data, pathPrototype);
                _context.t0 = _regenerator["default"].keys(props);

              case 9:
                if ((_context.t1 = _context.t0()).done) {
                  _context.next = 28;
                  break;
                }

                iProp = _context.t1.value;
                prop = props[iProp];
                childPath = "".concat(path, ".").concat(prop.key) + (pathDynamicPrototypeName ? "[".concat(pathDynamicPrototypeName, "]") : '');
                _context.t2 = this;
                _context.t3 = childPath;
                _context.next = 17;
                return prop.value;

              case 17:
                _context.t4 = _context.sent;
                _context.t5 = forGame;
                _context.t6 = data;
                _context.next = 22;
                return _context.t2.validate.call(_context.t2, _context.t3, _context.t4, _context.t5, _context.t6);

              case 22:
                childDataValidated = _context.sent;

                if (!(childDataValidated !== null && childDataValidated !== undefined && prop.key !== 'dataId')) {
                  _context.next = 26;
                  break;
                }

                _context.next = 26;
                return _ObjectHelper["default"].setProperty(dataValidated, prop.key, childDataValidated);

              case 26:
                _context.next = 9;
                break;

              case 28:
                return _context.abrupt("return", dataValidated);

              case 29:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function validate(_x, _x2, _x3) {
        return _validate.apply(this, arguments);
      }

      return validate;
    }()
    /**
     * @param {string} path
     * @param {Object} data1
     * @param {Object} data2
     * @param {*} parentPathData
     * @param {string} indexedPath
     * @TODO: make it more readable
     *
     * @return {*}
     */

  }, {
    key: "compare",
    value: function () {
      var _compare = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(path, data1, data2) {
        var parentPathData,
            indexedPath,
            result,
            pathPrototype,
            pathDynamicPrototypeName,
            propsData1,
            propsData2,
            iProp,
            propData2,
            propData1,
            childPath,
            childIndexedPath,
            childDataCompared,
            _args2 = arguments;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                parentPathData = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : null;
                indexedPath = _args2.length > 4 && _args2[4] !== undefined ? _args2[4] : path;
                result = {};
                pathPrototype = this.getPathPrototype(path, parentPathData);
                pathDynamicPrototypeName = this.getPathDynamicPrototypeName(path, parentPathData);
                _context2.t0 = _ObjectHelper["default"];
                _context2.next = 8;
                return data1;

              case 8:
                _context2.t1 = _context2.sent;
                _context2.t2 = pathPrototype;
                propsData1 = _context2.t0.getProperties.call(_context2.t0, _context2.t1, _context2.t2);
                _context2.t3 = _ObjectHelper["default"];
                _context2.next = 14;
                return data2;

              case 14:
                _context2.t4 = _context2.sent;
                _context2.t5 = pathPrototype;
                propsData2 = _context2.t3.getProperties.call(_context2.t3, _context2.t4, _context2.t5);
                _context2.t6 = _regenerator["default"].keys(propsData2);

              case 18:
                if ((_context2.t7 = _context2.t6()).done) {
                  _context2.next = 45;
                  break;
                }

                iProp = _context2.t7.value;
                propData2 = propsData2[iProp];
                propData1 = propsData1 ? propsData1[iProp] : null;
                childPath = "".concat(path, ".").concat(propData2.key) + (pathDynamicPrototypeName ? "[".concat(pathDynamicPrototypeName, "]") : '');
                childIndexedPath = "".concat(indexedPath, ".").concat(propData2.index !== null ? propData2.index : propData2.key);
                _context2.t8 = this;
                _context2.t9 = childPath;

                if (!propData1) {
                  _context2.next = 32;
                  break;
                }

                _context2.next = 29;
                return propData1.value;

              case 29:
                _context2.t10 = _context2.sent;
                _context2.next = 33;
                break;

              case 32:
                _context2.t10 = null;

              case 33:
                _context2.t11 = _context2.t10;
                _context2.next = 36;
                return propData2.value;

              case 36:
                _context2.t12 = _context2.sent;
                _context2.t13 = data2;
                _context2.t14 = childIndexedPath;
                _context2.next = 41;
                return _context2.t8.compare.call(_context2.t8, _context2.t9, _context2.t11, _context2.t12, _context2.t13, _context2.t14);

              case 41:
                childDataCompared = _context2.sent;

                if (childDataCompared !== null && childDataCompared !== undefined) {
                  result = _objectSpread(_objectSpread({}, result), childDataCompared);
                }

                _context2.next = 18;
                break;

              case 45:
                if (!(data1 && !_.isObject(data2) || _.isObject(data2) && !data1)) {
                  _context2.next = 52;
                  break;
                }

                if (!(data1 !== data2)) {
                  _context2.next = 52;
                  break;
                }

                _context2.t15 = path;
                _context2.next = 50;
                return data2;

              case 50:
                _context2.t16 = _context2.sent;
                result[indexedPath] = {
                  path: _context2.t15,
                  data: _context2.t16
                };

              case 52:
                return _context2.abrupt("return", result);

              case 53:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function compare(_x4, _x5, _x6) {
        return _compare.apply(this, arguments);
      }

      return compare;
    }()
    /**
     * @param {Object} target
     * @param {string} indexedPath
     * @param {string} schemaPath
     * @param {*} data
     * @return {*}
     */

  }, {
    key: "updateFromPath",
    value: function () {
      var _updateFromPath = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(target, indexedPath, schemaPath, data) {
        var indexedPathSplit, targetElement, parentTargetElement, iIndexedPath, indexedPathElement;
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                indexedPathSplit = indexedPath.split('.');
                targetElement = target;
                parentTargetElement = null;

                if (indexedPathSplit) {
                  indexedPathSplit.splice(0, 1);
                }

                _context3.t0 = _regenerator["default"].keys(indexedPathSplit);

              case 5:
                if ((_context3.t1 = _context3.t0()).done) {
                  _context3.next = 20;
                  break;
                }

                iIndexedPath = _context3.t1.value;
                indexedPathElement = indexedPathSplit[iIndexedPath];
                parentTargetElement = targetElement;

                if (!(targetElement !== null && targetElement !== undefined)) {
                  _context3.next = 18;
                  break;
                }

                targetElement = parentTargetElement[indexedPathElement];

                if (!(parseInt(iIndexedPath) === indexedPathSplit.length - 1)) {
                  _context3.next = 18;
                  break;
                }

                if (!(data === undefined)) {
                  _context3.next = 16;
                  break;
                }

                if (_.isArray(targetElement)) {
                  targetElement.splice(parseInt(indexedPathElement), 1);
                } else if (targetElement) {
                  parentTargetElement[indexedPathElement] = undefined;
                }

                _context3.next = 18;
                break;

              case 16:
                _context3.next = 18;
                return _ObjectHelper["default"].setProperty(parentTargetElement, indexedPathElement, data);

              case 18:
                _context3.next = 5;
                break;

              case 20:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function updateFromPath(_x7, _x8, _x9, _x10) {
        return _updateFromPath.apply(this, arguments);
      }

      return updateFromPath;
    }()
    /**
     * @param {*} data
     * @param {*} prototype
     * @param {boolean} forGame
     * @return {*}
     */

  }, {
    key: "validateByPrototype",
    value: function () {
      var _validateByPrototype = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4(data, prototype, forGame) {
        var dataValidated;
        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                dataValidated = null;

                if (data !== null && data !== undefined) {
                  if (_.isString(prototype) || _.isNumber(prototype)) {
                    dataValidated = _PrimitiveHelper["default"].validate(data, prototype);
                  } else if (prototype.prototype instanceof _Data["default"]) {
                    dataValidated = _DataHelper["default"].validate(data, prototype, forGame);
                  } else {
                    dataValidated = new prototype();
                  }
                }

                return _context4.abrupt("return", dataValidated);

              case 3:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }));

      function validateByPrototype(_x11, _x12, _x13) {
        return _validateByPrototype.apply(this, arguments);
      }

      return validateByPrototype;
    }()
    /**
     * @param {string} path
     * @param {*} parentPathData
     * @return {string|Class}
     */

  }, {
    key: "getPathPrototype",
    value: function getPathPrototype(path, parentPathData) {
      var pathSchema = this.getPathSchema(path);
      var prototype;

      if (pathSchema) {
        prototype = pathSchema.prototype;
      } else {
        throw new _SystemError["default"]("".concat(path, " must be defined in the schema"));
      }

      return _AttributeType["default"].extractPrototype(prototype, parentPathData);
    }
    /**
     * @param {string} path
     * @param {*} parentPathData
     * @return {string}
     */

  }, {
    key: "getPathDynamicPrototypeName",
    value: function getPathDynamicPrototypeName(path, parentPathData) {
      var pathSchema = this.getPathSchema(path);

      if (pathSchema) {
        return _AttributeType["default"].extractDynamicPrototypeName(pathSchema.prototype, parentPathData);
      }
    }
    /**
     * @param {string} path
     * @return {{type: *, prototype: *}}
     */

  }, {
    key: "getPathSchema",
    value: function getPathSchema(path) {
      var pathSchema = this.schema[path];

      if (!pathSchema) {
        var pathParentSchema = this.getPathSchema(_Schema["default"].getParentPath(path));

        if (pathParentSchema) {
          var preParentSchema = this.getPreParentSchema(path, pathParentSchema.prototype);

          if (preParentSchema) {
            var preSchema = preParentSchema[_Schema["default"].getPathKey(path).replace(/\[\d+]/, '')];

            if (preSchema) {
              return {
                type: preSchema.type,
                prototype: preSchema.type
              };
            }
          }
        }
      }

      return pathSchema;
    }
    /**
     * @param {string} path
     * @param {*} prototype
     * @return {*}
     */

  }, {
    key: "getPreParentSchema",
    value: function getPreParentSchema(path, prototype) {
      if (_AttributeType["default"].isArrayType(prototype)) {
        return {
          element: {
            type: _AttributeType["default"].getArrayElementType(prototype)
          }
        };
      }

      var preDefinedPrototype = _SchemaMeta.PrefSchema[prototype];

      if (preDefinedPrototype) {
        return preDefinedPrototype;
      }

      var dynamicType = parseInt(path.match(/\[(\d+)]/)[1]);

      if (_AttributeType["default"].isArrayType(dynamicType)) {
        return {
          element: {
            type: _AttributeType["default"].getArrayElementType(dynamicType)
          }
        };
      } else {
        return _SchemaMeta.PrefSchema[dynamicType];
      }
    }
    /**
     * @return {SchemaValidator}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return SchemaValidator;
}();

(0, _defineProperty2["default"])(SchemaValidator, "instance", void 0);
var _default = SchemaValidator;
exports["default"] = _default;

},{"../exception/type/SystemError.js":82,"../pobject/AttributeType.js":263,"../project/data/Data.js":284,"../utils/DataHelper.js":357,"../utils/ObjectHelper.js":365,"../utils/PrimitiveHelper.js":366,"./Schema.js":317,"./SchemaMeta.js":318,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":26}],320:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _UnitSelector2 = _interopRequireDefault(require("./UnitSelector.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScriptGraphSelector = /*#__PURE__*/function (_UnitSelector) {
  (0, _inherits2["default"])(ScriptGraphSelector, _UnitSelector);

  var _super = _createSuper(ScriptGraphSelector);

  function ScriptGraphSelector() {
    (0, _classCallCheck2["default"])(this, ScriptGraphSelector);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ScriptGraphSelector, [{
    key: "getUnits",

    /**
     * @override
     * @param {World} world
     * @return {Unit[]}
     */
    value: function getUnits(world) {
      return world ? world.getGraphManager().getGraphUnits().filter(function (unit) {
        return unit.getComponent(_MeshComponent["default"]).isEnabled();
      }) : [];
    }
    /**
     * @return {ScriptGraphSelector}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return ScriptGraphSelector;
}(_UnitSelector2["default"]);

exports["default"] = ScriptGraphSelector;
(0, _defineProperty2["default"])(ScriptGraphSelector, "instance", void 0);

},{"../component/internal/MeshComponent.js":48,"./UnitSelector.js":321,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],321:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _UnitHelper = _interopRequireDefault(require("../utils/UnitHelper.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../component/internal/gui/GUIPendingComponent.js"));

var _EmptyUnit = _interopRequireDefault(require("../unit/type/EmptyUnit.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var UnitSelector = /*#__PURE__*/function () {
  function UnitSelector() {
    (0, _classCallCheck2["default"])(this, UnitSelector);
  }

  (0, _createClass2["default"])(UnitSelector, [{
    key: "getSelected",

    /**
     * @param {World} world
     * @return {Unit[]}
     */
    value: function getSelected(world) {
      return this.getUnits(world).filter(function (unit) {
        return unit.isSelected() && !unit.getComponent(_GUIPendingComponent["default"]);
      });
    }
    /**
     * @param {World} world
     * @return {Unit[]}
     */

  }, {
    key: "getUnits",
    value: function getUnits(world) {
      return world.getUnitManager().getUnits();
    }
    /**
     * @param {World} world
     * @return {Unit}
     */

  }, {
    key: "getFirstSelected",
    value: function getFirstSelected(world) {
      var selectedUnits = this.getSelected(world);

      if (selectedUnits.length) {
        return selectedUnits[0];
      }

      return null;
    }
    /**
     * Get the unit in a specific point (absolute position)
     * @param {World} world
     * @param {Vector} point
     */

  }, {
    key: "get",
    value: function get(world, point) {
      var units = this.getAll(world, point);
      return units.length && units[units.length - 1];
    }
    /**
     * @param {World} world
     * @param {Vector} point
     * @return {Unit}
     */

  }, {
    key: "getFirstSelectable",
    value: function getFirstSelectable(world, point) {
      var units = this.getAll(world, point).filter(function (unit) {
        return !unit.getComponent(_GUIPendingComponent["default"]) && unit.isVisible();
      });
      return units.length && units[units.length - 1];
    }
    /**
     * Get all units in a specific point (absolute position)
     * @param {World} world
     * @param {Vector} point
     * @return {Unit[]}
     */

  }, {
    key: "getAll",
    value: function getAll(world, point) {
      return this.getUnits(world).filter(function (unit) {
        if (unit.getComponent(_MeshComponent["default"])) {
          return _UnitHelper["default"].isInside(unit, point);
        }
      });
    }
    /**
     * Get all units inside a selected area
     * @param {World} world
     * @param {Vector} point
     * @param {Size} size
     * @return {Unit[]}
     */

  }, {
    key: "getInsideArea",
    value: function getInsideArea(world, point, size) {
      return this.getUnits(world).filter(function (unit) {
        return unit instanceof _EmptyUnit["default"] && _UnitHelper["default"].isInsideArea(unit, point, size);
      });
    }
    /**
     * Select all units inside the area of selection, and return selected units
     * @param {World} world
     * @param {Vector} point
     * @param {Size} size
     * @return {Unit[]}
     */

  }, {
    key: "select",
    value: function select(world, point, size) {
      var selectedUnits = [];

      if (!size || !size.width && !size.height) {
        var selectedUnit = this.getFirstSelectable(world, point);

        if (selectedUnit) {
          selectedUnits.push(selectedUnit);
        }
      } else {
        selectedUnits = this.getInsideArea(world, point, size);
      }

      return selectedUnits.map(function (selectedUnit) {
        return selectedUnit.select() && selectedUnit;
      }).filter(function (unit) {
        return unit;
      });
    }
    /**
     * @param {World} world
     */

  }, {
    key: "unselectAll",
    value: function unselectAll(world) {
      this.getUnits(world).map(function (unit) {
        return unit.unselect();
      });
    }
    /**
     * Unfocus all entities.
     * Do not unfocus unit in loading mode
     * @param {World} world
     */

  }, {
    key: "unfocusAll",
    value: function unfocusAll(world) {
      this.getUnits(world).map(function (unit) {
        return unit.unfocus();
      });
    }
    /**
     * focus all entities in a given point.
     * Do not focus unit in loading mode
     * @param {World} world
     * @param {Vector} point
     */

  }, {
    key: "focus",
    value: function focus(world, point) {
      this.getAll(world, point).map(function (unit) {
        return unit.focus();
      });
    }
    /**
     * @return {UnitSelector}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return UnitSelector;
}();

exports["default"] = UnitSelector;
(0, _defineProperty2["default"])(UnitSelector, "instance", void 0);

},{"../component/internal/MeshComponent.js":48,"../component/internal/gui/GUIPendingComponent.js":54,"../unit/type/EmptyUnit.js":351,"../utils/UnitHelper.js":369,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],322:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Schema = _interopRequireDefault(require("../schema/Schema.js"));

var _SerDe2 = _interopRequireDefault(require("./SerDe.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {JsSerDe}
 * @extends {SerDe}
 */
var JsSerDe = /*#__PURE__*/function (_SerDe) {
  (0, _inherits2["default"])(JsSerDe, _SerDe);

  var _super = _createSuper(JsSerDe);

  function JsSerDe() {
    (0, _classCallCheck2["default"])(this, JsSerDe);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(JsSerDe, [{
    key: "serialize",

    /**
     * @override
     */
    value: function serialize(data) {
      if (_.isArray(data)) {
        throw new TypeError('Data to export must be an Object');
      }

      var schema = _Schema["default"].getMeta();

      var result = this.exportData('world', data, schema);
      return result.concat('var EngineWorldData = {world}').join('');
    }
    /**
     * @override
     */

  }, {
    key: "deserialize",
    value: function deserialize(data) {
      return null;
    }
    /**
     * @param {string} key
     * @param {Object|Array} data
     * @param {Object} schema
     * @param {string} varname
     *
     * @returns {string[]}
     */

  }, {
    key: "exportData",
    value: function exportData(key, data, schema) {
      var varname = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
      var instr = [];
      varname = varname ? varname : key;

      if (_.isObject(data) || _.isArray(data)) {
        instr.push("var ".concat(varname, " = new ").concat(!_.isArray(data) ? 'EngineData.' : '').concat(data.constructor.name, "();"));

        for (var iData in data) {
          if (data.hasOwnProperty(iData)) {
            var pKey = "".concat(varname).concat(iData);
            var pSchemaKey = _.isArray(data) ? 'element' : iData;
            var pValue = void 0;
            var subInstr = this.exportData(pSchemaKey, data[iData], schema, pKey);

            if (subInstr.length) {
              instr = instr.concat(subInstr);
              pValue = pKey;
            } else {
              pValue = data[iData];
              pValue = _.isString(pValue) ? "\"".concat(pValue.replaceAll("\"", "\\\""), "\"") : pValue;
            }

            if (data.constructor === Array) {
              instr.push("".concat(varname, "[").concat(iData, "] = ").concat(pValue, ";"));
            } else {
              instr.push("".concat(varname, ".").concat(iData, " = ").concat(pValue, ";"));
            }
          }
        }
      }

      return instr;
    }
  }]);
  return JsSerDe;
}(_SerDe2["default"]);

var _default = JsSerDe;
exports["default"] = _default;

},{"../schema/Schema.js":317,"./SerDe.js":323,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],323:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * @abstract
 * @class {SerDe}
 */
var SerDe = /*#__PURE__*/function () {
  function SerDe() {
    (0, _classCallCheck2["default"])(this, SerDe);
  }

  (0, _createClass2["default"])(SerDe, [{
    key: "serialize",

    /**
     * @abstract
     * @param {Object} data
     * @return {string}
     */
    value: function serialize(data) {
      throw new TypeError('SerDe.serialize must be implemented');
    }
    /**
     * @abstract
     * @param {Object|string} data
     * @return {Object|Map<string, *>}
     */

  }, {
    key: "deserialize",
    value: function deserialize(data) {
      throw new TypeError('SerDe.deserialize must be implemented');
    }
  }]);
  return SerDe;
}();

var _default = SerDe;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],324:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _SerDe2 = _interopRequireDefault(require("./SerDe.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {XmlSerDe}
 * @extends {SerDe}
 */
var XmlSerDe = /*#__PURE__*/function (_SerDe) {
  (0, _inherits2["default"])(XmlSerDe, _SerDe);

  var _super = _createSuper(XmlSerDe);

  function XmlSerDe() {
    (0, _classCallCheck2["default"])(this, XmlSerDe);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(XmlSerDe, [{
    key: "serialize",

    /**
     * @override
     */
    value: function serialize(data) {
      if (_.isArray(data)) {
        throw new TypeError('Data to export must be an Object');
      }

      var xmlSerializer = new XMLSerializer();
      var root = document.implementation.createDocument('', '', null);
      var dataNode = this.exportData('project', data, root);
      root.appendChild(dataNode);
      return xmlSerializer.serializeToString(root);
    }
    /**
     * @override
     */

  }, {
    key: "deserialize",
    value: function deserialize(data) {
      if (_.isArray(data)) {
        throw new TypeError('Data to export must be an Object');
      }

      var parser = new DOMParser();
      var node = parser.parseFromString(data, 'application/xml');
      return this.importData('project', node.documentElement);
    }
    /**
     * @private
     * @param {string} key
     * @param {HTMLElement|ChildNode} node
     * @return {Map<string, *>}
     */

  }, {
    key: "importData",
    value: function importData(key, node) {
      var _this = this;

      var isArray = key === 'element';
      var data = {};
      var attributes = node.attributes;

      for (var nodeAttr in attributes) {
        if (attributes.hasOwnProperty(nodeAttr)) {
          var attribute = attributes[nodeAttr].name;
          var attrValue = attributes[attribute].nodeValue;

          if (attribute === 'value') {
            data = attrValue;
          } else {
            data[attribute] = attrValue;
          }
        }
      }

      node.childNodes.forEach(function (cNode) {
        var subObject = _this.importData(cNode.nodeName, cNode);

        if (subObject) {
          if (_.isArray(subObject)) {
            data = !Object.keys(data).length ? [] : data;
            data = data.concat(subObject);
          } else {
            data = Object.assign(data, subObject);
          }
        }
      });
      return isArray ? [data] : (0, _defineProperty2["default"])({}, key, data);
    }
    /**
     * @private
     * @param {string} key
     * @param {Object|Array|number|string} data
     * @param {Document} root
     *
     * @returns {HTMLElement}
     */

  }, {
    key: "exportData",
    value: function exportData(key, data, root) {
      var isArray = _.isArray(data);

      if (_.isObject(data) || _.isArray(data)) {
        var node = root.createElement(key);

        for (var iData in data) {
          if (data.hasOwnProperty(iData)) {
            var pKey = isArray ? 'element' : iData;
            var pValue = data[iData];
            var subNode = this.exportData(pKey, pValue, root);

            if (subNode) {
              node.appendChild(subNode);
            } else {
              if (pValue !== null && pValue !== undefined) {
                node.setAttribute(pKey, pValue);
              }
            }
          }
        }

        return node;
      } else if (key === 'element') {
        var _node = root.createElement(key);

        _node.setAttribute('value', data);

        return _node;
      }

      return null;
    }
  }]);
  return XmlSerDe;
}(_SerDe2["default"]);

var _default = XmlSerDe;
exports["default"] = _default;

},{"./SerDe.js":323,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],325:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Mouse = require("../core/Mouse.js");

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

/**
 * @typedef {{code: string, id: number}} StateType
 */

/**
 * Manage the state of the application over time
 * @property {StateType[]} stateList
 */
var AppState = /*#__PURE__*/function () {
  function AppState() {
    (0, _classCallCheck2["default"])(this, AppState);
    this.reset();
  }
  /**
   * Get the state of the application (drawing ellipse,
   * starting/pausing simulation, moving object, ...).
   * @return {string[]}
   */


  (0, _createClass2["default"])(AppState, [{
    key: "getState",
    value: function getState() {
      return this.state;
    }
    /**
     * Get all data associated to a topic.
     * Used to access data related to a state
     * @param {String} topic
     */

  }, {
    key: "getData",
    value: function getData(topic) {
      return this.data && this.data[topic];
    }
    /**
     * Set data.
     * Used to set data for a given state
     * @param {Object} data
     */

  }, {
    key: "setData",
    value: function setData(data) {
      this.data = _.merge(this.data, data);
      return this;
    }
    /**
     * Set data associated to a topic
     * @param {string} topic
     * @param {Object|Array} data
     */

  }, {
    key: "setDataByTopic",
    value: function setDataByTopic(topic, data) {
      var dataTopic = this.data[topic];

      if (dataTopic) {
        if (_.isArray(dataTopic)) {
          this.data[topic] = dataTopic.concat(data);
        } else {
          this.data[topic] = _objectSpread({
            dataTopic: dataTopic
          }, data);
        }
      } else {
        this.data[topic] = data;
      }

      return this;
    }
    /**
     * Verify if Application has a state.
     * @param {String} state
     */

  }, {
    key: "hasState",
    value: function hasState(state) {
      return this.state.indexOf(state) >= 0;
    }
    /**
     * Verify if Application has a data state.
     * @param {Object} data
     */

  }, {
    key: "hasData",
    value: function hasData(data) {
      for (var pIndex in data) {
        if (data[pIndex] !== this.data[pIndex]) {
          return false;
        }
      }

      return true;
    }
    /**
     * Add a state to the states list.
     * @param {string} state
     */

  }, {
    key: "addState",
    value: function addState(state) {
      if (this.state.indexOf(state) === -1) {
        if (Object.keys(AppState.States).indexOf(state) >= 0) {
          this.state.push(state);
          var cursor = AppState.States[state].cursor;
          cursor && this.setData({
            cursor: cursor
          });
        } else {
          throw new _SystemError["default"]("".concat(state, " is not recognized as Application State"));
        }
      }
    }
    /**
     * Is the state can trigger history
     * @param {string} state
     * @return {boolean}
     */

  }, {
    key: "getIsHistory",
    value: function getIsHistory(state) {
      var history = AppState.States[state].history;
      return history;
    }
    /**
     * Find all indices for a specific state or state pattern, use exact param to search for
     * state within the same pattern
     * @param {String} state
     * @param {Boolean} exact
     */

  }, {
    key: "findStateIndex",
    value: function findStateIndex(state) {
      var exact = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var indices = [];

      if (exact) {
        var index = this.state.indexOf(state);

        if (index >= 0) {
          indices.push(index);
        }
      } else {
        var regExpState = new RegExp("^".concat(state));
        this.state.map(function (state_, index) {
          return state_.match(regExpState) && indices.push(index);
        });
      }

      return indices;
    }
    /**
     * Remove a state from the application, use exact param to search for
     * state within the same pattern
     * @param {String} state
     * @param {Boolean} exact
     */

  }, {
    key: "removeState",
    value: function removeState(state) {
      var _this = this;

      var exact = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var indices = this.findStateIndex(state, exact);
      indices.map(function (index) {
        return _this.state.splice(index, 1);
      });
    }
    /**
     * Remove data state
     * @param {string} state
     */

  }, {
    key: "removeData",
    value: function removeData(state) {
      delete this.data[state];
    }
    /**
     * Reset the state of the application
     */

  }, {
    key: "reset",
    value: function reset() {
      this.state = [];
      this.data = {};
    }
  }], [{
    key: "get",
    value: function get() {
      if (!AppState.instance) {
        AppState.instance = new AppState();
      }

      return AppState.instance;
    }
  }]);
  return AppState;
}();

AppState.instance = null;
AppState.Categories = {
  ACTION: 'ACTION_',
  DRAW: 'DRAW_'
};
/**
 * @todo: Think to externalize the states configuration
 */

AppState.States = {
  DRAW_RECT_START: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_JOINT_START: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_SELECT_START: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_SELECT_GRAPH_START: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_NODE_EDGE_START: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_MOVE_START: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_SCALE_START: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_SCALE_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_SCALE_STOP: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_ROTATE_START: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_ROTATE_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_ROTATE_STOP: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_CIRCLE_START: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_RECT_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_JOINT_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_ATTACH_POINT_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.POINTER
  },
  DRAW_SELECT_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_SELECT_GRAPH_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_NODE_EDGE_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_MOVE_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_CIRCLE_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_CIRCLE_STOP: {
    history: true,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_RECT_STOP: {
    history: true,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_JOINT_STOP: {
    history: true,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_ATTACH_POINT_STOP: {
    history: true
  },
  DRAW_CAMERA_START: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_CAMERA_PROGRESS: {
    history: false,
    cursor: _Mouse.CURSOR.CROSSHAIR
  },
  DRAW_CAMERA_STOP: {
    history: true,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  DRAW_SELECT_STOP: {
    history: false
  },
  DRAW_SELECT_GRAPH_STOP: {
    history: false
  },
  DRAW_NODE_EDGE_STOP: {
    history: false
  },
  DRAW_MOVE_STOP: {
    history: false
  },
  SIMULATE_START: {
    history: false,
    cursor: _Mouse.CURSOR.DEFAULT
  },
  SIMULATE_PROGRESS: {
    history: false
  },
  SIMULATE_STOP: {
    history: false
  },
  ACTION_DELETE_START: {
    history: true
  },
  ACTION_DELETE_PROGRESS: {
    history: false
  },
  ACTION_DELETE_STOP: {
    history: false
  },
  ACTION_DUPLICATE_START: {
    history: true
  },
  ACTION_DUPLICATE_PROGRESS: {
    history: false
  },
  ACTION_DUPLICATE_STOP: {
    history: false
  },
  ACTION_UNDO_START: {
    history: false
  },
  ACTION_UNDO_PROGRESS: {
    history: false
  },
  ACTION_UNDO_STOP: {
    history: false
  },
  ACTION_MOVE_START: {
    history: true,
    cursor: _Mouse.CURSOR.MOVE
  },
  ACTION_MOVE_PROGRESS: {
    history: false
  },
  ACTION_MOVE_STOP: {
    history: true
  },
  ACTION_SCALE_START: {
    history: true,
    cursor: _Mouse.CURSOR.RESIZE
  },
  ACTION_SCALE_PROGRESS: {
    history: false
  },
  ACTION_SCALE_STOP: {
    history: true
  },
  ACTION_ROTATE_START: {
    history: true,
    cursor: _Mouse.CURSOR.MOVE
  },
  ACTION_ROTATE_PROGRESS: {
    history: false
  },
  ACTION_ROTATE_STOP: {
    history: true
  },
  ACTION_MOVE_UP_START: {
    history: true
  },
  ACTION_MOVE_UP_PROGRESS: {
    history: false
  },
  ACTION_MOVE_UP_STOP: {
    history: false
  },
  ACTION_MOVE_DOWN_START: {
    history: true
  },
  ACTION_MOVE_DOWN_PROGRESS: {
    history: false
  },
  ACTION_MOVE_DOWN_STOP: {
    history: false
  },
  ACTION_LOCK_START: {
    history: true
  },
  ACTION_LOCK_PROGRESS: {
    history: false
  },
  ACTION_LOCK_STOP: {
    history: false
  },
  ACTION_UNLOCK_START: {
    history: true
  },
  ACTION_UNLOCK_PROGRESS: {
    history: false
  },
  ACTION_UNLOCK_STOP: {
    history: false
  },
  ACTION_HIDE_START: {
    history: true
  },
  ACTION_HIDE_PROGRESS: {
    history: false
  },
  ACTION_HIDE_STOP: {
    history: false
  },
  ACTION_SHOW_START: {
    history: true
  },
  ACTION_SHOW_PROGRESS: {
    history: false
  },
  ACTION_SHOW_STOP: {
    history: false
  },
  ACTION_ROTATE_UP_START: {
    history: true
  },
  ACTION_ROTATE_UP_PROGRESS: {
    history: false
  },
  ACTION_ROTATE_UP_STOP: {
    history: false
  },
  ACTION_SELECT_ENTITY_START: {
    history: true
  },
  ACTION_SELECT_ENTITY_PROGRESS: {
    history: false
  },
  ACTION_SELECT_ENTITY_STOP: {
    history: false
  },
  ACTION_HISTORY_PUSH_START: {
    history: false
  },
  ACTION_HISTORY_PUSH_PROGRESS: {
    history: false
  },
  ACTION_HISTORY_PUSH_STOP: {
    history: false
  },
  ACTION_PHYSICS_STATIC_START: {
    history: true
  },
  ACTION_PHYSICS_STATIC_PROGRESS: {
    history: false
  },
  ACTION_PHYSICS_STATIC_STOP: {
    history: false
  },
  ACTION_PHYSICS_NOT_STATIC_START: {
    history: true
  },
  ACTION_PHYSICS_NOT_STATIC_PROGRESS: {
    history: false
  },
  ACTION_PHYSICS_NOT_STATIC_STOP: {
    history: false
  },
  ACTION_FORM_UPDATE_START: {
    history: true
  },
  ACTION_FORM_UPDATE_PROGRESS: {
    history: false
  },
  ACTION_FORM_UPDATE_STOP: {
    history: true
  },
  ACTION_MOVE_CAMERA_START: {
    history: false
  },
  ACTION_MOVE_CAMERA_PROGRESS: {
    history: false
  },
  ACTION_MOVE_CAMERA_STOP: {
    history: false
  },
  ACTION_ZOOM_CAMERA_START: {
    history: false
  },
  ACTION_ZOOM_CAMERA_PROGRESS: {
    history: false
  },
  ACTION_ZOOM_CAMERA_STOP: {
    history: false
  },
  ACTION_SAVE_PROJECT_START: {
    history: false
  },
  ACTION_SAVE_PROJECT_PROGRESS: {
    history: false
  },
  ACTION_SAVE_PROJECT_STOP: {
    history: false
  },
  ACTION_LOAD_PROJECT_START: {
    history: false
  },
  ACTION_LOAD_PROJECT_PROGRESS: {
    history: false
  },
  ACTION_ADD_ASSET_STOP: {
    history: false
  },
  ACTION_ADD_ASSET_START: {
    history: false
  },
  ACTION_ADD_ASSET_PROGRESS: {
    history: false
  },
  ACTION_ADD_ANIMATION_STOP: {
    history: true
  },
  ACTION_ADD_ANIMATION_START: {
    history: true
  },
  ACTION_ADD_ANIMATION_PROGRESS: {
    history: false
  },
  ACTION_ATTACH_COMPONENT_STOP: {
    history: false
  },
  ACTION_ATTACH_COMPONENT_START: {
    history: false
  },
  ACTION_ATTACH_COMPONENT_PROGRESS: {
    history: false
  },
  ACTION_ADD_ASSET_SCENE_STOP: {
    history: false
  },
  ACTION_ADD_ASSET_SCENE_START: {
    history: false
  },
  ACTION_ADD_ASSET_SCENE_PROGRESS: {
    history: false
  },
  ACTION_COMPILE_ASSET_SCRIPT_STOP: {
    history: false
  },
  ACTION_COMPILE_ASSET_SCRIPT_START: {
    history: false
  },
  ACTION_COMPILE_ASSET_SCRIPT_PROGRESS: {
    history: false
  },
  ACTION_ATTACH_ASSET_SCRIPT_STOP: {
    history: false
  },
  ACTION_ATTACH_ASSET_SCRIPT_START: {
    history: false
  },
  ACTION_ATTACH_ASSET_SCRIPT_PROGRESS: {
    history: false
  },
  ACTION_EDIT_ASSET_SCRIPT_XML_STOP: {
    history: false
  },
  ACTION_EDIT_ASSET_SCRIPT_XML_START: {
    history: false
  },
  ACTION_EDIT_ASSET_SCRIPT_XML_PROGRESS: {
    history: false
  },
  ACTION_LOAD_PROJECT_STOP: {
    history: false
  },
  ACTION_NEW_PROJECT_START: {
    history: false
  },
  ACTION_NEW_PROJECT_PROGRESS: {
    history: false
  },
  ACTION_NEW_PROJECT_STOP: {
    history: false
  },
  ACTION_EXPORT_PROJECT_START: {
    history: false
  },
  ACTION_EXPORT_PROJECT_PROGRESS: {
    history: false
  },
  ACTION_EXPORT_PROJECT_STOP: {
    history: false
  },
  ACTION_SELECT_LIST_ELEMENT_START: {
    history: false
  },
  ACTION_SELECT_LIST_ELEMENT_PROGRESS: {
    history: false
  },
  ACTION_SELECT_LIST_ELEMENT_STOP: {
    history: false
  },
  ACTION_COLLAPSE_PANEL_START: {
    history: false
  },
  ACTION_COLLAPSE_PANEL_PROGRESS: {
    history: false
  },
  ACTION_COLLAPSE_PANEL_STOP: {
    history: false
  },
  ACTION_HIDE_ITEM_START: {
    history: false
  },
  ACTION_HIDE_ITEM_PROGRESS: {
    history: false
  },
  ACTION_HIDE_ITEM_STOP: {
    history: false
  },
  ACTION_SHOW_ITEM_START: {
    history: false
  },
  ACTION_SHOW_ITEM_PROGRESS: {
    history: false
  },
  ACTION_SHOW_ITEM_STOP: {
    history: false
  },
  ACTION_LOCK_ITEM_START: {
    history: false
  },
  ACTION_LOCK_ITEM_PROGRESS: {
    history: false
  },
  ACTION_LOCK_ITEM_STOP: {
    history: false
  },
  ACTION_UNLOCK_ITEM_START: {
    history: false
  },
  ACTION_UNLOCK_ITEM_PROGRESS: {
    history: false
  },
  ACTION_UNLOCK_ITEM_STOP: {
    history: false
  },
  ACTION_ADD_CAMERA_START: {
    history: false
  },
  ACTION_ADD_CAMERA_PROGRESS: {
    history: false
  },
  ACTION_ADD_CAMERA_STOP: {
    history: false
  },
  ACTION_ADD_LIGHT_POINT_START: {
    history: false
  },
  ACTION_ADD_LIGHT_POINT_PROGRESS: {
    history: false
  },
  ACTION_ADD_LIGHT_POINT_STOP: {
    history: false
  },
  ACTION_ADD_LIGHT_GLOBAL_START: {
    history: false
  },
  ACTION_ADD_LIGHT_GLOBAL_PROGRESS: {
    history: false
  },
  ACTION_ADD_LIGHT_GLOBAL_STOP: {
    history: false
  },
  ACTION_SELECT_TAB_START: {
    history: false
  },
  ACTION_SELECT_TAB_PROGRESS: {
    history: false
  },
  ACTION_SELECT_TAB_STOP: {
    history: false
  },
  ACTION_CLOSE_TAB_START: {
    history: false
  },
  ACTION_CLOSE_TAB_PROGRESS: {
    history: false
  },
  ACTION_CLOSE_TAB_STOP: {
    history: false
  },
  ACTION_ADD_FOLDER_START: {
    history: true
  },
  ACTION_ADD_FOLDER_PROGRESS: {
    history: false
  },
  ACTION_ADD_FOLDER_STOP: {
    history: true
  },
  ACTION_SELECT_FOLDER_START: {
    history: false
  },
  ACTION_SELECT_FOLDER_PROGRESS: {
    history: false
  },
  ACTION_SELECT_FOLDER_STOP: {
    history: false
  },
  ACTION_SELECT_ASSET_START: {
    history: false
  },
  ACTION_SELECT_ASSET_PROGRESS: {
    history: false
  },
  ACTION_SELECT_ASSET_STOP: {
    history: false
  },
  ACTION_ADD_SCRIPT_START: {
    history: false
  },
  ACTION_ADD_SCRIPT_PROGRESS: {
    history: false
  },
  ACTION_ADD_SCRIPT_STOP: {
    history: false
  },
  ACTION_ADD_GRAPH_SCRIPT_START: {
    history: false
  },
  ACTION_ADD_GRAPH_SCRIPT_PROGRESS: {
    history: false
  },
  ACTION_ADD_GRAPH_SCRIPT_STOP: {
    history: false
  },
  ACTION_ADD_CODE_SCRIPT_START: {
    history: false
  },
  ACTION_ADD_CODE_SCRIPT_PROGRESS: {
    history: false
  },
  ACTION_ADD_CODE_SCRIPT_STOP: {
    history: false
  },
  ACTION_DELETE_SCRIPT_NODE_START: {
    history: true
  },
  ACTION_DELETE_SCRIPT_NODE_PROGRESS: {
    history: false
  },
  ACTION_DELETE_SCRIPT_NODE_STOP: {
    history: true
  },
  ACTION_DELETE_SELECTED_NODE_START: {
    history: true
  },
  ACTION_DELETE_SELECTED_NODE_PROGRESS: {
    history: false
  },
  ACTION_DELETE_SELECTED_NODE_STOP: {
    history: true
  },
  ACTION_DELETE_SCRIPT_EDGE_START: {
    history: true
  },
  ACTION_DELETE_SCRIPT_EDGE_PROGRESS: {
    history: false
  },
  ACTION_DELETE_SCRIPT_EDGE_STOP: {
    history: true
  },
  ACTION_ADD_SCRIPT_NODE_START: {
    history: false
  },
  ACTION_ADD_SCRIPT_NODE_PROGRESS: {
    history: false
  },
  ACTION_ADD_SCRIPT_NODE_STOP: {
    history: false
  },
  ACTION_ADD_SCRIPT_EDGE_START: {
    history: false
  },
  ACTION_ADD_SCRIPT_EDGE_PROGRESS: {
    history: false
  },
  ACTION_ADD_SCRIPT_EDGE_STOP: {
    history: false
  },
  ACTION_ADD_SCRIPT_NODE_INPUT_START: {
    history: false
  },
  ACTION_ADD_SCRIPT_NODE_INPUT_PROGRESS: {
    history: false
  },
  ACTION_ADD_SCRIPT_NODE_INPUT_STOP: {
    history: false
  },
  ACTION_DELETE_ASSET_START: {
    history: true
  },
  ACTION_DELETE_ASSET_PROGRESS: {
    history: false
  },
  ACTION_DELETE_ASSET_STOP: {
    history: true
  },
  ACTION_DELETE_FOLDER_START: {
    history: true
  },
  ACTION_DELETE_FOLDER_PROGRESS: {
    history: false
  },
  ACTION_DELETE_FOLDER_STOP: {
    history: true
  },
  ACTION_CLOSE_ERROR_POPUP_START: {
    history: false
  },
  ACTION_CLOSE_ERROR_POPUP_PROGRESS: {
    history: false
  },
  ACTION_CLOSE_ERROR_POPUP_STOP: {
    history: false
  },
  ACTION_EDIT_ASSET_ANIMATION_START: {
    history: false
  },
  ACTION_EDIT_ASSET_ANIMATION_PROGRESS: {
    history: false
  },
  ACTION_EDIT_ASSET_ANIMATION_STOP: {
    history: false
  },
  ACTION_ATTACH_ASSET_ANIMATION_START: {
    history: false
  },
  ACTION_ATTACH_ASSET_ANIMATION_PROGRESS: {
    history: false
  },
  ACTION_ATTACH_ASSET_ANIMATION_STOP: {
    history: false
  },
  ACTION_DELETE_ANIMATION_FRAME_START: {
    history: true
  },
  ACTION_DELETE_ANIMATION_FRAME_PROGRESS: {
    history: false
  },
  ACTION_DELETE_ANIMATION_FRAME_STOP: {
    history: true
  },
  ACTION_PLAY_ANIMATION_START: {
    history: false
  },
  ACTION_PLAY_ANIMATION_PROGRESS: {
    history: false
  },
  ACTION_PLAY_ANIMATION_STOP: {
    history: false
  },
  ACTION_STOP_ANIMATION_START: {
    history: false
  },
  ACTION_STOP_ANIMATION_PROGRESS: {
    history: false
  },
  ACTION_STOP_ANIMATION_STOP: {
    history: false
  },
  ACTION_ADD_ANIMATION_SCRIPT_START: {
    history: true
  },
  ACTION_ADD_ANIMATION_SCRIPT_PROGRESS: {
    history: false
  },
  ACTION_ADD_ANIMATION_SCRIPT_STOP: {
    history: true
  },
  ACTION_EXPORT_ASSET_START: {
    history: false
  },
  ACTION_EXPORT_ASSET_PROGRESS: {
    history: false
  },
  ACTION_EXPORT_ASSET_STOP: {
    history: false
  },
  ACTION_DELETE_COMPONENT_START: {
    history: false
  },
  ACTION_DELETE_COMPONENT_PROGRESS: {
    history: false
  },
  ACTION_DELETE_COMPONENT_STOP: {
    history: false
  },
  ACTION_SELECT_LIST_TIMELINE_START: {
    history: false
  },
  ACTION_SELECT_LIST_TIMELINE_PROGRESS: {
    history: false
  },
  ACTION_SELECT_LIST_TIMELINE_STOP: {
    history: false
  },
  ACTION_UNIT_MOVE_START: {
    history: false
  },
  ACTION_UNIT_MOVE_PROGRESS: {
    history: false
  },
  ACTION_UNIT_MOVE_STOP: {
    history: false
  },
  ACTION_PLAY_ASSET_AUDIO_START: {
    history: false
  },
  ACTION_PLAY_ASSET_AUDIO_PROGRESS: {
    history: false
  },
  ACTION_PLAY_ASSET_AUDIO_STOP: {
    history: false
  },
  ACTION_STOP_ASSET_AUDIO_START: {
    history: false
  },
  ACTION_STOP_ASSET_AUDIO_PROGRESS: {
    history: false
  },
  ACTION_STOP_ASSET_AUDIO_STOP: {
    history: false
  }
};
var _default = AppState;
exports["default"] = _default;

},{"../core/Mouse.js":75,"../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],326:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _AppState = _interopRequireDefault(require("./AppState.js"));

var _History = _interopRequireDefault(require("../core/History.js"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

/**
 * Manage the state of the application
 * @property {AppState} appState
 */
var StateManager = /*#__PURE__*/function () {
  /**
   * @type {StateManager}
   */
  function StateManager() {
    (0, _classCallCheck2["default"])(this, StateManager);
    this.appState = _AppState["default"].get();
  }
  /**
   * @param {string} state
   * @return {string|null}
   */


  (0, _createClass2["default"])(StateManager, [{
    key: "getType",
    value: function getType(state) {
      var stepPrefix = ['START', 'PROGRESS', 'STOP'];

      for (var iStep in stepPrefix) {
        if (stepPrefix.hasOwnProperty(iStep)) {
          var regex = new RegExp("([A-Z_]+)_".concat(stepPrefix[iStep], "$"));

          if (state.match(regex)) {
            return state.replace(regex, '$1');
          }
        }
      }

      return null;
    }
    /**
     * @param {string} state
     * @return {boolean}
     */

  }, {
    key: "isActionState",
    value: function isActionState(state) {
      var catMatch = new RegExp("^".concat(_AppState["default"].Categories.ACTION));
      return !!state.match(catMatch);
    }
    /**
     * @param {string} state
     * @return {boolean}
     */

  }, {
    key: "isDrawState",
    value: function isDrawState(state) {
      var catMatch = new RegExp("^".concat(_AppState["default"].Categories.DRAW));
      return !!state.match(catMatch);
    }
    /**
     * @param {string} state
     * @return {boolean}
     */

  }, {
    key: "isStartState",
    value: function isStartState(state) {
      return !!state.match(/_START$/);
    }
    /**
     * @param {string} state
     * @return {boolean}
     */

  }, {
    key: "isStopState",
    value: function isStopState(state) {
      return !!state.match(/_STOP$/);
    }
    /**
     * Is the state type a start action
     * @param {string} type
     */

  }, {
    key: "isStart",
    value: function isStart(type) {
      return this.appState.hasState("".concat(type, "_START")) && this.getNextStartData(type);
    }
    /**
     * Is the state type in progress
     * @param {string} type
     */

  }, {
    key: "isProgress",
    value: function isProgress(type) {
      return this.appState.hasState("".concat(type, "_PROGRESS")) && this.getNextProgressData(type);
    }
    /**
     * Is the action type a stop action
     * @param {string} type
     */

  }, {
    key: "isStop",
    value: function isStop(type) {
      return this.appState.hasState("".concat(type, "_STOP")) && this.getNextStopData(type);
    }
    /**
     * Start an action by type and data (state)
     * @param {string} type
     * @param {number} id
     * @param {Object} data
     * @TODO Add history (call addHistory(state))
     */

  }, {
    key: "startState",
    value: function startState(type, id) {
      var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      if (!id) {
        throw new TypeError('Action id must be defined');
      }

      var state = "".concat(type, "_START");
      this.addState(state, null);
      this.appState.setDataByTopic(state, [_objectSpread({
        id: id
      }, data)]);
    }
    /**
     * Progress an action (state)
     * @param {string} type
     * @param {number} id
     * @TODO Add history (call addHistory(state))
     */

  }, {
    key: "progressState",
    value: function progressState(type, id) {
      if (!id) {
        throw new TypeError('Action id must be defined');
      }

      var state = "".concat(type, "_PROGRESS");
      var data = this.getStartData(type, id);
      this.addState(state, data);
      this.removeStartState(type, id);
    }
    /**
     * Stop an action (state)
     * @param {string} type
     * @param {number} id
     * @TODO Add history (call addHistory(state))
     */

  }, {
    key: "stopState",
    value: function stopState(type, id) {
      if (!id) {
        throw new TypeError('Action id must be defined');
      }

      var state = "".concat(type, "_STOP");
      var data = this.getProgressData(type, id);
      this.addState(state, data);
      this.removeStartState(type, id);
      this.removeProgressState(type, id);
    }
    /**
     * Delete the stop action (end action)
     * @param {string} type
     * @param {number} id
     */

  }, {
    key: "endState",
    value: function endState(type, id) {
      if (!id) {
        throw new TypeError('Action id must be defined');
      }

      this.removeProgressState(type, id);
      this.removeStopState(type, id);
    }
    /**
     * @param {string} type
     */

  }, {
    key: "progressNextState",
    value: function progressNextState(type) {
      var data = this.getNextStartData(type);

      if (data) {
        this.progressState(type, data.id);
      } else {
        throw new TypeError("Progress data state not found for ".concat(type));
      }
    }
    /**
     * @param {string} type
     */

  }, {
    key: "stopNextState",
    value: function stopNextState(type) {
      var data = this.getNextProgressData(type) || this.getNextStartData(type);

      if (data) {
        this.stopState(type, data.id);
      } else {
        throw new TypeError("Stop data state not found for ".concat(type));
      }
    }
    /**
     * @param {string} type
     */

  }, {
    key: "endNextState",
    value: function endNextState(type) {
      var data = this.getNextStopData(type);

      if (data) {
        this.endState(type, data.id);
      } else {
        throw new TypeError("End data state not found for ".concat(type));
      }
    }
    /**
     * Is state has action of given type/id
     * @param {string} type
     * @param {number} id
     * @return {boolean}
     */

  }, {
    key: "hasState",
    value: function hasState(type, id) {
      return (this.isStart(type) || this.isStop(type) || this.isProgress(type)) && (this.getStartData(type, id) || this.getProgressData(type, id) || this.getStartData(type, id));
    }
    /**
     * Is state has action of given type (even if state data is not set)
     * @param {string} type
     * @return {boolean}
     */

  }, {
    key: "hasAnyState",
    value: function hasAnyState(type) {
      return this.isStart(type) || this.isStop(type) || this.isProgress(type);
    }
    /**
     * @return {string[]}
     */

  }, {
    key: "getStartStates",
    value: function getStartStates() {
      var _this = this;

      return this.appState.getState().filter(function (state) {
        return _this.isStartState(state);
      });
    }
    /**
     * @return {string[]}
     */

  }, {
    key: "getStopStates",
    value: function getStopStates() {
      var _this2 = this;

      return this.appState.getState().filter(function (state) {
        return _this2.isStop(_this2.getType(state));
      });
    }
    /**
     * @param {string} state
     * @return {boolean}
     */

  }, {
    key: "hasHistory",
    value: function hasHistory(state) {
      return this.appState.getIsHistory(state);
    }
    /**
     * Is running states in progress
     * @return {boolean}
     */

  }, {
    key: "isRunning",
    value: function isRunning() {
      return this.isProgress('SIMULATE');
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isFormUpdating",
    value: function isFormUpdating() {
      return this.isProgress('ACTION_FORM_UPDATE');
    }
    /**
     * Add data to history (state)
     * @param {string} state
     * @TODO check we can not pass an ID
     */

  }, {
    key: "addHistory",
    value: function addHistory(state) {
      var isHistory = this.appState.getIsHistory(state);

      if (isHistory) {
        if (this.isStartState(state)) {
          _History["default"].get().record();
        } else if (this.isStopState(state)) {
          _History["default"].get().save();
        }
      }
    }
    /**
     * @param {string} state
     * @param {*} data
     */

  }, {
    key: "addState",
    value: function addState(state, data) {
      this.appState.addState(state);
      data && this.appState.setData((0, _defineProperty2["default"])({}, state, [data]));
    }
    /**
     * Get the start state data
     * @param {string} type
     * @param {number} id
     * @return {*}
     */

  }, {
    key: "getStartData",
    value: function getStartData(type, id) {
      if (!id) {
        throw new TypeError('Action id must be defined');
      }

      return this.getStateData("".concat(type, "_START"), id);
    }
    /**
     * Get the progress state data
     * @param {string} type
     * @param {number} id
     * @return {Object|null}
     */

  }, {
    key: "getProgressData",
    value: function getProgressData(type, id) {
      if (!id) {
        throw new TypeError('Action id must be defined');
      }

      return this.getStateData("".concat(type, "_PROGRESS"), id);
    }
    /**
     * Get the start state data
     * @param {string} type
     * @param {number} id
     * @return {Object|null}
     */

  }, {
    key: "getStopData",
    value: function getStopData(type, id) {
      if (!id) {
        throw new TypeError('Action id must be defined');
      }

      return this.getStateData("".concat(type, "_STOP"), id);
    }
    /**
     * Get the next progress state data
     * @param {string} type
     * @return {Object|null}
     */

  }, {
    key: "getNextStartData",
    value: function getNextStartData(type) {
      return this.getNextData("".concat(type, "_START"));
    }
    /**
     * Get the next progress state data
     * @param {string} type
     * @return {Object|null}
     */

  }, {
    key: "getNextProgressData",
    value: function getNextProgressData(type) {
      return this.getNextData("".concat(type, "_PROGRESS"));
    }
    /**
     * Get the next progress state data
     * @param {string} type
     * @return {Object|null}
     */

  }, {
    key: "getNextStopData",
    value: function getNextStopData(type) {
      return this.getNextData("".concat(type, "_STOP"));
    }
    /**
     * Remove the start state
     * @param {string} type
     * @param {number} id
     */

  }, {
    key: "removeStartState",
    value: function removeStartState(type, id) {
      this.removeState("".concat(type, "_START"), id);
    }
    /**
     * Remove the progress state
     * @param {string} type
     * @param {number} id
     */

  }, {
    key: "removeProgressState",
    value: function removeProgressState(type, id) {
      this.removeState("".concat(type, "_PROGRESS"), id);
    }
    /**
     * Remove the stop state
     * @param {string} type
     * @param {number} id
     */

  }, {
    key: "removeStopState",
    value: function removeStopState(type, id) {
      this.removeState("".concat(type, "_STOP"), id);
    }
    /**
     * Get the data by State/Id
     * @private
     * @param {string} type
     * @param {number} id
     */

  }, {
    key: "getDataById",
    value: function getDataById(type, id) {
      var data = this.getData(type);
      return data && data.find(function (value) {
        return value && value.id === id;
      });
    }
    /**
     * Get the data state for the given type
     * @private
     * @param {string} state
     * @return {Array}
     */

  }, {
    key: "getData",
    value: function getData(state) {
      return this.appState.getData(state);
    }
    /**
     * Get the next data state for the given type
     * @private
     * @param {string} state
     * @return {Object}
     */

  }, {
    key: "getNextData",
    value: function getNextData(state) {
      var data = this.getData(state);
      return data && data[0];
    }
    /**
     * Remove the state
     * @private
     * @param {string} state
     * @param {number} id
     */

  }, {
    key: "removeState",
    value: function removeState(state, id) {
      this.removeStateData(state, id);
    }
    /**
     * Remove the state data
     * @private
     * @param {string} state
     * @param {number} id
     */

  }, {
    key: "removeStateData",
    value: function removeStateData(state, id) {
      var dataList = this.getData(state);
      var data = this.getDataById(state, id);

      if (data) {
        dataList.splice(dataList.indexOf(data), 1);
      }

      if (dataList && !dataList.length) {
        this.appState.removeState(state);
        this.appState.removeData(state);
      }
    }
    /**
     * Get the state data
     * @private
     * @param {string} state
     * @param {number} id
     * @return {Object|null}
     */

  }, {
    key: "getStateData",
    value: function getStateData(state, id) {
      return this.getDataById(state, id);
    }
  }, {
    key: "reset",
    value: function reset() {
      this.appState.reset();
    }
    /**
     * Search for all states and stop them all
     */

  }, {
    key: "stopAll",
    value: function stopAll() {
      this.stopStates(this.appState.getState());
    }
    /**
     * Search for all action states (Category ACTION) and stop them all
     */

  }, {
    key: "stopAllAction",
    value: function stopAllAction() {
      var _this3 = this;

      var states = this.appState.getState().filter(function (state) {
        return _this3.hasAnyState(_this3.getType(state)) && _this3.isActionState(state);
      });
      this.stopStates(states);
    }
    /**
     * @param {string[]} states
     */

  }, {
    key: "stopStates",
    value: function stopStates(states) {
      var _this4 = this;

      states.forEach(function (state) {
        var type = _this4.getType(state);

        type && _this4.stopNextState(type);
      });
    }
    /**
     * @return {StateManager}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!StateManager.instance) {
        StateManager.instance = new StateManager();
      }

      return StateManager.instance;
    }
  }]);
  return StateManager;
}();

(0, _defineProperty2["default"])(StateManager, "instance", null);
var _default = StateManager;
exports["default"] = _default;

},{"../core/History.js":72,"./AppState.js":325,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],327:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PrimitiveShape = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitData2 = _interopRequireDefault(require("../project/data/UnitData.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../component/internal/gui/property/GUIPropertyComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var Unit = /*#__PURE__*/function (_UnitData) {
  (0, _inherits2["default"])(Unit, _UnitData);

  var _super = _createSuper(Unit);

  function Unit(defaultComponentClasses) {
    var _this;

    (0, _classCallCheck2["default"])(this, Unit);
    _this = _super.call(this);

    _this.init(defaultComponentClasses || []);

    return _this;
  }
  /**
   * @param {Class<ComponentData>[]} defaultComponentClasses
   */


  (0, _createClass2["default"])(Unit, [{
    key: "init",
    value: function init(defaultComponentClasses) {
      var _this2 = this;

      defaultComponentClasses.forEach(function (componentClass) {
        return _this2.createComponent(componentClass);
      });
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isSelected",
    value: function isSelected() {
      return this.getComponent(_GUIPropertyComponent["default"]).isSelected();
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isVisible",
    value: function isVisible() {
      return this.getComponent(_GUIPropertyComponent["default"]).isVisible();
    }
  }, {
    key: "select",
    value: function select() {
      this.getComponent(_GUIPropertyComponent["default"]).setSelected(true);
    }
  }, {
    key: "unselect",
    value: function unselect() {
      this.getComponent(_GUIPropertyComponent["default"]).setSelected(false);
    }
  }, {
    key: "focus",
    value: function focus() {
      this.getComponent(_GUIPropertyComponent["default"]).setFocused(true);
    }
  }, {
    key: "unfocus",
    value: function unfocus() {
      this.getComponent(_GUIPropertyComponent["default"]).setFocused(false);
    }
  }]);
  return Unit;
}(_UnitData2["default"]);

exports["default"] = Unit;
var PrimitiveShape = {
  RECT: 'rect',
  CIRCLE: 'circle',
  LIGHT_POINT: 'light_point',
  LINE: 'line',
  ARROW_RIGHT: 'arrow_right',
  ARROW_DOWN: 'arrow_down',
  ARROW_RECT_RIGHT: 'arrow_rect_right',
  ARROW_RECT_DOWN: 'arrow_rect_down',
  GRID: 'grid',
  RECT_CROSS: 'rect_cross',
  NODE: 'node',
  CAMERA: 'camera'
};
exports.PrimitiveShape = PrimitiveShape;

},{"../component/internal/gui/property/GUIPropertyComponent.js":61,"../project/data/UnitData.js":300,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],328:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _BehaviorUnit2 = _interopRequireDefault(require("../type/BehaviorUnit.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var UnitBehaviorInstant = /*#__PURE__*/function (_BehaviorUnit) {
  (0, _inherits2["default"])(UnitBehaviorInstant, _BehaviorUnit);

  var _super = _createSuper(UnitBehaviorInstant);

  function UnitBehaviorInstant() {
    var _this;

    (0, _classCallCheck2["default"])(this, UnitBehaviorInstant);
    _this = _super.call(this);

    _this.setup();

    return _this;
  }
  /**
   * @abstract
   */


  (0, _createClass2["default"])(UnitBehaviorInstant, [{
    key: "setup",
    value: function setup() {
      throw new TypeError("".concat(this.constructor.name, ".setup must be implemented"));
    }
    /**
     * @abstract
     */

  }, {
    key: "instantiate",
    value: function instantiate() {
      throw new TypeError("".concat(this.constructor.name, ".instantiate must be implemented"));
    }
  }]);
  return UnitBehaviorInstant;
}(_BehaviorUnit2["default"]);

exports["default"] = UnitBehaviorInstant;

},{"../type/BehaviorUnit.js":350,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],329:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _EmptyUnit2 = _interopRequireDefault(require("../type/EmptyUnit.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var UnitInstant = /*#__PURE__*/function (_EmptyUnit) {
  (0, _inherits2["default"])(UnitInstant, _EmptyUnit);

  var _super = _createSuper(UnitInstant);

  function UnitInstant() {
    var _this;

    (0, _classCallCheck2["default"])(this, UnitInstant);
    _this = _super.call(this);

    _this.setup();

    return _this;
  }
  /**
   * @abstract
   */


  (0, _createClass2["default"])(UnitInstant, [{
    key: "setup",
    value: function setup() {
      throw new TypeError("".concat(this.constructor.name, ".setup must be implemented"));
    }
    /**
     * @abstract
     */

  }, {
    key: "instantiate",
    value: function instantiate() {
      throw new TypeError("".concat(this.constructor.name, ".instantiate must be implemented"));
    }
  }]);
  return UnitInstant;
}(_EmptyUnit2["default"]);

exports["default"] = UnitInstant;

},{"../type/EmptyUnit.js":351,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],330:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../UnitInstant.js"));

var _Vector = _interopRequireDefault(require("../../../../utils/Vector.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../component/internal/MeshComponent.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../../../../component/internal/gui/GUIPendingComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _StyleComponent = _interopRequireDefault(require("../../../../component/internal/StyleComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var TransformUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(TransformUnitInstant, _UnitInstant);

  var _super = _createSuper(TransformUnitInstant);

  function TransformUnitInstant() {
    (0, _classCallCheck2["default"])(this, TransformUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(TransformUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Size} size
     * @param {StyleUtil} style
     * @param {string} shape
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, size, style, shape, position) {
      this.createComponent(moveComponentClass);
      this.createComponent(_GUIPendingComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(new _Vector["default"](_.cloneDeep(position)));
      meshComponent.setShape(shape);
      this.getComponent(_StyleComponent["default"]).setStyle(style);
      this.getComponent(_MeshComponent["default"]).setStyle(style);
      this.getComponent(_MeshComponent["default"]).setSize(size);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(70);
    }
  }]);
  return TransformUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = TransformUnitInstant;

},{"../../../../component/internal/MeshComponent.js":48,"../../../../component/internal/StyleComponent.js":52,"../../../../component/internal/TransformComponent.js":53,"../../../../component/internal/gui/GUIPendingComponent.js":54,"../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../utils/Vector.js":370,"../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],331:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AssetUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(AssetUnitInstant, _UnitInstant);

  var _super = _createSuper(AssetUnitInstant);

  function AssetUnitInstant() {
    (0, _classCallCheck2["default"])(this, AssetUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(AssetUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {Asset} asset
     */
    value: function instantiate(position, asset) {
      this.setName(asset.getName());
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      meshComponent.setSize(_.cloneDeep(asset.getType().getData().size));
      meshComponent.setAssetId(asset.getId());
      meshComponent.setMaterial('default');
      transformComponent.setPosition(position);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(20);
    }
  }]);
  return AssetUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = AssetUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],332:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

var _CameraComponent = _interopRequireDefault(require("../../../../../component/internal/CameraComponent.js"));

var _StyleComponent = _interopRequireDefault(require("../../../../../component/internal/StyleComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var CameraUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(CameraUnitInstant, _UnitInstant);

  var _super = _createSuper(CameraUnitInstant);

  function CameraUnitInstant() {
    (0, _classCallCheck2["default"])(this, CameraUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(CameraUnitInstant, [{
    key: "instantiate",

    /**
     * @override
     * @param {Vector} position
     * @param {Size} size
     */
    value: function instantiate(position, size) {
      this.setName('Camera');
      var style = new _Style["default"]();
      style.setColor('#AAAAAA');
      style.setBorderSize(1);
      this.createComponent(_CameraComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var styleComponent = this.getComponent(_StyleComponent["default"]);
      styleComponent.setStyle(style);
      transformComponent.setPosition(position);
      meshComponent.setSize(size);
      meshComponent.setShape(_Unit.PrimitiveShape.CAMERA);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(40);
    }
  }]);
  return CameraUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = CameraUnitInstant;

},{"../../../../../component/internal/CameraComponent.js":42,"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/StyleComponent.js":52,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],333:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../../../../../component/internal/gui/GUIPendingComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var SelectionUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(SelectionUnitInstant, _UnitInstant);

  var _super = _createSuper(SelectionUnitInstant);

  function SelectionUnitInstant() {
    (0, _classCallCheck2["default"])(this, SelectionUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(SelectionUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {Size} size
     */
    value: function instantiate(position, size) {
      this.createComponent(_GUIPendingComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(position);
      meshComponent.setSize(size);
      var style = new _Style["default"]();
      style.setColor('#FFFFFF');
      style.setBorderSize(3);
      meshComponent.setStyle(style);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(60);
    }
  }]);
  return SelectionUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = SelectionUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/GUIPendingComponent.js":54,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],334:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _Unit = require("../../../../Unit.js");

var _NodeInputComponent = _interopRequireDefault(require("../../../../../component/internal/gui/node/NodeInputComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _StyleComponent = _interopRequireDefault(require("../../../../../component/internal/StyleComponent.js"));

var _GeometryHelper = _interopRequireDefault(require("../../../../../utils/GeometryHelper.js"));

var _NodeHelper = _interopRequireDefault(require("../../../../../utils/NodeHelper.js"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _ArrayHelper = _interopRequireDefault(require("../../../../../utils/ArrayHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GraphEdgeUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(GraphEdgeUnitInstant, _UnitInstant);

  var _super = _createSuper(GraphEdgeUnitInstant);

  function GraphEdgeUnitInstant() {
    (0, _classCallCheck2["default"])(this, GraphEdgeUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GraphEdgeUnitInstant, [{
    key: "instantiate",

    /**
     * @param {AScript} script
     * @param {NodeInput} nodeInput
     */
    value: function instantiate(script, nodeInput) {
      this.createComponent(_NodeInputComponent["default"]);
      this.update(script, nodeInput);
    }
    /**
     * @param {AScript} script
     * @param {NodeInput} nodeInput
     */

  }, {
    key: "update",
    value: function update(script, nodeInput) {
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      var nodeInputComponent = this.getComponent(_NodeInputComponent["default"]);
      var styleComponent = this.getComponent(_StyleComponent["default"]);
      var sourceNode = script.findNodeById(nodeInput.getSourceNodeId());
      var targetNode = script.findNodeById(nodeInput.getNodeId());

      if (sourceNode && targetNode) {
        var targetSourceNode = _NodeHelper["default"].getSourceNode(targetNode);

        var targetNodeInputIndex = targetSourceNode.getInputs().findIndex(function (input) {
          return input.getAttrName() === nodeInput.getTargetName();
        });

        var sourceNodeSize = _NodeHelper["default"].getNodeGUISize(sourceNode, script);

        var _NodeHelper$getNodeGU = _NodeHelper["default"].getNodeGUIOutput(sourceNode.getType(), sourceNodeSize),
            sourceOutputPosition = _NodeHelper$getNodeGU.position;

        var _NodeHelper$getNodeGU2 = _NodeHelper["default"].getNodeGUIInput(sourceNode.getType(), targetNodeInputIndex),
            targetInputPosition = _NodeHelper$getNodeGU2.position;

        var _NodeHelper$getNodeGU3 = _NodeHelper["default"].getNodeGUIProps(sourceNode.getType()),
            sizeInput = _NodeHelper$getNodeGU3.sizeInput;

        var centerInputSize = new _Vector["default"]({
          x: sizeInput / 2,
          y: sizeInput / 2
        });

        var sourcePosition = _Vector["default"].add(sourceNode.getPosition(), _Vector["default"].add(sourceOutputPosition, centerInputSize));

        var targetPosition = _Vector["default"].add(targetNode.getPosition(), _Vector["default"].add(targetInputPosition, centerInputSize));

        var _GeometryHelper$getRe = _GeometryHelper["default"].getRectByDistance(sourcePosition, targetPosition),
            position = _GeometryHelper$getRe.position,
            size = _GeometryHelper$getRe.size,
            vertices = _GeometryHelper$getRe.vertices;

        var style = new _Style["default"]();
        style.setColor('#c4c4c4');
        style.setBorderSize(2);
        nodeInputComponent.setNodeInputId(nodeInput.getId());
        styleComponent.setStyle(style);
        transformComponent.setPosition(position);

        if (meshComponent.getShape() !== _Unit.PrimitiveShape.LINE || !_ArrayHelper["default"].isEqual(meshComponent.getShapeVertices(), vertices) || meshComponent.getSize().getWidth() !== size.getWidth() || meshComponent.getSize().getHeight() !== size.getHeight()) {
          meshComponent.setShape(_Unit.PrimitiveShape.LINE);
          meshComponent.setShapeVertices(vertices);
          meshComponent.setSize(size);
          meshComponent.setGenerated(false);
        }
      }
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(60);
    }
  }]);
  return GraphEdgeUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = GraphEdgeUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/StyleComponent.js":52,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/node/NodeInputComponent.js":60,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../../../utils/ArrayHelper.js":352,"../../../../../utils/GeometryHelper.js":360,"../../../../../utils/NodeHelper.js":364,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],335:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _Unit = require("../../../../Unit.js");

var _NodeComponent = _interopRequireDefault(require("../../../../../component/internal/gui/node/NodeComponent.js"));

var _NodeHelper = _interopRequireDefault(require("../../../../../utils/NodeHelper.js"));

var _ScriptHelper = _interopRequireDefault(require("../../../../../utils/ScriptHelper.js"));

var _ArrayHelper = _interopRequireDefault(require("../../../../../utils/ArrayHelper.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GraphNodeUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(GraphNodeUnitInstant, _UnitInstant);

  var _super = _createSuper(GraphNodeUnitInstant);

  function GraphNodeUnitInstant() {
    (0, _classCallCheck2["default"])(this, GraphNodeUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GraphNodeUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {ANode} node
     * @param {AScript} script
     */
    value: function instantiate(position, node, script) {
      this.createComponent(_NodeComponent["default"]);
      this.update(position, node, script);
    }
    /**
     * @param {Vector} position
     * @param {ANode} node
     * @param {AScript} script
     */

  }, {
    key: "update",
    value: function update(position, node, script) {
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      var nodeComponent = this.getComponent(_NodeComponent["default"]);

      var nodeSource = _NodeHelper["default"].getSourceNode(node);

      var actualNodeInputs = nodeComponent.getInputs();

      var nodeInputs = _NodeHelper["default"].getNodeGUIInputs(node, script);

      var nodeSourceOutput = nodeSource.getOutput();

      var size = _NodeHelper["default"].getNodeGUISize(node, script);

      transformComponent.setPosition(position);
      meshComponent.setSize(size);
      meshComponent.setShape(_Unit.PrimitiveShape.NODE);
      nodeComponent.setTitle(_NodeHelper["default"].getNodeName(node));
      nodeComponent.setInputs(nodeInputs);
      nodeComponent.setType(_ScriptHelper["default"].getNodeType(node));
      nodeComponent.setNodeId(node.getId());

      if (nodeSourceOutput) {
        nodeComponent.setOutput(nodeSourceOutput.getAttrName());
      }

      if (!_ArrayHelper["default"].isEqual(actualNodeInputs, nodeInputs)) {
        meshComponent.setGenerated(false);
      }
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(60);
    }
  }]);
  return GraphNodeUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = GraphNodeUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/node/NodeComponent.js":59,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../utils/ArrayHelper.js":352,"../../../../../utils/NodeHelper.js":364,"../../../../../utils/ScriptHelper.js":367,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],336:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _GUIGridComponent = _interopRequireDefault(require("../../../../../component/internal/gui/grid/GUIGridComponent.js"));

var _Unit = require("../../../../Unit.js");

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../../../../../component/internal/gui/GUIPendingComponent.js"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _StyleComponent = _interopRequireDefault(require("../../../../../component/internal/StyleComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GridUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(GridUnitInstant, _UnitInstant);

  var _super = _createSuper(GridUnitInstant);

  function GridUnitInstant() {
    (0, _classCallCheck2["default"])(this, GridUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GridUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {Size} size
     */
    value: function instantiate(position, size) {
      this.createComponent(_GUIGridComponent["default"]);
      this.createComponent(_GUIPendingComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(new _Vector["default"](_.cloneDeep(position)));
      meshComponent.setShape(_Unit.PrimitiveShape.GRID);
      var style = new _Style["default"]();
      style.setColor('#3e3e3e');
      this.getComponent(_StyleComponent["default"]).setStyle(style);
      this.getComponent(_MeshComponent["default"]).setStyle(style);
      this.getComponent(_MeshComponent["default"]).setSize(size);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(100);
    }
  }]);
  return GridUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = GridUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/StyleComponent.js":52,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/GUIPendingComponent.js":54,"../../../../../component/internal/gui/grid/GUIGridComponent.js":56,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],337:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../../../../../component/internal/gui/GUIPendingComponent.js"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _GUIGridXComponent = _interopRequireDefault(require("../../../../../component/internal/gui/grid/GUIGridXComponent.js"));

var _Unit = require("../../../../Unit.js");

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GridXUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(GridXUnitInstant, _UnitInstant);

  var _super = _createSuper(GridXUnitInstant);

  function GridXUnitInstant() {
    (0, _classCallCheck2["default"])(this, GridXUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GridXUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {Size} size
     */
    value: function instantiate(position, size) {
      this.createComponent(_GUIGridXComponent["default"]);
      this.createComponent(_GUIPendingComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(new _Vector["default"](_.cloneDeep(position)));
      var style = new _Style["default"]();
      style.setColor(position.getY() === 0 ? '#FF0000' : '#555555');
      style.setBorderSize(3);
      meshComponent.setShape(_Unit.PrimitiveShape.LINE);
      meshComponent.setShapeVertices([new _Vector["default"](), new _Vector["default"]({
        x: size.getWidth(),
        y: 0
      })]);
      meshComponent.setSize(size);
      meshComponent.setStyle(style);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(100);
    }
  }]);
  return GridXUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = GridXUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/GUIPendingComponent.js":54,"../../../../../component/internal/gui/grid/GUIGridXComponent.js":57,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],338:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../../../../../component/internal/gui/GUIPendingComponent.js"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _Unit = require("../../../../Unit.js");

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _GUIGridYComponent = _interopRequireDefault(require("../../../../../component/internal/gui/grid/GUIGridYComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var GridYUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(GridYUnitInstant, _UnitInstant);

  var _super = _createSuper(GridYUnitInstant);

  function GridYUnitInstant() {
    (0, _classCallCheck2["default"])(this, GridYUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(GridYUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {Size} size
     */
    value: function instantiate(position, size) {
      this.createComponent(_GUIGridYComponent["default"]);
      this.createComponent(_GUIPendingComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(new _Vector["default"](_.cloneDeep(position)));
      var style = new _Style["default"]();
      style.setColor(position.getX() === 0 ? '#0000FF' : '#555555');
      style.setBorderSize(3);
      meshComponent.setShape(_Unit.PrimitiveShape.LINE);
      meshComponent.setShapeVertices([new _Vector["default"](), new _Vector["default"]({
        x: 0,
        y: size.getHeight()
      })]);
      meshComponent.setSize(size);
      meshComponent.setStyle(style);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(100);
    }
  }]);
  return GridYUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = GridYUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/GUIPendingComponent.js":54,"../../../../../component/internal/gui/grid/GUIGridYComponent.js":58,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],339:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _LightGlobalComponent = _interopRequireDefault(require("../../../../../component/internal/LightGlobalComponent.js"));

var _UnitBehaviorInstant2 = _interopRequireDefault(require("../../../UnitBehaviorInstant.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LightGlobalUnitInstant = /*#__PURE__*/function (_UnitBehaviorInstant) {
  (0, _inherits2["default"])(LightGlobalUnitInstant, _UnitBehaviorInstant);

  var _super = _createSuper(LightGlobalUnitInstant);

  function LightGlobalUnitInstant() {
    (0, _classCallCheck2["default"])(this, LightGlobalUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(LightGlobalUnitInstant, [{
    key: "instantiate",

    /**
     * @override
     */
    value: function instantiate() {
      this.setName('Light Global');
      this.createComponent(_LightGlobalComponent["default"]);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {}
  }]);
  return LightGlobalUnitInstant;
}(_UnitBehaviorInstant2["default"]);

exports["default"] = LightGlobalUnitInstant;

},{"../../../../../component/internal/LightGlobalComponent.js":46,"../../../UnitBehaviorInstant.js":328,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],340:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

var _StyleComponent = _interopRequireDefault(require("../../../../../component/internal/StyleComponent.js"));

var _LightPointComponent = _interopRequireDefault(require("../../../../../component/internal/LightPointComponent.js"));

var _ClientError = _interopRequireDefault(require("../../../../../exception/type/ClientError.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var LightPointUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(LightPointUnitInstant, _UnitInstant);

  var _super = _createSuper(LightPointUnitInstant);

  function LightPointUnitInstant() {
    (0, _classCallCheck2["default"])(this, LightPointUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(LightPointUnitInstant, [{
    key: "instantiate",

    /**
     * @override
     * @param {Vector} position
     * @param {Size} size
     * @param {string} type
     */
    value: function instantiate(position, size, type) {
      this.setName('Light Point');
      var style = new _Style["default"]();
      style.setColor('#a5af4b');
      style.setBorderSize(1);

      if (type === _Unit.PrimitiveShape.LIGHT_POINT) {
        this.createComponent(_LightPointComponent["default"]);
      } else {
        throw new _ClientError["default"]("".concat(this.constructor.name, ": Light type \"").concat(type, "\" not supported"));
      }

      var meshComponent = this.getComponent(_MeshComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var styleComponent = this.getComponent(_StyleComponent["default"]);
      styleComponent.setStyle(style);
      transformComponent.setPosition(position);
      meshComponent.setSize(size);
      meshComponent.setShape(type);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(40);
    }
  }]);
  return LightPointUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = LightPointUnitInstant;

},{"../../../../../component/internal/LightPointComponent.js":47,"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/StyleComponent.js":52,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../exception/type/ClientError.js":80,"../../../../../pobject/Style.js":269,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],341:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _TransformUnitInstant2 = _interopRequireDefault(require("../TransformUnitInstant.js"));

var _Size = _interopRequireDefault(require("../../../../../pobject/Size.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MoveFreeUnitInstant = /*#__PURE__*/function (_TransformUnitInstant) {
  (0, _inherits2["default"])(MoveFreeUnitInstant, _TransformUnitInstant);

  var _super = _createSuper(MoveFreeUnitInstant);

  function MoveFreeUnitInstant() {
    (0, _classCallCheck2["default"])(this, MoveFreeUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MoveFreeUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, position) {
      var size = new _Size["default"]({
        width: 100,
        height: 100
      });
      var style = new _Style["default"]();
      style.setColor('#CCCCCC');
      style.setBorderSize(2);
      var shape = _Unit.PrimitiveShape.CIRCLE;
      var movePosition = new _Vector["default"]();
      movePosition.setX(position.getX() - size.getWidth() / 2);
      movePosition.setY(position.getY() - size.getHeight() / 2);
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(MoveFreeUnitInstant.prototype), "instantiate", this).call(this, moveComponentClass, size, style, shape, movePosition);
    }
  }]);
  return MoveFreeUnitInstant;
}(_TransformUnitInstant2["default"]);

exports["default"] = MoveFreeUnitInstant;

},{"../../../../../pobject/Size.js":268,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../TransformUnitInstant.js":330,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],342:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _TransformUnitInstant2 = _interopRequireDefault(require("../TransformUnitInstant.js"));

var _Size = _interopRequireDefault(require("../../../../../pobject/Size.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MoveXUnitInstant = /*#__PURE__*/function (_TransformUnitInstant) {
  (0, _inherits2["default"])(MoveXUnitInstant, _TransformUnitInstant);

  var _super = _createSuper(MoveXUnitInstant);

  function MoveXUnitInstant() {
    (0, _classCallCheck2["default"])(this, MoveXUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MoveXUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, position) {
      var size = new _Size["default"]({
        width: 100,
        height: 30
      });
      var style = new _Style["default"]();
      style.setColor('#FF0000');
      style.setBorderSize(4);
      var shape = _Unit.PrimitiveShape.ARROW_RIGHT;
      var movePosition = new _Vector["default"]();
      movePosition.setX(position.getX());
      movePosition.setY(position.getY() - size.getHeight() / 2);
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(MoveXUnitInstant.prototype), "instantiate", this).call(this, moveComponentClass, size, style, shape, movePosition);
    }
  }]);
  return MoveXUnitInstant;
}(_TransformUnitInstant2["default"]);

exports["default"] = MoveXUnitInstant;

},{"../../../../../pobject/Size.js":268,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../TransformUnitInstant.js":330,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],343:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _TransformUnitInstant2 = _interopRequireDefault(require("../TransformUnitInstant.js"));

var _Size = _interopRequireDefault(require("../../../../../pobject/Size.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var MoveYUnitInstant = /*#__PURE__*/function (_TransformUnitInstant) {
  (0, _inherits2["default"])(MoveYUnitInstant, _TransformUnitInstant);

  var _super = _createSuper(MoveYUnitInstant);

  function MoveYUnitInstant() {
    (0, _classCallCheck2["default"])(this, MoveYUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(MoveYUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, position) {
      var size = new _Size["default"]({
        width: 30,
        height: 100
      });
      var style = new _Style["default"]();
      style.setColor('#0000FF');
      style.setBorderSize(4);
      var shape = _Unit.PrimitiveShape.ARROW_DOWN;
      var movePosition = new _Vector["default"]();
      movePosition.setX(position.getX() - size.getWidth() / 2);
      movePosition.setY(position.getY());
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(MoveYUnitInstant.prototype), "instantiate", this).call(this, moveComponentClass, size, style, shape, movePosition);
    }
  }]);
  return MoveYUnitInstant;
}(_TransformUnitInstant2["default"]);

exports["default"] = MoveYUnitInstant;

},{"../../../../../pobject/Size.js":268,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../TransformUnitInstant.js":330,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],344:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../../../../../component/internal/gui/GUIPendingComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _Unit = require("../../../../Unit.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var CircleUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(CircleUnitInstant, _UnitInstant);

  var _super = _createSuper(CircleUnitInstant);

  function CircleUnitInstant() {
    (0, _classCallCheck2["default"])(this, CircleUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(CircleUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {Size} size
     * @param {Style} style
     */
    value: function instantiate(position, size) {
      var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new _Style["default"]();
      this.createComponent(_GUIPendingComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(position);
      meshComponent.setSize(size);
      meshComponent.setShape(_Unit.PrimitiveShape.CIRCLE);
      meshComponent.setStyle(style);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(60);
    }
  }]);
  return CircleUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = CircleUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/GUIPendingComponent.js":54,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],345:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _UnitInstant2 = _interopRequireDefault(require("../../../UnitInstant.js"));

var _TransformComponent = _interopRequireDefault(require("../../../../../component/internal/TransformComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../../../../component/internal/MeshComponent.js"));

var _GUIPendingComponent = _interopRequireDefault(require("../../../../../component/internal/gui/GUIPendingComponent.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../../../../component/internal/gui/property/GUIPropertyComponent.js"));

var _Unit = require("../../../../Unit.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RectUnitInstant = /*#__PURE__*/function (_UnitInstant) {
  (0, _inherits2["default"])(RectUnitInstant, _UnitInstant);

  var _super = _createSuper(RectUnitInstant);

  function RectUnitInstant() {
    (0, _classCallCheck2["default"])(this, RectUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(RectUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Vector} position
     * @param {Size} size
     * @param {Style} style
     */
    value: function instantiate(position, size) {
      var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new _Style["default"]();
      this.createComponent(_GUIPendingComponent["default"]);
      var transformComponent = this.getComponent(_TransformComponent["default"]);
      var meshComponent = this.getComponent(_MeshComponent["default"]);
      transformComponent.setPosition(position);
      meshComponent.setSize(size);
      meshComponent.setShape(_Unit.PrimitiveShape.RECT);
      meshComponent.setStyle(style);
    }
    /**
     * @override
     */

  }, {
    key: "setup",
    value: function setup() {
      this.getComponent(_GUIPropertyComponent["default"]).setRank(60);
    }
  }]);
  return RectUnitInstant;
}(_UnitInstant2["default"]);

exports["default"] = RectUnitInstant;

},{"../../../../../component/internal/MeshComponent.js":48,"../../../../../component/internal/TransformComponent.js":53,"../../../../../component/internal/gui/GUIPendingComponent.js":54,"../../../../../component/internal/gui/property/GUIPropertyComponent.js":61,"../../../../../pobject/Style.js":269,"../../../../Unit.js":327,"../../../UnitInstant.js":329,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],346:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../../../../../pobject/Size.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

var _TransformUnitInstant2 = _interopRequireDefault(require("../TransformUnitInstant.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var RotateZUnitInstant = /*#__PURE__*/function (_TransformUnitInstant) {
  (0, _inherits2["default"])(RotateZUnitInstant, _TransformUnitInstant);

  var _super = _createSuper(RotateZUnitInstant);

  function RotateZUnitInstant() {
    (0, _classCallCheck2["default"])(this, RotateZUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(RotateZUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, position) {
      var size = new _Size["default"]({
        width: 100,
        height: 100
      });
      var style = new _Style["default"]();
      style.setColor('#00FF00');
      style.setBorderSize(2);
      var shape = _Unit.PrimitiveShape.CIRCLE;
      var movePosition = new _Vector["default"]();
      movePosition.setX(position.getX() - size.getWidth() / 2);
      movePosition.setY(position.getY() - size.getHeight() / 2);
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(RotateZUnitInstant.prototype), "instantiate", this).call(this, moveComponentClass, size, style, shape, movePosition);
    }
  }]);
  return RotateZUnitInstant;
}(_TransformUnitInstant2["default"]);

exports["default"] = RotateZUnitInstant;

},{"../../../../../pobject/Size.js":268,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../TransformUnitInstant.js":330,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],347:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../../../../../pobject/Size.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

var _TransformUnitInstant2 = _interopRequireDefault(require("../TransformUnitInstant.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScaleFreeUnitInstant = /*#__PURE__*/function (_TransformUnitInstant) {
  (0, _inherits2["default"])(ScaleFreeUnitInstant, _TransformUnitInstant);

  var _super = _createSuper(ScaleFreeUnitInstant);

  function ScaleFreeUnitInstant() {
    (0, _classCallCheck2["default"])(this, ScaleFreeUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ScaleFreeUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, position) {
      var size = new _Size["default"]({
        width: 120,
        height: 120
      });
      var style = new _Style["default"]();
      style.setColor('#CCCCCC');
      style.setBorderSize(2);
      var shape = _Unit.PrimitiveShape.CIRCLE;
      var movePosition = new _Vector["default"]();
      movePosition.setX(position.getX() - size.getWidth() / 2);
      movePosition.setY(position.getY() - size.getHeight() / 2);
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(ScaleFreeUnitInstant.prototype), "instantiate", this).call(this, moveComponentClass, size, style, shape, movePosition);
    }
  }]);
  return ScaleFreeUnitInstant;
}(_TransformUnitInstant2["default"]);

exports["default"] = ScaleFreeUnitInstant;

},{"../../../../../pobject/Size.js":268,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../TransformUnitInstant.js":330,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],348:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../../../../../pobject/Size.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

var _TransformUnitInstant2 = _interopRequireDefault(require("../TransformUnitInstant.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScaleXUnitInstant = /*#__PURE__*/function (_TransformUnitInstant) {
  (0, _inherits2["default"])(ScaleXUnitInstant, _TransformUnitInstant);

  var _super = _createSuper(ScaleXUnitInstant);

  function ScaleXUnitInstant() {
    (0, _classCallCheck2["default"])(this, ScaleXUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ScaleXUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, position) {
      var size = new _Size["default"]({
        width: 100,
        height: 30
      });
      var style = new _Style["default"]();
      style.setColor('#FF0000');
      style.setBorderSize(4);
      var shape = _Unit.PrimitiveShape.ARROW_RECT_RIGHT;
      var movePosition = new _Vector["default"]();
      movePosition.setX(position.getX());
      movePosition.setY(position.getY() - size.getHeight() / 2);
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(ScaleXUnitInstant.prototype), "instantiate", this).call(this, moveComponentClass, size, style, shape, movePosition);
    }
  }]);
  return ScaleXUnitInstant;
}(_TransformUnitInstant2["default"]);

exports["default"] = ScaleXUnitInstant;

},{"../../../../../pobject/Size.js":268,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../TransformUnitInstant.js":330,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],349:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Vector = _interopRequireDefault(require("../../../../../utils/Vector.js"));

var _Size = _interopRequireDefault(require("../../../../../pobject/Size.js"));

var _Style = _interopRequireDefault(require("../../../../../pobject/Style.js"));

var _Unit = require("../../../../Unit.js");

var _TransformUnitInstant2 = _interopRequireDefault(require("../TransformUnitInstant.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ScaleYUnitInstant = /*#__PURE__*/function (_TransformUnitInstant) {
  (0, _inherits2["default"])(ScaleYUnitInstant, _TransformUnitInstant);

  var _super = _createSuper(ScaleYUnitInstant);

  function ScaleYUnitInstant() {
    (0, _classCallCheck2["default"])(this, ScaleYUnitInstant);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(ScaleYUnitInstant, [{
    key: "instantiate",

    /**
     * @param {Class} moveComponentClass
     * @param {Vector} position
     */
    value: function instantiate(moveComponentClass, position) {
      var size = new _Size["default"]({
        width: 30,
        height: 100
      });
      var style = new _Style["default"]();
      style.setColor('#0000FF');
      style.setBorderSize(4);
      var shape = _Unit.PrimitiveShape.ARROW_RECT_DOWN;
      var movePosition = new _Vector["default"]();
      movePosition.setX(position.getX() - size.getWidth() / 2);
      movePosition.setY(position.getY());
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(ScaleYUnitInstant.prototype), "instantiate", this).call(this, moveComponentClass, size, style, shape, movePosition);
    }
  }]);
  return ScaleYUnitInstant;
}(_TransformUnitInstant2["default"]);

exports["default"] = ScaleYUnitInstant;

},{"../../../../../pobject/Size.js":268,"../../../../../pobject/Style.js":269,"../../../../../utils/Vector.js":370,"../../../../Unit.js":327,"../TransformUnitInstant.js":330,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],350:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Unit2 = _interopRequireDefault(require("../Unit.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../component/internal/gui/property/GUIPropertyComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var BehaviorUnit = /*#__PURE__*/function (_Unit) {
  (0, _inherits2["default"])(BehaviorUnit, _Unit);

  var _super = _createSuper(BehaviorUnit);

  function BehaviorUnit() {
    (0, _classCallCheck2["default"])(this, BehaviorUnit);
    return _super.call(this, [_GUIPropertyComponent["default"]]);
  }

  return BehaviorUnit;
}(_Unit2["default"]);

exports["default"] = BehaviorUnit;

},{"../../component/internal/gui/property/GUIPropertyComponent.js":61,"../Unit.js":327,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],351:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _Unit2 = _interopRequireDefault(require("../Unit.js"));

var _GUIPropertyComponent = _interopRequireDefault(require("../../component/internal/gui/property/GUIPropertyComponent.js"));

var _MeshComponent = _interopRequireDefault(require("../../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../../component/internal/TransformComponent.js"));

var _StyleComponent = _interopRequireDefault(require("../../component/internal/StyleComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var EmptyUnit = /*#__PURE__*/function (_Unit) {
  (0, _inherits2["default"])(EmptyUnit, _Unit);

  var _super = _createSuper(EmptyUnit);

  function EmptyUnit() {
    (0, _classCallCheck2["default"])(this, EmptyUnit);
    return _super.call(this, [_GUIPropertyComponent["default"], _MeshComponent["default"], _TransformComponent["default"], _StyleComponent["default"]]);
  }

  return EmptyUnit;
}(_Unit2["default"]);

exports["default"] = EmptyUnit;

},{"../../component/internal/MeshComponent.js":48,"../../component/internal/StyleComponent.js":52,"../../component/internal/TransformComponent.js":53,"../../component/internal/gui/property/GUIPropertyComponent.js":61,"../Unit.js":327,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],352:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _ObjectHelper = _interopRequireDefault(require("./ObjectHelper.js"));

var ArrayHelper = /*#__PURE__*/function () {
  function ArrayHelper() {
    (0, _classCallCheck2["default"])(this, ArrayHelper);
  }

  (0, _createClass2["default"])(ArrayHelper, null, [{
    key: "isEqual",

    /**
     * @param {Array} array1
     * @param {Array} array2
     * @param {Function} comparator
     * @return {boolean}
     */
    value: function isEqual(array1, array2) {
      var comparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

      if (array1.length !== array2.length) {
        return false;
      }

      for (var iArray1 in array1) {
        var element1 = array1[iArray1];
        var element2 = array2[iArray1];

        if (typeof comparator === 'function') {
          if (!comparator(element1, element2)) {
            return false;
          }
        } else if (_.isObject(element1) && _.isObject(element2)) {
          if (!_ObjectHelper["default"].isEqual(element1, element2)) {
            return false;
          }
        } else if (array1[iArray1] !== array2[iArray1]) {
          return false;
        }
      }

      return true;
    }
  }]);
  return ArrayHelper;
}();

exports["default"] = ArrayHelper;

},{"./ObjectHelper.js":365,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],353:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var CameraHelper = /*#__PURE__*/function () {
  function CameraHelper() {
    (0, _classCallCheck2["default"])(this, CameraHelper);
  }

  (0, _createClass2["default"])(CameraHelper, null, [{
    key: "follow",

    /**
     * @param {Camera} camera
     * @param {Vector} position
     */
    value: function follow(camera, position) {
      camera.getPosition().setX(position.getX());
      camera.getPosition().setY(position.getY());
    }
  }]);
  return CameraHelper;
}();

exports["default"] = CameraHelper;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],354:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

/**
 * @class {ClassHelper}
 */
var ClassHelper = /*#__PURE__*/function () {
  function ClassHelper() {
    (0, _classCallCheck2["default"])(this, ClassHelper);
  }

  (0, _createClass2["default"])(ClassHelper, null, [{
    key: "getSetter",

    /**
     * Get the setter name
     * @param {*} object
     * @param {string} key
     * @return {string}
     */
    value: function getSetter(object, key) {
      var setter;

      if (object.constructor === Array) {
        setter = 'push';
      } else {
        var prefix = 'set';
        setter = "".concat(prefix).concat(key.charAt(0).toUpperCase() + key.slice(1));

        if (typeof object[setter] !== 'function') {
          throw new _SystemError["default"]("".concat(setter, " must be implemented for ").concat(object.constructor.name));
        }
      }

      return setter;
    }
    /**
     * Get the getter name
     * @param {*} object
     * @param {string} key
     * @return {string}
     */

  }, {
    key: "getGetter",
    value: function getGetter(object, key) {
      var getter;

      if (object.constructor === Array) {
        getter = key;
      } else {
        var prefix = 'get';
        getter = "".concat(prefix).concat(key.charAt(0).toUpperCase() + key.slice(1));

        if (typeof object[getter] !== 'function') {
          if (object.constructor === String) {
            throw new _SystemError["default"]("".concat(key, ": Object was expected, but \"").concat(object, "\" was provided"));
          } else {
            throw new _SystemError["default"]("".concat(key, ": ").concat(getter, " must be implemented for ").concat(object.constructor.name));
          }
        }
      }

      return getter;
    }
  }]);
  return ClassHelper;
}();

var _default = ClassHelper;
exports["default"] = _default;

},{"../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],355:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * Color libs
 */
var Color = /*#__PURE__*/function () {
  function Color() {
    (0, _classCallCheck2["default"])(this, Color);
  }

  (0, _createClass2["default"])(Color, null, [{
    key: "fromArrayInt",

    /**
     * Generate color from integers
     */
    value: function fromArrayInt(ints) {
      var _int = ints.reduce(function (sum, num) {
        return sum + parseInt(num);
      }, 0);

      return (_int & 0x00FFFFFF).toString(16).toUpperCase();
    }
    /**
     * @param {string} rgb
     * @param {number} opacity
     * @return {string}
     */

  }, {
    key: "rgbToRgba",
    value: function rgbToRgba(rgb, opacity) {
      var colors = /^rgb\(([0-9 ]+),([0-9 ]+),([0-9 ]+)\)$/i.exec(rgb);
      return "rgba(".concat(colors[1], ",").concat(colors[2], ",").concat(colors[3], ",").concat(opacity, ")");
    }
    /**
     * @param {string} hex
     * @param {number} opacity
     * @return {{r: number, g: number, b: number, a: number}}
     */

  }, {
    key: "getColorRgba",
    value: function getColorRgba(hex, opacity) {
      var colors = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return colors ? {
        r: parseInt(colors[1], 16),
        g: parseInt(colors[2], 16),
        b: parseInt(colors[3], 16),
        a: opacity
      } : null;
    }
    /**
     * @param {string} hex
     * @param {number} opacity
     * @return {string|null}
     */

  }, {
    key: "hexToRgba",
    value: function hexToRgba(hex) {
      var opacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var colorRgba = this.getColorRgba(hex, opacity);

      if (colorRgba) {
        return "rgba(".concat(colorRgba.r, ", ").concat(colorRgba.g, ", ").concat(colorRgba.b, ", ").concat(colorRgba.a, ")");
      }

      return null;
    }
    /**
     * @param {string} hex
     * @param {number} opacity
     * @return {string|null}
     */

  }, {
    key: "hexToRgb",
    value: function hexToRgb(hex) {
      var opacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var colorRgba = this.getColorRgba(hex, opacity);

      if (colorRgba) {
        var normalizeRgba = {
          r: colorRgba.r / 255,
          g: colorRgba.g / 255,
          b: colorRgba.b / 255
        };
        var normalizeBg = {
          r: 0 / 255,
          g: 0 / 255,
          b: 0 / 255
        };
        var colorRgb = {
          r: Math.round(((1 - colorRgba.a) * normalizeBg.r + colorRgba.a * normalizeRgba.r) * 255),
          g: Math.round(((1 - colorRgba.a) * normalizeBg.g + colorRgba.a * normalizeRgba.g) * 255),
          b: Math.round(((1 - colorRgba.a) * normalizeBg.b + colorRgba.a * normalizeRgba.b) * 255)
        };
        return "rgb(".concat(colorRgb.r, ", ").concat(colorRgb.g, ", ").concat(colorRgb.b, ")");
      }

      return null;
    }
  }]);
  return Color;
}();

var _default = Color;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],356:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var CommonUtil = /*#__PURE__*/function () {
  function CommonUtil() {
    (0, _classCallCheck2["default"])(this, CommonUtil);
  }

  (0, _createClass2["default"])(CommonUtil, null, [{
    key: "setupName",

    /**
     * @param {Unit|Component} object
     * @param {string} initialName
     * @param {Function} setName
     * @param {Function} findByName
     */
    value: function setupName(object, initialName, setName, findByName) {
      var name = initialName;
      var existUnit = null;
      var iDuplicate = 0;

      do {
        setName(name);
        existUnit = findByName(name);

        if (existUnit) {
          iDuplicate++;
          name = "".concat(initialName, " (").concat(iDuplicate, ")");
        }
      } while (existUnit);
    }
  }]);
  return CommonUtil;
}();

exports["default"] = CommonUtil;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],357:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _DataSchema = _interopRequireDefault(require("../project/data/DataSchema.js"));

var DataHelper = /*#__PURE__*/function () {
  function DataHelper() {
    (0, _classCallCheck2["default"])(this, DataHelper);
  }

  (0, _createClass2["default"])(DataHelper, null, [{
    key: "validate",

    /**
     * @param {Object|Array|Data} value
     * @param {Data|Function} type
     * @param {boolean} forGame
     * @return {Object|Array}
     */
    value: function validate(value, type, forGame) {
      var dataValidated;

      if (value) {
        if (value.dataId) {
          // If dataId is present, validate data for deserialization
          dataValidated = _DataSchema["default"].newInstance(value.dataId, type);
        } else if (!_DataSchema["default"].isExcluded(value.constructor, forGame)) {
          // else for serialization
          if (value instanceof type) {
            dataValidated = new type();
            dataValidated.setDataId(_DataSchema["default"].getId(value.constructor));
          }
        }
      }

      return dataValidated;
    }
  }]);
  return DataHelper;
}();

exports["default"] = DataHelper;

},{"../project/data/DataSchema.js":285,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],358:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _DynamicAttribute = _interopRequireDefault(require("../pobject/DynamicAttribute.js"));

var _AttributeType = require("../pobject/AttributeType.js");

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _Layout = _interopRequireDefault(require("../layout/Layout.js"));

var _Component = _interopRequireDefault(require("../component/Component.js"));

var DynamicAttributeHelper = /*#__PURE__*/function () {
  function DynamicAttributeHelper() {
    (0, _classCallCheck2["default"])(this, DynamicAttributeHelper);
  }

  (0, _createClass2["default"])(DynamicAttributeHelper, null, [{
    key: "create",

    /**
     * @param {string} name
     * @param {number} type
     * @param {*} defaultValue
     * @param {*} rule
     */
    value: function create(name, type) {
      var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var rule = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      return new _DynamicAttribute["default"](name, type, defaultValue, rule);
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @param {number} type
     * @param {*} defaultValue
     * @param {*} rule
     */

  }, {
    key: "add",
    value: function add(target, name, type) {
      var defaultValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      var rule = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;

      if (!this.tryGet(target, name)) {
        target.push(this.create(name, type, defaultValue, rule));
      } else {
        throw new _ClientError["default"]("Attribute ".concat(name, " already defined"));
      }
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @return {DynamicAttribute}
     */

  }, {
    key: "get",
    value: function get(target, name) {
      var componentAttribute = this.tryGet(target, name);

      if (!componentAttribute) {
        throw new _ClientError["default"]("Attribute ".concat(name, " not supported"));
      }

      return componentAttribute;
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @return {DynamicAttribute}
     */

  }, {
    key: "tryGet",
    value: function tryGet(target, name) {
      return target.find(function (attribute) {
        return attribute.getAttrName() === name;
      });
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @param {*} value
     */

  }, {
    key: "setValue",
    value: function setValue(target, name, value) {
      var attribute = this.get(target, name);
      attribute.setAttrValue(value);
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "getValue",
    value: function getValue(target, name) {
      return this.get(target, name).getAttrValue();
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @return {number}
     */

  }, {
    key: "getType",
    value: function getType(target, name) {
      return this.get(target, name).getAttrType();
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @return {*}
     */

  }, {
    key: "getRule",
    value: function getRule(target, name) {
      return this.get(target, name).getAttrRule();
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @return {number}
     */

  }, {
    key: "getId",
    value: function getId(target, name) {
      return this.get(target, name).getId();
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {number} id
     * @return {DynamicAttribute}
     */

  }, {
    key: "findById",
    value: function findById(target, id) {
      return target.find(function (attribute) {
        return attribute.getId() === id;
      });
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {string} name
     * @return {DynamicAttribute}
     */

  }, {
    key: "findByName",
    value: function findByName(target, name) {
      return target.find(function (attribute) {
        return attribute.getAttrName() === name;
      });
    }
    /**
     * @param {DynamicAttribute[]} target
     * @param {number} index
     * @return {DynamicAttribute}
     */

  }, {
    key: "findByIndex",
    value: function findByIndex(target, index) {
      return target.find(function (attribute, attrIndex) {
        return attrIndex === index;
      });
    }
    /**
     * @param {string|number|boolean} value
     * @return {number}
     */

  }, {
    key: "findTypeOfValue",
    value: function findTypeOfValue(value) {
      if (_.isString(value)) {
        return _AttributeType.TYPES.STRING;
      } else if (_.isNumber(value)) {
        return _AttributeType.TYPES.NUMBER;
      } else if (_.isBoolean(value)) {
        return _AttributeType.TYPES.BOOLEAN;
      }

      return _AttributeType.TYPES.ANY;
    }
    /**
     * @param {World} world
     * @param {UnitSelector} unitSelector
     * @param {DynamicAttribute} attribute
     * @param {boolean} isListInstances
     * @param {string|null} pBindName
     * @return {FormField[]}
     */

  }, {
    key: "getFormFields",
    value: function getFormFields(world, unitSelector, attribute) {
      var isListInstances = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
      var pBindName = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;
      var bindName = pBindName || attribute.getAttrName();
      var dynamicAttribute = !pBindName;
      var formField;

      if (attribute.getAttrType() === _AttributeType.TYPES.UNIT) {
        if (isListInstances) {
          var units = world.getUnitManager().getUnits().map(function (unit) {
            return {
              value: unit.getId(),
              label: unit.getName()
            };
          });
          formField = [{
            bind: bindName,
            label: attribute.getAttrName(),
            type: _Layout["default"].form.DROPDOWN,
            list: units,
            dynamicAttribute: dynamicAttribute
          }];
        } else {
          formField = [{
            bind: bindName,
            label: "".concat(attribute.getAttrName(), " (Self) "),
            type: _Layout["default"].form.CHECKBOX,
            dynamicAttribute: dynamicAttribute
          }];
        }
      } else if (attribute.getAttrType() === _AttributeType.TYPES.COMPONENT) {
        var components = world.getComponentRegistry().getInstances().map(function (component) {
          return {
            value: component.getName(),
            label: component.getName()
          };
        });
        formField = [{
          bind: bindName,
          label: attribute.getAttrName(),
          type: _Layout["default"].form.DROPDOWN,
          list: components,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.MATERIAL) {
        var materials = world.getMaterialRegistry().getInstances().map(function (material) {
          return {
            value: material.getName(),
            label: material.getName()
          };
        });
        formField = [{
          bind: bindName,
          label: attribute.getAttrName(),
          type: _Layout["default"].form.DROPDOWN,
          list: materials,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.COMPONENT_INSTANCE && isListInstances) {
        var selectedUnit = unitSelector.getFirstSelected(world);
        var componentInstances = selectedUnit.getComponents().filter(function (component) {
          return !component.isHidden() && !component.isUnique();
        }).map(function (component) {
          return {
            value: component.getId(),
            label: component.getName()
          };
        });
        formField = [{
          bind: bindName,
          label: attribute.getAttrName(),
          type: _Layout["default"].form.DROPDOWN,
          list: componentInstances,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.MASK_GROUP_INSTANCE && isListInstances) {
        var listMaskGroups = world.getPreference().getMaskGroup().getMasks().map(function (maskGroup) {
          return {
            value: maskGroup.getId(),
            label: maskGroup.getName()
          };
        });
        formField = [{
          bind: bindName,
          label: attribute.getAttrName(),
          type: _Layout["default"].form.DROPDOWN,
          list: listMaskGroups,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.AUDIO && isListInstances) {
        var listAudios = world.getAssetsManager().getAudioAssets().map(function (audio) {
          return {
            value: audio.getId(),
            label: audio.getName()
          };
        });
        formField = [{
          bind: bindName,
          label: attribute.getAttrName(),
          type: _Layout["default"].form.DROPDOWN,
          list: listAudios,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.BOOLEAN && isListInstances) {
        formField = [{
          bind: bindName,
          label: "".concat(attribute.getAttrName(), " "),
          type: _Layout["default"].form.CHECKBOX,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.COLOR && isListInstances) {
        formField = [{
          bind: bindName,
          label: "".concat(attribute.getAttrName(), " "),
          type: _Layout["default"].form.COLOR,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.RANGE && isListInstances) {
        var rule = attribute.getAttrRule();
        formField = [{
          bind: bindName,
          label: "".concat(attribute.getAttrName(), " "),
          type: _Layout["default"].form.RANGE,
          options: {
            min: rule[0],
            max: rule[1],
            step: rule[2]
          },
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.VECTOR && isListInstances) {
        formField = [{
          bind: "".concat(bindName, ".x"),
          label: "".concat(attribute.getAttrName(), " X"),
          type: _Layout["default"].form.NUMBER,
          dynamicAttribute: dynamicAttribute
        }, {
          bind: "".concat(bindName, ".y"),
          label: "".concat(attribute.getAttrName(), " Y"),
          type: _Layout["default"].form.NUMBER,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.SIZE && isListInstances) {
        formField = [{
          bind: "".concat(bindName, ".width"),
          label: "".concat(attribute.getAttrName(), " Width"),
          type: _Layout["default"].form.NUMBER,
          dynamicAttribute: dynamicAttribute
        }, {
          bind: "".concat(bindName, ".height"),
          label: "".concat(attribute.getAttrName(), " Height"),
          type: _Layout["default"].form.NUMBER,
          dynamicAttribute: dynamicAttribute
        }];
      } else if (attribute.getAttrType() === _AttributeType.TYPES.NUMBER && isListInstances) {
        formField = [{
          bind: bindName,
          label: attribute.getAttrName(),
          type: _Layout["default"].form.NUMBER,
          dynamicAttribute: dynamicAttribute
        }];
      } else {
        formField = [{
          bind: bindName,
          label: attribute.getAttrName(),
          type: _Layout["default"].form.TEXT,
          dynamicAttribute: dynamicAttribute
        }];
      }

      return formField;
    }
    /**
     * @param {*} value
     * @param {string} type
     * @param {World} world
     * @param {Unit} unit
     * @param {ScriptComponent} scriptComponent
     * @return {*}
     */

  }, {
    key: "getValueByType",
    value: function getValueByType(value, type, world, unit, scriptComponent) {
      var newValue = value;

      switch (type) {
        case _AttributeType.TYPES.UNIT:
          newValue = world.findUnitById(parseInt(value));

          if (!newValue) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": Unit \"").concat(value, "\" not found"));
          }

          break;

        case _AttributeType.TYPES.ANIMATION:
          newValue = world.getAnimationManager().findById(parseInt(value));

          if (!newValue) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": Animation \"").concat(value, "\" not found"));
          }

          break;

        case _AttributeType.TYPES.COMPONENT:
          var component = world.getComponentRegistry().getInstance(value);

          if (!component || !component.constructor) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": Component \"").concat(value, "\" not found"));
          }

          newValue = component.constructor;
          break;

        case _AttributeType.TYPES.COMPONENT_INSTANCE:
          var componentInstance = value === '[self]' ? scriptComponent : world.getUnitManager().findComponentById(parseInt(value));

          if (!componentInstance) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": Component Instance \"").concat(value, "\" not found"));
          }

          newValue = componentInstance;
          break;

        case _AttributeType.TYPES.MASK_GROUP_INSTANCE:
          var maskGroupInstance = world.getPreference().getMaskGroup().find(parseInt(value));

          if (!maskGroupInstance) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": Mask Group Instance \"").concat(value, "\" not found"));
          }

          newValue = maskGroupInstance;
          break;

        case _AttributeType.TYPES.AUDIO:
          var audio = world.getAssetsManager().findAssetAudioById(value);

          if (!audio) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": Audio \"").concat(value, "\" not found"));
          }

          newValue = audio.getType();
          break;

        case _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.ANY:
          if (!_.isArray(value)) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": \"").concat(value, "\" is not an array"));
          }

          newValue = value;
          break;

        case _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.COMPONENT_INSTANCE:
          if (!_.isArray(value) || !value.every(function (eArray) {
            return eArray instanceof _Component["default"];
          })) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": \"").concat(value, "\" is not an array"));
          }

          newValue = value;
          break;

        case _AttributeType.TYPES.ARRAY | _AttributeType.TYPES.DYNAMIC_ATTRIBUTE:
          if (!_.isArray(value) || !value.every(function (eArray) {
            return eArray instanceof _DynamicAttribute["default"];
          })) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": \"").concat(value, "\" is not an array of DynamicAttribute"));
          }

          newValue = value;
          break;

        case _AttributeType.TYPES.DYNAMIC_ATTRIBUTE:
          if (!(value instanceof _DynamicAttribute["default"])) {
            throw new _ClientError["default"]("".concat(this.constructor.name, ": \"").concat(value, "\" is not a DynamicAttribute"));
          }

          newValue = value;
          break;

        case _AttributeType.TYPES.NUMBER:
          newValue = parseFloat(value);
          break;

        case _AttributeType.TYPES.RANGE:
          newValue = parseFloat(value);
          break;

        case _AttributeType.TYPES.BOOLEAN:
          newValue = value === 'true' || value === '1' || value === true;
          break;
      }

      return newValue;
    }
  }]);
  return DynamicAttributeHelper;
}();

exports["default"] = DynamicAttributeHelper;

},{"../component/Component.js":40,"../exception/type/ClientError.js":80,"../layout/Layout.js":224,"../pobject/AttributeType.js":263,"../pobject/DynamicAttribute.js":265,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],359:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

/**
 * @class {FileHelper}
 */
var FileHelper = /*#__PURE__*/function () {
  function FileHelper() {
    (0, _classCallCheck2["default"])(this, FileHelper);
  }

  (0, _createClass2["default"])(FileHelper, null, [{
    key: "save",

    /**
     * @param {string} content
     * @param {string} type
     * @param {string} filename
     */
    value: function save(content, type) {
      var filename = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
      var blob = content instanceof Blob ? content : new Blob([content], {
        type: type
      });
      var a = document.createElement('a');
      a.download = filename || 'webEngine';
      a.href = window.URL.createObjectURL(blob);
      a.click();
    }
    /**
     * @param {Blob} file
     * @param {string} type
     */

  }, {
    key: "load",
    value: function load(file, type) {
      if (this.validate(file, type)) {
        return new Promise(function (resolve, reject) {
          var reader = new FileReader();

          reader.onload = function () {
            resolve(reader.result);
          };

          reader.onerror = reject;
          reader.readAsText(file);
        });
      } else {
        throw new _ClientError["default"]("Cannot load project (format not supported \"".concat(file.type, "\")"));
      }
    }
    /**
     * @param {Blob} file
     * @param {string} type
     * @return {boolean}
     */

  }, {
    key: "validate",
    value: function validate(file, type) {
      var fileType = file.type;
      return fileType === type;
    }
    /**
     * @param {string} fileId
     * @return {File[]}
     */

  }, {
    key: "openFileUpload",
    value: function openFileUpload(fileId) {
      var fileInput = document.getElementById(fileId);

      if (!fileInput) {
        fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.id = fileId;
        fileInput.multiple = true;
        document.body.appendChild(fileInput);
        fileInput.click();
      }

      return fileInput.files;
    }
    /**
     * @param {string} fileId
     */

  }, {
    key: "removeFileUpload",
    value: function removeFileUpload(fileId) {
      document.body.removeChild(document.getElementById(fileId));
    }
    /**
     * @param {string} name
     * @return {string}
     */

  }, {
    key: "getFilename",
    value: function getFilename(name) {
      if (name) {
        return name.replace(/(.+)(\.[a-zA-Z]+)/, '$1');
      }

      return '';
    }
  }]);
  return FileHelper;
}();

(0, _defineProperty2["default"])(FileHelper, "type", {
  XML: 'text/xml',
  JS: 'text/javascript',
  Json: 'application/json',
  BIN: 'application/octet-binary;charset=utf-8',
  ZIP: 'application/zip',
  IMG_JPEG: 'image/jpeg',
  IMG_PNG: 'image/png',
  WAV: 'audio/wav',
  MPEG: 'audio/mpeg'
});
var _default = FileHelper;
exports["default"] = _default;

},{"../exception/type/ClientError.js":80,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/interopRequireDefault":12}],360:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var _Vector = _interopRequireDefault(require("./Vector.js"));

var _Vertex = _interopRequireDefault(require("./Vertex.js"));

var GeometryHelper = /*#__PURE__*/function () {
  function GeometryHelper() {
    (0, _classCallCheck2["default"])(this, GeometryHelper);
  }

  (0, _createClass2["default"])(GeometryHelper, null, [{
    key: "getLargestRectangle",

    /**
     * Calculate the largest rectangle for given rotation and size
     * @param {number} angleRadian
     * @param {Size} size
     */
    value: function getLargestRectangle(angleRadian, size) {
      var cosA = Math.cos(angleRadian || 0);
      var sinA = Math.sin(angleRadian || 0);
      var points = [{
        x: 0,
        y: 0
      }, {
        x: size.width,
        y: 0
      }, {
        x: size.width,
        y: size.height
      }, {
        x: 0,
        y: size.height
      }];
      var rotatedPoints = points.map(function (_ref) {
        var x = _ref.x,
            y = _ref.y;
        return {
          x: x * cosA - y * sinA,
          y: x * sinA + y * cosA
        };
      });
      var minX = rotatedPoints.reduce(function (mnX, current) {
        return mnX > current.x && current.x || mnX;
      }, rotatedPoints[0].x);
      var maxX = rotatedPoints.reduce(function (mxX, current) {
        return mxX < current.x && current.x || mxX;
      }, rotatedPoints[0].x);
      var minY = rotatedPoints.reduce(function (mnY, current) {
        return mnY > current.y && current.y || mnY;
      }, rotatedPoints[0].y);
      var maxY = rotatedPoints.reduce(function (mxY, current) {
        return mxY < current.y && current.y || mxY;
      }, rotatedPoints[0].y);
      return new _Size["default"]({
        width: Math.ceil(maxX - minX),
        height: Math.ceil(maxY - minY)
      });
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {{position: Vector, size: Size, vertices: Vector[]}}
     */

  }, {
    key: "getRectByDistance",
    value: function getRectByDistance(vectorA, vectorB) {
      var position = new _Vector["default"]();
      var dX = vectorB.getX() - vectorA.getX();
      var dY = vectorB.getY() - vectorA.getY();
      var width = Math.abs(dX);
      var height = Math.abs(dY);
      var size = new _Size["default"]({
        width: width,
        height: height
      });
      var vertices = [new _Vector["default"](), new _Vector["default"]()];

      if (dX < 0) {
        position.setX(vectorB.getX());
        vertices[0].setX(width);
        vertices[1].setX(0);
      } else {
        position.setX(vectorA.getX());
        vertices[0].setX(0);
        vertices[1].setX(width);
      }

      if (dY < 0) {
        position.setY(vectorB.getY());
        vertices[0].setY(height);
        vertices[1].setY(0);
      } else {
        position.setY(vectorA.getY());
        vertices[0].setY(0);
        vertices[1].setY(height);
      }

      return {
        position: position,
        size: size,
        vertices: vertices
      };
    }
    /**
     * @param {Vector} position
     * @param {number} rotation
     * @param {Size} size
     * @return {Vector}
     */

  }, {
    key: "toCenterPosition",
    value: function toCenterPosition(position, rotation, size) {
      var center = this.getLargeCenterFromRotationSize(rotation, size);
      return new _Vector["default"]({
        x: position.x + center.x,
        y: position.y + center.y
      });
    }
    /**
     * @param {Vector} position
     * @param {number} rotation
     * @param {Size} size
     * @return {Vector}
     */

  }, {
    key: "fromCenterPosition",
    value: function fromCenterPosition(position, rotation, size) {
      var center = this.getLargeCenterFromRotationSize(rotation, size);
      return new _Vector["default"]({
        x: position.x - center.x,
        y: position.y - center.y
      });
    }
    /**
     * @param {number} rotation
     * @param {Size} size
     * @return {Vector}
     */

  }, {
    key: "getLargeCenterFromRotationSize",
    value: function getLargeCenterFromRotationSize(rotation, size) {
      var gSize = this.getLargestRectangle(rotation, size);
      return new _Vector["default"]({
        x: gSize.width / 2,
        y: gSize.height / 2
      });
    }
    /**
     * @param {Size} size
     * @return {Vector[]}
     */

  }, {
    key: "loadVertices",
    value: function loadVertices(size) {
      var width = size.width,
          height = size.height;
      return [new _Vector["default"]({
        x: 0,
        y: 0
      }), new _Vector["default"]({
        x: width,
        y: 0
      }), new _Vector["default"]({
        x: width,
        y: height
      }), new _Vector["default"]({
        x: 0,
        y: height
      })];
    }
    /**
     * @param {Vector[]} vertices
     * @param {number} rotation
     * @param {Size} size
     * @param {Vector} rotateCenter
     * @return {Vector[]}
     */

  }, {
    key: "rotateVertices",
    value: function rotateVertices(vertices, rotation, size) {
      var rotateCenter = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new _Vector["default"]();

      var _this$getLargestRecta = this.getLargestRectangle(rotation || 0, size),
          mWidth = _this$getLargestRecta.width,
          mHeight = _this$getLargestRecta.height;

      var center = new _Vector["default"]({
        x: size.width / 2,
        y: size.height / 2
      });
      var mCenter = new _Vector["default"]({
        x: mWidth / 2,
        y: mHeight / 2
      });
      var newVertices = vertices;
      newVertices = _Vertex["default"].translate(newVertices, center, -1);
      newVertices = _Vertex["default"].rotate(newVertices, rotation || 0, rotateCenter);
      newVertices = _Vertex["default"].translate(newVertices, mCenter);
      return newVertices;
    }
  }]);
  return GeometryHelper;
}();

exports["default"] = GeometryHelper;

},{"../pobject/Size.js":268,"./Vector.js":370,"./Vertex.js":371,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],361:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AREA = exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Constant = require("../core/Constant.js");

var _Vector = _interopRequireDefault(require("./Vector.js"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var ImageHelper = /*#__PURE__*/function () {
  function ImageHelper() {
    (0, _classCallCheck2["default"])(this, ImageHelper);
  }

  (0, _createClass2["default"])(ImageHelper, null, [{
    key: "getDataURL",

    /**
     * @param {OffscreenCanvas} canvas
     * @param {Size} size
     * @return {string}
     */
    value: function getDataURL(canvas, size) {
      var canvasEl = this.resizeCanvasBySize(canvas, size, false);
      return canvasEl.toDataURL('image/png');
    }
    /**
     * @param {OffscreenCanvas} canvas
     * @param {Size} size
     * @param {boolean} offscreen
     * @return {OffscreenCanvas}
     */

  }, {
    key: "resizeCanvasBySize",
    value: function resizeCanvasBySize(canvas, size) {
      var offscreen = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var sizeWidth = size.width,
          sizeHeight = size.height;
      var isWidthGtHeight = canvas.width > canvas.height;
      var coefResize = isWidthGtHeight ? sizeWidth / canvas.width : sizeHeight / canvas.height;
      var width = isWidthGtHeight ? sizeWidth : canvas.width * coefResize;
      var height = isWidthGtHeight ? canvas.height * coefResize : sizeHeight;
      var canvasEl;

      if (offscreen) {
        canvasEl = new OffscreenCanvas(width, height);
      } else {
        canvasEl = document.createElement('canvas');
        canvasEl.width = width;
        canvasEl.height = height;
      }

      var contextEl = canvasEl.getContext(_Constant.CANVAS_CONTEXT_TYPE);
      contextEl.drawImage(canvas, 0, 0, width, height);
      return canvasEl;
    }
    /**
     * @param {OffscreenCanvas} canvas
     * @param {Vector} scale
     * @return {OffscreenCanvas}
     */

  }, {
    key: "scaleCanvas",
    value: function scaleCanvas(canvas, scale) {
      var width = canvas.width,
          height = canvas.height;
      var canvasWidth = width * Math.abs(scale.getX());
      var canvasHeight = height * Math.abs(scale.getY());
      var canvasEl = new OffscreenCanvas(canvasWidth, canvasHeight);
      var contextEl = canvasEl.getContext(_Constant.CANVAS_CONTEXT_TYPE);
      contextEl.translate(canvasWidth / 2, canvasHeight / 2);
      contextEl.scale(scale.getX(), scale.getY());
      contextEl.translate(-width / 2, -height / 2);
      contextEl.drawImage(canvas, 0, 0, width, height);
      return canvasEl;
    }
    /**
     * @param {OffscreenCanvas} canvas
     * @param {Vector} pointA
     * @param {Vector} pointB
     * @param {Vector} scale
     * @return {OffscreenCanvas}
     */

  }, {
    key: "cropCanvas",
    value: function cropCanvas(canvas, pointA, pointB) {
      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
      var width = pointB.getX() - pointA.getX();
      var height = pointB.getY() - pointA.getY();

      if (width > 0 && height > 0) {
        var canvasEl = new OffscreenCanvas(width, height);
        var contextEl = canvasEl.getContext(_Constant.CANVAS_CONTEXT_TYPE);
        contextEl.drawImage(canvas, pointA.getX(), pointA.getY(), width, height, 0, 0, width, height);

        if (scale) {
          return this.scaleCanvas(canvasEl, scale);
        } else {
          return canvasEl;
        }
      }

      return null;
    }
    /**
     * @param {OffscreenCanvas} canvas
     * @param {Size} size
     * @param {Vector} imageScale
     * @param {Vector} imagePosition
     * @param {Vector} minPosition
     * @param {Vector} maxPosition
     * @param {{pointA: {area: AREA, position: Vector}, pointB: {area: AREA, position: Vector}}} part
     * @return {OffscreenCanvas}
     */

  }, {
    key: "generateImagePartRepeat",
    value: function generateImagePartRepeat(canvas, size, imageScale, imagePosition, minPosition, maxPosition, part) {
      var pointA = part.pointA,
          pointB = part.pointB;
      var canvasCrop = this.cropCanvas(canvas, minPosition, maxPosition, imageScale);
      var repeatPointA = this.getImagePositionFromPoint(pointA, size, imageScale);
      var repeatPointB = this.getImagePositionFromPoint(pointB, size, imageScale);
      var sizePartRepeated = new _Size["default"]({
        width: repeatPointB.getX() - repeatPointA.getX(),
        height: repeatPointB.getY() - repeatPointA.getY()
      });
      var canvasRepeat = canvasCrop ? new OffscreenCanvas(sizePartRepeated.getWidth(), sizePartRepeated.getHeight()) : null;

      if (canvasRepeat) {
        var contextRepeat = canvasRepeat.getContext(_Constant.CANVAS_CONTEXT_TYPE);
        contextRepeat.fillStyle = contextRepeat.createPattern(canvasCrop, 'repeat');
        contextRepeat.rect(0, 0, sizePartRepeated.getWidth(), sizePartRepeated.getHeight());
        contextRepeat.translate(imagePosition.getX(), imagePosition.getY());
        contextRepeat.fill();
        contextRepeat.translate(-imagePosition.getX(), -imagePosition.getY());
      }

      return canvasRepeat;
    }
    /**
     * @param {{area: AREA, position: Vector}} point
     * @param {Size} size
     * @param {Vector} scale
     * @return {Vector}
     */

  }, {
    key: "getImagePositionFromPoint",
    value: function getImagePositionFromPoint(point, size) {
      var scale = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new _Vector["default"]({
        x: 1,
        y: 1
      });
      var area = point.area,
          position = point.position;

      var imagePosition = _Vector["default"].linearMultiply(position, scale);

      var isBottom = area & AREA.BOTTOM;
      var isRight = area & AREA.RIGHT;

      if (isBottom) {
        imagePosition.setY(size.height - imagePosition.getY());
      }

      if (isRight) {
        imagePosition.setX(size.width - imagePosition.getX());
      }

      return imagePosition;
    }
    /**
     * @todo need refactoring
     * @param {OffscreenCanvas} canvas
     * @param {Size} size
     * @param {Vector} imageScale
     * @param {Vector} imagePosition
     * @param {Vector} imageRepeatAreaMin
     * @param {Vector} imageRepeatAreaMax
     * @return {OffscreenCanvas}
     */

  }, {
    key: "generateImageRepeat",
    value: function generateImageRepeat(canvas, size, imageScale, imagePosition, imageRepeatAreaMin, imageRepeatAreaMax) {
      var canvasWidth = canvas.width,
          canvasHeight = canvas.height;
      var width = size.width,
          height = size.height;
      var points = {
        A: {
          area: AREA.LEFT | AREA.TOP,
          position: new _Vector["default"]()
        },
        B: {
          area: AREA.LEFT | AREA.TOP,
          position: new _Vector["default"]({
            x: imageRepeatAreaMin.getX()
          })
        },
        C: {
          area: AREA.LEFT | AREA.TOP,
          position: new _Vector["default"]({
            y: imageRepeatAreaMin.getY()
          })
        },
        D: {
          area: AREA.LEFT | AREA.TOP,
          position: imageRepeatAreaMin
        },
        E: {
          area: AREA.LEFT | AREA.BOTTOM,
          position: new _Vector["default"]({
            y: imageRepeatAreaMax.getY()
          })
        },
        F: {
          area: AREA.LEFT | AREA.BOTTOM,
          position: new _Vector["default"]({
            x: imageRepeatAreaMin.getX(),
            y: imageRepeatAreaMax.getY()
          })
        },
        G: {
          area: AREA.LEFT | AREA.BOTTOM,
          position: new _Vector["default"]()
        },
        H: {
          area: AREA.LEFT | AREA.BOTTOM,
          position: new _Vector["default"]({
            x: imageRepeatAreaMin.getX()
          })
        },
        I: {
          area: AREA.RIGHT | AREA.TOP,
          position: new _Vector["default"]({
            x: imageRepeatAreaMax.getX()
          })
        },
        J: {
          area: AREA.RIGHT | AREA.TOP,
          position: new _Vector["default"]({
            x: imageRepeatAreaMax.getX(),
            y: imageRepeatAreaMin.getY()
          })
        },
        K: {
          area: AREA.RIGHT | AREA.TOP,
          position: new _Vector["default"]({
            y: imageRepeatAreaMin.getY()
          })
        },
        L: {
          area: AREA.RIGHT | AREA.BOTTOM,
          position: new _Vector["default"]({
            x: imageRepeatAreaMax.getX(),
            y: imageRepeatAreaMax.getY()
          })
        },
        M: {
          area: AREA.RIGHT | AREA.BOTTOM,
          position: new _Vector["default"]({
            y: imageRepeatAreaMax.getY()
          })
        },
        N: {
          area: AREA.RIGHT | AREA.BOTTOM,
          position: new _Vector["default"]({
            x: imageRepeatAreaMax.getX()
          })
        },
        O: {
          area: AREA.RIGHT | AREA.BOTTOM,
          position: new _Vector["default"]()
        }
      };
      var imageCanvasParts = {
        left: {
          repeat: true,
          pointA: points.C,
          pointB: points.F
        },
        right: {
          repeat: true,
          pointA: points.J,
          pointB: points.M
        },
        middle: {
          repeat: true,
          pointA: points.D,
          pointB: points.L
        },
        top: {
          repeat: true,
          pointA: points.B,
          pointB: points.J
        },
        bottom: {
          repeat: true,
          pointA: points.F,
          pointB: points.N
        },
        leftTop: {
          pointA: points.A,
          pointB: points.D
        },
        leftBottom: {
          pointA: points.E,
          pointB: points.H
        },
        rightTop: {
          pointA: points.I,
          pointB: points.K
        },
        rightBottom: {
          pointA: points.L,
          pointB: points.O
        }
      };
      var canvasEl = new OffscreenCanvas(width, height);
      var contextEl = canvasEl.getContext(_Constant.CANVAS_CONTEXT_TYPE);

      for (var kPart in imageCanvasParts) {
        var part = imageCanvasParts[kPart];
        var partCanvas = void 0;
        var createPointA = this.getImagePositionFromPoint(part.pointA, new _Size["default"]({
          width: canvasWidth,
          height: canvasHeight
        }));
        var createPointB = this.getImagePositionFromPoint(part.pointB, new _Size["default"]({
          width: canvasWidth,
          height: canvasHeight
        }));

        if (!part.repeat) {
          partCanvas = this.cropCanvas(canvas, createPointA, createPointB, imageScale);
        } else {
          partCanvas = this.generateImagePartRepeat(canvas, size, imageScale, imagePosition, createPointA, createPointB, part);
        }

        if (partCanvas) {
          var drawPointA = this.getImagePositionFromPoint(part.pointA, size, imageScale);
          contextEl.drawImage(partCanvas, drawPointA.getX(), drawPointA.getY(), partCanvas.width, partCanvas.height);
        }
      }

      return canvasEl;
    }
    /**
     * @param {OffscreenCanvas} canvas
     * @return {OffscreenCanvas}
     */

  }, {
    key: "copyCanvas",
    value: function copyCanvas(canvas) {
      var canvasCopy = new OffscreenCanvas(canvas.width, canvas.height);
      var contextCopy = canvasCopy.getContext(_Constant.CANVAS_CONTEXT_TYPE);
      contextCopy.drawImage(canvas, 0, 0, canvas.width, canvas.height);
      return canvasCopy;
    }
  }]);
  return ImageHelper;
}();

exports["default"] = ImageHelper;
var AREA = {
  LEFT: 1,
  RIGHT: 2,
  TOP: 4,
  BOTTOM: 8
};
exports.AREA = AREA;

},{"../core/Constant.js":70,"../pobject/Size.js":268,"./Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],362:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _LightPointComponent = _interopRequireDefault(require("../component/internal/LightPointComponent.js"));

var _Maths = _interopRequireDefault(require("./Maths.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _Constant = require("../core/Constant.js");

var _Vector = _interopRequireDefault(require("./Vector.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _Color = _interopRequireDefault(require("./Color.js"));

var _GeometryHelper = _interopRequireDefault(require("./GeometryHelper.js"));

var LightHelper = /*#__PURE__*/function () {
  function LightHelper() {
    (0, _classCallCheck2["default"])(this, LightHelper);
  }

  (0, _createClass2["default"])(LightHelper, null, [{
    key: "getPoint",

    /**
     * @todo Must be refactored
     * @param {Unit} unit
     * @param {Camera} camera
     * @param {Vector} positionToLight absolute position
     * @param {Size} sizeToLight
     * @param {number} globalIntensity
     * @param {string} globalColor
     *
     * @return {OffscreenCanvas}
     */
    value: function getPoint(unit, camera, positionToLight, sizeToLight, globalIntensity, globalColor) {
      //init properties
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var lightComponent = unit.getComponent(_LightPointComponent["default"]);

      var outerAngle = Math.PI * 2 - _Maths["default"].fromDegree(lightComponent.getOuterAngle());

      var innerAngle = Math.PI * 2 - _Maths["default"].fromDegree(lightComponent.getInnerAngle());

      var outerRadius = lightComponent.getOuterRadius();
      var innerRadius = lightComponent.getInnerRadius();
      var lightColor = lightComponent.getColor();
      var lightIntensity = Math.max(lightComponent.getIntensity(), 0.01);
      var scaleSize = camera.toScaleSize(meshComponent.getSize());
      var center = new _Vector["default"]({
        x: scaleSize.width / 2,
        y: scaleSize.height / 2
      });
      var sw = scaleSize.width * outerRadius / 100;
      var radiusScale = Math.abs(sw / 2 - 1);
      var lightPosition = transformComponent.getPosition();
      var lightRotation = transformComponent.getRotation();

      var globalColorRgba = _Color["default"].hexToRgb(globalColor, globalIntensity);

      var lightColorRgba = _Color["default"].hexToRgb(lightColor, 1); //calculate position to put the light


      var positionStartLight = camera.toCameraScale(_Vector["default"].subtract(lightPosition, positionToLight));
      var canvas = new OffscreenCanvas(sizeToLight.width, sizeToLight.height);
      var context = canvas.getContext(_Constant.CANVAS_CONTEXT_TYPE);

      var _GeometryHelper$getLa = _GeometryHelper["default"].getLargestRectangle(lightRotation, scaleSize),
          largeWidth = _GeometryHelper$getLa.width,
          largeHeight = _GeometryHelper$getLa.height;

      var lightCanvas = new OffscreenCanvas(largeWidth, largeHeight);
      var lightContext = lightCanvas.getContext(_Constant.CANVAS_CONTEXT_TYPE);
      lightContext.translate(largeWidth / 2, largeHeight / 2);
      lightContext.rotate(lightRotation);
      lightContext.translate(-center.x, -center.y); //calculate light boundaries

      var outerLightBounds = this.getLightBounds(center, outerAngle, radiusScale);
      var innerLightBounds = this.getLightBounds(center, innerAngle, radiusScale); //outer angle light

      this.drawOuterLightBounds(lightContext, outerLightBounds, radiusScale, outerAngle);
      this.drawOuterLight(lightContext, center, radiusScale, innerRadius, lightColorRgba, lightIntensity, globalColorRgba); //inner angle light

      this.drawInnerLight(lightContext, outerLightBounds, innerLightBounds, radiusScale); //put the light to start position of the light

      context.drawImage(lightCanvas, positionStartLight.x, positionStartLight.y, lightCanvas.width, lightCanvas.height);
      return canvas;
    }
    /**
     * @param {Vector} center
     * @param {number} angle
     * @param {number} radius
     * @return {{first: [Vector, Vector], second: [Vector, Vector]}}
     */

  }, {
    key: "getLightBounds",
    value: function getLightBounds(center, angle, radius) {
      var boundFirst = [center, new _Vector["default"]({
        x: center.x + Math.cos(angle / 2) * radius,
        y: center.y - Math.cos(Math.PI / 2 - angle / 2) * radius
      })];
      var boundSecond = [center, new _Vector["default"]({
        x: center.x + Math.cos(angle / 2) * radius,
        y: center.y + Math.cos(Math.PI / 2 - angle / 2) * radius
      })];
      return {
        first: boundFirst,
        second: boundSecond
      };
    }
    /**
     * @param {OffscreenCanvasRenderingContext2D} context
     * @param {{first: [Vector, Vector], second: [Vector, Vector]}} lightBounds
     * @param {number} radius
     * @param {number} angle
     */

  }, {
    key: "drawOuterLightBounds",
    value: function drawOuterLightBounds(context, lightBounds, radius, angle) {
      context.beginPath();
      context.moveTo(lightBounds.first[0].x, lightBounds.first[0].y);
      context.lineTo(lightBounds.first[1].x, lightBounds.first[1].y);
      context.moveTo(lightBounds.second[0].x, lightBounds.second[0].y);
      context.lineTo(lightBounds.second[1].x, lightBounds.second[1].y);
      context.moveTo(lightBounds.first[0].x, lightBounds.first[0].y);
      context.arc(lightBounds.first[0].x, lightBounds.first[0].y, radius, angle / 2, Math.PI * 2 - angle / 2);
      context.closePath();
    }
    /**
     * @param {OffscreenCanvasRenderingContext2D|Path2D} context
     * @param {[Vector, Vector]} outerLightBound
     * @param {[Vector, Vector]} innerLightBound
     * @param {number} radius
     * @param {boolean} drawArc
     */

  }, {
    key: "drawInnerLightBounds",
    value: function drawInnerLightBounds(context, outerLightBound, innerLightBound, radius) {
      var drawArc = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;

      if (context instanceof OffscreenCanvasRenderingContext2D) {
        context.beginPath();
      }

      if (!drawArc) {
        context.moveTo(outerLightBound[0].x, outerLightBound[0].y);
        context.lineTo(outerLightBound[1].x, outerLightBound[1].y);
        context.moveTo(innerLightBound[0].x, innerLightBound[0].y);
        context.lineTo(innerLightBound[1].x, innerLightBound[1].y);
      } else {
        var normalOuterLightBound = _Vector["default"].subtract(outerLightBound[1], outerLightBound[0]);

        var normalInnerLightBound = _Vector["default"].subtract(innerLightBound[1], innerLightBound[0]);

        var angleBounds = _Vector["default"].angle(normalOuterLightBound, normalInnerLightBound);

        var angle = _Vector["default"].angle(new _Vector["default"](), normalInnerLightBound);

        var angleA = Math.PI * 2 + angle;
        var angleB = angleA - angleBounds;
        var startAngle = Math.sign(angleBounds) > 0 ? angleB : angleA;
        var endAngle = Math.sign(angleBounds) > 0 ? angleA : angleB;
        context.moveTo(outerLightBound[0].x, outerLightBound[0].y);
        context.arc(outerLightBound[0].x, outerLightBound[0].y, radius, startAngle, endAngle);
      }

      if (context instanceof OffscreenCanvasRenderingContext2D) {
        context.closePath();
      }
    }
    /**
     * @param {[Vector, Vector]} line1
     * @param {[Vector, Vector]} line2
     * @param {boolean} reverse
     * @return {[Vector, Vector]}
     */

  }, {
    key: "getNormalLightLine",
    value: function getNormalLightLine(line1, line2) {
      var reverse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

      var middleLine1 = _Vector["default"].divide(_Vector["default"].add(line1[0], line1[1]), 2);

      var middleLine2 = _Vector["default"].divide(_Vector["default"].add(line2[0], line2[1]), 2);

      var distance = Math.sqrt(Math.pow(middleLine2.x - middleLine1.x, 2) + Math.pow(middleLine2.y - middleLine1.y, 2));
      var angle = Math.atan2(line1[1].y - line1[0].y, line1[1].x - line1[0].x);
      return [middleLine1, new _Vector["default"]({
        x: middleLine1.x + Math.sin(angle) * distance * (reverse ? -1 : 1),
        y: middleLine1.y - Math.cos(angle) * distance * (reverse ? -1 : 1)
      })];
    }
    /**
     * @param {OffscreenCanvasRenderingContext2D} context
     * @param {Vector} center
     * @param {number} radius
     * @param {number} innerRadius
     * @param {string} lightColor
     * @param {number} lightIntensity
     * @param {string} darkColor
     * @return {undefined}
     */

  }, {
    key: "drawOuterLight",
    value: function drawOuterLight(context, center, radius, innerRadius, lightColor, lightIntensity, darkColor) {
      var intensityLight = _Maths["default"].getIntensity(lightIntensity);

      var distanceLight = _Maths["default"].fromInterval([0, 1000], [0, 1], intensityLight);

      var gradientOuterLight = context.createRadialGradient(center.x, center.y, 0, center.x, center.y, radius);
      gradientOuterLight.addColorStop(0, lightColor);
      gradientOuterLight.addColorStop(innerRadius / 100, lightColor);
      gradientOuterLight.addColorStop(1, darkColor);
      context.fillStyle = gradientOuterLight;
      context.fill();
    }
    /**
     * @param {OffscreenCanvasRenderingContext2D} context
     * @param {{first: [Vector, Vector], second: [Vector, Vector]}} outerLightBounds
     * @param {{first: [Vector, Vector], second: [Vector, Vector]}} innerLightBounds
     * @param {number} radius
     * @param {boolean} debug
     */

  }, {
    key: "drawInnerLight",
    value: function drawInnerLight(context, outerLightBounds, innerLightBounds, radius) {
      var debug = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
      this.drawInnerLightSide(context, outerLightBounds.first, innerLightBounds.first, radius, false, debug);
      this.drawInnerLightSide(context, outerLightBounds.second, innerLightBounds.second, radius, true, debug);
    }
    /**
     * @param {OffscreenCanvasRenderingContext2D} context
     * @param {[Vector, Vector]} outerLightBound
     * @param {[Vector, Vector]} innerLightBound
     * @param {number} radius
     * @param {boolean} reverse
     * @param {boolean} debug
     */

  }, {
    key: "drawInnerLightSide",
    value: function drawInnerLightSide(context, outerLightBound, innerLightBound, radius, reverse) {
      var debug = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      var normalLightLine = this.getNormalLightLine(outerLightBound, innerLightBound, reverse);
      var gradientInnerLightOne = context.createLinearGradient(normalLightLine[0].x, normalLightLine[0].y, normalLightLine[1].x, normalLightLine[1].y);
      gradientInnerLightOne.addColorStop(0, '#FFFFFF');
      gradientInnerLightOne.addColorStop(1, 'rgba(0, 0, 0, 0)');
      var pathLight = new Path2D();
      this.drawInnerLightBounds(pathLight, outerLightBound, innerLightBound, radius);
      context.fillStyle = gradientInnerLightOne;
      var globalCompositeOperation = context.globalCompositeOperation;
      context.globalCompositeOperation = 'destination-out';
      context.fill(pathLight);
      context.globalCompositeOperation = globalCompositeOperation;

      if (debug) {
        var debugPath = new Path2D();
        debugPath.moveTo(normalLightLine[0].x, normalLightLine[0].y);
        debugPath.lineTo(normalLightLine[1].x, normalLightLine[1].y);
        context.strokeStyle = '#ff0000';
        context.stroke(debugPath);
      }
    }
  }]);
  return LightHelper;
}();

exports["default"] = LightHelper;

},{"../component/internal/LightPointComponent.js":47,"../component/internal/MeshComponent.js":48,"../component/internal/TransformComponent.js":53,"../core/Constant.js":70,"./Color.js":355,"./GeometryHelper.js":360,"./Maths.js":363,"./Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],363:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * Maths libs
 */
var Maths = /*#__PURE__*/function () {
  function Maths() {
    (0, _classCallCheck2["default"])(this, Maths);
  }

  (0, _createClass2["default"])(Maths, null, [{
    key: "generateId",

    /**
     * Generate an uniqu ID
     * @return {number}
     */
    value: function generateId() {
      return Date.now() + parseInt(Math.random() * 100000);
    }
    /**
     * Convert degree to randian
     * @param {Number} deg
     */

  }, {
    key: "fromDegree",
    value: function fromDegree(deg) {
      return deg * Math.PI / 180;
    }
    /**
     * Convert radian to degree
     * @param {Number} rad
     */

  }, {
    key: "toDegree",
    value: function toDegree(rad) {
      return Math.round(rad * 180 / Math.PI * 100) / 100;
    }
    /**
     * Get random value within an interval
     * @param {Number} min
     * @param {Number} max
     */

  }, {
    key: "randomInterval",
    value: function randomInterval(min, max) {
      return Math.random() * (max - min) + min;
    }
    /**
     * @param {number} a
     * @param {number} b
     * @param {number} t
     * @return {number}
     */

  }, {
    key: "cosineInterpolate",
    value: function cosineInterpolate(a, b, t) {
      var c = (1 - Math.cos(t * 3.1415927)) * .5;
      return (1. - c) * a + c * b;
    }
    /**
     * @param {number[]} intervalOutputs
     * @param {number[]} intervalInputs
     * @param {number} input
     * @param {number} outOfRange
     * @return {number}
     */

  }, {
    key: "fromInterval",
    value: function fromInterval(intervalOutputs, intervalInputs, input) {
      var outOfRange = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;

      if (input < intervalInputs[0] || input > intervalInputs[1]) {
        return outOfRange;
      }

      return intervalOutputs[0] + input / (intervalInputs[1] - intervalInputs[0]) * (intervalOutputs[1] - intervalOutputs[0]);
    }
    /**
     * @param {number} intensityParam
     */

  }, {
    key: "getIntensity",
    value: function getIntensity(intensityParam) {
      return 1 / (1 + 0.045 * intensityParam + 0.0075 * Math.pow(intensityParam, 2));
    }
  }]);
  return Maths;
}();

var _default = Maths;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],364:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _AConstant = _interopRequireDefault(require("../flow/constant/AConstant.js"));

var _ACondition = _interopRequireDefault(require("../flow/condition/ACondition.js"));

var _AEvent = _interopRequireDefault(require("../flow/event/AEvent.js"));

var _AFunction = _interopRequireDefault(require("../flow/function/AFunction.js"));

var _World = _interopRequireDefault(require("../world/World.js"));

var _AUnit = _interopRequireDefault(require("../flow/unit/AUnit.js"));

var _ANode = require("../flow/node/ANode.js");

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var _Vector = _interopRequireDefault(require("./Vector.js"));

var _AKeyCode = _interopRequireDefault(require("../flow/keycode/AKeyCode.js"));

var _AStringVariable = _interopRequireDefault(require("../flow/variable/AStringVariable.js"));

var _AAnimation = _interopRequireDefault(require("../flow/animation/AAnimation.js"));

var _FunctionNode = _interopRequireDefault(require("../flow/node/FunctionNode.js"));

var _ConditionNode = _interopRequireDefault(require("../flow/node/ConditionNode.js"));

var _EventNode = _interopRequireDefault(require("../flow/node/EventNode.js"));

var _ConstantNode = _interopRequireDefault(require("../flow/node/ConstantNode.js"));

var _KeyCodeNode = _interopRequireDefault(require("../flow/node/KeyCodeNode.js"));

var _DynamicAttributeHelper = _interopRequireDefault(require("./DynamicAttributeHelper.js"));

var _UnitNode = _interopRequireDefault(require("../flow/node/UnitNode.js"));

var _AnimationNode = _interopRequireDefault(require("../flow/node/AnimationNode.js"));

var _StringVariableNode = _interopRequireDefault(require("../flow/node/variable/StringVariableNode.js"));

var _ComponentNode = _interopRequireDefault(require("../flow/node/ComponentNode.js"));

var _AComponent = _interopRequireDefault(require("../flow/component/AComponent.js"));

var _NumberVariableNode = _interopRequireDefault(require("../flow/node/variable/NumberVariableNode.js"));

var _ANumberVariable = _interopRequireDefault(require("../flow/variable/ANumberVariable.js"));

var _ReferenceNode = _interopRequireDefault(require("../flow/node/ReferenceNode.js"));

var _AReference = _interopRequireDefault(require("../flow/reference/AReference.js"));

var _SelfNode = _interopRequireDefault(require("../flow/node/SelfNode.js"));

var _ASelf = _interopRequireDefault(require("../flow/unit/ASelf.js"));

var _ToggleVariableNode = _interopRequireDefault(require("../flow/node/variable/ToggleVariableNode.js"));

var _AToggleVariable = _interopRequireDefault(require("../flow/variable/AToggleVariable.js"));

var _BooleanVariableNode = _interopRequireDefault(require("../flow/node/variable/BooleanVariableNode.js"));

var _ABooleanVariable = _interopRequireDefault(require("../flow/variable/ABooleanVariable.js"));

var _DynamicAttribute = _interopRequireDefault(require("../pobject/DynamicAttribute.js"));

var _AttributeType = require("../pobject/AttributeType.js");

var _VariableNode = _interopRequireDefault(require("../flow/node/variable/VariableNode.js"));

var _AVariable = _interopRequireDefault(require("../flow/variable/AVariable.js"));

var _ComponentVariableNode = _interopRequireDefault(require("../flow/node/variable/ComponentVariableNode.js"));

var _AComponentVariable = _interopRequireDefault(require("../flow/variable/AComponentVariable.js"));

var _MaskGroupVariableNode = _interopRequireDefault(require("../flow/node/variable/MaskGroupVariableNode.js"));

var _AMaskGroupVariable = _interopRequireDefault(require("../flow/variable/AMaskGroupVariable.js"));

var _LoopNode = _interopRequireDefault(require("../flow/node/LoopNode.js"));

var _ALoop = _interopRequireDefault(require("../flow/loop/ALoop.js"));

var _AudioVariableNode = _interopRequireDefault(require("../flow/node/variable/AudioVariableNode.js"));

var _AAudioVariable = _interopRequireDefault(require("../flow/variable/AAudioVariable.js"));

var NodeHelper = /*#__PURE__*/function () {
  function NodeHelper() {
    (0, _classCallCheck2["default"])(this, NodeHelper);
  }

  (0, _createClass2["default"])(NodeHelper, null, [{
    key: "getSourceNode",

    /**
     * @param {ANode} node
     * @return {AFunction}
     */
    value: function getSourceNode(node) {
      var functionRegistry = _World["default"].get().getFunctionRegistry();

      var sourceName = node.getSourceName();

      switch (node.constructor) {
        case _FunctionNode["default"]:
        case _ConditionNode["default"]:
        case _EventNode["default"]:
          return functionRegistry.tryGetInstance(sourceName);

        case _ConstantNode["default"]:
          return new _AConstant["default"](_DynamicAttributeHelper["default"].findTypeOfValue(sourceName), sourceName);

        case _KeyCodeNode["default"]:
          return new _AKeyCode["default"](sourceName);

        case _UnitNode["default"]:
          return new _AUnit["default"](sourceName);

        case _SelfNode["default"]:
          return new _ASelf["default"](sourceName);

        case _AnimationNode["default"]:
          return new _AAnimation["default"](sourceName);

        case _ReferenceNode["default"]:
          return new _AReference["default"](sourceName);

        case _LoopNode["default"]:
          return new _ALoop["default"](sourceName);

        case _StringVariableNode["default"]:
          return new _AStringVariable["default"](sourceName);

        case _BooleanVariableNode["default"]:
          return new _ABooleanVariable["default"](sourceName);

        case _AudioVariableNode["default"]:
          return new _AAudioVariable["default"](sourceName);

        case _NumberVariableNode["default"]:
          return new _ANumberVariable["default"](sourceName);

        case _ComponentVariableNode["default"]:
          return new _AComponentVariable["default"](sourceName);

        case _MaskGroupVariableNode["default"]:
          return new _AMaskGroupVariable["default"](sourceName);

        case _ToggleVariableNode["default"]:
          return new _AToggleVariable["default"](sourceName);

        case _ComponentNode["default"]:
          return new _AComponent["default"](sourceName);

        default:
          throw new _ClientError["default"]("Source Node: \"".concat(node.constructor.name, "\" not supported"));
      }
    }
    /**
     * @param {ANode} node
     * @return {string}
     */

  }, {
    key: "getNodeName",
    value: function getNodeName(node) {
      var nodeSource = this.getSourceNode(node);

      if (nodeSource instanceof _AConstant["default"]) {
        return "".concat(nodeSource.getName());
      } else if (nodeSource instanceof _AKeyCode["default"]) {
        return "".concat(nodeSource.getName());
      } else if (nodeSource instanceof _AVariable["default"]) {
        return "".concat(nodeSource.getName(), " (var)");
      } else if (nodeSource instanceof _ACondition["default"]) {
        return "".concat(nodeSource.getName());
      } else if (nodeSource instanceof _ALoop["default"]) {
        return "".concat(nodeSource.getName());
      } else if (nodeSource instanceof _AEvent["default"]) {
        return "".concat(nodeSource.getName());
      } else if (nodeSource instanceof _AUnit["default"]) {
        var unit = _World["default"].get().findUnitById(parseInt(nodeSource.getName()));

        return "".concat(unit.getName());
      } else if (nodeSource instanceof _AAnimation["default"]) {
        var animation = _World["default"].get().getAnimationManager().findById(parseInt(nodeSource.getName()));

        return "".concat(animation.getName());
      } else if (nodeSource instanceof _AComponent["default"]) {
        return "".concat(nodeSource.getName());
      } else if (nodeSource instanceof _AFunction["default"]) {
        return "".concat(nodeSource.getName());
      } else {
        throw new _ClientError["default"]("Node source \"".concat(nodeSource && nodeSource.constructor.name, "\" unknown"));
      }
    }
    /**
     * @param {string} type
     * @return {{
     * shadowBlur: number, colorFocused: string,
     * heightHead: number, boxColor: string,
     * sizeInput: number, fontSize: number,
     * baseInputColor: string, headColor: string,
     * padding: number, fontColor: string,
     * fontSizeRatio: number, selectColor: string
     * }}
     */

  }, {
    key: "getNodeGUIProps",
    value: function getNodeGUIProps(type) {
      var sizeInput = 10;
      var fontSize = 12;
      var fontSizeRatio = 1.5;
      var padding = 10;
      var heightHead = fontSize + padding * 2;
      var shadowBlur = 10;
      var boxColor = '#0f1013';
      var baseInputColor = '#ffffff';
      var colorFocused = '#555555';
      var fontColor = '#ffffff';
      var selectColor = '#d09300';
      var headColor;

      if (type === _ANode.NODE_TYPES.FUNCTION) {
        headColor = '#2c3f66';
      } else if (type === _ANode.NODE_TYPES.EVENT) {
        headColor = '#5e2222';
      } else if (type === _ANode.NODE_TYPES.CONSTANT) {
        headColor = '#343030';
      } else if (type === _ANode.NODE_TYPES.CONDITION) {
        headColor = '#225e31';
      } else if (type === _ANode.NODE_TYPES.LOOP) {
        headColor = '#225e50';
      } else if (type === _ANode.NODE_TYPES.UNIT) {
        headColor = '#5e2254';
      } else if (type === _ANode.NODE_TYPES.ANIMATION) {
        headColor = '#5e5622';
      } else if (type === _ANode.NODE_TYPES.KEY_CODE) {
        headColor = '#375e22';
      } else if (type === _ANode.NODE_TYPES.VAR_STRING || type === _ANode.NODE_TYPES.VAR_TOGGLE || type === _ANode.NODE_TYPES.VAR_BOOLEAN || type === _ANode.NODE_TYPES.VAR_NUMBER) {
        headColor = '#5e4322';
      } else if (type === _ANode.NODE_TYPES.COMPONENT) {
        headColor = '#5e2254';
      } else if (type === _ANode.NODE_TYPES.REFERENCE) {
        headColor = '#22445e';
      }

      return {
        sizeInput: sizeInput,
        fontSize: fontSize,
        heightHead: heightHead,
        shadowBlur: shadowBlur,
        boxColor: boxColor,
        baseInputColor: baseInputColor,
        colorFocused: colorFocused,
        fontColor: fontColor,
        padding: padding,
        headColor: headColor,
        fontSizeRatio: fontSizeRatio,
        selectColor: selectColor
      };
    }
    /**
     * @param {ANode} node
     * @param {AScript} script
     * @return {Size}
     */

  }, {
    key: "getNodeGUISize",
    value: function getNodeGUISize(node, script) {
      var nodeSource = this.getSourceNode(node);
      var nodeSourceInputs = nodeSource.getInputs();
      var type = node.getType();

      var _this$getNodeGUIProps = this.getNodeGUIProps(type),
          fontSize = _this$getNodeGUIProps.fontSize,
          padding = _this$getNodeGUIProps.padding,
          fontSizeRatio = _this$getNodeGUIProps.fontSizeRatio,
          sizeInput = _this$getNodeGUIProps.sizeInput;

      var nodeInputTextLengths = this.getNodeGUIInputs(node, script).concat(this.getNodeName(node)).map(function (text) {
        return text.length;
      });
      var width = Math.max(Math.max.apply(Math, (0, _toConsumableArray2["default"])(nodeInputTextLengths)) * fontSize / fontSizeRatio, 100);
      var height = (nodeSourceInputs.length + 1) * (sizeInput + padding * 2) + (fontSize + padding * 2);
      return new _Size["default"]({
        width: width,
        height: height
      });
    }
    /**
     * @param {string} type
     * @param {Size} size
     * @return {{position: Vector, sizeInput: number}}
     */

  }, {
    key: "getNodeGUIOutput",
    value: function getNodeGUIOutput(type, size) {
      var _this$getNodeGUIProps2 = this.getNodeGUIProps(type),
          sizeInput = _this$getNodeGUIProps2.sizeInput,
          padding = _this$getNodeGUIProps2.padding,
          heightHead = _this$getNodeGUIProps2.heightHead;

      var position = new _Vector["default"]({
        x: size.getWidth() - padding - sizeInput,
        y: heightHead + padding
      });
      return {
        position: position,
        sizeInput: sizeInput
      };
    }
    /**
     * @param {string} type
     * @param {number} index
     * @return {{position: Vector, sizeInput: number}}
     */

  }, {
    key: "getNodeGUIInput",
    value: function getNodeGUIInput(type, index) {
      var _this$getNodeGUIProps3 = this.getNodeGUIProps(type),
          sizeInput = _this$getNodeGUIProps3.sizeInput,
          padding = _this$getNodeGUIProps3.padding,
          heightHead = _this$getNodeGUIProps3.heightHead;

      var position = new _Vector["default"]({
        x: padding,
        y: heightHead + sizeInput + (padding + sizeInput) * (index + 1)
      });
      return {
        position: position,
        sizeInput: sizeInput
      };
    }
    /**
     * @param {ANode} node
     * @param {AScript} script
     * @return {DynamicAttribute[]}
     */

  }, {
    key: "getNodeGUIConstantInputs",
    value: function getNodeGUIConstantInputs(node, script) {
      var _this = this;

      return node.getInputs().map(function (input) {
        var sourceNode = script.findNodeById(input.getSourceNodeId());

        if (_this.isHidden(sourceNode)) {
          return new _DynamicAttribute["default"](input.getTargetName(), _AttributeType.TYPES.STRING, sourceNode && _this.getNodeName(sourceNode));
        }

        return null;
      }).filter(function (input) {
        return input;
      });
    }
    /**
     * @param {ANode} node
     * @return {boolean}
     */

  }, {
    key: "isHidden",
    value: function isHidden(node) {
      return node instanceof _ConstantNode["default"] || node instanceof _SelfNode["default"] || node instanceof _ComponentNode["default"] || node instanceof _VariableNode["default"];
    }
    /**
     * @param {ANode} node
     * @param {AScript} script
     * @return {string[]}
     */

  }, {
    key: "getNodeGUIInputs",
    value: function getNodeGUIInputs(node, script) {
      var nodeConstantInputs = this.getNodeGUIConstantInputs(node, script);
      var nodeSource = this.getSourceNode(node);
      var inputs = nodeSource.getInputs();
      return inputs.map(function (input) {
        var nodeInput = nodeConstantInputs.find(function (pInput) {
          return pInput.getAttrName() === input.getAttrName();
        });
        return "".concat(input.getAttrName()).concat(nodeInput ? " = ".concat(nodeInput.getAttrValue()) : '');
      });
    }
    /**
     * @param {string} type
     * @return {boolean}
     */

  }, {
    key: "hasBaseInput",
    value: function hasBaseInput(type) {
      return type === _ANode.NODE_TYPES.FUNCTION || type === _ANode.NODE_TYPES.LOOP || type === _ANode.NODE_TYPES.CONDITION || type === _ANode.NODE_TYPES.ANIMATION || type === _ANode.NODE_TYPES.REFERENCE;
    }
    /**
     * @param {string} type
     * @return {boolean}
     */

  }, {
    key: "hasBaseOutput",
    value: function hasBaseOutput(type) {
      return type === _ANode.NODE_TYPES.EVENT || type === _ANode.NODE_TYPES.ANIMATION || type === _ANode.NODE_TYPES.SELF;
    }
  }]);
  return NodeHelper;
}();

exports["default"] = NodeHelper;

},{"../exception/type/ClientError.js":80,"../flow/animation/AAnimation.js":97,"../flow/component/AComponent.js":100,"../flow/condition/ACondition.js":101,"../flow/constant/AConstant.js":104,"../flow/event/AEvent.js":105,"../flow/function/AFunction.js":116,"../flow/keycode/AKeyCode.js":170,"../flow/loop/ALoop.js":171,"../flow/node/ANode.js":172,"../flow/node/AnimationNode.js":173,"../flow/node/ComponentNode.js":174,"../flow/node/ConditionNode.js":175,"../flow/node/ConstantNode.js":176,"../flow/node/EventNode.js":177,"../flow/node/FunctionNode.js":178,"../flow/node/KeyCodeNode.js":179,"../flow/node/LoopNode.js":180,"../flow/node/ReferenceNode.js":181,"../flow/node/SelfNode.js":182,"../flow/node/UnitNode.js":183,"../flow/node/variable/AudioVariableNode.js":184,"../flow/node/variable/BooleanVariableNode.js":185,"../flow/node/variable/ComponentVariableNode.js":186,"../flow/node/variable/MaskGroupVariableNode.js":187,"../flow/node/variable/NumberVariableNode.js":188,"../flow/node/variable/StringVariableNode.js":189,"../flow/node/variable/ToggleVariableNode.js":190,"../flow/node/variable/VariableNode.js":191,"../flow/reference/AReference.js":192,"../flow/unit/ASelf.js":193,"../flow/unit/AUnit.js":194,"../flow/variable/AAudioVariable.js":195,"../flow/variable/ABooleanVariable.js":196,"../flow/variable/AComponentVariable.js":197,"../flow/variable/AMaskGroupVariable.js":198,"../flow/variable/ANumberVariable.js":199,"../flow/variable/AStringVariable.js":200,"../flow/variable/AToggleVariable.js":201,"../flow/variable/AVariable.js":202,"../pobject/AttributeType.js":263,"../pobject/DynamicAttribute.js":265,"../pobject/Size.js":268,"../world/World.js":372,"./DynamicAttributeHelper.js":358,"./Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/toConsumableArray":21}],365:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _StringHelper = _interopRequireDefault(require("./StringHelper.js"));

var _ClassHelper = _interopRequireDefault(require("./ClassHelper.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

/**
 * @class {ObjectHelper}
 */
var ObjectHelper = /*#__PURE__*/function () {
  function ObjectHelper() {
    (0, _classCallCheck2["default"])(this, ObjectHelper);
  }

  (0, _createClass2["default"])(ObjectHelper, null, [{
    key: "isEqual",

    /**
     * @param {Object} object1
     * @param {Object} object2
     * @return {boolean}
     */
    value: function isEqual(object1, object2) {
      return !Object.getOwnPropertyNames(object1).find(function (prop) {
        return !object2 || object1[prop] !== object2[prop];
      });
    }
    /**
     * @param {Object} target
     * @param {Object} source
     */

  }, {
    key: "assign",
    value: function assign(target, source) {
      var _this = this;

      Object.getOwnPropertyNames(source).forEach(function (srcProperty) {
        var setterProperty = "set".concat(_StringHelper["default"].capFirstLetter(srcProperty));
        var valProperty = source[srcProperty];

        if (_.isObject(valProperty)) {
          _this.assign(target[srcProperty], valProperty);
        } else {
          target && target[setterProperty](valProperty);
        }
      });
    }
    /**
     * @param {Object} object
     * @param {Function|ArrayConstructor} prototype
     * @returns {{index: number|null, key: string, value: *}[]}
     */

  }, {
    key: "getProperties",
    value: function getProperties(object, prototype) {
      if (prototype === Array) {
        return _.isArray(object) ? object.map(function (value, index) {
          return {
            index: index,
            key: 'element',
            value: value
          };
        }) : [];
      } else if (_.isObject(object)) {
        try {
          var tempPrototype = new prototype();
          return Object.getOwnPropertyNames(tempPrototype).map(function (prop) {
            var value;

            if (object) {
              if (object.constructor === Object) {
                value = object[prop];
              } else {
                var getter = _ClassHelper["default"].getGetter(object, prop);

                value = object[getter]();
              }
            }

            return {
              key: prop,
              value: value,
              index: null
            };
          });
        } catch (e) {
          throw new _SystemError["default"]("ObjectHelper (\"".concat(prototype.name, "\") : ").concat(e.message));
        }
      }
    }
    /**
     * @param {Object|Array} object
     * @param {string} property
     * @param {Object|Array} propertyValue
     */

  }, {
    key: "setProperty",
    value: function () {
      var _setProperty = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(object, property, propertyValue) {
        var concatAttr, setter;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!_.isArray(object)) {
                  _context.next = 4;
                  break;
                }

                object.push(propertyValue);
                _context.next = 17;
                break;

              case 4:
                if (!_.isArray(propertyValue)) {
                  _context.next = 13;
                  break;
                }

                concatAttr = "concat".concat(_StringHelper["default"].capFirstLetter(property));

                if (!_.isFunction(object[concatAttr])) {
                  _context.next = 10;
                  break;
                }

                object[concatAttr](propertyValue);
                _context.next = 11;
                break;

              case 10:
                throw new _SystemError["default"]("Method ".concat(concatAttr, " not defined for ").concat(object.constructor.name));

              case 11:
                _context.next = 17;
                break;

              case 13:
                if (!(object !== null && object !== undefined)) {
                  _context.next = 17;
                  break;
                }

                setter = _ClassHelper["default"].getSetter(object, property);
                _context.next = 17;
                return object[setter](propertyValue);

              case 17:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function setProperty(_x, _x2, _x3) {
        return _setProperty.apply(this, arguments);
      }

      return setProperty;
    }()
  }]);
  return ObjectHelper;
}();

var _default = ObjectHelper;
exports["default"] = _default;

},{"../exception/type/SystemError.js":82,"./ClassHelper.js":354,"./StringHelper.js":368,"@babel/runtime/helpers/asyncToGenerator":4,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/regenerator":26}],366:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var PrimitiveHelper = /*#__PURE__*/function () {
  function PrimitiveHelper() {
    (0, _classCallCheck2["default"])(this, PrimitiveHelper);
  }

  (0, _createClass2["default"])(PrimitiveHelper, null, [{
    key: "validate",

    /**
     * @param {string|number|boolean} value
     * @param {string} type
     * @return {string|number|boolean}
     */
    value: function validate(value, type) {
      var newValue;

      switch (type) {
        case 'number':
          newValue = _.isNumber(parseFloat(value)) ? parseFloat(value) : null;
          break;

        case 'string':
          newValue = _.isString(value) ? value : '';
          break;

        case 'boolean':
          newValue = value === true || value === 'true';
          break;

        default:
          throw new _SystemError["default"]("Primitive type ".concat(type, " not supported"));
      }

      return newValue;
    }
  }]);
  return PrimitiveHelper;
}();

exports["default"] = PrimitiveHelper;

},{"../exception/type/SystemError.js":82,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],367:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _ANode = require("../flow/node/ANode.js");

var _EventNode = _interopRequireDefault(require("../flow/node/EventNode.js"));

var _FunctionNode = _interopRequireDefault(require("../flow/node/FunctionNode.js"));

var _ConstantNode = _interopRequireDefault(require("../flow/node/ConstantNode.js"));

var _ConditionNode = _interopRequireDefault(require("../flow/node/ConditionNode.js"));

var _UnitNode = _interopRequireDefault(require("../flow/node/UnitNode.js"));

var _ClientError = _interopRequireDefault(require("../exception/type/ClientError.js"));

var _KeyCodeNode = _interopRequireDefault(require("../flow/node/KeyCodeNode.js"));

var _NodeComponent = _interopRequireDefault(require("../component/internal/gui/node/NodeComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _NodeHelper = _interopRequireDefault(require("./NodeHelper.js"));

var _Vector = _interopRequireDefault(require("./Vector.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _StringVariableNode = _interopRequireDefault(require("../flow/node/variable/StringVariableNode.js"));

var _AnimationNode = _interopRequireDefault(require("../flow/node/AnimationNode.js"));

var _AEvent = _interopRequireDefault(require("../flow/event/AEvent.js"));

var _AEmptyStackFunction = _interopRequireDefault(require("../flow/function/AEmptyStackFunction.js"));

var _ComponentNode = _interopRequireDefault(require("../flow/node/ComponentNode.js"));

var _AAnimation = _interopRequireDefault(require("../flow/animation/AAnimation.js"));

var _ReferenceNode = _interopRequireDefault(require("../flow/node/ReferenceNode.js"));

var _SelfNode = _interopRequireDefault(require("../flow/node/SelfNode.js"));

var _ToggleVariableNode = _interopRequireDefault(require("../flow/node/variable/ToggleVariableNode.js"));

var _BooleanVariableNode = _interopRequireDefault(require("../flow/node/variable/BooleanVariableNode.js"));

var _NumberVariableNode = _interopRequireDefault(require("../flow/node/variable/NumberVariableNode.js"));

var _ComponentVariableNode = _interopRequireDefault(require("../flow/node/variable/ComponentVariableNode.js"));

var _MaskGroupVariableNode = _interopRequireDefault(require("../flow/node/variable/MaskGroupVariableNode.js"));

var _LoopNode = _interopRequireDefault(require("../flow/node/LoopNode.js"));

var _AudioVariableNode = _interopRequireDefault(require("../flow/node/variable/AudioVariableNode.js"));

var ScriptHelper = /*#__PURE__*/function () {
  function ScriptHelper() {
    (0, _classCallCheck2["default"])(this, ScriptHelper);
  }

  (0, _createClass2["default"])(ScriptHelper, null, [{
    key: "createNode",

    /**
     * @param {FunctionRegistry} functionRegistry
     * @param {AScript} script
     * @param {string} nodeType
     * @param {string} nodeValue
     * @return {ANode}
     */
    value: function createNode(functionRegistry, script, nodeType) {
      var nodeValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
      var node;

      if (nodeType === _ANode.NODE_TYPES.EVENT) {
        node = script.createNode(functionRegistry, _EventNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.FUNCTION) {
        node = script.createNode(functionRegistry, _FunctionNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.CONSTANT) {
        node = script.createNode(functionRegistry, _ConstantNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.KEY_CODE) {
        node = script.createNode(functionRegistry, _KeyCodeNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.CONDITION) {
        node = script.createNode(functionRegistry, _ConditionNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.LOOP) {
        node = script.createNode(functionRegistry, _LoopNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.UNIT) {
        node = script.createNode(functionRegistry, _UnitNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.SELF) {
        node = script.createNode(functionRegistry, _SelfNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.ANIMATION) {
        node = script.createNode(functionRegistry, _AnimationNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.REFERENCE) {
        node = script.createNode(functionRegistry, _ReferenceNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.VAR_STRING) {
        node = script.createNode(functionRegistry, _StringVariableNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.VAR_NUMBER) {
        node = script.createNode(functionRegistry, _NumberVariableNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.VAR_COMPONENT) {
        node = script.createNode(functionRegistry, _ComponentVariableNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.VAR_MASK_GROUP) {
        node = script.createNode(functionRegistry, _MaskGroupVariableNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.VAR_BOOLEAN) {
        node = script.createNode(functionRegistry, _BooleanVariableNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.VAR_AUDIO) {
        node = script.createNode(functionRegistry, _AudioVariableNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.VAR_TOGGLE) {
        node = script.createNode(functionRegistry, _ToggleVariableNode["default"], nodeValue);
      } else if (nodeType === _ANode.NODE_TYPES.COMPONENT) {
        node = script.createNode(functionRegistry, _ComponentNode["default"], nodeValue);
      } else {
        throw new _ClientError["default"]("Script: Node with type \"".concat(nodeType, "\" not supported!"));
      }

      return node;
    }
    /**
     * @param {ANode} node
     * @return {string}
     */

  }, {
    key: "getNodeType",
    value: function getNodeType(node) {
      var nodeType = '';

      if (node instanceof _EventNode["default"]) {
        nodeType = _ANode.NODE_TYPES.EVENT;
      } else if (node instanceof _FunctionNode["default"]) {
        nodeType = _ANode.NODE_TYPES.FUNCTION;
      } else if (node instanceof _ConstantNode["default"]) {
        nodeType = _ANode.NODE_TYPES.CONSTANT;
      } else if (node instanceof _ConditionNode["default"]) {
        nodeType = _ANode.NODE_TYPES.CONDITION;
      } else if (node instanceof _LoopNode["default"]) {
        nodeType = _ANode.NODE_TYPES.LOOP;
      } else if (node instanceof _UnitNode["default"]) {
        nodeType = _ANode.NODE_TYPES.UNIT;
      } else if (node instanceof _SelfNode["default"]) {
        nodeType = _ANode.NODE_TYPES.SELF;
      } else if (node instanceof _AnimationNode["default"]) {
        nodeType = _ANode.NODE_TYPES.ANIMATION;
      } else if (node instanceof _ReferenceNode["default"]) {
        nodeType = _ANode.NODE_TYPES.REFERENCE;
      } else if (node instanceof _KeyCodeNode["default"]) {
        nodeType = _ANode.NODE_TYPES.KEY_CODE;
      } else if (node instanceof _StringVariableNode["default"]) {
        nodeType = _ANode.NODE_TYPES.VAR_STRING;
      } else if (node instanceof _NumberVariableNode["default"]) {
        nodeType = _ANode.NODE_TYPES.VAR_NUMBER;
      } else if (node instanceof _ComponentVariableNode["default"]) {
        nodeType = _ANode.NODE_TYPES.VAR_COMPONENT;
      } else if (node instanceof _MaskGroupVariableNode["default"]) {
        nodeType = _ANode.NODE_TYPES.VAR_MASK_GROUP;
      } else if (node instanceof _BooleanVariableNode["default"]) {
        nodeType = _ANode.NODE_TYPES.VAR_BOOLEAN;
      } else if (node instanceof _AudioVariableNode["default"]) {
        nodeType = _ANode.NODE_TYPES.VAR_AUDIO;
      } else if (node instanceof _ToggleVariableNode["default"]) {
        nodeType = _ANode.NODE_TYPES.VAR_TOGGLE;
      } else if (node instanceof _ComponentNode["default"]) {
        nodeType = _ANode.NODE_TYPES.COMPONENT;
      } else {
        throw new _ClientError["default"]("AssetScriptXmlGenerator: ".concat(node.constructor.name, " not supported"));
      }

      return nodeType;
    }
    /**
     * undefined if no input found
     * @param {AScript} script
     * @param {Unit} unit
     * @param {Vector} position
     * @return {{node: ANode, input: DynamicAttribute|null}|undefined}
     */

  }, {
    key: "findNodeInputByPosition",
    value: function findNodeInputByPosition(script, unit, position) {
      if (unit) {
        var nodeId = unit.getComponent(_NodeComponent["default"]).getNodeId();
        var unitPosition = unit.getComponent(_TransformComponent["default"]).getPosition();
        var node = script.findNodeById(nodeId);

        if (node && _NodeHelper["default"].hasBaseInput(node.getType())) {
          var sourceNode = _NodeHelper["default"].getSourceNode(node);

          var inputs = sourceNode.getInputs();

          for (var iInput = -1; iInput < inputs.length; iInput++) {
            var input = iInput >= 0 ? inputs[iInput] : null;

            var _NodeHelper$getNodeGU = _NodeHelper["default"].getNodeGUIInput(node.getType(), iInput),
                inputLocalPosition = _NodeHelper$getNodeGU.position,
                sizeInput = _NodeHelper$getNodeGU.sizeInput;

            var inputPosition = _Vector["default"].add(unitPosition, inputLocalPosition);

            if (position.getX() >= inputPosition.getX() && position.getX() <= inputPosition.getX() + sizeInput && position.getY() >= inputPosition.getY() && position.getY() <= inputPosition.getY() + sizeInput) {
              return {
                node: node,
                input: input
              };
            }
          }
        }
      }

      return undefined;
    }
    /**
     * Return null if the input found is the default one, undefined if no input found
     * @param {AScript} script
     * @param {Unit} unit
     * @param {Vector} position
     * @return {{node: ANode, output: DynamicAttribute|null}|undefined}
     */

  }, {
    key: "findNodeOutputByPosition",
    value: function findNodeOutputByPosition(script, unit, position) {
      if (unit) {
        var nodeId = unit.getComponent(_NodeComponent["default"]).getNodeId();
        var unitPosition = unit.getComponent(_TransformComponent["default"]).getPosition();
        var size = unit.getComponent(_MeshComponent["default"]).getSize();
        var node = script.findNodeById(nodeId);

        var sourceNode = _NodeHelper["default"].getSourceNode(node);

        var output = sourceNode.getOutput();

        if (node && (output || _NodeHelper["default"].hasBaseOutput(node.getType()))) {
          var _NodeHelper$getNodeGU2 = _NodeHelper["default"].getNodeGUIOutput(node.getType(), size),
              inputLocalPosition = _NodeHelper$getNodeGU2.position,
              sizeInput = _NodeHelper$getNodeGU2.sizeInput;

          var outputPosition = _Vector["default"].add(unitPosition, inputLocalPosition);

          if (position.getX() >= outputPosition.getX() && position.getX() <= outputPosition.getX() + sizeInput && position.getY() >= outputPosition.getY() && position.getY() <= outputPosition.getY() + sizeInput) {
            return {
              node: node,
              output: output
            };
          }
        }
      }

      return undefined;
    }
    /**
     * @param {AScript} script
     * @return {boolean}
     */

  }, {
    key: "validate",
    value: function validate(script) {
      script.getNodes().forEach(function (node) {
        var sourceNode = _NodeHelper["default"].getSourceNode(node);

        if (!sourceNode) {
          script.removeNodeById(node.getId());
        }
      });
    }
    /**
     * @param {AScript} script
     * @param {ANode} node
     * @return {string}
     */

  }, {
    key: "generateFunctionName",
    value: function generateFunctionName(script, node) {
      var nodeIndex = script.getNodes().findIndex(function (pNode) {
        return pNode === node;
      });
      return "".concat(script.getName(), ".").concat(node.getSourceName(), ".").concat(nodeIndex);
    }
    /**
     * @param {string} className
     * @param {string} name
     * @return {string}
     */

  }, {
    key: "getValueFromFunctionName",
    value: function getValueFromFunctionName(className, name) {
      var classRegex = new RegExp("^".concat(className, "."));
      var nameFunction = name.replace(classRegex, '');
      return nameFunction.replace(/^(.+)\.[0-9]+$/, '$1');
    }
    /**
     * @param {AScript} script
     * @param {ANode} node
     * @return {AFunction}
     */

  }, {
    key: "createFunction",
    value: function createFunction(script, node) {
      var element = _NodeHelper["default"].getSourceNode(node);

      var functionName = this.generateFunctionName(script, node);

      if (element instanceof _AEvent["default"] || element instanceof _AAnimation["default"]) {
        return new element.constructor(functionName);
      }

      return new _AEmptyStackFunction["default"](functionName);
    }
    /**
     * @param {AScript} script
     * @param {ANode} node
     * @param {string} functionName
     * @return {boolean}
     */

  }, {
    key: "isNodeHasPredecessor",
    value: function isNodeHasPredecessor(script, node, functionName) {
      var inputs = node.getInputs();

      for (var iInput in inputs) {
        var sourceNodeId = inputs[iInput].getSourceNodeId();
        var sourceNode = script.findNodeById(sourceNodeId);

        if (sourceNode.getName() === functionName || this.isNodeHasPredecessor(script, sourceNode, functionName)) {
          return true;
        }
      }

      return false;
    }
  }]);
  return ScriptHelper;
}();

exports["default"] = ScriptHelper;

},{"../component/internal/MeshComponent.js":48,"../component/internal/TransformComponent.js":53,"../component/internal/gui/node/NodeComponent.js":59,"../exception/type/ClientError.js":80,"../flow/animation/AAnimation.js":97,"../flow/event/AEvent.js":105,"../flow/function/AEmptyStackFunction.js":115,"../flow/node/ANode.js":172,"../flow/node/AnimationNode.js":173,"../flow/node/ComponentNode.js":174,"../flow/node/ConditionNode.js":175,"../flow/node/ConstantNode.js":176,"../flow/node/EventNode.js":177,"../flow/node/FunctionNode.js":178,"../flow/node/KeyCodeNode.js":179,"../flow/node/LoopNode.js":180,"../flow/node/ReferenceNode.js":181,"../flow/node/SelfNode.js":182,"../flow/node/UnitNode.js":183,"../flow/node/variable/AudioVariableNode.js":184,"../flow/node/variable/BooleanVariableNode.js":185,"../flow/node/variable/ComponentVariableNode.js":186,"../flow/node/variable/MaskGroupVariableNode.js":187,"../flow/node/variable/NumberVariableNode.js":188,"../flow/node/variable/StringVariableNode.js":189,"../flow/node/variable/ToggleVariableNode.js":190,"./NodeHelper.js":364,"./Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],368:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var StringHelper = /*#__PURE__*/function () {
  function StringHelper() {
    (0, _classCallCheck2["default"])(this, StringHelper);
  }

  (0, _createClass2["default"])(StringHelper, null, [{
    key: "capFirstLetter",

    /**
     * @param {string} string
     * @return {string}
     */
    value: function capFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }
  }]);
  return StringHelper;
}();

exports["default"] = StringHelper;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],369:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Vertex = _interopRequireDefault(require("./Vertex.js"));

var _Vector = _interopRequireDefault(require("./Vector.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _GeometryHelper = _interopRequireDefault(require("./GeometryHelper.js"));

var _Window = _interopRequireDefault(require("../core/Window.js"));

var _ColliderComponent = _interopRequireDefault(require("../component/internal/ColliderComponent.js"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var _RectColliderComponent = _interopRequireDefault(require("../component/internal/RectColliderComponent.js"));

var _CircleColliderComponent = _interopRequireDefault(require("../component/internal/CircleColliderComponent.js"));

var _Unit = require("../unit/Unit.js");

var _RectUnitInstant = _interopRequireDefault(require("../unit/instant/type/internal/primitive/RectUnitInstant.js"));

var _CircleUnitInstant = _interopRequireDefault(require("../unit/instant/type/internal/primitive/CircleUnitInstant.js"));

var _SystemError = _interopRequireDefault(require("../exception/type/SystemError.js"));

var _Style = _interopRequireDefault(require("../pobject/Style.js"));

var _GUIColliderComponent = _interopRequireDefault(require("../component/internal/gui/collider/GUIColliderComponent.js"));

var _ImageHelper = _interopRequireDefault(require("./ImageHelper.js"));

var UnitHelper = /*#__PURE__*/function () {
  function UnitHelper() {
    (0, _classCallCheck2["default"])(this, UnitHelper);
  }

  (0, _createClass2["default"])(UnitHelper, null, [{
    key: "isInside",

    /**
     * @param {Unit} unit
     * @param {Vector} point
     * @return {boolean}
     */
    value: function isInside(unit, point) {
      return _Vertex["default"].contains(this.generateVertices(unit), this.fromAbsolutePosition(unit, point));
    }
    /**
     * @param {Unit} unit
     * @param {Vector} point
     * @param {Size} size
     * @return {boolean}
     */

  }, {
    key: "isInsideArea",
    value: function isInsideArea(unit, point, size) {
      var transform = unit.getComponent(_TransformComponent["default"]);
      var meshSize = unit.getComponent(_MeshComponent["default"]).getSize();
      var position = transform.getPosition();
      return position.getX() >= point.x && position.getX() + meshSize.getWidth() <= point.x + size.width && position.getY() >= point.y && position.getY() + meshSize.getHeight() <= point.y + size.height;
    }
    /**
     * Convert absolute coordinate to relative coordinate
     * @param {Unit} unit
     * @param {Vector} point Absolute coordinate
     * @return {Vector}
     */

  }, {
    key: "fromAbsolutePosition",
    value: function fromAbsolutePosition(unit, point) {
      var position = unit.getComponent(_TransformComponent["default"]).getPosition();
      return new _Vector["default"]({
        x: point.x - position.getX(),
        y: point.y - position.getY()
      });
    }
    /**
     * Generate vertices (relative coordinates)
     * @param {Unit} unit
     * @return {Vector[]}
     */

  }, {
    key: "generateVertices",
    value: function generateVertices(unit) {
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var transformComponent = unit.getComponent(_TransformComponent["default"]);

      var vertices = _GeometryHelper["default"].loadVertices(meshComponent.getSize());

      return _GeometryHelper["default"].rotateVertices(vertices, transformComponent.getRotation(), meshComponent.getSize());
    }
    /**
     * Convert current position to large center position
     * @param {Unit} unit
     * @return {Vector}
     */

  }, {
    key: "toLargeCenterPosition",
    value: function toLargeCenterPosition(unit) {
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var center = this.getLargeCenterByUnit(unit);
      return new _Vector["default"]({
        x: transformComponent.getPosition().getX() + center.x,
        y: transformComponent.getPosition().getY() + center.y
      });
    }
    /**
     * Get current position from center position
     * @param {Unit} unit
     * @param {Vector} position
     * @return {Vector}
     */

  }, {
    key: "fromCenterPosition",
    value: function fromCenterPosition(unit, position) {
      var center = this.getLargeCenterByUnit(unit);
      return new _Vector["default"]({
        x: position.x - center.x,
        y: position.y - center.y
      });
    }
    /**
     * Convert current position to center position
     * @return {Vector}
     */

  }, {
    key: "toCenterPosition",
    value: function toCenterPosition(unit) {
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var position = transformComponent.getPosition();
      var center = this.getLargeCenterByUnit(unit);
      return new _Vector["default"]({
        x: position.x + center.x,
        y: position.y + center.y
      });
    }
    /**
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @param {Vector} unitPosition
     * @param {number} colliderRotation
     * @return {Vector}
     */

  }, {
    key: "toColliderCenterPosition",
    value: function toColliderCenterPosition(unit, colliderComponent, unitPosition, colliderRotation) {
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var unitRotation = transformComponent.getRotation();
      var colliderRelativePosition = this.getColliderRelativePosition(unit, colliderComponent);

      var position = _Vector["default"].add(unitPosition, colliderRelativePosition);

      var center = _GeometryHelper["default"].getLargeCenterFromRotationSize(unitRotation, this.getColliderSize(unit, colliderComponent));

      return new _Vector["default"]({
        x: position.x + center.x,
        y: position.y + center.y
      });
    }
    /**
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {Vector}
     */

  }, {
    key: "getColliderPosition",
    value: function getColliderPosition(unit, colliderComponent) {
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var unitPosition = transformComponent.getPosition();
      var unitRotation = transformComponent.getRotation();
      var unitSize = unit.getComponent(_MeshComponent["default"]).getSize();
      var colliderRelativePosition = this.getColliderRelativePosition(unit, colliderComponent);

      var colliderPosition = _Vector["default"].add(unitPosition, colliderRelativePosition);

      var colliderSize = UnitHelper.getColliderSize(unit, colliderComponent);
      var correctionVector = this.GetCorrectionVector(unitSize, colliderSize, unitRotation, colliderRelativePosition);
      return _Vector["default"].add(colliderPosition, correctionVector);
    }
    /**
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {Size}
     */

  }, {
    key: "getColliderSize",
    value: function getColliderSize(unit, colliderComponent) {
      var resultSize = new _Size["default"](0);
      var unitSize = unit.getComponent(_MeshComponent["default"]).getSize();

      if (colliderComponent instanceof _RectColliderComponent["default"]) {
        var colliderSizeRelated = colliderComponent.getSize();
        resultSize = new _Size["default"]({
          width: unitSize.getWidth() * colliderSizeRelated.getWidth() / 100,
          height: unitSize.getHeight() * colliderSizeRelated.getHeight() / 100
        });
      } else if (colliderComponent instanceof _CircleColliderComponent["default"]) {
        var _colliderSizeRelated = new _Size["default"](colliderComponent.getRadius());

        resultSize = new _Size["default"]({
          width: unitSize.getWidth() * _colliderSizeRelated.getWidth() / 100,
          height: unitSize.getWidth() * _colliderSizeRelated.getHeight() / 100
        });
      }

      return resultSize;
    }
    /**
     * Calculate centroid (based on entity's rotation)
     * @param {Unit} unit
     * @return {Vector}
     */

  }, {
    key: "getLargeCenterByUnit",
    value: function getLargeCenterByUnit(unit) {
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      return _GeometryHelper["default"].getLargeCenterFromRotationSize(transformComponent.getRotation(), meshComponent.getSize());
    }
    /**
     * @param {Camera} camera
     * @param {Vector[]} vertices
     * @return {Vector[]}
     */

  }, {
    key: "scaleVertices",
    value: function scaleVertices(camera, vertices) {
      return vertices.map(function (vertex) {
        return camera.toCameraScale(vertex);
      });
    }
    /**
     * @param {Unit} unit
     * @param {Camera} camera
     * @param {MeshManager} meshManager
     * @param {Renderer} renderer
     */

  }, {
    key: "drawUnit",
    value: function drawUnit(unit, camera, meshManager, renderer) {
      var _Window$get = _Window["default"].get(),
          windowSize = _Window$get.size;

      var _camera$position = camera.position,
          cameraX = _camera$position.x,
          cameraY = _camera$position.y;

      var _camera$fromScaleSize = camera.fromScaleSize(windowSize),
          sceneWidth = _camera$fromScaleSize.width,
          sceneHeight = _camera$fromScaleSize.height;

      var meshComponent = unit.getComponent(_MeshComponent["default"]);
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var size = meshComponent.getSize();
      var position = transformComponent.getPosition();
      var minX = cameraX - size.getWidth();
      var maxX = cameraX + sceneWidth;
      var minY = cameraY - size.getHeight();
      var maxY = cameraY + sceneHeight;

      if (minX <= position.getX() && maxX >= position.getX() && minY <= position.getY() && maxY >= position.getY()) {
        var mesh = meshManager.get(unit.getId());
        mesh && renderer.draw(mesh, position, camera);
      }
    }
    /**
     * @param {Unit} unit
     * @return {boolean}
     */

  }, {
    key: "isColliderEditing",
    value: function isColliderEditing(unit) {
      return !!this.getColliderEditing(unit);
    }
    /**
     * @param {Unit} unit
     * @return {ColliderComponent}
     */

  }, {
    key: "getColliderEditing",
    value: function getColliderEditing(unit) {
      return unit.findComponentsByClass(_ColliderComponent["default"]).find(function (component) {
        return component.isEditFlag();
      });
    }
    /**
     * @param {Unit} unit
     * @return {Vector}
     */

  }, {
    key: "getUnitRelativeCenter",
    value: function getUnitRelativeCenter(unit) {
      var size = unit.getComponent(_MeshComponent["default"]).getSize();
      return new _Vector["default"]({
        x: size.getWidth() / 2,
        y: size.getHeight() / 2
      });
    }
    /**
     * @param {Size} unitSize
     * @param {Size} colliderSize
     * @param {number} unitRotation
     * @param {Vector} colliderRelativePosition
     * @return {Vector}
     */

  }, {
    key: "GetCorrectionVector",
    value: function GetCorrectionVector(unitSize, colliderSize, unitRotation, colliderRelativePosition) {
      var unitVertices = _GeometryHelper["default"].loadVertices(unitSize);

      var colliderVertices = _GeometryHelper["default"].loadVertices(colliderSize).map(function (colliderVertex) {
        return _Vector["default"].subtract(colliderVertex, colliderRelativePosition);
      });

      var initDiff = _Vector["default"].subtract(colliderVertices[0], unitVertices[0]);

      var unitVerticesRotated = _GeometryHelper["default"].rotateVertices(unitVertices, unitRotation, unitSize);

      var colliderVerticesRotated = _GeometryHelper["default"].rotateVertices(colliderVertices, unitRotation, colliderSize);

      var rotatedDiff = _Vector["default"].subtract(colliderVerticesRotated[0], unitVerticesRotated[0]);

      return _Vector["default"].subtract(initDiff, rotatedDiff);
    }
    /**
     * @param {Unit} unit
     * @param {ColliderComponent} colliderComponent
     * @return {Vector}
     */

  }, {
    key: "getColliderRelativePosition",
    value: function getColliderRelativePosition(unit, colliderComponent) {
      var colliderSize = this.getColliderSize(unit, colliderComponent);
      var transformScale = unit.getComponent(_TransformComponent["default"]).getScale();
      var colliderVectorSize = new _Vector["default"]({
        x: colliderSize.getWidth(),
        y: colliderSize.getHeight()
      });
      var unitRelativeCenter = this.getUnitRelativeCenter(unit);
      var colliderRelativePosition = colliderComponent.getPosition(); //convert relative position to center coordinate of the unit

      var colliderRelativePositionCenter = _Vector["default"].subtract(colliderRelativePosition, unitRelativeCenter); //scale the relative position according to the center of the unit


      var positionRelativeCenter = _Vector["default"].linearMultiply(colliderRelativePositionCenter, transformScale); //convert relative position from unit center coordinate to the top left coordinate


      var positionRelative = _Vector["default"].add(positionRelativeCenter, unitRelativeCenter); //flip the collider


      var flipVector = new _Vector["default"]({
        x: transformScale.getX() < 0 ? colliderVectorSize.getX() : 0,
        y: transformScale.getY() < 0 ? colliderVectorSize.getY() : 0
      });
      return _Vector["default"].subtract(positionRelative, flipVector);
    }
    /**
     * @param {Unit} unit
     * @param {World} world
     * @return {Unit[]}
     */

  }, {
    key: "createGUICollider",
    value: function createGUICollider(unit, world) {
      var _this = this;

      var unitManager = world.getUnitManager();
      var colliderComponents = unit.findComponentsByClass(_ColliderComponent["default"]).filter(function (colliderComponent) {
        return colliderComponent.isEnabled();
      });
      var unitScale = unit.getComponent(_TransformComponent["default"]).getScale();
      var unitRotation = unit.getComponent(_TransformComponent["default"]).getRotation();
      var colliderUnits = [];
      colliderComponents.forEach(function (colliderComponent) {
        if (colliderComponent.isEditFlag()) {
          var colliderSize = UnitHelper.getColliderSize(unit, colliderComponent);
          var colliderRotation = unitRotation;

          var colliderCorrectedPosition = _this.getColliderPosition(unit, colliderComponent);

          var shape = colliderComponent.getShape();
          var unitInstantClass;

          switch (shape) {
            case _Unit.PrimitiveShape.RECT:
              unitInstantClass = _RectUnitInstant["default"];
              break;

            case _Unit.PrimitiveShape.CIRCLE:
              unitInstantClass = _CircleUnitInstant["default"];
              break;

            default:
              throw new _SystemError["default"]("No Unit Instant configured for Collider \"".concat(shape, "\""));
          }

          var style = new _Style["default"]();
          style.setColor('#1fa834');
          style.setBorderSize(2);
          var colliderUnit = unitManager.createUnitInstant(unitInstantClass, colliderCorrectedPosition, colliderSize, style);
          colliderUnit.createComponents([_GUIColliderComponent["default"]]);
          colliderUnit.getComponent(_TransformComponent["default"]).setRotation(colliderRotation);
          colliderUnit.getComponent(_TransformComponent["default"]).setScale(_.clone(unitScale));
          colliderUnits.push(colliderUnit);
        }
      });
      return colliderUnits;
    }
    /**
     * @param {World} world
     * @param {Unit} unit
     * @param {number} step
     * @param {Vector} direction
     */

  }, {
    key: "moveUnit",
    value: function moveUnit(world, unit, step, direction) {
      var camera = world.getCamera();
      var stepScale = camera.fromScaleNumber(step);
      var moveDirection = new _Vector["default"]({
        x: stepScale * direction.x,
        y: stepScale * direction.y
      });
      var transformComponent = unit.getComponent(_TransformComponent["default"]);
      var position = transformComponent.getPosition();
      transformComponent.setPosition(_Vector["default"].add(position, moveDirection));
    }
    /**
     * @param {World} world
     * @param {Unit} unit
     * @param {number} step
     * @param {Vector} direction
     */

  }, {
    key: "moveCollider",
    value: function moveCollider(world, unit, step, direction) {
      var camera = world.getCamera();
      var stepScale = camera.fromScaleNumber(step);
      var moveDirection = new _Vector["default"]({
        x: stepScale * direction.x,
        y: stepScale * direction.y
      });
      var colliderComponent = UnitHelper.getColliderEditing(unit);
      var position = colliderComponent.getPosition();
      colliderComponent.setPosition(_Vector["default"].add(position, moveDirection));
    }
    /**
     * @param {OffscreenCanvas} canvas
     * @param {DataContext} dataContext
     * @param {MeshComponent} meshComponent
     */

  }, {
    key: "generateImageRepeat",
    value: function generateImageRepeat(canvas, dataContext, meshComponent) {
      var camera = dataContext.camera;
      var meshSize = meshComponent.getSize();
      var imageScale = meshComponent.getImageScale();
      var imagePosition = meshComponent.getImagePosition();
      var imageRepeatAreaMin = meshComponent.getImageRepeatAreaMin();
      var imageRepeatAreaMax = meshComponent.getImageRepeatAreaMax();

      var canvasBgRepeat = _ImageHelper["default"].generateImageRepeat(canvas, meshSize, imageScale, imagePosition, imageRepeatAreaMin, imageRepeatAreaMax);

      var canvasCameraScale = camera.toScaleSize(new _Size["default"]({
        width: canvasBgRepeat.width,
        height: canvasBgRepeat.height
      }));
      return _ImageHelper["default"].resizeCanvasBySize(canvasBgRepeat, canvasCameraScale);
    }
  }]);
  return UnitHelper;
}();

exports["default"] = UnitHelper;

},{"../component/internal/CircleColliderComponent.js":43,"../component/internal/ColliderComponent.js":44,"../component/internal/MeshComponent.js":48,"../component/internal/RectColliderComponent.js":49,"../component/internal/TransformComponent.js":53,"../component/internal/gui/collider/GUIColliderComponent.js":55,"../core/Window.js":78,"../exception/type/SystemError.js":82,"../pobject/Size.js":268,"../pobject/Style.js":269,"../unit/Unit.js":327,"../unit/instant/type/internal/primitive/CircleUnitInstant.js":344,"../unit/instant/type/internal/primitive/RectUnitInstant.js":345,"./GeometryHelper.js":360,"./ImageHelper.js":361,"./Vector.js":370,"./Vertex.js":371,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],370:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

/**
 * Vector class.
 * Define a vector coordinate (X, Y)
 */
var Vector = /*#__PURE__*/function () {
  function Vector() {
    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
      x: 0,
      y: 0,
      z: 0
    },
        x = _ref.x,
        y = _ref.y,
        z = _ref.z;

    (0, _classCallCheck2["default"])(this, Vector);
    this.x = x || 0;
    this.y = y || 0;
    this.z = z || 0;
  }
  /**
   * @param {number|string} x
   */


  (0, _createClass2["default"])(Vector, [{
    key: "setX",
    value: function setX(x) {
      this.x = parseFloat(x) || 0;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getX",
    value: function getX() {
      return this.x;
    }
    /**
     * @param {number|string} y
     */

  }, {
    key: "setY",
    value: function setY(y) {
      this.y = parseFloat(y) || 0;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getY",
    value: function getY() {
      return this.y;
    }
    /**
     * @param {number|string} z
     */

  }, {
    key: "setZ",
    value: function setZ(z) {
      this.z = parseFloat(z) || 0;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getZ",
    value: function getZ() {
      return this.z;
    }
    /**
     * @param {Vector} vector
     * @return {boolean}
     */

  }, {
    key: "equals",
    value: function equals(vector) {
      return this.x === vector.x && this.y === vector.y && this.z === vector.z;
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {number}
     */

  }], [{
    key: "cross",
    value: function cross(vectorA, vectorB) {
      return vectorA.x * vectorB.y - vectorA.y * vectorB.x;
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {number}
     */

  }, {
    key: "dot",
    value: function dot(vectorA, vectorB) {
      return vectorA.x * vectorB.x + vectorA.y * vectorB.y;
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {Vector}
     */

  }, {
    key: "add",
    value: function add(vectorA, vectorB) {
      return new Vector({
        x: vectorA.x + vectorB.x,
        y: vectorA.y + vectorB.y,
        z: vectorA.z + vectorB.z
      });
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {Vector}
     */

  }, {
    key: "subtract",
    value: function subtract(vectorA, vectorB) {
      return new Vector({
        x: vectorA.x - vectorB.x,
        y: vectorA.y - vectorB.y,
        z: vectorA.z - vectorB.z
      });
    }
    /**
     * @param {Vector} vector
     * @param {number} value
     * @return {Vector}
     */

  }, {
    key: "multiply",
    value: function multiply(vector, value) {
      return new Vector({
        x: vector.x * value,
        y: vector.y * value,
        z: vector.z * value
      });
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {Vector}
     */

  }, {
    key: "linearMultiply",
    value: function linearMultiply(vectorA, vectorB) {
      return new Vector({
        x: vectorA.x * vectorB.x,
        y: vectorA.y * vectorB.y,
        z: vectorA.z * vectorB.z
      });
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {Vector}
     */

  }, {
    key: "linearDivide",
    value: function linearDivide(vectorA, vectorB) {
      return new Vector({
        x: vectorB.x ? vectorA.x / vectorB.x : 0,
        y: vectorB.y ? vectorA.y / vectorB.y : 0,
        z: vectorB.z ? vectorA.z / vectorB.z : 0
      });
    }
    /**
     * @param {Vector} vector
     * @param {number} value
     * @return {Vector}
     */

  }, {
    key: "divide",
    value: function divide(vector, value) {
      return new Vector({
        x: vector.x / value,
        y: vector.y / value,
        z: vector.z / value
      });
    }
    /**
     * @param {Vector} vector
     * @return {number}
     */

  }, {
    key: "length",
    value: function length(vector) {
      return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {number}
     */

  }, {
    key: "distance",
    value: function distance(vectorA, vectorB) {
      return Math.sqrt(Math.pow(vectorB.x - vectorA.x, 2) + Math.pow(vectorB.y - vectorA.y, 2));
    }
    /**
     * @param {Vector} vector
     */

  }, {
    key: "normalize",
    value: function normalize(vector) {
      return this.divide(vector, this.length(vector));
    }
    /**
     * @param {Vector} vectorA
     * @param {Vector} vectorB
     * @return {number}
     */

  }, {
    key: "angle",
    value: function angle(vectorA, vectorB) {
      var signedAngleRadian = Math.atan2(vectorB.y, vectorB.x) - Math.atan2(vectorA.y, vectorA.x);
      return signedAngleRadian || 0;
    }
  }]);
  return Vector;
}();

var _default = Vector;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],371:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _Vector = _interopRequireDefault(require("./Vector.js"));

/**
 * Define methods to manipulate vertices
 */
var Vertex = /*#__PURE__*/function () {
  function Vertex() {
    (0, _classCallCheck2["default"])(this, Vertex);
  }

  (0, _createClass2["default"])(Vertex, null, [{
    key: "getArea",

    /**
     * @param {{x: number, y: number}[]} vertices
     */
    value: function getArea(vertices) {
      var area = 0,
          jVertex = vertices.length - 1;
      vertices.forEach(function (vertex, iVertex) {
        area += (vertices[jVertex].x - vertex.x) * (vertices[jVertex].y + vertex.y);
        jVertex = iVertex;
      });
      return area / 2;
    }
    /**
     * Calculate the centroid of the given vertices
     * @param {{x: number, y: number}[]} vertices
     */

  }, {
    key: "getCenter",
    value: function getCenter(vertices) {
      var area = this.getArea(vertices);
      var center = {
        x: 0,
        y: 0
      };
      vertices.forEach(function (vertex, iVertex) {
        var jVertex = (iVertex + 1) % vertices.length;

        var cross = _Vector["default"].cross(vertex, vertices[jVertex]);

        var multiply = _Vector["default"].multiply(_Vector["default"].add(vertex, vertices[jVertex]), cross);

        center = _Vector["default"].add(center, multiply);
      });
      return _Vector["default"].divide(center, 6 * area);
    }
    /**
     * Check if a point is inside a set of vertices
     * @param {Vector[]} vertices
     * @param {Vector} point
     */

  }, {
    key: "contains",
    value: function contains(vertices, point) {
      for (var iVertex = 0; iVertex < vertices.length; iVertex++) {
        var vertex = vertices[iVertex];
        var nextVertex = vertices[(iVertex + 1) % vertices.length];

        if ((point.x - vertex.x) * (nextVertex.y - vertex.y) + (vertex.x - nextVertex.x) * (point.y - vertex.y) > 0) {
          return false;
        }
      }

      return true;
    }
    /**
     * Rotate a set of vertices by the given angle and point
     * @param {Vector[]} vertices
     * @param {number} angleRadian
     * @param {Vector} point
     *
     * @return {Vector[]}
     */

  }, {
    key: "rotate",
    value: function rotate(vertices, angleRadian, point) {
      var cos = Math.cos(angleRadian);
      var sin = Math.sin(angleRadian);
      return vertices.map(function (vertex) {
        var dx = vertex.x - point.x;
        var dy = vertex.y - point.y;
        return new _Vector["default"]({
          x: point.x + (dx * cos - dy * sin),
          y: point.y + (dx * sin + dy * cos)
        });
      });
    }
    /**
     * Translate a set of vertices by the given vector
     * @param {Vector[]} vertices
     * @param {Vector} vector
     * @param {number} sign
     * @return {Vector[]}
     */

  }, {
    key: "translate",
    value: function translate(vertices, vector) {
      var sign = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
      return vertices.map(function (vertex) {
        return new _Vector["default"]({
          x: vertex.x + vector.x * sign,
          y: vertex.y + vector.y * sign
        });
      });
    }
  }]);
  return Vertex;
}();

var _default = Vertex;
exports["default"] = _default;

},{"./Vector.js":370,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":12}],372:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _WorldData2 = _interopRequireDefault(require("../project/data/WorldData.js"));

var _Camera = _interopRequireDefault(require("../core/Camera.js"));

var _Vector = _interopRequireDefault(require("../utils/Vector.js"));

var _AssetsManager = _interopRequireDefault(require("../manager/AssetsManager.js"));

var _Size = _interopRequireDefault(require("../pobject/Size.js"));

var _Constant = require("../core/Constant.js");

var _UnitManager = _interopRequireDefault(require("../manager/UnitManager.js"));

var _MeshComponent = _interopRequireDefault(require("../component/internal/MeshComponent.js"));

var _TransformComponent = _interopRequireDefault(require("../component/internal/TransformComponent.js"));

var _UnitSelector = _interopRequireDefault(require("../selector/UnitSelector.js"));

var _MeshManager = _interopRequireDefault(require("../manager/MeshManager.js"));

var _ScriptManager = _interopRequireDefault(require("../manager/ScriptManager.js"));

var _FunctionRegistry = _interopRequireDefault(require("../registry/FunctionRegistry.js"));

var _UnitHelper = _interopRequireDefault(require("../utils/UnitHelper.js"));

var _TabManager = _interopRequireDefault(require("../manager/TabManager.js"));

var _GraphManager = _interopRequireDefault(require("../manager/GraphManager.js"));

var _Preference = _interopRequireDefault(require("../preference/Preference.js"));

var _PhysicsManager = _interopRequireDefault(require("../manager/PhysicsManager.js"));

var _ComponentRegistry = _interopRequireDefault(require("../registry/ComponentRegistry.js"));

var _AnimationManager = _interopRequireDefault(require("../manager/AnimationManager.js"));

var _MaterialRegistry = _interopRequireDefault(require("../registry/MaterialRegistry.js"));

var _LightComponent = _interopRequireDefault(require("../component/internal/LightComponent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * @class {World}
 * @extends {WorldData}
 */
var World = /*#__PURE__*/function (_WorldData) {
  (0, _inherits2["default"])(World, _WorldData);

  var _super = _createSuper(World);

  /**
   * @type {ScriptManager}
   */

  /**
   * @type {AnimationManager}
   */

  /**
   * @type {GraphManager}
   */

  /**
   * @type {PhysicsManager}
   */

  /**
   * @type {boolean}
   */
  function World() {
    var _this;

    (0, _classCallCheck2["default"])(this, World);
    _this = _super.call(this);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "scriptManager", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "animationManager", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "graphManager", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "physicsManager", void 0);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "initialized", void 0);
    _this.unitManager = new _UnitManager["default"]();
    _this.meshManager = new _MeshManager["default"]();
    _this.tabManager = new _TabManager["default"]();
    _this.graphManager = new _GraphManager["default"]();
    _this.functionRegistry = new _FunctionRegistry["default"]();
    _this.componentRegistry = new _ComponentRegistry["default"]();
    _this.materialRegistry = new _MaterialRegistry["default"]();
    _this.scriptManager = new _ScriptManager["default"]();
    _this.animationManager = new _AnimationManager["default"]();
    _this.preference = new _Preference["default"]();
    _this.camera = new _Camera["default"](new _Vector["default"]({
      x: -_Constant.SCENE_WIDTH / 2,
      y: -_Constant.SCENE_HEIGHT / 2
    }));
    _this.physicsManager = new _PhysicsManager["default"]();
    _this.assetsManager = new _AssetsManager["default"]();
    _this.cameraUnitId = null;
    _this.resolution = new _Size["default"]({
      width: _Constant.SCENE_WIDTH,
      height: _Constant.SCENE_HEIGHT
    });
    _this.gridUnitId = null;
    _this.showGrid = false;

    _this.init();

    return _this;
  }
  /**
   * Initialize the world. can erase also world's element from imported project
   */


  (0, _createClass2["default"])(World, [{
    key: "init",
    value: function init() {
      this.initialized = false;
    }
  }, {
    key: "doInit",
    value: function doInit() {
      this.createRootFolder();
      this.getPreference().init();
      this.getTabManager().init();
      this.getFunctionRegistry().init();
      this.getComponentRegistry().init();
      this.getMaterialRegistry().init();
      this.getGraphManager().reset();
      this.getAssetsManager().getParsedAssets().forEach(function (asset) {
        var result = asset.getType().parse();
        asset.getType().validate(result);
      });
      this.initialized = true;
    }
    /**
     * @return {boolean}
     */

  }, {
    key: "isInitialized",
    value: function isInitialized() {
      return this.initialized;
    }
    /**
     * @TODO: To optimize (rerender just entities updated)
     * @param {Renderer} renderer
     */

  }, {
    key: "draw",
    value: function draw(renderer) {
      var _this2 = this;

      this.getUnitManager().getUnitsHasComponents([_MeshComponent["default"], _TransformComponent["default"]]).forEach(function (unit) {
        return _UnitHelper["default"].drawUnit(unit, _this2.getCamera(), _this2.getMeshManager(), renderer);
      });
    }
    /**
     * Get the unit from world coordinate
     * @param {Vector} position canvas coordinates (window)
     * @return {Unit|null}
     */

  }, {
    key: "findUnit",
    value: function findUnit(position) {
      var unitSelector = _UnitSelector["default"].get();

      return unitSelector.get(this, this.getWorldPosition(position));
    }
    /**
     * @param {number} id
     * @return {Unit}
     */

  }, {
    key: "findUnitById",
    value: function findUnitById(id) {
      return this.getUnitManager().findUnitById(id);
    }
    /**
     * @param {string} name
     * @return {Unit}
     */

  }, {
    key: "findUnitByName",
    value: function findUnitByName(name) {
      return this.getUnitManager().findUnitByName(name);
    }
    /**
     * Add a unit to the world
     * @param {Vector} position
     * @param {Class} type
     */

  }, {
    key: "addUnit",
    value: function addUnit(position, type) {
      var unit = this.getUnitManager().createUnit(type);
      unit.getComponent(_TransformComponent["default"]).setPosition(position);
    }
    /**
     * @param {number} unitId
     */

  }, {
    key: "removeUnitById",
    value: function removeUnitById(unitId) {
      var unit = this.getUnitManager().findById(unitId);

      if (unit) {
        this.getUnitManager().deleteUnit(unit);
      }
    }
    /**
     * @param {Unit} unit
     */

  }, {
    key: "deleteUnit",
    value: function deleteUnit(unit) {
      this.getUnitManager().deleteUnit(unit);
    }
    /**
     * @param {{position: Vector, size: Size}} dragArea
     * @return {Unit[]}
     */

  }, {
    key: "selectUnits",
    value: function selectUnits(dragArea) {
      var unitSelector = _UnitSelector["default"].get();

      unitSelector.unselectAll(this);
      return unitSelector.select(this, this.getWorldPosition(dragArea.position), dragArea.size);
    }
    /**
     * @param {Mouse} mouse
     * @return {Unit[]}
     */

  }, {
    key: "focusUnits",
    value: function focusUnits(mouse) {
      var unitSelector = _UnitSelector["default"].get();

      unitSelector.unfocusAll(this);
      var currentScenePosition = new _Vector["default"](mouse.currentScenePosition);
      var vector3d = this.getCamera().fromCameraScale(currentScenePosition);
      unitSelector.focus(this, this.getWorldPosition(vector3d));
    }
    /**
     * @param {Vector} position
     * @return {Unit}
     */

  }, {
    key: "findFirstUnitByPosition",
    value: function findFirstUnitByPosition(position) {
      return _UnitSelector["default"].get().get(this, position);
    }
    /**
     * Force the regeneration of all entities (regenerate meshes)
     */

  }, {
    key: "reload",
    value: function reload() {
      this.init();
      this.reloadAllUnit();
    }
  }, {
    key: "reloadAllUnit",
    value: function reloadAllUnit() {
      this.getUnitManager().sortUnits();
      this.regenerateAll();
    }
  }, {
    key: "regenerateAll",
    value: function regenerateAll() {
      this.getUnitManager().regenerateAll(this);
    }
  }, {
    key: "update",
    value: function update() {}
    /**
     * @return {boolean}
     */

  }, {
    key: "isShowGrid",
    value: function isShowGrid() {
      return this.getShowGrid();
    }
    /**
     * @param {boolean} showGrid
     */

  }, {
    key: "setShowGrid",
    value: function setShowGrid(showGrid) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(World.prototype), "setShowGrid", this).call(this, showGrid);
      this.setGridUnitId(null);
    }
  }, {
    key: "setupCamera",
    value: function setupCamera() {
      if (this.cameraUnitId) {
        this.getCamera().setup(this.cameraUnitId, this);
      }
    }
  }, {
    key: "disableGuides",
    value: function disableGuides() {
      this.getCamera().disableGuides(this);
      this.getUnitManager().getUnitsHasComponentClasses([_LightComponent["default"], _MeshComponent["default"]]).forEach(function (unit) {
        return unit.getComponent(_MeshComponent["default"]).setEnabled(false);
      });
    }
    /**
     * Get the world position of a given screen position
     * @param {Vector} position
     * @return {Vector}
     */

  }, {
    key: "getWorldPosition",
    value: function getWorldPosition(position) {
      return this.getCamera().fromCanvasCoord(position);
    }
    /**
     * Get the world position from the camera scale
     * @param {Vector} position
     * @return {Vector}
     */

  }, {
    key: "getWorldScalePosition",
    value: function getWorldScalePosition(position) {
      return this.getWorldPosition(this.getCamera().fromCameraScale(position));
    }
    /**
     * @return {MeshManager}
     */

  }, {
    key: "getMeshManager",
    value: function getMeshManager() {
      return this.meshManager;
    }
    /**
     * @return {GraphManager}
     */

  }, {
    key: "getGraphManager",
    value: function getGraphManager() {
      return this.graphManager;
    }
    /**
     * @return {PhysicsManager}
     */

  }, {
    key: "getPhysicsManager",
    value: function getPhysicsManager() {
      return this.physicsManager;
    }
    /**
     * @return {AnimationManager}
     */

  }, {
    key: "getAnimationManager",
    value: function getAnimationManager() {
      return this.animationManager;
    }
    /**
     * @return {ScriptManager}
     */

  }, {
    key: "getScriptManager",
    value: function getScriptManager() {
      return this.scriptManager;
    }
  }, {
    key: "createRootFolder",
    value: function createRootFolder() {
      var assetsManager = this.getAssetsManager();
      var rootFolder = assetsManager.findFolderById(0);

      if (!rootFolder) {
        assetsManager.createRootFolder();
      }
    }
    /**
     * @param {number} mouseConstraintId
     */

  }, {
    key: "setMouseConstraintId",
    value: function setMouseConstraintId(mouseConstraintId) {
      this.mouseConstraintId = mouseConstraintId;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getMouseConstraintId",
    value: function getMouseConstraintId() {
      return this.mouseConstraintId;
    }
    /**
     * @param {number} id
     */

  }, {
    key: "setGridUnitId",
    value: function setGridUnitId(id) {
      this.gridUnitId = id;
    }
    /**
     * @return {number}
     */

  }, {
    key: "getGridUnitId",
    value: function getGridUnitId() {
      return this.gridUnitId;
    }
    /**
     * @return {Unit[]}
     */

  }, {
    key: "getLightsNotGenerated",
    value: function getLightsNotGenerated() {
      return this.getUnitManager().getUnitsHasComponentClasses([_LightComponent["default"]]).filter(function (unit) {
        var lightComponent = unit.findComponentsByClass(_LightComponent["default"])[0];
        return !lightComponent.isGenerated();
      });
    }
    /**
     * @return {World}
     */

  }], [{
    key: "get",
    value: function get() {
      if (!this.instance) {
        this.instance = new this();
      }

      return this.instance;
    }
  }]);
  return World;
}(_WorldData2["default"]);

var _default = World;
exports["default"] = _default;

},{"../component/internal/LightComponent.js":45,"../component/internal/MeshComponent.js":48,"../component/internal/TransformComponent.js":53,"../core/Camera.js":69,"../core/Constant.js":70,"../manager/AnimationManager.js":229,"../manager/AssetsManager.js":230,"../manager/GraphManager.js":231,"../manager/MeshManager.js":232,"../manager/PhysicsManager.js":233,"../manager/ScriptManager.js":234,"../manager/TabManager.js":235,"../manager/UnitManager.js":236,"../pobject/Size.js":268,"../preference/Preference.js":270,"../project/data/WorldData.js":302,"../registry/ComponentRegistry.js":303,"../registry/FunctionRegistry.js":304,"../registry/MaterialRegistry.js":305,"../selector/UnitSelector.js":321,"../utils/UnitHelper.js":369,"../utils/Vector.js":370,"@babel/runtime/helpers/assertThisInitialized":3,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/get":9,"@babel/runtime/helpers/getPrototypeOf":10,"@babel/runtime/helpers/inherits":11,"@babel/runtime/helpers/interopRequireDefault":12,"@babel/runtime/helpers/possibleConstructorReturn":18}],373:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _Application = _interopRequireDefault(require("../app/core/Application.js"));

var _RunGame = _interopRequireDefault(require("../app/loop/RunGame.js"));

new _Application["default"]([_RunGame["default"]]).start();

},{"../app/core/Application.js":68,"../app/loop/RunGame.js":227,"@babel/runtime/helpers/interopRequireDefault":12}]},{},[373]);
